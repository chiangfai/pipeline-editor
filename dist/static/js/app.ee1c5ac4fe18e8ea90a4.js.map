{"version":3,"sources":["webpack:///./src/App.vue?9428","webpack:///./src/App.vue","webpack:///src/components/json-editor/index.vue","webpack:///src/App.vue","webpack:///./src/components/util/constants.js","webpack:///./src/components/util/fetch.js","webpack:///./src/components/json-editor-class/index.js","webpack:///./src/components/monaco-editor-loader/index.js","webpack:///./src/components/json-editor/index.vue?6d54","webpack:///./src/components/json-editor/index.vue","webpack:///src/pages/pipeline/editor.vue","webpack:///./src/pages/pipeline/editor.vue?5e9b","webpack:///./src/pages/pipeline/editor.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","JSONEditorClass","src_App","__webpack_require__","normalizeComponent","ssrContext","APIS","ROOT","PIPLINE","util_fetch","api","options","arguments","length","undefined","url","headers","method","test","params","body","stringify_default","lib_stringify_default","arrayFormat","skipNulls","loadingInstance","element_ui_common","service","fullscreen","text","background","fetch","then","response","vue_esm","nextTick","close","status","json","ret","promise_default","a","resolve","data","reject","extends_default","error","json_editor_class","Class","initializing","fnTest","window","postMessage","extend","prop","_super","prototype","name","fn","tmp","apply","init","constructor","CustomEvent","event","bubbles","cancelable","detail","evt","document","createEvent","initCustomEvent","Event","lastTime","vendors","x","requestAnimationFrame","cancelAnimationFrame","callback","element","currTime","Date","getTime","timeToCall","Math","max","setTimeout","clearTimeout","Array","isArray","arg","Object","toString","call","$extend","destination","source","i","property","obj","hasOwnProperty","typeof_default","nodeType","$each","keys_default","keys","$trigger","el","e","initEvent","dispatchEvent","JSONEditor","Element","Error","defaults","self","ready","theme_class","themes","theme","schema","template","refs","uuid","__data","icon_class","iconlibs","iconlib","root_container","getContainer","appendChild","translate","_loadExternalRefs","_getDefinitions","validator_options","custom_validators","validator","Validator","editor_class","getEditorClass","root","createEditor","jsoneditor","required","container","preBuild","build","postBuild","startval","setValue","validation_results","validate","getValue","showValidationErrors","trigger","value","destroy","destroyed","innerHTML","on","callbacks","push","off","newcallbacks","setOption","option","show_errors","onChange","classname","expandSchema","resolvers","resolver","editors","firing_change","compileTemplate","engine","templates","compile","_data","key","hasAttribute","getAttribute","setAttribute","registerEditor","editor","path","unregisterEditor","getEditor","watch","watchlist","unwatch","newlist","notifyWatchers","isEnabled","enable","disable","definitions","_getExternalRefs","merge_refs","newrefs","$ref","substr","j","done","waiting","callback_fired","ajax","r","XMLHttpRequest","open","onreadystatechange","readyState","console","log","JSON","parse","responseText","send","expandRefs","ref","decodeURIComponent","extendSchemas","extended","type","disallow","anyOf","dependencies","not","allOf","oneOf","obj1","obj2","val","filter","n","indexOf","concat","reduce","p","c","languages","_validateSchema","valid","errors","stringified","message","required_by_default","oneof_errors","_checkType","multipleOf","divisibleBy","divisor","floor","math","mod","bignumber","equals","Decimal","exclusiveMaximum","maximum","exclusiveMinimum","minimum","maxLength","minLength","pattern","RegExp","items","additionalItems","maxItems","minItems","uniqueItems","seen","maxProperties","minProperties","validated_properties","properties","patternProperties","regex","additionalProperties","no_additional_properties","AbstractEditor","onChildEditorChange","notify","change","parent","bubble","watch_listener","register","unregister","getNumColumns","template_engine","original_schema","formname","replace","form_name_root","split","pop","link_watchers","setContainer","setupWatchListeners","addLinks","getDefault","updateHeaderText","onWatchedFieldChange","path_parts","first","adjusted_path","watched","vars","watched_values","refreshWatchedFieldValues","closest","unshift","shift","join","headerTemplate","header_template","no_link_holder","link_holder","getLinksHolder","links","addLink","getLink","getButton","icon","title","btnClass","getIcon","btn","className","setButtonText","button","link","holder","mediaType","href","download","getBlockLinkHolder","createElement","image","createImageLink","rel","getBlockLink","media","createMediaLink","textContent","class","changed","getWatchedFieldValues","header","children","childNodes","nodeValue","getHeaderText","title_only","header_text","getTitle","i0","i1","refreshValue","getChildEditors","parentNode","removeChild","disabled","isRequired","getDisplayText","arr","disp","used","description","format","descripton","inc","getOption","string","input","removeAttribute","initial","from_template","serialized","sanitized","sanitize","sceditor_instance","epiceditor","importFile","ace_editor","is_dirty","adjust_height","num","min","ceil","input_type","compact","label","getFormInputLabel","getFormInputDescription","default_format","getTextareaInput","step","getRangeInput","source_code","getFormInputField","input_width","style","width","readOnly","readonly","always_disabled","addEventListener","preventDefault","stopPropagation","input_height","height","expand_height","ch","offsetHeight","scrollHeight","control","getFormControl","afterInputReady","myDiv","farmImage","innerHtml","insertBefore","wysiwyg","jQuery","sceditor","plugins","emoticonsEnabled","sceditor_options","blur","remove","html","EpicEditor","epiceditor_container","display","clientSideStorage","load","exportFile","ace","mode","ace_container","position","edit","setTheme","require","getSession","setMode","Mode","src","unload","previous_error_setting","messages","addInputError","removeInputError","number","integer","object","maxwidth","editjson_button","addproperty_button","hideEditJSON","layoutEditors","row_container","property_order","sort","b","ordera","propertyOrder","orderb","rows","property_removed","found","hidden","grid_columns","minh","maxh","biggest","new_width","layout","row","getGridRow","setGridColumnSize","getPropertySchema","matched","cached_editors","object_layout","minwidth","table_row","table","defaultProperties","display_required_only","k","s","addObjectProperty","editor_holder","getTableCell","getHeader","editjson_holder","getModal","editjson_textarea","editjson_save","saveJSON","editjson_cancel","addproperty_holder","addproperty_list","maxHeight","padding","overflowY","overflowX","paddingLeft","addproperty_add","addproperty_input","marginBottom","alert","spacer","clear","getDescription","error_holder","getIndentedPanel","getGridContainer","getGridColumn","title_controls","getHeaderButtonHolder","editjson_controls","addproperty_controls","collapsed","toggle_button","disable_collapse","toggleEditJSON","disable_edit_json","toggleAddProperty","refreshAddProperties","showEditJSON","hideAddProperty","left","offsetLeft","top","offsetTop","editing_json","insertPropertyControlUsingPropertyOrder","child","addPropertyCheckbox","checkbox","labelText","getCheckbox","getCheckboxLabel","paddingBottom","paddingTop","marginTop","checked","removeObjectProperty","addproperty_checkboxes","showAddProperty","adding_property","prebuild_only","canHaveAdditionalProperties","getChildEditorHolder","result","remove_empty_properties","disable_properties","can_add","num_props","show_modal","my_errors","other_errors","getErrorMessage","addTableRowError","removeTableRowError","array","info","getItemInfo","tabs_holder","add_row_button","remove_all_rows_button","delete_last_row_button","moveup_button","movedown_button","delete_button","row_cache","hide_delete_buttons","disable_array_delete","hide_delete_all_rows_buttons","disable_array_delete_all_rows","hide_delete_last_row_buttons","disable_array_delete_last_row","hide_move_buttons","disable_array_reorder","hide_add_button","disable_array_add","panel","controls","getButtonHolder","row_holder","getTabHolder","getTabContentHolder","active_tab","addControls","refreshTabs","getItemTitle","item_title","getItemSchema","item_info","default","child_editors","getElementEditor","getTabContent","array_controls","empty","hard","tab","destroyRow","getMax","Infinity","refresh_headers","tab_text","markTabActive","markTabInactive","slice","addRow","new_active_tab","force","oldi","controls_needed","getTab","addTab","controls_holder","newval","row_holder_display","controls_display","tabs","textAlign","item_schema","item_default","item_has_child_editors","getTable","thead","getTableHead","header_row","getTableRow","getTableBody","ce","order","th","getTableHeaderCell","controls_header_cell","getItemDefault","ignore","schema_copy","controls_cell","table_controls","margin","numrows_changed","refreshRowButtons","need_row_buttons","multiple","switcher","switchEditor","buildChildEditor","current_value","keep_values","refreshHeaderText","types","switcher_options","validators","keep_oneof_values","allowed_types","display_text","getSwitcher","getSwitcherOptions","check_part","check","new_errors","new_error","enum_titles","selected","select_options","html_values","getHTML","display_area","hide_display","select","typecast","enum_values","enum_options","select2","longest_text","enum_display","enumSource","enumValue","getSelectInput","setSelectOptions","onInputChange","new_val","setupSelect2","select2_options","select_titles","new_items","item","item_titles","item_values","prev_value","selectize","addItem","enum","setupSelectize","selectize_options","create","updateSelectizeOptions","selectized","clearOptions","addOption","unlock","lock","multiselect","select_values","items_schema","t","option_keys","option_titles","inputs","getMultiCheckboxHolder","size","new_value","updateValue","base64","FileReader","uploader","files","fr","onload","target","refreshPreview","readAsDataURL","preview","last_preview","mime","match","img","maxWidth","upload","preview_value","file","uploadButton","getProgressBar","progressBar","success","failure","updateProgress","progress","updateProgressBar","updateProgressBarUnknown","arraySelectize","group","delimiter","createOnBlur","forEach","elem","matchKey","documentElement","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","AbstractTheme","getFloatRightLinkHolder","cssFloat","marginLeft","backgroundColor","border","boxShadow","zIndex","createTextNode","disableHeader","color","disableLabel","enableHeader","enableLabel","fontWeight","marginRight","fontStyle","getElementsByTagName","setSwitcherOptions","titles","boxSizing","firstChild","borderLeft","getCheckboxDescription","applyStyles","styles","selector","span","borderWidth","lineHeight","borderRadius","borderBottomRightRadius","borderTopRightRadius","cursor","tab_holder","opacity","bootstrap2","controlgroup","errmsg","bar","bootstrap3","fontSize","start","percentage","foundation","minWidth","paddingRight","verticalAlign","insertAdjacentHTML","getElementsByClassName","meter","foundation3","foundation4","foundation5","foundation6","errorEl","borderBottom","borderColor","jqueryui","barebones","AbstractIconLib","mapping","collapse","expand","delete","add","cancel","save","moveup","movedown","icon_prefix","getIconClass","iconclass","fontawesome3","fontawesome4","foundation2","l","replacements","get_replacement","func","cur","trim","ejs","EJS","compiled","context","handlebars","Handlebars","hogan","Hogan","markup","Mark","up","mustache","Mustache","view","swig","underscore","_","variables","lang","language","default_language","en","error_notset","error_notempty","error_enum","error_anyOf","error_oneOf","error_not","error_type_union","error_type","error_disallow_union","error_disallow","error_multipleOf","error_maximum_excl","error_maximum_incl","error_minimum_excl","error_minimum_incl","error_maxLength","error_minLength","error_pattern","error_additionalItems","error_maxItems","error_minItems","error_uniqueItems","error_maxProperties","error_minProperties","error_required","error_additional_properties","error_dependency","button_delete_all","button_delete_all_title","button_delete_last","button_delete_last_title","button_add_row_title","button_move_down_title","button_move_up_title","button_delete_row_title","button_delete_row_title_short","button_collapse","button_expand","custom_set_image","custom_set_url","binaryEncoding","Zepto","$","get","isLoadingAMD","monaco_editor_loader_loadMonaco","_options$timeout","timeout","_options$interval","interval","_options$toPath","toPath","loadInterval","setInterval","monaco","clearInterval","loadTimeout","onGoAmdLoader","loaderScript","head","insertScript","json_editor","_this","dataSchema","primeData","monacoEditor","dataString","jsonEditor","jsonEditorChangeHandler","clientHeight","errorMessage","newData","JsonEditor","getPosition","primeDataSchema","_this2","_this3","_this4","wheelDeltaY","scrollTop","inputFormat","inputPath","reCreateJsonEditor","components_json_editor","_vm","staticClass","directives","rawName","expression","wheel","$event","_v","onWheel","$refs","click","onJsonEditorClick","_s","_e","comfirmObject","resetObject","showBoth","showCode","showForm","pipeline_editor","json_editor_normalizeComponent","templateId","pageId","baseConfig","refreshPreviewIframe","getBaseConfig","_this5","_this6","_this7","templateComponents","getTemplateComponents","_this8","component","tabToPageConfig","iframeScrollToCurrentComponent","previewSrc","currentComponent","selectDefaultComponent","_this9","purpose","prepareFromTemplate","getBaseConfigSchema","baseConfigSchemaEarly","getComponentsSchema","_this10","putComponents","oldValue","putBaseConfig","pages_pipeline_editor","_l","getComponentSelectorButtonType","nativeOn","selectComponent","previewInNewPage","formName","tab-click","onTabClick","baseConfigSchema","update:data","update:dataSchema","visible","tipDialogVisible","update:visible","src_pages_pipeline_editor","editor_normalizeComponent","use","vue_router_esm","router","routes","element_ui_common_default","config","productionTip","components","App"],"mappings":"iKAGAA,cADiBC,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBE,OAAOC,GAAA,SAAYH,EAAA,oBAE5GI,qBCCjB,ICwDAC,EDjCAC,EAvBAC,EAAA,OAcAC,OERA,OFUAb,GATA,EAVA,SAAAc,GACAF,EAAA,SAaA,KAEA,MAUA,mFGzBMG,EAEJC,qCAFID,EAGJE,iJCAFC,EAAA,SAAgBC,GAAsB,IAAjBC,EAAiBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,MAChCG,EAAML,EAUV,GANAC,EAAQK,QAAUL,EAAQK,YACrBL,EAAQK,QAAQ,kBACnBL,EAAQK,QAAQ,gBAAkB,oBAIhCL,EAAQM,QAAU,qBAAqBC,KAAKP,EAAQM,QAAS,CAC/D,IAAME,EAASR,EAAQS,KACiB,qBAApCT,EAAQK,QAAQ,gBAClBL,EAAQS,KAAOC,IAAeF,GACe,wBAApCR,EAAQK,QAAQ,uBAClBL,EAAQK,QAAQ,gBAGvBL,EAAQS,KAAOE,IAAUH,GAAUI,YAAa,WAAYC,WAAW,IAK3E,GAAKb,EAAQM,QAAU,SAASC,KAAKP,EAAQM,cAA+BH,IAAnBH,EAAQM,OAAsB,CACrF,IAAME,EAASR,EAAQQ,QAAUR,EAAQS,SACzCL,OAAWO,IAAUH,GAAUI,YAAa,WAAYC,WAAW,IAEnEb,EAAQS,UAAON,EAGjB,IAAIW,EAAkBC,EAAA,QAAQC,SAC5BC,YAAY,EACZC,KAAM,aACNC,WAAY,uBAEd,OAAOC,MAAMhB,EAAKJ,GACfqB,KAAK,SAACC,GAIL,OAHAC,EAAA,QAAIC,SAAS,WACXV,EAAgBW,UAEM,MAApBH,EAASI,OACJJ,EAASK,OACbN,KAAK,SAACM,GACL,MAAiB,MAAbA,EAAKC,IACAC,EAAAC,EAAQC,QAAQJ,EAAKK,MAEvBH,EAAAC,EAAQG,OAARC,KACLR,OAAQJ,EAASI,QACdC,MAIJE,EAAAC,EAAQG,QACbP,OAAQJ,EAASI,UAElB,SAACS,GAIF,OAHAZ,EAAA,QAAIC,SAAS,WACXV,EAAgBW,UAEXI,EAAAC,EAAQG,QACbP,OAAQJ,SAASI,gGCtDzBU,EAAe,WAQb,IAAIC,EAEEC,EAAsBC,EAAtBD,GAAe,EAAOC,EAAS,MAAMhC,KAAK,WAAWiC,OAAOC,YAAY,SAAY,aAAe,MAGvGJ,EAAQ,cAGFK,OAAS,SAASA,EAAOC,GAC7B,IAAIC,EAAS7D,KAAK8D,UAIlBP,GAAe,EACf,IAAIO,EAAY,IAAI9D,KAIpB,IAAK,IAAI+D,KAHTR,GAAe,EAGEK,EAEfE,EAAUC,GAA6B,mBAAdH,EAAKG,IACL,mBAAhBF,EAAOE,IAAuBP,EAAOhC,KAAKoC,EAAKG,IACrD,SAASA,EAAMC,GACd,OAAO,WACL,IAAIC,EAAMjE,KAAK6D,OAIf7D,KAAK6D,OAASA,EAAOE,GAIrB,IAAIlB,EAAMmB,EAAGE,MAAMlE,KAAMkB,WAGzB,OAFAlB,KAAK6D,OAASI,EAEPpB,GAbV,CAeEkB,EAAMH,EAAKG,IACdH,EAAKG,GAIT,SAAST,KAEDC,GAAgBvD,KAAKmE,MACzBnE,KAAKmE,KAAKD,MAAMlE,KAAMkB,WAY1B,OARAoC,EAAMQ,UAAYA,EAGlBR,EAAMQ,UAAUM,YAAcd,EAG9BA,EAAMK,OAASA,EAERL,GAQX,WACE,SAASe,EAAcC,EAAO7C,GAC5BA,EAASA,IAAY8C,SAAS,EAAOC,YAAY,EAAOC,YAAQrD,GAChE,IAAIsD,EAAMC,SAASC,YAAa,eAEhC,OADAF,EAAIG,gBAAiBP,EAAO7C,EAAO8C,QAAS9C,EAAO+C,WAAY/C,EAAOgD,QAC/DC,EAGTL,EAAYP,UAAYL,OAAOqB,MAAMhB,UAErCL,OAAOY,YAAcA,EAVvB,GAeC,WAGG,IAFA,IAAIU,EAAW,EACXC,GAAW,KAAM,MAAO,SAAU,KAC9BC,EAAI,EAAGA,EAAID,EAAQ7D,SAAWsC,OAAOyB,wBAAyBD,EAClExB,OAAOyB,sBAAwBzB,OAAOuB,EAAQC,GAAG,yBACjDxB,OAAO0B,qBAAuB1B,OAAOuB,EAAQC,GAAG,yBAClBxB,OAAOuB,EAAQC,GAAG,+BAG/CxB,OAAOyB,wBACRzB,OAAOyB,sBAAwB,SAASE,EAAUC,GAC9C,IAAIC,GAAW,IAAIC,MAAOC,UACtBC,EAAaC,KAAKC,IAAI,EAAG,IAAML,EAAWP,IAC1C1E,EAAKoD,OAAOmC,WAAW,WAAaR,EAASE,EAAWG,IAC1DA,GAEF,OADAV,EAAWO,EAAWG,EACfpF,IAGVoD,OAAO0B,uBACR1B,OAAO0B,qBAAuB,SAAS9E,GACnCwF,aAAaxF,KArBxB,GA4BKyF,MAAMC,UACRD,MAAMC,QAAU,SAASC,GACzB,MAA+C,mBAAxCC,OAAOnC,UAAUoC,SAASC,KAAKH,KAU1C,IAkBII,EAAU,SAAVA,EAAmBC,GACrB,IAAIC,EAAQC,EAAEC,EAnBeC,EAoB7B,IAAIF,EAAE,EAAGA,EAAErF,UAAUC,OAAQoF,IAE3B,IAAKC,KADLF,EAASpF,UAAUqF,GAEbD,EAAOI,eAAeF,MACvBF,EAAOE,KAnBK,iBAAf,KALyBC,EAwBaH,EAAOE,IAnB7C,YAAAG,IAAOF,KAAoBA,EAAIG,UAAqB,OAARH,GAAgBA,IAAQA,EAAIhD,QAIxEgD,EAAIrC,cAAgB6B,OAAOnC,UAAU4C,eAAeP,KAAKM,EAAIrC,YAAYN,UAAW,kBAoBlFuC,EAAYG,GAAYF,EAAOE,IAJ3BH,EAAYK,eAAeF,KAAWH,EAAYG,OACtDJ,EAAQC,EAAYG,GAAWF,EAAOE,MAO5C,OAAOH,GAGLQ,EAAQ,SAASJ,EAAIrB,GAEvB,IAAImB,EADJ,GAAIE,GAAsB,iBAAf,IAAOA,EAAP,YAAAE,IAAOF,IAElB,GAAGX,MAAMC,QAAQU,IAA+B,iBAAfA,EAAItF,QAAuBsF,EAAItF,OAAS,GAAMsF,EAAItF,OAAS,KAAMsF,GAChG,IAAIF,EAAE,EAAGA,EAAEE,EAAItF,OAAQoF,IACrB,IAAwB,IAArBnB,EAASmB,EAAEE,EAAIF,IAAa,YAIjC,GAAAO,EAAA/D,EAAiB,CACf,IAAIgE,EAAOD,IAAYL,GACvB,IAAIF,EAAE,EAAGA,EAAEQ,EAAK5F,OAAQoF,IACtB,IAAoC,IAAjCnB,EAAS2B,EAAKR,GAAGE,EAAIM,EAAKR,KAAc,YAI7C,IAAIA,KAAKE,EACP,GAAIA,EAAIC,eAAeH,KACC,IAArBnB,EAASmB,EAAEE,EAAIF,IAAa,QAMnCS,EAAW,SAASC,EAAG3C,GACzB,IAAI4C,EAAIvC,SAASC,YAAY,cAC7BsC,EAAEC,UAAU7C,GAAO,GAAM,GACzB2C,EAAGG,cAAcF,IAWfG,EAAa,SAAbA,EAAsBhC,EAAQpE,GAChC,KAAMoE,aAAmBiC,SACvB,MAAM,IAAIC,MAAM,4CAElBtG,EAAUmF,KAAWiB,EAAWG,SAASvG,QAAQA,OACjDjB,KAAKqF,QAAUA,EACfrF,KAAKiB,QAAUA,EACfjB,KAAKmE,QAEPkD,EAAWvD,WAGTM,YAAaiD,EACblD,KAAM,WACJ,IAAIsD,EAAOzH,KAEXA,KAAK0H,OAAQ,EAEb,IAAIC,EAAcN,EAAWG,SAASI,OAAO5H,KAAKiB,QAAQ4G,OAASR,EAAWG,SAASK,OACvF,IAAIF,EAAa,KAAM,kBAAoB3H,KAAKiB,QAAQ4G,OAASR,EAAWG,SAASK,OAErF7H,KAAK8H,OAAS9H,KAAKiB,QAAQ6G,OAC3B9H,KAAK6H,MAAQ,IAAIF,EACjB3H,KAAK+H,SAAW/H,KAAKiB,QAAQ8G,SAC7B/H,KAAKgI,KAAOhI,KAAKiB,QAAQ+G,SACzBhI,KAAKiI,KAAO,EACZjI,KAAKkI,UAEL,IAAIC,EAAad,EAAWG,SAASY,SAASpI,KAAKiB,QAAQoH,SAAWhB,EAAWG,SAASa,SACvFF,IAAYnI,KAAKqI,QAAU,IAAIF,GAElCnI,KAAKsI,eAAiBtI,KAAK6H,MAAMU,eACjCvI,KAAKqF,QAAQmD,YAAYxI,KAAKsI,gBAE9BtI,KAAKyI,UAAYzI,KAAKiB,QAAQwH,WAAapB,EAAWG,SAASiB,UAG/DzI,KAAK0I,kBAAkB1I,KAAK8H,OAAQ,WAClCL,EAAKkB,gBAAgBlB,EAAKK,QAG1B,IAAIc,KACDnB,EAAKxG,QAAQ4H,oBACdD,EAAkBC,kBAAoBpB,EAAKxG,QAAQ4H,mBAErDpB,EAAKqB,UAAY,IAAIzB,EAAW0B,UAAUtB,EAAK,KAAKmB,GAGpD,IAAII,EAAevB,EAAKwB,eAAexB,EAAKK,QAC5CL,EAAKyB,KAAOzB,EAAK0B,aAAaH,GAC5BI,WAAY3B,EACZK,OAAQL,EAAKK,OACbuB,UAAU,EACVC,UAAW7B,EAAKa,iBAGlBb,EAAKyB,KAAKK,WACV9B,EAAKyB,KAAKM,QACV/B,EAAKyB,KAAKO,YAGPhC,EAAKxG,QAAQyI,UAAUjC,EAAKyB,KAAKS,SAASlC,EAAKxG,QAAQyI,UAE1DjC,EAAKmC,mBAAqBnC,EAAKqB,UAAUe,SAASpC,EAAKyB,KAAKY,YAC5DrC,EAAKyB,KAAKa,qBAAqBtC,EAAKmC,oBACpCnC,EAAKC,OAAQ,EAGbjE,OAAOyB,sBAAsB,WACvBuC,EAAKC,QACTD,EAAKmC,mBAAqBnC,EAAKqB,UAAUe,SAASpC,EAAKyB,KAAKY,YAC5DrC,EAAKyB,KAAKa,qBAAqBtC,EAAKmC,oBACpCnC,EAAKuC,QAAQ,SACbvC,EAAKuC,QAAQ,gBAInBF,SAAU,WACR,IAAI9J,KAAK0H,MAAO,KAAM,gFAEtB,OAAO1H,KAAKkJ,KAAKY,YAEnBH,SAAU,SAASM,GACjB,IAAIjK,KAAK0H,MAAO,KAAM,gFAGtB,OADA1H,KAAKkJ,KAAKS,SAASM,GACZjK,MAET6J,SAAU,SAASI,GACjB,IAAIjK,KAAK0H,MAAO,KAAM,yEAGtB,OAAwB,IAArBxG,UAAUC,OACJnB,KAAK8I,UAAUe,SAASI,GAIxBjK,KAAK4J,oBAGhBM,QAAS,WACJlK,KAAKmK,WACJnK,KAAK0H,QAET1H,KAAK8H,OAAS,KACd9H,KAAKiB,QAAU,KACfjB,KAAKkJ,KAAKgB,UACVlK,KAAKkJ,KAAO,KACZlJ,KAAKsI,eAAiB,KACtBtI,KAAK8I,UAAY,KACjB9I,KAAK4J,mBAAqB,KAC1B5J,KAAK6H,MAAQ,KACb7H,KAAKqI,QAAU,KACfrI,KAAK+H,SAAW,KAChB/H,KAAKkI,OAAS,KACdlI,KAAK0H,OAAQ,EACb1H,KAAKqF,QAAQ+E,UAAY,GAEzBpK,KAAKmK,WAAY,IAEnBE,GAAI,SAAS/F,EAAOc,GAKlB,OAJApF,KAAKsK,UAAYtK,KAAKsK,cACtBtK,KAAKsK,UAAUhG,GAAStE,KAAKsK,UAAUhG,OACvCtE,KAAKsK,UAAUhG,GAAOiG,KAAKnF,GAEpBpF,MAETwK,IAAK,SAASlG,EAAOc,GAEnB,GAAGd,GAASc,EAAU,CACpBpF,KAAKsK,UAAYtK,KAAKsK,cACtBtK,KAAKsK,UAAUhG,GAAStE,KAAKsK,UAAUhG,OAEvC,IADA,IAAImG,KACIlE,EAAE,EAAGA,EAAEvG,KAAKsK,UAAUhG,GAAOnD,OAAQoF,IACxCvG,KAAKsK,UAAUhG,GAAOiC,KAAKnB,GAC9BqF,EAAaF,KAAKvK,KAAKsK,UAAUhG,GAAOiC,IAE1CvG,KAAKsK,UAAUhG,GAASmG,OAGlBnG,GACNtE,KAAKsK,UAAYtK,KAAKsK,cACtBtK,KAAKsK,UAAUhG,OAIftE,KAAKsK,aAGP,OAAOtK,MAETgK,QAAS,SAAS1F,GAChB,GAAGtE,KAAKsK,WAAatK,KAAKsK,UAAUhG,IAAUtE,KAAKsK,UAAUhG,GAAOnD,OAClE,IAAI,IAAIoF,EAAE,EAAGA,EAAEvG,KAAKsK,UAAUhG,GAAOnD,OAAQoF,IAC3CvG,KAAKsK,UAAUhG,GAAOiC,KAI1B,OAAOvG,MAET0K,UAAW,SAASC,EAAQV,GAC1B,GAAc,gBAAXU,EAMD,KAAM,UAAUA,EAAO,gEAGzB,OARE3K,KAAKiB,QAAQ2J,YAAcX,EAC3BjK,KAAK6K,WAOA7K,MAETiJ,eAAgB,SAASnB,GACvB,IAAIgD,EAcJ,GAZAhD,EAAS9H,KAAK+K,aAAajD,GAE3BjB,EAAMQ,EAAWG,SAASwD,UAAU,SAASzE,EAAE0E,GAC7C,IAAIhH,EAAMgH,EAASnD,GACnB,GAAG7D,GACEoD,EAAWG,SAAS0D,QAAQjH,GAE7B,OADA6G,EAAY7G,GACL,KAKT6G,EAAW,KAAM,6BAA6BnJ,IAAemG,GACjE,IAAIT,EAAWG,SAAS0D,QAAQJ,GAAY,KAAM,kBAAkBA,EAEpE,OAAOzD,EAAWG,SAAS0D,QAAQJ,IAErC3B,aAAc,SAASH,EAAc/H,GAEnC,OAAO,IAAI+H,EADX/H,EAAUmF,KAAW4C,EAAa/H,YAAYA,KAGhD4J,SAAU,WACR,GAAI7K,KAAK0H,QAEN1H,KAAKmL,cAAR,CACAnL,KAAKmL,eAAgB,EAErB,IAAI1D,EAAOzH,KAoBX,OAlBAyD,OAAOyB,sBAAsB,WAC3BuC,EAAK0D,eAAgB,EACjB1D,EAAKC,QAGTD,EAAKmC,mBAAqBnC,EAAKqB,UAAUe,SAASpC,EAAKyB,KAAKY,YAE5B,UAA7BrC,EAAKxG,QAAQ2J,YACdnD,EAAKyB,KAAKa,qBAAqBtC,EAAKmC,oBAGpCnC,EAAKyB,KAAKa,yBAIZtC,EAAKuC,QAAQ,aAGRhK,OAEToL,gBAAiB,SAASrD,EAAUhE,GAGlC,IAAIsH,EAGJ,GAAmB,iBALnBtH,EAAOA,GAAQsD,EAAWG,SAASO,UAKN,CAC3B,IAAIV,EAAWG,SAAS8D,UAAUvH,GAAO,KAAM,2BAA2BA,EAG1E,KAFAsH,EAAShE,EAAWG,SAAS8D,UAAUvH,MAE3B,KAAM,mBAAmBA,EAAK,kCAI1CsH,EAAStH,EAGX,IAAIsH,EAAQ,KAAM,yBAClB,IAAIA,EAAOE,QAAS,KAAM,8BAE1B,OAAOF,EAAOE,QAAQxD,IAExByD,MAAO,SAASvE,EAAGwE,EAAIxB,GAErB,GAAwB,IAArB/I,UAAUC,OAeX,OAAI8F,EAAGyE,aAAa,mBAAmBD,GAEhCzL,KAAKkI,OAAOjB,EAAG0E,aAAa,mBAAmBF,IAFF,KAdpD,IAAIxD,EACDhB,EAAGyE,aAAa,mBAAmBD,GACpCxD,EAAOhB,EAAG0E,aAAa,mBAAmBF,IAG1CxD,EAAOjI,KAAKiI,OACZhB,EAAG2E,aAAa,mBAAmBH,EAAIxD,IAGzCjI,KAAKkI,OAAOD,GAAQgC,GAUxB4B,eAAgB,SAASC,GAGvB,OAFA9L,KAAKkL,QAAUlL,KAAKkL,YACpBlL,KAAKkL,QAAQY,EAAOC,MAAQD,EACrB9L,MAETgM,iBAAkB,SAASF,GAGzB,OAFA9L,KAAKkL,QAAUlL,KAAKkL,YACpBlL,KAAKkL,QAAQY,EAAOC,MAAQ,KACrB/L,MAETiM,UAAW,SAASF,GAClB,GAAI/L,KAAKkL,QACT,OAAOlL,KAAKkL,QAAQa,IAEtBG,MAAO,SAASH,EAAK3G,GAKnB,OAJApF,KAAKmM,UAAYnM,KAAKmM,cACtBnM,KAAKmM,UAAUJ,GAAQ/L,KAAKmM,UAAUJ,OACtC/L,KAAKmM,UAAUJ,GAAMxB,KAAKnF,GAEnBpF,MAEToM,QAAS,SAASL,EAAK3G,GACrB,IAAIpF,KAAKmM,YAAcnM,KAAKmM,UAAUJ,GAAO,OAAO/L,KAEpD,IAAIoF,EAEF,OADApF,KAAKmM,UAAUJ,GAAQ,KAChB/L,KAIT,IADA,IAAIqM,KACI9F,EAAE,EAAGA,EAAEvG,KAAKmM,UAAUJ,GAAM5K,OAAQoF,IACvCvG,KAAKmM,UAAUJ,GAAMxF,KAAOnB,GAC1BiH,EAAQ9B,KAAKvK,KAAKmM,UAAUJ,GAAMxF,IAGzC,OADAvG,KAAKmM,UAAUJ,GAAQM,EAAQlL,OAAQkL,EAAU,KAC1CrM,MAETsM,eAAgB,SAASP,GACvB,IAAI/L,KAAKmM,YAAcnM,KAAKmM,UAAUJ,GAAO,OAAO/L,KACpD,IAAI,IAAIuG,EAAE,EAAGA,EAAEvG,KAAKmM,UAAUJ,GAAM5K,OAAQoF,IAC1CvG,KAAKmM,UAAUJ,GAAMxF,MAGzBgG,UAAW,WACT,OAAQvM,KAAKkJ,MAAQlJ,KAAKkJ,KAAKqD,aAEjCC,OAAQ,WACNxM,KAAKkJ,KAAKsD,UAEZC,QAAS,WACPzM,KAAKkJ,KAAKuD,WAEZ9D,gBAAiB,SAASb,EAAOiE,GAE/B,GADAA,EAAOA,GAAQ,iBACZjE,EAAO4E,YACR,IAAI,IAAInG,KAAKuB,EAAO4E,YACd5E,EAAO4E,YAAYhG,eAAeH,KACtCvG,KAAKgI,KAAK+D,EAAKxF,GAAKuB,EAAO4E,YAAYnG,GACpCuB,EAAO4E,YAAYnG,GAAGmG,aACvB1M,KAAK2I,gBAAgBb,EAAO4E,YAAYnG,GAAGwF,EAAKxF,EAAE,mBAK1DoG,iBAAkB,SAAS7E,GACzB,IAAIE,KACA4E,EAAa,SAASC,GACxB,IAAI,IAAItG,KAAKsG,EACRA,EAAQnG,eAAeH,KACxByB,EAAKzB,IAAK,IAShB,IAAI,IAAIA,KAJLuB,EAAOgF,MAA+B,WAAvBnG,IAAOmB,EAAOgF,OAAiD,MAA5BhF,EAAOgF,KAAKC,OAAO,EAAE,KAAe/M,KAAKgI,KAAKF,EAAOgF,QACxG9E,EAAKF,EAAOgF,OAAQ,GAGThF,EACX,GAAIA,EAAOpB,eAAeH,GAC1B,GAAGuB,EAAOvB,IAA2B,WAArBI,IAAOmB,EAAOvB,KAAmBT,MAAMC,QAAQ+B,EAAOvB,IACpE,IAAI,IAAIyG,EAAE,EAAGA,EAAElF,EAAOvB,GAAGpF,OAAQ6L,IACN,WAAtBrG,IAAOmB,EAAOvB,GAAGyG,KAClBJ,EAAW5M,KAAK2M,iBAAiB7E,EAAOvB,GAAGyG,UAIzClF,EAAOvB,IAA2B,WAArBI,IAAOmB,EAAOvB,KACjCqG,EAAW5M,KAAK2M,iBAAiB7E,EAAOvB,KAI5C,OAAOyB,GAETU,kBAAmB,SAASZ,EAAQ1C,GAClC,IAAIqC,EAAOzH,KACPgI,EAAOhI,KAAK2M,iBAAiB7E,GAE7BmF,EAAO,EAAGC,EAAU,EAAGC,GAAiB,EAE5CtG,EAAMmB,EAAK,SAAS3G,GAClB,IAAGoG,EAAKO,KAAK3G,GAAb,CACA,IAAIoG,EAAKxG,QAAQmM,KAAM,KAAM,qDAAqD/L,EAClFoG,EAAKO,KAAK3G,GAAO,UACjB6L,IAEA,IAAIG,EAAI,IAAIC,eACZD,EAAEE,KAAK,MAAOlM,GAAK,GACnBgM,EAAEG,mBAAqB,WACrB,GAAoB,GAAhBH,EAAEI,WAAN,CAEA,GAAgB,MAAbJ,EAAE1K,OAuBH,MADAc,OAAOiK,QAAQC,IAAIN,GACb,iCAAiChM,EAtBvC,IAAIkB,EACJ,IACEA,EAAWqL,KAAKC,MAAMR,EAAES,cAE1B,MAAM5G,GAEJ,MADAzD,OAAOiK,QAAQC,IAAIzG,GACb,gCAAgC7F,EAExC,IAAIkB,GAAgC,iBAApB,IAAOA,EAAP,YAAAoE,IAAOpE,IAAuB,KAAM,kDAAkDlB,EAEtGoG,EAAKO,KAAK3G,GAAOkB,EACjBkF,EAAKiB,kBAAkBnG,EAAS,aAC9B0K,GACWC,IAAYC,IACrBA,GAAiB,EACjB/H,SAURiI,EAAEU,UAGAb,GACF9H,KAGJ4I,WAAY,SAASlG,GAGnB,IAFAA,EAAS1B,KAAW0B,GAEbA,EAAOgF,MAAM,CAClB,IAAImB,EAAMnG,EAAOgF,YACVhF,EAAOgF,KAEV9M,KAAKgI,KAAKiG,KAAMA,EAAMC,mBAAmBD,IAE7CnG,EAAS9H,KAAKmO,cAAcrG,EAAO9H,KAAKgI,KAAKiG,IAE/C,OAAOnG,GAETiD,aAAc,SAASjD,GACrB,IAEIvB,EAFAkB,EAAOzH,KACPoO,EAAWhI,KAAW0B,GAuD1B,GAnD0B,WAAvBnB,IAAOmB,EAAOuG,QAEZvI,MAAMC,QAAQ+B,EAAOuG,MACtBxH,EAAMiB,EAAOuG,KAAM,SAAS5C,EAAIxB,GAEV,iBAAjB,IAAOA,EAAP,YAAAtD,IAAOsD,MACRnC,EAAOuG,KAAK5C,GAAOhE,EAAKsD,aAAad,MAMzCnC,EAAOuG,KAAO5G,EAAKsD,aAAajD,EAAOuG,OAIb,WAA3B1H,IAAOmB,EAAOwG,YAEZxI,MAAMC,QAAQ+B,EAAOwG,UACtBzH,EAAMiB,EAAOwG,SAAU,SAAS7C,EAAIxB,GAEd,iBAAjB,IAAOA,EAAP,YAAAtD,IAAOsD,MACRnC,EAAOwG,SAAS7C,GAAOhE,EAAKsD,aAAad,MAM7CnC,EAAOwG,SAAW7G,EAAKsD,aAAajD,EAAOwG,WAI5CxG,EAAOyG,OACR1H,EAAMiB,EAAOyG,MAAO,SAAS9C,EAAIxB,GAC/BnC,EAAOyG,MAAM9C,GAAOhE,EAAKsD,aAAad,KAIvCnC,EAAO0G,cACR3H,EAAMiB,EAAO0G,aAAa,SAAS/C,EAAIxB,GACjB,iBAAjB,IAAOA,EAAP,YAAAtD,IAAOsD,KAAwBnE,MAAMC,QAAQkE,KAC9CnC,EAAO0G,aAAa/C,GAAOhE,EAAKsD,aAAad,MAKhDnC,EAAO2G,MACR3G,EAAO2G,IAAMzO,KAAK+K,aAAajD,EAAO2G,MAIrC3G,EAAO4G,MAAO,CACf,IAAInI,EAAE,EAAGA,EAAEuB,EAAO4G,MAAMvN,OAAQoF,IAC9B6H,EAAWpO,KAAKmO,cAAcC,EAASpO,KAAK+K,aAAajD,EAAO4G,MAAMnI,YAEjE6H,EAASM,MAGlB,GAAG5G,EAAA,QAAmB,CAEpB,GAAKhC,MAAMC,QAAQ+B,EAAA,SAKjB,IAAIvB,EAAE,EAAGA,EAAEuB,EAAA,QAAkB3G,OAAQoF,IACnC6H,EAAWpO,KAAKmO,cAAcC,EAASpO,KAAK+K,aAAajD,EAAA,QAAkBvB,UAL7E6H,EAAWpO,KAAKmO,cAAcC,EAASpO,KAAK+K,aAAajD,EAAA,iBAQpDsG,EAAA,QAGT,GAAGtG,EAAO6G,MAAO,CACf,IAAI1K,EAAMmC,KAAWgI,GAErB,WADOnK,EAAI0K,MACPpI,EAAE,EAAGA,EAAEuB,EAAO6G,MAAMxN,OAAQoF,IAC9B6H,EAASO,MAAMpI,GAAKvG,KAAKmO,cAAcnO,KAAK+K,aAAajD,EAAO6G,MAAMpI,IAAItC,GAI9E,OAAOjE,KAAKgO,WAAWI,IAEzBD,cAAe,SAASS,EAAMC,GAC5BD,EAAOxI,KAAWwI,GAClBC,EAAOzI,KAAWyI,GAElB,IAAIpH,EAAOzH,KACPoO,KAiEJ,OAhEAvH,EAAM+H,EAAM,SAAShL,EAAKkL,QAEC,IAAfD,EAAKjL,GAEA,aAATA,GAA8B,sBAATA,GAAgD,iBAAf,IAAOkL,EAAP,YAAAnI,IAAOmI,MAAoBhJ,MAAMC,QAAQ+I,GAQlF,SAATlL,GAAmC,iBAARkL,IAAoBhJ,MAAMC,QAAQ+I,GA0B9C,iBAAf,IAAOA,EAAP,YAAAnI,IAAOmI,KAAoBhJ,MAAMC,QAAQ+I,GAC/CV,EAASxK,GAAQkL,EAAIC,OAAO,SAASC,GACnC,OAAkC,IAA3BH,EAAKjL,GAAMqL,QAAQD,KAIP,iBAAf,IAAOF,EAAP,YAAAnI,IAAOmI,KAA4B,OAARA,EACjCV,EAASxK,GAAQ6D,EAAK0G,cAAcW,EAAID,EAAKjL,IAI7CwK,EAASxK,GAAQkL,GAnCC,iBAARA,IAAkBA,GAAOA,IACX,iBAAdD,EAAKR,OAAmBQ,EAAKR,MAAQQ,EAAKR,OAGhDQ,EAAKR,MAASQ,EAAKR,KAAKlN,OAK1BiN,EAASC,KAAOS,EAAIC,OAAO,SAASC,GAClC,OAAiC,IAA1BH,EAAKR,KAAKY,QAAQD,KAL3BZ,EAASC,KAAOS,EAUU,IAAzBV,EAASC,KAAKlN,QAA4C,iBAArBiN,EAASC,KAAK,GACpDD,EAASC,KAAOD,EAASC,KAAK,GAGC,IAAzBD,EAASC,KAAKlN,eACbiN,EAASC,MA5BlBD,EAASxK,GAAQkL,EAAII,OAAOL,EAAKjL,IAAOuL,OAAO,SAASC,EAAGC,GAEzD,OADID,EAAEH,QAAQI,GAAK,GAAGD,EAAE7E,KAAK8E,GACtBD,OA8CXhB,EAASxK,GAAQkL,IAIrBjI,EAAMgI,EAAM,SAASjL,EAAKkL,QACC,IAAfF,EAAKhL,KACbwK,EAASxK,GAAQkL,KAIdV,IAIX/G,EAAWG,UACTI,UACA0D,aACAlD,YACA8C,WACAoE,aACAtE,aACAnC,sBAGFxB,EAAW0B,UAAYzF,EAAMK,QAC3BQ,KAAM,SAASiF,EAAWtB,EAAO7G,GAC/BjB,KAAKoJ,WAAaA,EAClBpJ,KAAK8H,OAASA,GAAU9H,KAAKoJ,WAAWtB,OACxC9H,KAAKiB,QAAUA,MACfjB,KAAKyI,UAAYzI,KAAKoJ,WAAWX,WAAapB,EAAWG,SAASiB,WAEpEoB,SAAU,SAASI,GACjB,OAAOjK,KAAKuP,gBAAgBvP,KAAK8H,OAAQmC,IAE3CsF,gBAAiB,SAASzH,EAAOmC,EAAM8B,GACrC,IAEIyD,EAAOjJ,EAAGyG,EAFVvF,EAAOzH,KACPyP,KAEAC,EAAc/N,IAAesI,GAYjC,GAVA8B,EAAOA,GAAQ,QAGfjE,EAAS1B,KAAWpG,KAAKoJ,WAAW4E,WAAWlG,KAOrCuB,WAAgC,IAApBvB,EAAOuB,UAC3B,QAAoB,IAAVY,EAQR,OAPAwF,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,WACVmJ,QAAS3P,KAAKyI,UAAU,kBAInBgH,OAIN,QAAoB,IAAVxF,EAAuB,CAEpC,IAAGjK,KAAKoJ,WAAWnI,QAAQ2O,oBASzB,OAAOH,EARPA,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,WACVmJ,QAAS3P,KAAKyI,UAAU,kBAU9B,GAAGX,EAAA,KAAgB,CAEjB,IADA0H,GAAQ,EACJjJ,EAAE,EAAGA,EAAEuB,EAAA,KAAe3G,OAAQoF,IAC7BmJ,IAAgB/N,IAAemG,EAAA,KAAevB,MAAKiJ,GAAQ,GAE5DA,GACFC,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,OACVmJ,QAAS3P,KAAKyI,UAAU,gBAM9B,GAAGX,EAAA,QACD,IAAIvB,EAAE,EAAGA,EAAEuB,EAAA,QAAkB3G,OAAQoF,IACnCkJ,EAASA,EAAOP,OAAOlP,KAAKuP,gBAAgBzH,EAAA,QAAkBvB,GAAG0D,EAAM8B,IAK3E,GAAGjE,EAAO4G,MACR,IAAInI,EAAE,EAAGA,EAAEuB,EAAO4G,MAAMvN,OAAQoF,IAC9BkJ,EAASA,EAAOP,OAAOlP,KAAKuP,gBAAgBzH,EAAO4G,MAAMnI,GAAG0D,EAAM8B,IAKtE,GAAGjE,EAAOyG,MAAO,CAEf,IADAiB,GAAQ,EACJjJ,EAAE,EAAGA,EAAEuB,EAAOyG,MAAMpN,OAAQoF,IAC9B,IAAIvG,KAAKuP,gBAAgBzH,EAAOyG,MAAMhI,GAAG0D,EAAM8B,GAAM5K,OAAQ,CAC3DqO,GAAQ,EACR,MAGAA,GACFC,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,QACVmJ,QAAS3P,KAAKyI,UAAU,iBAM9B,GAAGX,EAAO6G,MAAO,CACfa,EAAQ,EACR,IAAIK,KACJ,IAAItJ,EAAE,EAAGA,EAAEuB,EAAO6G,MAAMxN,OAAQoF,IAAK,CAEnC,IAAItC,EAAMjE,KAAKuP,gBAAgBzH,EAAO6G,MAAMpI,GAAG0D,EAAM8B,GAKrD,IAJI9H,EAAI9C,QACNqO,IAGExC,EAAE,EAAGA,EAAE/I,EAAI9C,OAAQ6L,IACrB/I,EAAI+I,GAAGjB,KAAOA,EAAK,UAAUxF,EAAE,IAAItC,EAAI+I,GAAGjB,KAAKgB,OAAOhB,EAAK5K,QAE7D0O,EAAeA,EAAaX,OAAOjL,GAGxB,IAAVuL,IACDC,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,QACVmJ,QAAS3P,KAAKyI,UAAU,eAAgB+G,MAE1CC,EAASA,EAAOP,OAAOW,IAgB3B,GAXG/H,EAAO2G,MACJzO,KAAKuP,gBAAgBzH,EAAO2G,IAAIxE,EAAM8B,GAAM5K,QAC9CsO,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,MACVmJ,QAAS3P,KAAKyI,UAAU,gBAM3BX,EAAOuG,KAER,GAAGvI,MAAMC,QAAQ+B,EAAOuG,MAAO,CAE7B,IADAmB,GAAQ,EACJjJ,EAAE,EAAEA,EAAEuB,EAAOuG,KAAKlN,OAAOoF,IAC3B,GAAGvG,KAAK8P,WAAWhI,EAAOuG,KAAK9H,GAAI0D,GAAQ,CACzCuF,GAAQ,EACR,MAGAA,GACFC,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,OACVmJ,QAAS3P,KAAKyI,UAAU,2BAMxBzI,KAAK8P,WAAWhI,EAAOuG,KAAMpE,IAC/BwF,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,OACVmJ,QAAS3P,KAAKyI,UAAU,cAAeX,EAAOuG,SAQtD,GAAGvG,EAAOwG,SAER,GAAGxI,MAAMC,QAAQ+B,EAAOwG,UAAW,CAEjC,IADAkB,GAAQ,EACJjJ,EAAE,EAAEA,EAAEuB,EAAOwG,SAASnN,OAAOoF,IAC/B,GAAGvG,KAAK8P,WAAWhI,EAAOwG,SAAS/H,GAAI0D,GAAQ,CAC7CuF,GAAQ,EACR,MAGAA,GACFC,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,WACVmJ,QAAS3P,KAAKyI,UAAU,+BAMzBzI,KAAK8P,WAAWhI,EAAOwG,SAAUrE,IAClCwF,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,WACVmJ,QAAS3P,KAAKyI,UAAU,kBAAmBX,EAAOwG,aAW1D,GAAoB,iBAAVrE,EAAoB,CAE5B,GAAGnC,EAAOiI,YAAcjI,EAAOkI,YAAa,CAC1C,IAAIC,EAAUnI,EAAOiI,YAAcjI,EAAOkI,YAE1CR,EAASvF,EAAMgG,IAAYvK,KAAKwK,MAAMjG,EAAMgG,GAGzCxM,OAAO0M,KACRX,EAAQ/L,OAAO0M,KAAKC,IAAI3M,OAAO0M,KAAKE,UAAUpG,GAAQxG,OAAO0M,KAAKE,UAAUJ,IAAUK,OAAO,GAGvF7M,OAAO8M,UACbf,EAAS,IAAI/L,OAAO8M,QAAQtG,GAAQmG,IAAI,IAAI3M,OAAO8M,QAAQN,IAAUK,OAAO,IAG1Ed,GACFC,EAAOlF,MACLwB,KAAMA,EACNvF,SAAUsB,EAAOiI,WAAY,aAAe,cAC5CJ,QAAS3P,KAAKyI,UAAU,oBAAqBwH,MAMhDnI,EAAOpB,eAAe,aAEvB8I,EAAQ1H,EAAO0I,iBAAmBvG,EAAQnC,EAAO2I,QAAYxG,GAASnC,EAAO2I,QAG1EhN,OAAO0M,KACRX,EAAQ/L,OAAO0M,KAAKrI,EAAO0I,iBAAiB,UAAU,aACpD/M,OAAO0M,KAAKE,UAAUpG,GACtBxG,OAAO0M,KAAKE,UAAUvI,EAAO2I,UAIzBhN,OAAO8M,UACbf,EAAS,IAAI/L,OAAO8M,QAAQtG,GAAQnC,EAAO0I,iBAAiB,KAAK,OAAO,IAAI/M,OAAO8M,QAAQzI,EAAO2I,WAGhGjB,GACFC,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,UACVmJ,QAAS3P,KAAKyI,UACXX,EAAO0I,iBAAiB,qBAAqB,sBAC7C1I,EAAO2I,aAOb3I,EAAOpB,eAAe,aAEvB8I,EAAQ1H,EAAO4I,iBAAmBzG,EAAQnC,EAAO6I,QAAY1G,GAASnC,EAAO6I,QAG1ElN,OAAO0M,KACRX,EAAQ/L,OAAO0M,KAAKrI,EAAO4I,iBAAiB,SAAS,YACnDjN,OAAO0M,KAAKE,UAAUpG,GACtBxG,OAAO0M,KAAKE,UAAUvI,EAAO6I,UAIzBlN,OAAO8M,UACbf,EAAS,IAAI/L,OAAO8M,QAAQtG,GAAQnC,EAAO4I,iBAAiB,KAAK,OAAO,IAAIjN,OAAO8M,QAAQzI,EAAO6I,WAGhGnB,GACFC,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,UACVmJ,QAAS3P,KAAKyI,UACXX,EAAO4I,iBAAiB,qBAAqB,sBAC7C5I,EAAO6I,kBAOb,GAAoB,iBAAV1G,EAEVnC,EAAO8I,YACJ3G,EAAM,IAAI9I,OAAS2G,EAAO8I,WAC5BnB,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,YACVmJ,QAAS3P,KAAKyI,UAAU,mBAAoBX,EAAO8I,cAMtD9I,EAAO+I,YACJ5G,EAAM,IAAI9I,OAAS2G,EAAO+I,WAC5BpB,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,YACVmJ,QAAS3P,KAAKyI,UAA8B,IAAnBX,EAAO+I,UAAc,iBAAiB,mBAAqB/I,EAAO+I,cAM9F/I,EAAOgJ,UACH,IAAIC,OAAOjJ,EAAOgJ,SAAUtP,KAAKyI,IACpCwF,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,UACVmJ,QAAS3P,KAAKyI,UAAU,iBAAkBX,EAAOgJ,kBAMpD,GAAoB,iBAAjB,IAAO7G,EAAP,YAAAtD,IAAOsD,KAAgC,OAAVA,GAAkBnE,MAAMC,QAAQkE,GAAQ,CAE3E,GAAGnC,EAAOkJ,MAER,GAAGlL,MAAMC,QAAQ+B,EAAOkJ,OACtB,IAAIzK,EAAE,EAAGA,EAAE0D,EAAM9I,OAAQoF,IAGvB,GAAGuB,EAAOkJ,MAAMzK,GACdkJ,EAASA,EAAOP,OAAOlP,KAAKuP,gBAAgBzH,EAAOkJ,MAAMzK,GAAG0D,EAAM1D,GAAGwF,EAAK,IAAIxF,QAG3E,KAA8B,IAA3BuB,EAAOmJ,gBACb,MAIG,IAAGnJ,EAAOmJ,gBAIV,KAA8B,IAA3BnJ,EAAOmJ,gBAA2B,CACxCxB,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,kBACVmJ,QAAS3P,KAAKyI,UAAU,2BAE1B,MAIA,MAbAgH,EAASA,EAAOP,OAAOlP,KAAKuP,gBAAgBzH,EAAOmJ,gBAAgBhH,EAAM1D,GAAGwF,EAAK,IAAIxF,SAoBzF,IAAIA,EAAE,EAAGA,EAAE0D,EAAM9I,OAAQoF,IACvBkJ,EAASA,EAAOP,OAAOlP,KAAKuP,gBAAgBzH,EAAOkJ,MAAM/G,EAAM1D,GAAGwF,EAAK,IAAIxF,IA4BjF,GAtBGuB,EAAOoJ,UACLjH,EAAM9I,OAAS2G,EAAOoJ,UACvBzB,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,WACVmJ,QAAS3P,KAAKyI,UAAU,kBAAmBX,EAAOoJ,aAMrDpJ,EAAOqJ,UACLlH,EAAM9I,OAAS2G,EAAOqJ,UACvB1B,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,WACVmJ,QAAS3P,KAAKyI,UAAU,kBAAmBX,EAAOqJ,aAMrDrJ,EAAOsJ,YAAa,CACrB,IAAIC,KACJ,IAAI9K,EAAE,EAAGA,EAAE0D,EAAM9I,OAAQoF,IAAK,CAE5B,GAAG8K,EADH7B,EAAQ7N,IAAesI,EAAM1D,KACb,CACdkJ,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,cACVmJ,QAAS3P,KAAKyI,UAAU,uBAE1B,MAEF4I,EAAK7B,IAAS,SAKf,GAAoB,iBAAjB,IAAOvF,EAAP,YAAAtD,IAAOsD,KAAgC,OAAVA,EAAgB,CAEnD,GAAGnC,EAAOwJ,cAAe,CAEvB,IAAI/K,KADJiJ,EAAQ,EACCvF,EACHA,EAAMvD,eAAeH,IACzBiJ,IAECA,EAAQ1H,EAAOwJ,eAChB7B,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,gBACVmJ,QAAS3P,KAAKyI,UAAU,uBAAwBX,EAAOwJ,kBAM7D,GAAGxJ,EAAOyJ,cAAe,CAEvB,IAAIhL,KADJiJ,EAAQ,EACCvF,EACHA,EAAMvD,eAAeH,IACzBiJ,IAECA,EAAQ1H,EAAOyJ,eAChB9B,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,gBACVmJ,QAAS3P,KAAKyI,UAAU,uBAAwBX,EAAOyJ,kBAM7D,GAAGzJ,EAAOuB,UAAYvD,MAAMC,QAAQ+B,EAAOuB,UACzC,IAAI9C,EAAE,EAAGA,EAAEuB,EAAOuB,SAASlI,OAAQoF,SACO,IAA9B0D,EAAMnC,EAAOuB,SAAS9C,KAC9BkJ,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,WACVmJ,QAAS3P,KAAKyI,UAAU,kBAAmBX,EAAOuB,SAAS9C,OAOnE,IAAIiL,KACJ,GAAG1J,EAAO2J,WACR,IAAIlL,KAAKuB,EAAO2J,WACV3J,EAAO2J,WAAW/K,eAAeH,KACrCiL,EAAqBjL,IAAK,EAC1BkJ,EAASA,EAAOP,OAAOlP,KAAKuP,gBAAgBzH,EAAO2J,WAAWlL,GAAG0D,EAAM1D,GAAGwF,EAAK,IAAIxF,KAKvF,GAAGuB,EAAO4J,kBACR,IAAInL,KAAKuB,EAAO4J,kBACd,GAAI5J,EAAO4J,kBAAkBhL,eAAeH,GAA5C,CAEA,IAAIoL,EAAQ,IAAIZ,OAAOxK,GAGvB,IAAIyG,KAAK/C,EACHA,EAAMvD,eAAesG,IACtB2E,EAAMnQ,KAAKwL,KACZwE,EAAqBxE,IAAK,EAC1ByC,EAASA,EAAOP,OAAOlP,KAAKuP,gBAAgBzH,EAAO4J,kBAAkBnL,GAAG0D,EAAM+C,GAAGjB,EAAK,IAAIiB,KAYlG,QAL0C,IAAhClF,EAAO8J,uBAAwC5R,KAAKoJ,WAAWnI,QAAQ4Q,0BAA6B/J,EAAO6G,OAAU7G,EAAOyG,QACpIzG,EAAO8J,sBAAuB,QAIU,IAAhC9J,EAAO8J,qBACf,IAAIrL,KAAK0D,EACP,GAAIA,EAAMvD,eAAeH,KACrBiL,EAAqBjL,GAAI,CAE3B,IAAIuB,EAAO8J,qBAAsB,CAC/BnC,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,uBACVmJ,QAAS3P,KAAKyI,UAAU,+BAAgClC,MAE1D,MAGG,IAAmC,IAAhCuB,EAAO8J,qBACb,MAKAnC,EAASA,EAAOP,OAAOlP,KAAKuP,gBAAgBzH,EAAO8J,qBAAqB3H,EAAM1D,GAAGwF,EAAK,IAAIxF,IAOlG,GAAGuB,EAAO0G,aACR,IAAIjI,KAAKuB,EAAO0G,aACd,GAAI1G,EAAO0G,aAAa9H,eAAeH,SAGhB,IAAb0D,EAAM1D,GAGhB,GAAGT,MAAMC,QAAQ+B,EAAO0G,aAAajI,IACnC,IAAIyG,EAAE,EAAGA,EAAElF,EAAO0G,aAAajI,GAAGpF,OAAQ6L,SACO,IAArC/C,EAAMnC,EAAO0G,aAAajI,GAAGyG,KACrCyC,EAAOlF,MACLwB,KAAMA,EACNvF,SAAU,eACVmJ,QAAS3P,KAAKyI,UAAU,oBAAqBX,EAAO0G,aAAajI,GAAGyG,YAO1EyC,EAASA,EAAOP,OAAOlP,KAAKuP,gBAAgBzH,EAAO0G,aAAajI,GAAG0D,EAAM8B,IAiBjF,OAVAlF,EAAMQ,EAAWG,SAASqB,kBAAkB,SAAStC,EAAEuC,GACrD2G,EAASA,EAAOP,OAAOpG,EAAU3C,KAAKsB,EAAKK,EAAOmC,EAAM8B,MAGvD/L,KAAKiB,QAAQ4H,mBACdhC,EAAM7G,KAAKiB,QAAQ4H,kBAAkB,SAAStC,EAAEuC,GAC9C2G,EAASA,EAAOP,OAAOpG,EAAU3C,KAAKsB,EAAKK,EAAOmC,EAAM8B,MAIrD0D,GAETK,WAAY,SAASzB,EAAMpE,GAEzB,MAAmB,iBAAToE,EACE,WAAPA,EAAyC,iBAAVpE,EACnB,WAAPoE,EAAyC,iBAAVpE,EACxB,YAAPoE,EAA0C,iBAAVpE,GAAsBA,IAAUvE,KAAKwK,MAAMjG,GACpE,YAAPoE,EAA0C,kBAAVpE,EACzB,UAAPoE,EAAuBvI,MAAMC,QAAQkE,GAC5B,WAAToE,EAAoC,OAAVpE,IAAoBnE,MAAMC,QAAQkE,IAA4B,iBAAjB,IAAOA,EAAP,YAAAtD,IAAOsD,IACrE,SAAToE,GAAkC,OAAVpE,GAKxBjK,KAAKuP,gBAAgBlB,EAAKpE,GAAO9I,UAQ/CkG,EAAWyK,eAAiBxO,EAAMK,QAChCoO,oBAAqB,SAASjG,GAC5B9L,KAAK6K,UAAS,IAEhBmH,OAAQ,WACNhS,KAAKoJ,WAAWkD,eAAetM,KAAK+L,OAEtCkG,OAAQ,WACHjS,KAAKkS,OAAQlS,KAAKkS,OAAOH,oBAAoB/R,MAC3CA,KAAKoJ,WAAWyB,YAEvBA,SAAU,SAASsH,GACjBnS,KAAKgS,SACFhS,KAAKoS,gBAAgBpS,KAAKoS,iBAC1BD,GAAQnS,KAAKiS,UAElBI,SAAU,WACRrS,KAAKoJ,WAAWyC,eAAe7L,MAC/BA,KAAK6K,YAEPyH,WAAY,WACNtS,KAAKoJ,YACTpJ,KAAKoJ,WAAW4C,iBAAiBhM,OAEnCuS,cAAe,WACb,OAAO,IAETpO,KAAM,SAASlD,GACbjB,KAAKoJ,WAAanI,EAAQmI,WAE1BpJ,KAAK6H,MAAQ7H,KAAKoJ,WAAWvB,MAC7B7H,KAAKwS,gBAAkBxS,KAAKoJ,WAAWrB,SACvC/H,KAAKqI,QAAUrI,KAAKoJ,WAAWf,QAE/BrI,KAAKyI,UAAYzI,KAAKoJ,WAAWX,WAAapB,EAAWG,SAASiB,UAElEzI,KAAKyS,gBAAkBxR,EAAQ6G,OAC/B9H,KAAK8H,OAAS9H,KAAKoJ,WAAW2B,aAAa/K,KAAKyS,iBAEhDzS,KAAKiB,QAAUmF,KAAapG,KAAKiB,YAAiBA,EAAQ6G,OAAO7G,YAAgBA,GAE7EA,EAAQ8K,MAAS/L,KAAK8H,OAAOzH,KAAIL,KAAK8H,OAAOzH,GAAK,QACtDL,KAAK+L,KAAO9K,EAAQ8K,MAAQ,OAC5B/L,KAAK0S,SAAWzR,EAAQyR,UAAY1S,KAAK+L,KAAK4G,QAAQ,aAAa,QAChE3S,KAAKoJ,WAAWnI,QAAQ2R,iBAAgB5S,KAAK0S,SAAW1S,KAAK0S,SAASC,QAAQ,UAAU3S,KAAKoJ,WAAWnI,QAAQ2R,eAAe,MAClI5S,KAAKyL,IAAMzL,KAAK+L,KAAK8G,MAAM,KAAKC,MAChC9S,KAAKkS,OAASjR,EAAQiR,OAEtBlS,KAAK+S,iBAEF9R,EAAQqI,WAAWtJ,KAAKgT,aAAa/R,EAAQqI,YAElD0J,aAAc,SAAS1J,GACrBtJ,KAAKsJ,UAAYA,EACdtJ,KAAK8H,OAAOzH,IAAIL,KAAKsJ,UAAUsC,aAAa,gBAAgB5L,KAAK8H,OAAOzH,IACxEL,KAAK8H,OAAOuG,MAAoC,iBAArBrO,KAAK8H,OAAOuG,MAAmBrO,KAAKsJ,UAAUsC,aAAa,kBAAkB5L,KAAK8H,OAAOuG,MACvHrO,KAAKsJ,UAAUsC,aAAa,kBAAkB5L,KAAK+L,OAGrDxC,SAAU,aAGVC,MAAO,aAGPC,UAAW,WACTzJ,KAAKiT,sBACLjT,KAAKkT,WACLlT,KAAK2J,SAAS3J,KAAKmT,cAAc,GACjCnT,KAAKoT,mBACLpT,KAAKqS,WACLrS,KAAKqT,wBAGPJ,oBAAqB,WACnB,IAcMlH,EAAKuH,EAAWC,EAAMrK,EAAKsK,EAd7B/L,EAAOzH,KAaX,GAVAA,KAAKyT,WACFzT,KAAK8H,OAAO4L,OAAM1T,KAAK8H,OAAOoE,MAAQlM,KAAK8H,OAAO4L,MACrD1T,KAAK2T,kBACL3T,KAAKoS,eAAiB,WACjB3K,EAAKmM,6BACNnM,EAAK4L,wBAITrT,KAAKqS,WACFrS,KAAK8H,OAAOpB,eAAe,SAG5B,IAAI,IAAI3C,KAAQ/D,KAAK8H,OAAOoE,MAC1B,GAAIlM,KAAK8H,OAAOoE,MAAMxF,eAAe3C,GAArC,CAGA,GAFAgI,EAAO/L,KAAK8H,OAAOoE,MAAMnI,GAEtB+B,MAAMC,QAAQgG,GAAO,CACtB,GAAGA,EAAK5K,OAAO,EAAG,SAClBmS,GAAcvH,EAAK,IAAImD,OAAOnD,EAAK,GAAG8G,MAAM,WAG5CS,EAAavH,EAAK8G,MAAM,KACpBpL,EAAKI,MAAMgM,QAAQpM,EAAK6B,UAAU,mBAAmBgK,EAAW,GAAG,OAAOA,EAAWQ,QAAQ,KAQnG,GAJa,OAFbP,EAAQD,EAAWS,WAEDR,EAAQ9L,EAAK2B,WAAWtB,OAAOzH,IAAM,UAGvD6I,EAAOzB,EAAKI,MAAMgM,QAAQpM,EAAK6B,UAAU,mBAAmBiK,EAAM,OACxD,KAAM,wCAAwCA,EAGxDC,EAAgBtK,EAAKyC,aAAa,mBAAqB,IAAM2H,EAAWU,KAAK,KAE7EvM,EAAK2B,WAAW8C,MAAMsH,EAAc/L,EAAK2K,gBAEzC3K,EAAKgM,QAAQ1P,GAAQyP,EAKtBxT,KAAK8H,OAAOmM,iBACbjU,KAAKkU,gBAAkBlU,KAAKoJ,WAAWgC,gBAAgBpL,KAAK8H,OAAOmM,eAAgBjU,KAAKwS,mBAI5FU,SAAU,WAER,IAAIlT,KAAKmU,iBACPnU,KAAKoU,YAAcpU,KAAK6H,MAAMwM,iBAC9BrU,KAAKsJ,UAAUd,YAAYxI,KAAKoU,aAC7BpU,KAAK8H,OAAOwM,OACb,IAAI,IAAI/N,EAAE,EAAGA,EAAEvG,KAAK8H,OAAOwM,MAAMnT,OAAQoF,IACvCvG,KAAKuU,QAAQvU,KAAKwU,QAAQxU,KAAK8H,OAAOwM,MAAM/N,MAOpDkO,UAAW,SAAStS,EAAMuS,EAAMC,GAC9B,IAAIC,EAAW,mBAAmBF,IAE7BA,EADD1U,KAAKqI,QACGrI,KAAKqI,QAAQwM,QAAQH,GADR,OAGbC,IACVxS,EAAOwS,EACPA,EAAQ,MAGV,IAAIG,EAAM9U,KAAK6H,MAAM4M,UAAUtS,EAAMuS,EAAMC,GAE3C,OADAG,EAAIC,WAAa,IAAMH,EAAW,IAC3BE,GAETE,cAAe,SAASC,EAAQ9S,EAAMuS,EAAMC,GAS1C,QAPKD,EADD1U,KAAKqI,QACGrI,KAAKqI,QAAQwM,QAAQH,GADR,OAGbC,IACVxS,EAAOwS,EACPA,EAAQ,MAGH3U,KAAK6H,MAAMmN,cAAcC,EAAQ9S,EAAMuS,EAAMC,IAEtDJ,QAAS,SAASW,GACblV,KAAKoU,aAAapU,KAAKoU,YAAY5L,YAAY0M,IAEpDV,QAAS,SAASvR,GAChB,IAAIkS,EAAQD,EAIR7G,GADOpL,EAAKmS,WAAa,0BACbvC,MAAM,KAAK,GAGvBwC,EAAOrV,KAAKoJ,WAAWgC,gBAAgBnI,EAAKoS,KAAKrV,KAAKwS,iBAGtD8C,EAAW,KAQf,GAPGrS,EAAKqS,WAAUA,EAAWrS,EAAKqS,UAE/BA,IAAyB,IAAbA,IACbA,EAAWtV,KAAKoJ,WAAWgC,gBAAgBkK,EAAUtV,KAAKwS,kBAIhD,UAATnE,EAAkB,CACnB8G,EAASnV,KAAK6H,MAAM0N,sBACpBL,EAAOvQ,SAAS6Q,cAAc,MACzB5J,aAAa,SAAS,UAC3B,IAAI6J,EAAQ9Q,SAAS6Q,cAAc,OAEnCxV,KAAK6H,MAAM6N,gBAAgBP,EAAOD,EAAKO,GAGvCzV,KAAK+S,cAAcxI,KAAK,SAASmJ,GAC/B,IAAIrS,EAAMgU,EAAK3B,GACfwB,EAAKtJ,aAAa,OAAOvK,GACzB6T,EAAKtJ,aAAa,QAAQ3I,EAAK0S,KAAOtU,GACtCoU,EAAM7J,aAAa,MAAMvK,UAIxB,IAAI,QAAQ,SAAS4N,QAAQZ,IAAQ,EAAG,CAC3C8G,EAASnV,KAAK6H,MAAM0N,sBAEpBL,EAAOlV,KAAK6H,MAAM+N,gBACbhK,aAAa,SAAS,UAE3B,IAAIiK,EAAQlR,SAAS6Q,cAAcnH,GACnCwH,EAAMjK,aAAa,WAAW,YAE9B5L,KAAK6H,MAAMiO,gBAAgBX,EAAOD,EAAKW,GAGvC7V,KAAK+S,cAAcxI,KAAK,SAASmJ,GAC/B,IAAIrS,EAAMgU,EAAK3B,GACfwB,EAAKtJ,aAAa,OAAOvK,GACzB6T,EAAKa,YAAc9S,EAAK0S,KAAOtU,EAC/BwU,EAAMjK,aAAa,MAAMvK,UAK3B6T,EAAOC,EAASnV,KAAK6H,MAAM+N,eAC3BT,EAAOvJ,aAAa,SAAS,UAC7BuJ,EAAOY,YAAc9S,EAAK0S,IAG1B3V,KAAK+S,cAAcxI,KAAK,SAASmJ,GAC/B,IAAIrS,EAAMgU,EAAK3B,GACfyB,EAAOvJ,aAAa,OAAOvK,GAC3B8T,EAAOY,YAAc9S,EAAK0S,KAAOtU,IAiBrC,OAbGiU,GAAYJ,KACG,IAAbI,EACDJ,EAAKtJ,aAAa,WAAW,IAG7B5L,KAAK+S,cAAcxI,KAAK,SAASmJ,GAC/BwB,EAAKtJ,aAAa,WAAW0J,EAAS5B,OAKzCzQ,EAAK+S,QAAOd,EAAKH,UAAYG,EAAKH,UAAY,IAAM9R,EAAK+S,OAErDb,GAETvB,0BAA2B,WACzB,GAAI5T,KAAK2T,eAAT,CACA,IAKM7E,EAAIhD,EALN2H,KACAwC,GAAU,EAGd,GAAGjW,KAAKyT,QAEN,IAAI,IAAI1P,KAAQ/D,KAAKyT,QACfzT,KAAKyT,QAAQ/M,eAAe3C,KAEhC+K,GADAhD,EANO9L,KAMOoJ,WAAW6C,UAAUjM,KAAKyT,QAAQ1P,KAClC+H,EAAOhC,WAAa,KAP3B9J,KAQC2T,eAAe5P,KAAU+K,IAAKmH,GAAU,GAChDxC,EAAQ1P,GAAQ+K,GASpB,OALA2E,EAAQhM,KAAOzH,KAAK8J,WACjB9J,KAAK2T,eAAelM,OAASgM,EAAQhM,OAAMwO,GAAU,GAExDjW,KAAK2T,eAAiBF,EAEfwC,IAETC,sBAAuB,WACrB,OAAOlW,KAAK2T,gBAEdP,iBAAkB,WAChB,GAAGpT,KAAKmW,OAEN,GAAGnW,KAAKmW,OAAOC,SAASjV,QACtB,IAAI,IAAIoF,EAAE,EAAGA,EAAEvG,KAAKmW,OAAOE,WAAWlV,OAAQoF,IAC5C,GAAwC,IAArCvG,KAAKmW,OAAOE,WAAW9P,GAAGK,SAAc,CACzC5G,KAAKmW,OAAOE,WAAW9P,GAAG+P,UAAYtW,KAAKuW,gBAC3C,YAMJvW,KAAKmW,OAAOJ,YAAc/V,KAAKuW,iBAIrCA,cAAe,SAASC,GACtB,OAAGxW,KAAKyW,YAAoBzW,KAAKyW,YACzBD,EAAmBxW,KAAK8H,OAAO6M,MAC3B3U,KAAK0W,YAEnBrD,qBAAsB,WACpB,IAAIK,EACJ,GAAG1T,KAAKkU,gBAAiB,CACvBR,EAAOtN,EAAQpG,KAAKkW,yBAClBzK,IAAKzL,KAAKyL,IACVlF,EAAGvG,KAAKyL,IACRkL,GAAc,EAAT3W,KAAKyL,IACVmL,GAAc,EAAT5W,KAAKyL,IAAM,EAChBkJ,MAAO3U,KAAK0W,aAEd,IAAID,EAAczW,KAAKkU,gBAAgBR,GAEpC+C,IAAgBzW,KAAKyW,cACtBzW,KAAKyW,YAAcA,EACnBzW,KAAKoT,mBACLpT,KAAKgS,UAIT,GAAGhS,KAAK+S,cAAc5R,OAAQ,CAC5BuS,EAAO1T,KAAKkW,wBACZ,IAAI,IAAI3P,EAAE,EAAGA,EAAEvG,KAAK+S,cAAc5R,OAAQoF,IACxCvG,KAAK+S,cAAcxM,GAAGmN,KAI5B/J,SAAU,SAASM,GACjBjK,KAAKiK,MAAQA,GAEfH,SAAU,WACR,OAAO9J,KAAKiK,OAEd4M,aAAc,aAGdC,gBAAiB,WACf,OAAO,GAET5M,QAAS,WACP,IAAIzC,EAAOzH,KACXA,KAAKsS,WAAWtS,MAChB6G,EAAM7G,KAAKyT,QAAQ,SAAS1P,EAAKyP,GAC/B/L,EAAK2B,WAAWgD,QAAQoH,EAAc/L,EAAK2K,kBAE7CpS,KAAKyT,QAAU,KACfzT,KAAK2T,eAAiB,KACtB3T,KAAKoS,eAAiB,KACtBpS,KAAKyW,YAAc,KACnBzW,KAAKkU,gBAAkB,KACvBlU,KAAKiK,MAAQ,KACVjK,KAAKsJ,WAAatJ,KAAKsJ,UAAUyN,YAAY/W,KAAKsJ,UAAUyN,WAAWC,YAAYhX,KAAKsJ,WAC3FtJ,KAAKsJ,UAAY,KACjBtJ,KAAKoJ,WAAa,KAClBpJ,KAAK8H,OAAS,KACd9H,KAAK+L,KAAO,KACZ/L,KAAKyL,IAAM,KACXzL,KAAKkS,OAAS,MAEhBiB,WAAY,WACV,GAAGnT,KAAK8H,OAAL,QAAwB,OAAO9H,KAAK8H,OAAL,QAClC,GAAG9H,KAAK8H,OAAL,KAAqB,OAAO9H,KAAK8H,OAAL,KAAoB,GAEnD,IAAIuG,EAAOrO,KAAK8H,OAAOuG,MAAQrO,KAAK8H,OAAO6G,MAK3C,GAJGN,GAAQvI,MAAMC,QAAQsI,KAAOA,EAAOA,EAAK,IACzCA,GAAwB,iBAAhB,IAAOA,EAAP,YAAA1H,IAAO0H,MAAmBA,EAAOA,EAAKA,MAC9CA,GAAQvI,MAAMC,QAAQsI,KAAOA,EAAOA,EAAK,IAEzB,iBAATA,EAAmB,CAC3B,GAAY,WAATA,EAAmB,OAAO,EAC7B,GAAY,YAATA,EAAoB,OAAO,EAC9B,GAAY,YAATA,EAAoB,OAAO,EAC9B,GAAY,WAATA,EAAmB,MAAO,GAC7B,GAAY,WAATA,EAAmB,SACtB,GAAY,UAATA,EAAkB,SAGvB,OAAO,MAETqI,SAAU,WACR,OAAO1W,KAAK8H,OAAO6M,OAAS3U,KAAKyL,KAEnCe,OAAQ,WACNxM,KAAKiX,UAAW,GAElBxK,QAAS,WACPzM,KAAKiX,UAAW,GAElB1K,UAAW,WACT,OAAQvM,KAAKiX,UAEfC,WAAY,WACV,MAAmC,kBAAzBlX,KAAK8H,OAAOuB,SAA+BrJ,KAAK8H,OAAOuB,SACzDrJ,KAAKkS,QAAUlS,KAAKkS,OAAOpK,QAAUhC,MAAMC,QAAQ/F,KAAKkS,OAAOpK,OAAOuB,UAAkBrJ,KAAKkS,OAAOpK,OAAOuB,SAAS4F,QAAQjP,KAAKyL,MAAQ,IACzIzL,KAAKoJ,WAAWnI,QAAQ2O,qBAGlCuH,eAAgB,SAASC,GACvB,IAAIC,KACAC,KAIJzQ,EAAMuQ,EAAI,SAAS7Q,EAAEU,GAChBA,EAAG0N,QACJ2C,EAAKrQ,EAAG0N,OAAS2C,EAAKrQ,EAAG0N,QAAU,EACnC2C,EAAKrQ,EAAG0N,UAEP1N,EAAGsQ,cACJD,EAAKrQ,EAAGsQ,aAAeD,EAAKrQ,EAAGsQ,cAAgB,EAC/CD,EAAKrQ,EAAGsQ,gBAEPtQ,EAAGuQ,SACJF,EAAKrQ,EAAGuQ,QAAUF,EAAKrQ,EAAGuQ,SAAW,EACrCF,EAAKrQ,EAAGuQ,WAEPvQ,EAAGoH,OACJiJ,EAAKrQ,EAAGoH,MAAQiJ,EAAKrQ,EAAGoH,OAAS,EACjCiJ,EAAKrQ,EAAGoH,WAKZxH,EAAMuQ,EAAI,SAAS7Q,EAAEU,GACnB,IAAIlD,EAGuBA,EAAV,iBAAPkD,EAAwBA,EAE1BA,EAAG0N,OAAS2C,EAAKrQ,EAAG0N,QAAQ,EAAU1N,EAAG0N,MACzC1N,EAAGuQ,QAAUF,EAAKrQ,EAAGuQ,SAAS,EAAUvQ,EAAGuQ,OAC3CvQ,EAAGoH,MAAQiJ,EAAKrQ,EAAGoH,OAAO,EAAUpH,EAAGoH,KACvCpH,EAAGsQ,aAAeD,EAAKrQ,EAAGsQ,cAAc,EAAUtQ,EAAGwQ,WACrDxQ,EAAG0N,MAAc1N,EAAG0N,MACpB1N,EAAGuQ,OAAevQ,EAAGuQ,OACrBvQ,EAAGoH,KAAapH,EAAGoH,KACnBpH,EAAGsQ,YAAoBtQ,EAAGsQ,YAC1B5V,IAAesF,GAAI9F,OAAS,GAAWQ,IAAesF,GAClD,OAEZoQ,EAAK9M,KAAKxG,KAIZ,IAAI2T,KAQJ,OAPA7Q,EAAMwQ,EAAK,SAAS9Q,EAAExC,GACpB2T,EAAI3T,GAAQ2T,EAAI3T,IAAS,EACzB2T,EAAI3T,KAEDuT,EAAKvT,GAAQ,IAAGsT,EAAK9Q,GAAKxC,EAAO,IAAM2T,EAAI3T,MAGzCsT,GAETM,UAAW,SAASlM,GAClB,IACE,KAAM,0BAER,MAAMvE,GACJzD,OAAOiK,QAAQtK,MAAM8D,GAGvB,OAAOlH,KAAKiB,QAAQwK,IAEtB1B,qBAAsB,SAAS0F,OAKjCpI,EAAWG,SAAS0D,QAApB,KAAsC7D,EAAWyK,eAAenO,QAC9DmG,SAAU,WACR,OAAO,MAETH,SAAU,WACR3J,KAAK6K,YAEP0H,cAAe,WACb,OAAO,KAkEXlL,EAAWG,SAAS0D,QAAQ0M,OAASvQ,EAAWyK,eAAenO,QAC7D0O,SAAU,WACRrS,KAAK6D,SACD7D,KAAK6X,OACT7X,KAAK6X,MAAMjM,aAAa,OAAO5L,KAAK0S,WAEtCJ,WAAY,WACVtS,KAAK6D,SACD7D,KAAK6X,OACT7X,KAAK6X,MAAMC,gBAAgB,SAE7BnO,SAAU,SAASM,EAAM8N,EAAQC,GAG/B,KAAGhY,KAAK+H,UAAaiQ,KAIR,OAAV/N,QAAmC,IAAVA,EAAuBA,EAAQ,GAClC,iBAAjB,IAAOA,EAAP,YAAAtD,IAAOsD,IAAoBA,EAAQtI,IAAesI,GACjC,iBAAVA,IAAoBA,EAAQ,GAAGA,GAE3CA,IAAUjK,KAAKiY,YAAlB,CAGA,IAAIC,EAAYlY,KAAKmY,SAASlO,GAE9B,GAAGjK,KAAK6X,MAAM5N,QAAUiO,EAAxB,CAIAlY,KAAK6X,MAAM5N,MAAQiO,EAGhBlY,KAAKoY,kBACNpY,KAAKoY,kBAAkBtJ,IAAIoJ,GAErBlY,KAAKqY,WACXrY,KAAKqY,WAAWC,WAAW,KAAKJ,GAE1BlY,KAAKuY,YACXvY,KAAKuY,WAAW5O,SAASuO,GAG3B,IAAIjC,EAAU+B,GAAiBhY,KAAK8J,aAAeG,EAEnDjK,KAAK6W,eAEFkB,EAAS/X,KAAKwY,UAAW,EACoB,WAAxCxY,KAAKoJ,WAAWnI,QAAQ2J,cAA0B5K,KAAKwY,UAAW,GAEvExY,KAAKyY,eAAezY,KAAKyY,cAAczY,KAAK6X,OAG/C7X,KAAK6K,SAASoL,MAEhB1D,cAAe,WACb,IACImG,EADAC,EAAMjT,KAAKkT,KAAKlT,KAAKC,IAAI3F,KAAK0W,WAAWvV,OAAOnB,KAAK8H,OAAO8I,WAAW,EAAE5Q,KAAK8H,OAAO+I,WAAW,GAAG,GAOvG,OAJmC6H,EAAZ,aAApB1Y,KAAK6Y,WAAiC,GAChC,OAAO,SAAS5J,QAAQjP,KAAK6Y,aAAe,EAAS,EACnD,EAEJnT,KAAKiT,IAAI,GAAGjT,KAAKC,IAAIgT,EAAID,KAElClP,MAAO,WACL,IAAI/B,EAAOzH,KAgBX,GAfIA,KAAKiB,QAAQ6X,UAAS9Y,KAAKmW,OAASnW,KAAK+Y,MAAQ/Y,KAAK6H,MAAMmR,kBAAkBhZ,KAAK0W,aACpF1W,KAAK8H,OAAOyP,cAAavX,KAAKuX,YAAcvX,KAAK6H,MAAMoR,wBAAwBjZ,KAAK8H,OAAOyP,cAE9FvX,KAAKwX,OAASxX,KAAK8H,OAAO0P,QACtBxX,KAAKwX,QAAUxX,KAAK8H,OAAO+N,OAAS7V,KAAK8H,OAAO+N,MAAMxH,OACxDrO,KAAKwX,OAASxX,KAAK8H,OAAO+N,MAAMxH,KAAKsE,QAAQ,sDAAsD,MAEjG3S,KAAKwX,QAAUxX,KAAKiB,QAAQiY,iBAC9BlZ,KAAKwX,OAASxX,KAAKiB,QAAQiY,gBAE1BlZ,KAAKiB,QAAQuW,SACdxX,KAAKwX,OAASxX,KAAKiB,QAAQuW,QAI1BxX,KAAKwX,OAEN,GAAmB,aAAhBxX,KAAKwX,OACNxX,KAAK6Y,WAAa,WAClB7Y,KAAK6X,MAAQ7X,KAAK6H,MAAMsR,wBAGrB,GAAmB,UAAhBnZ,KAAKwX,OAAoB,CAC/BxX,KAAK6Y,WAAa,QAClB,IAAIF,EAAM3Y,KAAK8H,OAAO6I,SAAW,EAC7BhL,EAAM3F,KAAK8H,OAAO2I,SAAW/K,KAAKC,IAAI,IAAIgT,EAAI,GAC9CS,EAAO,EACRpZ,KAAK8H,OAAOiI,aACV4I,EAAI3Y,KAAK8H,OAAOiI,aAAY4I,EAAMjT,KAAKkT,KAAKD,EAAI3Y,KAAK8H,OAAOiI,YAAY/P,KAAK8H,OAAOiI,YACpFpK,EAAI3F,KAAK8H,OAAOiI,aAAYpK,EAAMD,KAAKwK,MAAMvK,EAAI3F,KAAK8H,OAAOiI,YAAY/P,KAAK8H,OAAOiI,YACxFqJ,EAAOpZ,KAAK8H,OAAOiI,YAGrB/P,KAAK6X,MAAQ7X,KAAK6H,MAAMwR,cAAcV,EAAIhT,EAAIyT,QAI5C,eACA,YACA,SACA,IACA,MACA,MACA,SACA,SACA,MACA,OACA,SACA,MACA,SACA,SACA,SACA,aACA,UACA,OACA,OACA,MACA,OACA,OACA,aACA,OACA,OACA,OACA,MACA,WACA,WACA,SACA,QACA,aACA,SACA,OACA,QACA,MACA,SACA,IACA,OACA,OACA,QACA,OACA,SACA,MACA,SACA,MACA,OACA,WACA,MACA,QACAnK,QAAQjP,KAAKwX,SAAW,GAE1BxX,KAAK6Y,WAAa7Y,KAAKwX,OACvBxX,KAAKsZ,aAAc,EAEnBtZ,KAAK6X,MAAQ7X,KAAK6H,MAAMsR,qBAIxBnZ,KAAK6Y,WAAa7Y,KAAKwX,OACvBxX,KAAK6X,MAAQ7X,KAAK6H,MAAM0R,kBAAkBvZ,KAAK6Y,kBAKjD7Y,KAAK6Y,WAAa,OAClB7Y,KAAK6X,MAAQ7X,KAAK6H,MAAM0R,kBAAkBvZ,KAAK6Y,iBAIb,IAA1B7Y,KAAK8H,OAAO8I,WAA2B5Q,KAAK6X,MAAMjM,aAAa,YAAY5L,KAAK8H,OAAO8I,gBAC/D,IAAxB5Q,KAAK8H,OAAOgJ,QAAyB9Q,KAAK6X,MAAMjM,aAAa,UAAU5L,KAAK8H,OAAOgJ,cACpD,IAA1B9Q,KAAK8H,OAAO+I,WAA2B7Q,KAAK6X,MAAMjM,aAAa,UAAU,KAAK5L,KAAK8H,OAAO+I,UAAU,MAEhH7Q,KAAKiB,QAAQ6X,QACd9Y,KAAKsJ,UAAUyL,WAAa,WAGzB/U,KAAKiB,QAAQuY,cAAaxZ,KAAK6X,MAAM4B,MAAMC,MAAQ1Z,KAAKiB,QAAQuY,cAGlExZ,KAAK8H,OAAO6R,UAAY3Z,KAAK8H,OAAO8R,UAAY5Z,KAAK8H,OAAOC,YAC7D/H,KAAK6Z,iBAAkB,EACvB7Z,KAAK6X,MAAMZ,UAAW,GAGxBjX,KAAK6X,MACFiC,iBAAiB,SAAS,SAAS5S,GAKlC,GAJAA,EAAE6S,iBACF7S,EAAE8S,kBAGCvS,EAAKK,OAAOC,SACb/H,KAAKiK,MAAQxC,EAAKwC,UADpB,CAKA,IAAI6E,EAAM9O,KAAKiK,MAGXiO,EAAYzQ,EAAK0Q,SAASrJ,GAC3BA,IAAQoJ,IACTlY,KAAKiK,MAAQiO,GAGfzQ,EAAK+Q,UAAW,EAEhB/Q,EAAKoP,eACLpP,EAAKoD,UAAS,MAGf7K,KAAKiB,QAAQgZ,eAAcja,KAAK6X,MAAM4B,MAAMS,OAASla,KAAKiB,QAAQgZ,cAClEja,KAAKiB,QAAQkZ,gBACdna,KAAKyY,cAAgB,SAASxR,GAC5B,GAAIA,EAAJ,CACA,IAAIV,EAAG6T,EAAGnT,EAAGoT,aAEb,GAAGpT,EAAGoT,aAAepT,EAAGqT,aAEtB,IADA/T,EAAE,EACIU,EAAGoT,aAAepT,EAAGqT,aAAa,KACnC/T,EAAE,MACLA,IACA6T,IACAnT,EAAGwS,MAAMS,OAASE,EAAG,SAGpB,CAEH,IADA7T,EAAE,EACIU,EAAGoT,cAAgBpT,EAAGqT,aAAa,KACpC/T,EAAE,MACLA,IACA6T,IACAnT,EAAGwS,MAAMS,OAASE,EAAG,KAEvBnT,EAAGwS,MAAMS,OAAUE,EAAG,EAAG,QAI7Bpa,KAAK6X,MAAMiC,iBAAiB,QAAQ,SAAS5S,GAC3CO,EAAKgR,cAAczY,QAErBA,KAAK6X,MAAMiC,iBAAiB,SAAS,SAAS5S,GAC5CO,EAAKgR,cAAczY,QAErBA,KAAKyY,iBAGJzY,KAAKwX,QAAQxX,KAAK6X,MAAMjM,aAAa,oBAAoB5L,KAAKwX,QAEjExX,KAAKua,QAAUva,KAAK6H,MAAM2S,eAAexa,KAAK+Y,MAAO/Y,KAAK6X,MAAO7X,KAAKuX,aACtEvX,KAAKsJ,UAAUd,YAAYxI,KAAKua,SAGhC9W,OAAOyB,sBAAsB,WAIxBuC,EAAKoQ,MAAMd,YAAYtP,EAAKgT,kBAC5BhT,EAAKgR,eAAehR,EAAKgR,cAAchR,EAAKoQ,SAI9C7X,KAAK8H,OAAOC,UACb/H,KAAK+H,SAAW/H,KAAKoJ,WAAWgC,gBAAgBpL,KAAK8H,OAAOC,SAAU/H,KAAKwS,iBAC3ExS,KAAK6W,gBAGL7W,KAAK6W,eAxUX,WACE,OAAQ7W,KAAKwX,QACX,IAAK,eACHxX,KAAK0a,MAAQ/V,SAAS6Q,cAAc,OACpCxV,KAAK0a,MAAMtQ,UAAX,uJAIqBpK,KAAKwX,OAJ1B,+BAKmBxX,KAAK+L,KALxB,oEAOS/L,KAAKyI,UAAU,oBAPxB,wCAUAzI,KAAK2a,UAAYhW,SAAS6Q,cAAc,OACxCxV,KAAK2a,UAAUlB,MAAf,kJAMAzZ,KAAK2a,UAAUC,UAAY,aAC3B5a,KAAK0a,MAAMG,aAAa7a,KAAK2a,UAAW3a,KAAK0a,MAAMtE,SAAS,IAC5DpW,KAAKua,QAAQ/R,YAAYxI,KAAK0a,OAC9B,MACF,IAAK,aACH1a,KAAK0a,MAAQ/V,SAAS6Q,cAAc,OACpCxV,KAAK0a,MAAMtQ,UAAX,uJAIqBpK,KAAKwX,OAJ1B,+BAKmBxX,KAAK+L,KALxB,mEAOS/L,KAAKyI,UAAU,kBAPxB,wCAUAzI,KAAKua,QAAQ/R,YAAYxI,KAAK0a,SAsSXxW,MAAMlE,OAE7BwM,OAAQ,WACFxM,KAAK6Z,kBACP7Z,KAAK6X,MAAMZ,UAAW,GAGxBjX,KAAK6D,UAEP4I,QAAS,WACPzM,KAAK6X,MAAMZ,UAAW,EAEtBjX,KAAK6D,UAEP4W,gBAAiB,WACf,IAAiBxZ,EAAbwG,EAAOzH,KAGX,GAAGA,KAAKsZ,YAEN,GAAGtZ,KAAKiB,QAAQ6Z,UACb,OAAO,UAAU7L,QAAQjP,KAAK6Y,aAAe,GAC9CpV,OAAOsX,QAAUtX,OAAOsX,OAAO/W,IAAMP,OAAOsX,OAAO/W,GAAGgX,SAEtD/Z,EAAUmF,MACR6U,QAA2B,SAAlBxT,EAAKoR,WAAqB,QAAU,SAC7CqC,kBAAkB,EAClBxB,MAAO,OACPQ,OAAQ,KACR7S,EAAW4T,QAAQD,SAASvT,EAAKxG,QAAQka,sBAE3C1X,OAAOsX,OAAOtT,EAAKoQ,OAAOmD,SAAS/Z,GAEnCwG,EAAK2Q,kBAAoB3U,OAAOsX,OAAOtT,EAAKoQ,OAAOmD,SAAS,YAE5DvT,EAAK2Q,kBAAkBgD,KAAK,WAE1B,IAAItM,EAAMrL,OAAOsX,OAAO,QAAQtT,EAAK2Q,kBAAkBtJ,MAAM,UAE7DrL,OAAOsX,OAAO,4DAA4DjM,GAAKuM,SAE/E5T,EAAKoQ,MAAM5N,MAAQ6E,EAAIwM,OACvB7T,EAAKwC,MAAQxC,EAAKoQ,MAAM5N,MACxBxC,EAAK+Q,UAAW,EAChB/Q,EAAKoD,UAAS,UAIb,GAAwB,aAApB7K,KAAK6Y,YAA6BpV,OAAO8X,WAChDvb,KAAKwb,qBAAuB7W,SAAS6Q,cAAc,OACnDxV,KAAK6X,MAAMd,WAAW8D,aAAa7a,KAAKwb,qBAAqBxb,KAAK6X,OAClE7X,KAAK6X,MAAM4B,MAAMgC,QAAU,OAE3Bxa,EAAUmF,KAAWiB,EAAW4T,QAAQ5C,YACtC/O,UAAWtJ,KAAKwb,qBAChBE,mBAAmB,IAGrB1b,KAAKqY,WAAa,IAAI5U,OAAO8X,WAAWta,GAAS0a,OAEjD3b,KAAKqY,WAAWC,WAAW,KAAKtY,KAAK8J,YAErC9J,KAAKqY,WAAWhO,GAAG,SAAS,WAC1B,IAAIyE,EAAMrH,EAAK4Q,WAAWuD,aAC1BnU,EAAKoQ,MAAM5N,MAAQ6E,EACnBrH,EAAKwC,MAAQ6E,EACbrH,EAAK+Q,UAAW,EAChB/Q,EAAKoD,UAAS,UAIb,GAAGpH,OAAOoY,IAAK,CAClB,IAAIC,EAAO9b,KAAK6Y,WAEJ,QAATiD,GAA2B,QAATA,GAA2B,MAATA,IACrCA,EAAO,SAGT9b,KAAK+b,cAAgBpX,SAAS6Q,cAAc,OAC5CxV,KAAK+b,cAActC,MAAMC,MAAQ,OACjC1Z,KAAK+b,cAActC,MAAMuC,SAAW,WACpChc,KAAK+b,cAActC,MAAMS,OAAS,QAClCla,KAAK6X,MAAMd,WAAW8D,aAAa7a,KAAK+b,cAAc/b,KAAK6X,OAC3D7X,KAAK6X,MAAM4B,MAAMgC,QAAU,OAC3Bzb,KAAKuY,WAAa9U,OAAOoY,IAAII,KAAKjc,KAAK+b,eAEvC/b,KAAKuY,WAAW5O,SAAS3J,KAAK8J,YAG3BzC,EAAW4T,QAAQY,IAAIhU,OAAO7H,KAAKuY,WAAW2D,SAAS,aAAa7U,EAAW4T,QAAQY,IAAIhU,QAE9FiU,EAAOrY,OAAOoY,IAAIM,QAAQ,YAAYL,KAC7B9b,KAAKuY,WAAW6D,aAAaC,QAAQ,IAAIP,EAAKQ,MAGvDtc,KAAKuY,WAAWlO,GAAG,SAAS,WAC1B,IAAIyE,EAAMrH,EAAK8Q,WAAWzO,WAC1BrC,EAAKoQ,MAAM5N,MAAQ6E,EACnBrH,EAAKoP,eACLpP,EAAK+Q,UAAW,EAChB/Q,EAAKoD,UAAS,KAKpBpD,EAAKI,MAAM4S,gBAAgBhT,EAAKoQ,QAElChB,aAAc,WACZ7W,KAAKiK,MAAQjK,KAAK6X,MAAM5N,MACC,iBAAfjK,KAAKiK,QAAoBjK,KAAKiK,MAAQ,IA5YpD,WACE,OAAQjK,KAAKwX,QACX,IAAK,eACCxX,KAAK2a,YACP3a,KAAK2a,UAAU4B,IAAMvc,KAAKiK,SA0YR/F,MAAMlE,MAE5BA,KAAKiY,WAAajY,KAAKiK,OAEzBC,QAAS,WAEJlK,KAAKoY,kBACNpY,KAAKoY,kBAAkBlO,UAEjBlK,KAAKqY,WACXrY,KAAKqY,WAAWmE,SAEVxc,KAAKuY,YACXvY,KAAKuY,WAAWrO,UAIlBlK,KAAK+H,SAAW,KACb/H,KAAK6X,OAAS7X,KAAK6X,MAAMd,YAAY/W,KAAK6X,MAAMd,WAAWC,YAAYhX,KAAK6X,OAC5E7X,KAAK+Y,OAAS/Y,KAAK+Y,MAAMhC,YAAY/W,KAAK+Y,MAAMhC,WAAWC,YAAYhX,KAAK+Y,OAC5E/Y,KAAKuX,aAAevX,KAAKuX,YAAYR,YAAY/W,KAAKuX,YAAYR,WAAWC,YAAYhX,KAAKuX,aAEjGvX,KAAK6D,UAKPsU,SAAU,SAASlO,GACjB,OAAOA,GAKToJ,qBAAsB,WACpB,IAAiBK,EAGd1T,KAAK+H,WACN2L,EAAO1T,KAAKkW,wBACZlW,KAAK2J,SAAS3J,KAAK+H,SAAS2L,IAAM,GAAM,IAG1C1T,KAAK6D,UAEPkG,qBAAsB,SAAS0F,GAC7B,IAAIhI,EAAOzH,KAEX,GAA2C,WAAxCA,KAAKoJ,WAAWnI,QAAQ2J,kBACtB,IAAI5K,KAAKwY,UAAYxY,KAAKyc,yBAAyBzc,KAAKoJ,WAAWnI,QAAQ2J,YAAa,OAE7F5K,KAAKyc,uBAAyBzc,KAAKoJ,WAAWnI,QAAQ2J,YAEtD,IAAI8R,KACJ7V,EAAM4I,EAAO,SAASlJ,EAAEnD,GACnBA,EAAM2I,OAAStE,EAAKsE,MACrB2Q,EAASnS,KAAKnH,EAAMuM,WAIrB+M,EAASvb,OACVnB,KAAK6H,MAAM8U,cAAc3c,KAAK6X,MAAO6E,EAAS1I,KAAK,MAAM,KAGzDhU,KAAK6H,MAAM+U,iBAAiB5c,KAAK6X,UAKvCxQ,EAAWG,SAAS0D,QAAQ2R,OAASxV,EAAWG,SAAS0D,QAAQ0M,OAAOjU,QACtEwU,SAAU,SAASlO,GACjB,OAAQA,EAAM,IAAI0I,QAAQ,gBAAgB,KAE5CJ,cAAe,WACb,OAAO,GAETzI,SAAU,WACR,OAAkB,EAAX9J,KAAKiK,SAIhB5C,EAAWG,SAAS0D,QAAQ4R,QAAUzV,EAAWG,SAAS0D,QAAQ2R,OAAOlZ,QACvEwU,SAAU,SAASlO,GAEjB,OADAA,GAAgB,IACH0I,QAAQ,YAAY,KAEnCJ,cAAe,WACb,OAAO,KAIXlL,EAAWG,SAAS0D,QAAQ6R,OAAS1V,EAAWyK,eAAenO,QAC7DwP,WAAY,WACV,OAAO/M,KAAWpG,KAAK8H,OAAL,cAEpBgP,gBAAiB,WACf,OAAO9W,KAAKkL,SAEdmH,SAAU,WAER,GADArS,KAAK6D,SACF7D,KAAKkL,QACN,IAAI,IAAI3E,KAAKvG,KAAKkL,QACZlL,KAAKkL,QAAQxE,eAAeH,IAChCvG,KAAKkL,QAAQ3E,GAAG8L,YAItBC,WAAY,WAEV,GADAtS,KAAK6D,SACF7D,KAAKkL,QACN,IAAI,IAAI3E,KAAKvG,KAAKkL,QACZlL,KAAKkL,QAAQxE,eAAeH,IAChCvG,KAAKkL,QAAQ3E,GAAG+L,cAItBC,cAAe,WACb,OAAO7M,KAAKC,IAAID,KAAKiT,IAAI,GAAG3Y,KAAKgd,UAAU,IAE7CxQ,OAAQ,WAKN,GAJGxM,KAAKid,kBAAiBjd,KAAKid,gBAAgBhG,UAAW,GACtDjX,KAAKkd,qBAAoBld,KAAKkd,mBAAmBjG,UAAW,GAE/DjX,KAAK6D,SACF7D,KAAKkL,QACN,IAAI,IAAI3E,KAAKvG,KAAKkL,QACZlL,KAAKkL,QAAQxE,eAAeH,IAChCvG,KAAKkL,QAAQ3E,GAAGiG,UAItBC,QAAS,WAMP,GALGzM,KAAKid,kBAAiBjd,KAAKid,gBAAgBhG,UAAW,GACtDjX,KAAKkd,qBAAoBld,KAAKkd,mBAAmBjG,UAAW,GAC/DjX,KAAKmd,eAELnd,KAAK6D,SACF7D,KAAKkL,QACN,IAAI,IAAI3E,KAAKvG,KAAKkL,QACZlL,KAAKkL,QAAQxE,eAAeH,IAChCvG,KAAKkL,QAAQ3E,GAAGkG,WAItB2Q,cAAe,WACb,IAAiB7W,EAAGyG,EAAhBvF,EAAOzH,KAEX,GAAIA,KAAKqd,cAAT,CAaA,IAAI/T,EAEJ,GAZAtJ,KAAKsd,eAAiBxW,IAAY9G,KAAKkL,SACvClL,KAAKsd,eAAiBtd,KAAKsd,eAAeC,KAAK,SAASxa,EAAEya,GACxD,IAAIC,EAAShW,EAAKyD,QAAQnI,GAAG+E,OAAO4V,cAChCC,EAASlW,EAAKyD,QAAQsS,GAAG1V,OAAO4V,cAIpC,MAHqB,iBAAXD,IAAqBA,EAAS,KACnB,iBAAXE,IAAqBA,EAAS,KAEjCF,EAASE,IAKC,SAAhB3d,KAAKwX,OAAmB,CACzB,IAAIoG,KA6CJ,IA5CA/W,EAAM7G,KAAKsd,eAAgB,SAAStQ,EAAEvB,GACpC,IAAIK,EAASrE,EAAKyD,QAAQO,GAC1B,IAAGK,EAAO+R,iBAAV,CAKA,IAJA,IAAIC,GAAQ,EACRpE,EAAQ5N,EAAO7K,QAAQ8c,OAAQ,EAAKjS,EAAO7K,QAAQ+c,cAAgBlS,EAAOyG,gBAC1E2H,EAASpO,EAAO7K,QAAQ8c,OAAQ,EAAIjS,EAAOxC,UAAU+Q,aAEjD9T,EAAE,EAAGA,EAAEqX,EAAKzc,OAAQoF,IAEvBqX,EAAKrX,GAAGmT,MAAQA,GAAS,MAGtBQ,GAAwB,GAAb0D,EAAKrX,GAAG0X,KAAW/D,GAAuB,EAAb0D,EAAKrX,GAAG2X,KAAShE,KAC3D4D,EAAQvX,IAMD,IAAVuX,IACDF,EAAKrT,MACHmP,MAAO,EACPuE,KAAM,OACNC,KAAM,EACNhT,aAEF4S,EAAQF,EAAKzc,OAAO,GAGtByc,EAAKE,GAAO5S,QAAQX,MAClBkB,IAAKA,EAELiO,MAAOA,EACPQ,OAAQA,IAEV0D,EAAKE,GAAOpE,OAASA,EACrBkE,EAAKE,GAAOG,KAAOvY,KAAKiT,IAAIiF,EAAKE,GAAOG,KAAK/D,GAC7C0D,EAAKE,GAAOI,KAAOxY,KAAKC,IAAIiY,EAAKE,GAAOI,KAAKhE,MAO3C3T,EAAE,EAAGA,EAAEqX,EAAKzc,OAAQoF,IACtB,GAAGqX,EAAKrX,GAAGmT,MAAQ,GAAI,CACrB,IAAIyE,GAAU,EACVC,EAAY,EAChB,IAAIpR,EAAE,EAAGA,EAAE4Q,EAAKrX,GAAG2E,QAAQ/J,OAAQ6L,KAClB,IAAZmR,EAAmBA,EAAUnR,EACxB4Q,EAAKrX,GAAG2E,QAAQ8B,GAAG0M,MAAQkE,EAAKrX,GAAG2E,QAAQiT,GAASzE,QAAOyE,EAAUnR,GAC7E4Q,EAAKrX,GAAG2E,QAAQ8B,GAAG0M,OAAS,GAAGkE,EAAKrX,GAAGmT,MACvCkE,EAAKrX,GAAG2E,QAAQ8B,GAAG0M,MAAQhU,KAAKwK,MAAM0N,EAAKrX,GAAG2E,QAAQ8B,GAAG0M,OACzD0E,GAAaR,EAAKrX,GAAG2E,QAAQ8B,GAAG0M,MAE/B0E,EAAY,KAAIR,EAAKrX,GAAG2E,QAAQiT,GAASzE,OAAS,GAAG0E,GACxDR,EAAKrX,GAAGmT,MAAQ,GAKpB,GAAG1Z,KAAKqe,SAAW1c,IAAeic,GAAO,OAAO,EAKhD,IAJA5d,KAAKqe,OAAS1c,IAAeic,GAG7BtU,EAAY3E,SAAS6Q,cAAc,OAC/BjP,EAAE,EAAGA,EAAEqX,EAAKzc,OAAQoF,IAAK,CAC3B,IAAI+X,EAAMte,KAAK6H,MAAM0W,aAErB,IADAjV,EAAUd,YAAY8V,GAClBtR,EAAE,EAAGA,EAAE4Q,EAAKrX,GAAG2E,QAAQ/J,OAAQ6L,IAAK,CACtC,IAAIvB,EAAMmS,EAAKrX,GAAG2E,QAAQ8B,GAAGvB,IACzBK,EAAS9L,KAAKkL,QAAQO,GAEvBK,EAAO7K,QAAQ8c,OAAQjS,EAAOxC,UAAUmQ,MAAMgC,QAAU,OACtDzb,KAAK6H,MAAM2W,kBAAkB1S,EAAOxC,UAAUsU,EAAKrX,GAAG2E,QAAQ8B,GAAG0M,OACtE4E,EAAI9V,YAAYsD,EAAOxC,kBAM3BA,EAAY3E,SAAS6Q,cAAc,OACnC3O,EAAM7G,KAAKsd,eAAgB,SAAS/W,EAAEkF,GACpC,IAAIK,EAASrE,EAAKyD,QAAQO,GAC1B,IAAGK,EAAO+R,iBAAV,CACA,IAAIS,EAAM7W,EAAKI,MAAM0W,aACrBjV,EAAUd,YAAY8V,GAEnBxS,EAAO7K,QAAQ8c,OAAQjS,EAAOxC,UAAUmQ,MAAMgC,QAAU,OACtDhU,EAAKI,MAAM2W,kBAAkB1S,EAAOxC,UAAU,IACnDgV,EAAI9V,YAAYsD,EAAOxC,cAG3BtJ,KAAKqd,cAAcjT,UAAY,GAC/BpK,KAAKqd,cAAc7U,YAAYc,KAEjCmV,kBAAmB,SAAShT,GAE1B,IAAI3D,EAAS9H,KAAK8H,OAAO2J,WAAWhG,OACpC3D,EAAS1B,KAAW0B,GACpB,IAAI4W,IAAU1e,KAAK8H,OAAO2J,WAAWhG,GAGrC,GAAGzL,KAAK8H,OAAO4J,kBACb,IAAI,IAAInL,KAAKvG,KAAK8H,OAAO4J,kBAAmB,CAC1C,GAAI1R,KAAK8H,OAAO4J,kBAAkBhL,eAAeH,GACrC,IAAIwK,OAAOxK,GACd/E,KAAKiK,KACZ3D,EAAO4G,MAAQ5G,EAAO4G,UACtB5G,EAAO4G,MAAMnE,KAAKvK,KAAK8H,OAAO4J,kBAAkBnL,IAChDmY,GAAU,GAUhB,OAJIA,GAAW1e,KAAK8H,OAAO8J,sBAAoE,WAA5CjL,IAAO3G,KAAK8H,OAAO8J,wBACpE9J,EAAS1B,KAAWpG,KAAK8H,OAAO8J,uBAG3B9J,GAETyB,SAAU,WACRvJ,KAAK6D,SAEL7D,KAAKkL,WACLlL,KAAK2e,kBACL,IAAIlX,EAAOzH,KAUX,GARAA,KAAKwX,OAASxX,KAAKiB,QAAQod,QAAUre,KAAKiB,QAAQ2d,eAAiB5e,KAAK8H,OAAO0P,QAAUxX,KAAKoJ,WAAWnI,QAAQ2d,eAAiB,SAElI5e,KAAK8H,OAAO2J,WAAazR,KAAK8H,OAAO2J,eAErCzR,KAAK6e,SAAW,EAChB7e,KAAKgd,SAAW,EAGbhd,KAAKiB,QAAQ6d,UACdjY,EAAM7G,KAAK8H,OAAO2J,WAAY,SAAShG,EAAI3D,GACzC,IAAIgE,EAASrE,EAAK2B,WAAWH,eAAenB,GAC5CL,EAAKyD,QAAQO,GAAOhE,EAAK2B,WAAWD,aAAa2C,GAC/C1C,WAAY3B,EAAK2B,WACjBtB,OAAQA,EACRiE,KAAMtE,EAAKsE,KAAK,IAAIN,EACpByG,OAAQzK,EACRqR,SAAS,EACTzP,UAAU,IAEZ5B,EAAKyD,QAAQO,GAAKlC,WAElB,IAAImQ,EAAQjS,EAAKyD,QAAQO,GAAKxK,QAAQ8c,OAAQ,EAAKtW,EAAKyD,QAAQO,GAAKxK,QAAQ+c,cAAgBvW,EAAKyD,QAAQO,GAAK8G,gBAE/G9K,EAAKoX,UAAYnF,EACjBjS,EAAKuV,UAAYtD,IAEnB1Z,KAAKmU,gBAAiB,MAGnB,IAAGnU,KAAKiB,QAAQ8d,MAEnB,KAAM,oBAIF/e,KAAK8H,OAAOkX,oBACXhf,KAAKoJ,WAAWnI,QAAQge,uBAAyBjf,KAAKiB,QAAQge,uBAC/Djf,KAAK8H,OAAOkX,qBACZnY,EAAM7G,KAAK8H,OAAO2J,WAAY,SAASyN,EAAEC,GACpC1X,EAAKyP,YAAYzL,IAAKyT,EAAGpX,OAAQqX,KAClC1X,EAAKK,OAAOkX,kBAAkBzU,KAAK2U,MAKvCzX,EAAKK,OAAOkX,kBAAoBlY,IAAYW,EAAKK,OAAO2J,aAK5DhK,EAAKuV,UAAY,EAEjBnW,EAAM7G,KAAK8H,OAAOkX,kBAAmB,SAASzY,EAAEkF,GAC9ChE,EAAK2X,kBAAkB3T,GAAK,GAEzBhE,EAAKyD,QAAQO,KACdhE,EAAKoX,SAAWnZ,KAAKC,IAAI8B,EAAKoX,SAAUpX,EAAKyD,QAAQO,GAAKxK,QAAQ+c,cAAgBvW,EAAKyD,QAAQO,GAAK8G,iBACpG9K,EAAKuV,UAAavV,EAAKyD,QAAQO,GAAKxK,QAAQ+c,cAAgBvW,EAAKyD,QAAQO,GAAK8G,mBAMpFvS,KAAKsd,eAAiBxW,IAAY9G,KAAKkL,SACvClL,KAAKsd,eAAiBtd,KAAKsd,eAAeC,KAAK,SAASxa,EAAEya,GACxD,IAAIC,EAAShW,EAAKyD,QAAQnI,GAAG+E,OAAO4V,cAChCC,EAASlW,EAAKyD,QAAQsS,GAAG1V,OAAO4V,cAIpC,MAHqB,iBAAXD,IAAqBA,EAAS,KACnB,iBAAXE,IAAqBA,EAAS,KAEjCF,EAASE,KAGpBnU,MAAO,WACL,IAAI/B,EAAOzH,KAGX,GAAGA,KAAKiB,QAAQ6d,UACd9e,KAAKqf,cAAgBrf,KAAKsJ,UAC1BzC,EAAM7G,KAAKkL,QAAS,SAASO,EAAIK,GAC/B,IAAIqJ,EAAS1N,EAAKI,MAAMyX,eACxB7X,EAAK4X,cAAc7W,YAAY2M,GAE/BrJ,EAAOkH,aAAamC,GACpBrJ,EAAOtC,QACPsC,EAAOrC,YAEJhC,EAAKyD,QAAQO,GAAKxK,QAAQ8c,SAC3B5I,EAAOsE,MAAMgC,QAAU,QAEtBhU,EAAKyD,QAAQO,GAAKxK,QAAQuY,cAC3BrE,EAAOsE,MAAMC,MAAQjS,EAAKyD,QAAQO,GAAKxK,QAAQuY,mBAKhD,IAAGxZ,KAAKiB,QAAQ8d,MAEnB,KAAM,oBAIN/e,KAAKmW,OAASxR,SAAS6Q,cAAc,QACrCxV,KAAKmW,OAAOJ,YAAc/V,KAAK0W,WAC/B1W,KAAK2U,MAAQ3U,KAAK6H,MAAM0X,UAAUvf,KAAKmW,QACvCnW,KAAKsJ,UAAUd,YAAYxI,KAAK2U,OAChC3U,KAAKsJ,UAAUmQ,MAAMuC,SAAW,WAGhChc,KAAKwf,gBAAkBxf,KAAK6H,MAAM4X,WAClCzf,KAAK0f,kBAAoB1f,KAAK6H,MAAMsR,mBACpCnZ,KAAK0f,kBAAkBjG,MAAMS,OAAS,QACtCla,KAAK0f,kBAAkBjG,MAAMC,MAAQ,QACrC1Z,KAAK0f,kBAAkBjG,MAAMgC,QAAU,QACvCzb,KAAK2f,cAAgB3f,KAAKyU,UAAU,OAAO,OAAO,QAClDzU,KAAK2f,cAAc7F,iBAAiB,QAAQ,SAAS5S,GACnDA,EAAE6S,iBACF7S,EAAE8S,kBACFvS,EAAKmY,aAEP5f,KAAK6f,gBAAkB7f,KAAKyU,UAAU,SAAS,SAAS,UACxDzU,KAAK6f,gBAAgB/F,iBAAiB,QAAQ,SAAS5S,GACrDA,EAAE6S,iBACF7S,EAAE8S,kBACFvS,EAAK0V,iBAEPnd,KAAKwf,gBAAgBhX,YAAYxI,KAAK0f,mBACtC1f,KAAKwf,gBAAgBhX,YAAYxI,KAAK2f,eACtC3f,KAAKwf,gBAAgBhX,YAAYxI,KAAK6f,iBAGtC7f,KAAK8f,mBAAqB9f,KAAK6H,MAAM4X,WACrCzf,KAAK+f,iBAAmBpb,SAAS6Q,cAAc,OAC/CxV,KAAK+f,iBAAiBtG,MAAMC,MAAQ,QACpC1Z,KAAK+f,iBAAiBtG,MAAMuG,UAAY,QACxChgB,KAAK+f,iBAAiBtG,MAAMwG,QAAU,QACtCjgB,KAAK+f,iBAAiBtG,MAAMyG,UAAY,OACxClgB,KAAK+f,iBAAiBtG,MAAM0G,UAAY,SACxCngB,KAAK+f,iBAAiBtG,MAAM2G,YAAc,MAC1CpgB,KAAK+f,iBAAiBnU,aAAa,QAAS,qBAC5C5L,KAAKqgB,gBAAkBrgB,KAAKyU,UAAU,MAAM,MAAM,OAClDzU,KAAKsgB,kBAAoBtgB,KAAK6H,MAAM0R,kBAAkB,QACtDvZ,KAAKsgB,kBAAkB1U,aAAa,cAAc,oBAClD5L,KAAKsgB,kBAAkB7G,MAAMC,MAAQ,QACrC1Z,KAAKsgB,kBAAkB7G,MAAM8G,aAAe,IAC5CvgB,KAAKsgB,kBAAkB7G,MAAMgC,QAAU,eACvCzb,KAAKqgB,gBAAgBvG,iBAAiB,QAAQ,SAAS5S,GAGrD,GAFAA,EAAE6S,iBACF7S,EAAE8S,kBACCvS,EAAK6Y,kBAAkBrW,MAAO,CAC/B,GAAGxC,EAAKyD,QAAQzD,EAAK6Y,kBAAkBrW,OAErC,YADAxG,OAAO+c,MAAM,8CAIf/Y,EAAK2X,kBAAkB3X,EAAK6Y,kBAAkBrW,OAC3CxC,EAAKyD,QAAQzD,EAAK6Y,kBAAkBrW,QACrCxC,EAAKyD,QAAQzD,EAAK6Y,kBAAkBrW,OAAOwC,UAE7ChF,EAAKoD,UAAS,MAGlB7K,KAAK8f,mBAAmBtX,YAAYxI,KAAK+f,kBACzC/f,KAAK8f,mBAAmBtX,YAAYxI,KAAKsgB,mBACzCtgB,KAAK8f,mBAAmBtX,YAAYxI,KAAKqgB,iBACzC,IAAII,EAAS9b,SAAS6Q,cAAc,OACpCiL,EAAOhH,MAAMiH,MAAQ,OACrB1gB,KAAK8f,mBAAmBtX,YAAYiY,GAIjCzgB,KAAK8H,OAAOyP,cACbvX,KAAKuX,YAAcvX,KAAK6H,MAAM8Y,eAAe3gB,KAAK8H,OAAOyP,aACzDvX,KAAKsJ,UAAUd,YAAYxI,KAAKuX,cAIlCvX,KAAK4gB,aAAejc,SAAS6Q,cAAc,OAC3CxV,KAAKsJ,UAAUd,YAAYxI,KAAK4gB,cAGhC5gB,KAAKqf,cAAgBrf,KAAK6H,MAAMgZ,mBAChC7gB,KAAKsJ,UAAUd,YAAYxI,KAAKqf,eAGhCrf,KAAKqd,cAAgBrd,KAAK6H,MAAMiZ,mBAChC9gB,KAAKqf,cAAc7W,YAAYxI,KAAKqd,eAEpCxW,EAAM7G,KAAKkL,QAAS,SAASO,EAAIK,GAC/B,IAAIqJ,EAAS1N,EAAKI,MAAMkZ,gBACxBtZ,EAAK4V,cAAc7U,YAAY2M,GAE/BrJ,EAAOkH,aAAamC,GACpBrJ,EAAOtC,QACPsC,EAAOrC,cAITzJ,KAAKghB,eAAiBhhB,KAAK6H,MAAMoZ,wBACjCjhB,KAAKkhB,kBAAoBlhB,KAAK6H,MAAMoZ,wBACpCjhB,KAAKmhB,qBAAuBnhB,KAAK6H,MAAMoZ,wBACvCjhB,KAAK2U,MAAMnM,YAAYxI,KAAKghB,gBAC5BhhB,KAAK2U,MAAMnM,YAAYxI,KAAKkhB,mBAC5BlhB,KAAK2U,MAAMnM,YAAYxI,KAAKmhB,sBAG5BnhB,KAAKohB,WAAY,EACjBphB,KAAKqhB,cAAgBrhB,KAAKyU,UAAU,GAAG,WAAWzU,KAAKyI,UAAU,oBACjEzI,KAAKghB,eAAexY,YAAYxI,KAAKqhB,eACrCrhB,KAAKqhB,cAAcvH,iBAAiB,QAAQ,SAAS5S,GACnDA,EAAE6S,iBACF7S,EAAE8S,kBACCvS,EAAK2Z,WACN3Z,EAAK4X,cAAc5F,MAAMgC,QAAU,GACnChU,EAAK2Z,WAAY,EACjB3Z,EAAKuN,cAAcvN,EAAK4Z,cAAc,GAAG,WAAW5Z,EAAKgB,UAAU,sBAGnEhB,EAAK4X,cAAc5F,MAAMgC,QAAU,OACnChU,EAAK2Z,WAAY,EACjB3Z,EAAKuN,cAAcvN,EAAK4Z,cAAc,GAAG,SAAS5Z,EAAKgB,UAAU,qBAKlEzI,KAAKiB,QAAQmgB,WACdpa,EAAShH,KAAKqhB,cAAc,SAI3BrhB,KAAK8H,OAAO7G,cAA2D,IAAzCjB,KAAK8H,OAAO7G,QAAQqgB,iBAChDthB,KAAK8H,OAAO7G,QAAQqgB,mBAAkBthB,KAAKqhB,cAAc5H,MAAMgC,QAAU,QAEtEzb,KAAKoJ,WAAWnI,QAAQqgB,mBAC9BthB,KAAKqhB,cAAc5H,MAAMgC,QAAU,QAIrCzb,KAAKid,gBAAkBjd,KAAKyU,UAAU,OAAO,OAAO,aACpDzU,KAAKid,gBAAgBnD,iBAAiB,QAAQ,SAAS5S,GACrDA,EAAE6S,iBACF7S,EAAE8S,kBACFvS,EAAK8Z,mBAEPvhB,KAAKkhB,kBAAkB1Y,YAAYxI,KAAKid,iBACxCjd,KAAKkhB,kBAAkB1Y,YAAYxI,KAAKwf,iBAGrCxf,KAAK8H,OAAO7G,cAA4D,IAA1CjB,KAAK8H,OAAO7G,QAAQugB,kBAChDxhB,KAAK8H,OAAO7G,QAAQugB,oBAAmBxhB,KAAKid,gBAAgBxD,MAAMgC,QAAU,QAEzEzb,KAAKoJ,WAAWnI,QAAQugB,oBAC9BxhB,KAAKid,gBAAgBxD,MAAMgC,QAAU,QAIvCzb,KAAKkd,mBAAqBld,KAAKyU,UAAU,aAAa,OAAO,qBAC7DzU,KAAKkd,mBAAmBpD,iBAAiB,QAAQ,SAAS5S,GACxDA,EAAE6S,iBACF7S,EAAE8S,kBACFvS,EAAKga,sBAEPzhB,KAAKmhB,qBAAqB3Y,YAAYxI,KAAKkd,oBAC3Cld,KAAKmhB,qBAAqB3Y,YAAYxI,KAAK8f,oBAC3C9f,KAAK0hB,uBAIJ1hB,KAAKiB,QAAQ6d,WACd9e,KAAKqf,cAAgBrf,KAAKsJ,UAC1BzC,EAAM7G,KAAKsd,eAAe,SAAS/W,EAAEkF,GACnChE,EAAK4X,cAAc7W,YAAYf,EAAKyD,QAAQO,GAAKnC,eAMnDtJ,KAAKod,gBAELpd,KAAKod,kBAGTuE,aAAc,WACR3hB,KAAKwf,kBACTxf,KAAK4hB,kBAIL5hB,KAAKwf,gBAAgB/F,MAAMoI,KAAO7hB,KAAKid,gBAAgB6E,WAAW,KAClE9hB,KAAKwf,gBAAgB/F,MAAMsI,IAAM/hB,KAAKid,gBAAgB+E,UAAYhiB,KAAKid,gBAAgB5C,aAAa,KAGpGra,KAAK0f,kBAAkBzV,MAAQtI,IAAe3B,KAAK8J,WAAW,KAAK,GAGnE9J,KAAKyM,UAELzM,KAAKwf,gBAAgB/F,MAAMgC,QAAU,GACrCzb,KAAKid,gBAAgBhG,UAAW,EAChCjX,KAAKiiB,cAAe,IAEtB9E,aAAc,WACRnd,KAAKwf,iBACLxf,KAAKiiB,eAETjiB,KAAKwf,gBAAgB/F,MAAMgC,QAAU,OACrCzb,KAAKwM,SACLxM,KAAKiiB,cAAe,IAEtBrC,SAAU,WACR,GAAI5f,KAAKwf,gBAET,IACE,IAAI5c,EAAOgL,KAAKC,MAAM7N,KAAK0f,kBAAkBzV,OAC7CjK,KAAK2J,SAAS/G,GACd5C,KAAKmd,eAEP,MAAMjW,GAEJ,MADAzD,OAAO+c,MAAM,gBACPtZ,IAGVqa,eAAgB,WACXvhB,KAAKiiB,aAAcjiB,KAAKmd,eACtBnd,KAAK2hB,gBAEZO,wCAAyC,SAAU1b,EAAU+T,EAASjR,GACpE,IAAIoU,EACA1d,KAAK8H,OAAO2J,WAAWjL,KACzBkX,EAAgB1d,KAAK8H,OAAO2J,WAAWjL,GAAUkX,eACtB,iBAAlBA,IAA4BA,EAAgB,KACvDnD,EAAQmD,cAAgBA,EAExB,IAAK,IAAInX,EAAI,EAAGA,EAAI+C,EAAU+M,WAAWlV,OAAQoF,IAAK,CACpD,IAAI4b,EAAQ7Y,EAAU+M,WAAW9P,GACjC,GAAIgU,EAAQmD,cAAgByE,EAAMzE,cAAe,CAC/C1d,KAAK+f,iBAAiBlF,aAAaN,EAAS4H,GAC5C5H,EAAU,KACV,OAGAA,GACFva,KAAK+f,iBAAiBvX,YAAY+R,IAGtC6H,oBAAqB,SAAS3W,GAC5B,IACI4W,EAAUtJ,EAAOuJ,EAAW/H,EAD5B9S,EAAOzH,KAgCX,OA7BAqiB,EAAW5a,EAAKI,MAAM0a,eACb9I,MAAMC,MAAQ,OAGrB4I,EADEtiB,KAAK8H,OAAO2J,WAAWhG,IAAQzL,KAAK8H,OAAO2J,WAAWhG,GAAKkJ,MACjD3U,KAAK8H,OAAO2J,WAAWhG,GAAKkJ,MAE5BlJ,EAEdsN,EAAQtR,EAAKI,MAAM2a,iBAAiBF,IAEpC/H,EAAU9S,EAAKI,MAAM2S,eAAezB,EAAMsJ,IAClC5I,MAAMgJ,cAAgBlI,EAAQd,MAAM8G,aAAehG,EAAQd,MAAMiJ,WAAanI,EAAQd,MAAMkJ,UAAY,EAChHpI,EAAQd,MAAMS,OAAS,OAGvBla,KAAKkiB,wCAAwCzW,EAAK8O,EAASva,KAAK+f,kBAEhEsC,EAASO,QAAUnX,KAAOzL,KAAKkL,QAC/BmX,EAASvI,iBAAiB,SAAS,WAC9BuI,EAASO,QACVnb,EAAK2X,kBAAkB3T,GAGvBhE,EAAKob,qBAAqBpX,GAE5BhE,EAAKoD,UAAS,KAEhBpD,EAAKqb,uBAAuBrX,GAAO4W,EAE5BA,GAETU,gBAAiB,WACX/iB,KAAK8f,qBACT9f,KAAKmd,eAILnd,KAAK8f,mBAAmBrG,MAAMoI,KAAO7hB,KAAKkd,mBAAmB4E,WAAW,KACxE9hB,KAAK8f,mBAAmBrG,MAAMsI,IAAM/hB,KAAKkd,mBAAmB8E,UAAYhiB,KAAKkd,mBAAmB7C,aAAa,KAG7Gra,KAAKyM,UAELzM,KAAKgjB,iBAAkB,EACvBhjB,KAAKkd,mBAAmBjG,UAAW,EACnCjX,KAAK8f,mBAAmBrG,MAAMgC,QAAU,GACxCzb,KAAK0hB,yBAEPE,gBAAiB,WACX5hB,KAAK8f,oBACL9f,KAAKgjB,kBAEThjB,KAAK8f,mBAAmBrG,MAAMgC,QAAU,OACxCzb,KAAKwM,SAELxM,KAAKgjB,iBAAkB,IAEzBvB,kBAAmB,WACdzhB,KAAKgjB,gBAAiBhjB,KAAK4hB,kBACzB5hB,KAAK+iB,mBAEZF,qBAAsB,SAASrc,GAC1BxG,KAAKkL,QAAQ1E,KACdxG,KAAKkL,QAAQ1E,GAAU8L,oBAChBtS,KAAKkL,QAAQ1E,GAEpBxG,KAAK6W,eACL7W,KAAKod,kBAGTgC,kBAAmB,SAASrb,EAAMkf,GAIhC,IAAGjjB,KAAKkL,QAAQnH,GAAhB,CAGA,GAAG/D,KAAK2e,eAAe5a,GAAO,CAE5B,GADA/D,KAAKkL,QAAQnH,GAAQ/D,KAAK2e,eAAe5a,GACtCkf,EAAe,OAClBjjB,KAAKkL,QAAQnH,GAAMsO,eAGhB,CACH,KAAIrS,KAAKkjB,+BAAmCljB,KAAK8H,OAAO2J,YAAezR,KAAK8H,OAAO2J,WAAW1N,IAC5F,OAGF,IAAI+D,EAjBK9H,KAiBSye,kBAAkB1a,GAIhC+H,EArBK9L,KAqBSoJ,WAAWH,eAAenB,GAU5C,GA/BS9H,KAuBJkL,QAAQnH,GAvBJ/D,KAuBiBoJ,WAAWD,aAAa2C,GAChD1C,WAxBOpJ,KAwBUoJ,WACjBtB,OAAQA,EACRiE,KA1BO/L,KA0BI+L,KAAK,IAAIhI,EACpBmO,OA3BOlS,YA6BJkL,QAAQnH,GAAMwF,YAEf0Z,EAAe,CACjB,IAAI9N,EAhCGnV,KAgCW6H,MAAMsb,uBAhCjBnjB,KAiCFqf,cAAc7W,YAAY2M,GAjCxBnV,KAkCFkL,QAAQnH,GAAMiP,aAAamC,GAlCzBnV,KAmCFkL,QAAQnH,GAAMyF,QAnCZxJ,KAoCFkL,QAAQnH,GAAM0F,YApCZzJ,KAuCJ2e,eAAe5a,GAvCX/D,KAuCwBkL,QAAQnH,GAIvCkf,IA3COjjB,KA4CJ6W,eA5CI7W,KA6CJod,mBAGTrL,oBAAqB,SAASjG,GAC5B9L,KAAK6W,eACL7W,KAAK6D,OAAOiI,IAEdoX,4BAA6B,WAC3B,MAAgD,kBAArCljB,KAAK8H,OAAO8J,qBACd5R,KAAK8H,OAAO8J,sBAEb5R,KAAKoJ,WAAWnI,QAAQ4Q,0BAElC3H,QAAS,WACPrD,EAAM7G,KAAK2e,eAAgB,SAASpY,EAAEU,GACpCA,EAAGiD,YAEFlK,KAAKqf,gBAAerf,KAAKqf,cAAcjV,UAAY,IACnDpK,KAAK2U,OAAS3U,KAAK2U,MAAMoC,YAAY/W,KAAK2U,MAAMoC,WAAWC,YAAYhX,KAAK2U,OAC5E3U,KAAK4gB,cAAgB5gB,KAAK4gB,aAAa7J,YAAY/W,KAAK4gB,aAAa7J,WAAWC,YAAYhX,KAAK4gB,cAEpG5gB,KAAKkL,QAAU,KACflL,KAAK2e,eAAiB,KACnB3e,KAAKqf,eAAiBrf,KAAKqf,cAActI,YAAY/W,KAAKqf,cAActI,WAAWC,YAAYhX,KAAKqf,eACvGrf,KAAKqf,cAAgB,KAErBrf,KAAK6D,UAEPiG,SAAU,WACR,IAAIsZ,EAASpjB,KAAK6D,SAClB,GAAG7D,KAAKoJ,WAAWnI,QAAQoiB,yBAA2BrjB,KAAKiB,QAAQoiB,wBACjE,IAAI,IAAI9c,KAAK6c,EACRA,EAAO1c,eAAeH,KACnB6c,EAAO7c,WAAW6c,EAAO7c,IAInC,OAAO6c,GAETvM,aAAc,WACZ7W,KAAKiK,SAGL,IAAI,IAAI1D,KAAKvG,KAAKkL,QACZlL,KAAKkL,QAAQxE,eAAeH,KAChCvG,KAAKiK,MAAM1D,GAAKvG,KAAKkL,QAAQ3E,GAAGuD,YAG/B9J,KAAKgjB,iBAAiBhjB,KAAK0hB,wBAEhCA,qBAAsB,WACpB,GAAG1hB,KAAKiB,QAAQqiB,qBAA2D,IAApCtjB,KAAKiB,QAAQqiB,oBAAgCtjB,KAAKoJ,WAAWnI,QAAQqiB,mBAC1GtjB,KAAKmhB,qBAAqB1H,MAAMgC,QAAU,WAD5C,CAKA,IAAI8H,EAAoDhd,EAAfid,EAAY,EAAMC,GAAa,EAGxE,IAAIld,KAAKvG,KAAKkL,QACRlL,KAAKkL,QAAQxE,eAAeH,IAChCid,IAYF,IAAIjd,KARJgd,EAAUvjB,KAAKkjB,sCAAwE,IAA9BljB,KAAK8H,OAAOwJ,eAAiCkS,GAAaxjB,KAAK8H,OAAOwJ,eAE5HtR,KAAK8iB,yBACN9iB,KAAK+f,iBAAiB3V,UAAY,IAEpCpK,KAAK8iB,0BAGI9iB,KAAK2e,eACR3e,KAAK2e,eAAejY,eAAeH,KAEvCvG,KAAKoiB,oBAAoB7b,GAEtBvG,KAAKkX,WAAWlX,KAAK2e,eAAepY,KAAOA,KAAKvG,KAAKkL,UACtDlL,KAAK8iB,uBAAuBvc,GAAG0Q,UAAW,QAGJ,IAA9BjX,KAAK8H,OAAOyJ,eAAiCiS,GAAaxjB,KAAK8H,OAAOyJ,eAC9EvR,KAAK8iB,uBAAuBvc,GAAG0Q,SAAWjX,KAAK8iB,uBAAuBvc,GAAGqc,QACrE5iB,KAAK8iB,uBAAuBvc,GAAGqc,UAASa,GAAa,IAEjDld,KAAKvG,KAAKkL,SAUlBuY,GAAa,GACA,GAVTF,GAAavjB,KAAK8H,OAAO2J,WAAW/K,eAAeH,IAIrDvG,KAAK8iB,uBAAuBvc,GAAG0Q,UAAW,EAC1CwM,GAAa,GAJbzjB,KAAK8iB,uBAAuBvc,GAAG0Q,UAAW,GAkBhD,IAAI1Q,KALDvG,KAAKkjB,gCACNO,GAAa,GAINzjB,KAAK8H,OAAO2J,WACfzR,KAAK8H,OAAO2J,WAAW/K,eAAeH,KACvCvG,KAAK2e,eAAepY,KACvBkd,GAAa,EACbzjB,KAAKoiB,oBAAoB7b,KAIvBkd,EAKKzjB,KAAKkjB,8BAUZljB,KAAKqgB,gBAAgBpJ,UALdsM,GAJPvjB,KAAKqgB,gBAAgB5G,MAAMgC,QAAU,OACrCzb,KAAKsgB,kBAAkB7G,MAAMgC,QAAU,SANvCzb,KAAK4hB,kBACL5hB,KAAKmhB,qBAAqB1H,MAAMgC,QAAU,UAgB9CvE,WAAY,SAASpL,GACnB,MAAqC,kBAA3BA,EAAOhE,OAAOuB,SAA+ByC,EAAOhE,OAAOuB,SAC7DvD,MAAMC,QAAQ/F,KAAK8H,OAAOuB,UAAkBrJ,KAAK8H,OAAOuB,SAAS4F,QAAQnD,EAAOL,MAAQ,IACxFzL,KAAKoJ,WAAWnI,QAAQ2O,qBAGlCjG,SAAU,SAASM,EAAO8N,GACxB,IAAItQ,EAAOzH,MAGS,iBAAjB,KAFHiK,EAAQA,OAEL,YAAAtD,IAAOsD,KAAsBnE,MAAMC,QAAQkE,MAAQA,MAGtDpD,EAAM7G,KAAK2e,eAAgB,SAASpY,EAAEuF,QAEb,IAAb7B,EAAM1D,IACdkB,EAAK2X,kBAAkB7Y,GACvBuF,EAAOnC,SAASM,EAAM1D,GAAGwR,IAGlBA,GAAYtQ,EAAKyP,WAAWpL,GAKnCA,EAAOnC,SAASmC,EAAOqH,aAAa4E,GAJpCtQ,EAAKob,qBAAqBtc,KAQ9BM,EAAMoD,EAAO,SAAS1D,EAAEuI,GAClBrH,EAAKkX,eAAepY,KACtBkB,EAAK2X,kBAAkB7Y,GACpBkB,EAAKyD,QAAQ3E,IAAIkB,EAAKyD,QAAQ3E,GAAGoD,SAASmF,EAAIiJ,MAIrD/X,KAAK6W,eACL7W,KAAKod,gBACLpd,KAAK6K,YAEPd,qBAAsB,SAAS0F,GAC7B,IAAIhI,EAAOzH,KAGP0jB,KACAC,KAWJ,GAVA9c,EAAM4I,EAAQ,SAASlJ,EAAEnD,GACpBA,EAAM2I,OAAStE,EAAKsE,KACrB2X,EAAUnZ,KAAKnH,GAGfugB,EAAapZ,KAAKnH,KAKnBpD,KAAK4gB,aACN,GAAG8C,EAAUviB,OAAQ,CAEnBnB,KAAK4gB,aAAaxW,UAAY,GAC9BpK,KAAK4gB,aAAanH,MAAMgC,QAAU,GAClC5U,EAAM6c,EAAW,SAASnd,EAAEnD,GAC1BqE,EAAKmZ,aAAapY,YAAYf,EAAKI,MAAM+b,gBAAgBxgB,EAAMuM,iBAKjE3P,KAAK4gB,aAAanH,MAAMgC,QAAU,OAKnCzb,KAAKiB,QAAQ6d,YACX4E,EAAUviB,OACXnB,KAAK6H,MAAMgc,iBAAiB7jB,KAAKsJ,WAGjCtJ,KAAK6H,MAAMic,oBAAoB9jB,KAAKsJ,YAKxCzC,EAAM7G,KAAKkL,QAAS,SAAS3E,EAAEuF,GAC7BA,EAAO/B,qBAAqB4Z,QAKlCtc,EAAWG,SAAS0D,QAAQ6Y,MAAQ1c,EAAWyK,eAAenO,QAC5DwP,WAAY,WACV,OAAOnT,KAAK8H,OAAL,aAETuK,SAAU,WAER,GADArS,KAAK6D,SACF7D,KAAK4d,KACN,IAAI,IAAIrX,EAAE,EAAGA,EAAEvG,KAAK4d,KAAKzc,OAAQoF,IAC/BvG,KAAK4d,KAAKrX,GAAG8L,YAInBC,WAAY,WAEV,GADAtS,KAAK6D,SACF7D,KAAK4d,KACN,IAAI,IAAIrX,EAAE,EAAGA,EAAEvG,KAAK4d,KAAKzc,OAAQoF,IAC/BvG,KAAK4d,KAAKrX,GAAG+L,cAInBC,cAAe,WACb,IAAIyR,EAAOhkB,KAAKikB,YAAY,GAE5B,OAAGjkB,KAAKkkB,YACCxe,KAAKC,IAAID,KAAKiT,IAAI,GAAGqL,EAAKtK,MAAM,GAAG,GAGnCsK,EAAKtK,OAGhBlN,OAAQ,WAKN,GAJGxM,KAAKmkB,iBAAgBnkB,KAAKmkB,eAAelN,UAAW,GACpDjX,KAAKokB,yBAAwBpkB,KAAKokB,uBAAuBnN,UAAW,GACpEjX,KAAKqkB,yBAAwBrkB,KAAKqkB,uBAAuBpN,UAAW,GAEpEjX,KAAK4d,KACN,IAAI,IAAIrX,EAAE,EAAGA,EAAEvG,KAAK4d,KAAKzc,OAAQoF,IAC/BvG,KAAK4d,KAAKrX,GAAGiG,SAEVxM,KAAK4d,KAAKrX,GAAG+d,gBAAetkB,KAAK4d,KAAKrX,GAAG+d,cAAcrN,UAAW,GAClEjX,KAAK4d,KAAKrX,GAAGge,kBAAiBvkB,KAAK4d,KAAKrX,GAAGge,gBAAgBtN,UAAW,GACtEjX,KAAK4d,KAAKrX,GAAGie,gBAAexkB,KAAK4d,KAAKrX,GAAGie,cAAcvN,UAAW,GAGzEjX,KAAK6D,UAEP4I,QAAS,WAKP,GAJGzM,KAAKmkB,iBAAgBnkB,KAAKmkB,eAAelN,UAAW,GACpDjX,KAAKokB,yBAAwBpkB,KAAKokB,uBAAuBnN,UAAW,GACpEjX,KAAKqkB,yBAAwBrkB,KAAKqkB,uBAAuBpN,UAAW,GAEpEjX,KAAK4d,KACN,IAAI,IAAIrX,EAAE,EAAGA,EAAEvG,KAAK4d,KAAKzc,OAAQoF,IAC/BvG,KAAK4d,KAAKrX,GAAGkG,UAEVzM,KAAK4d,KAAKrX,GAAG+d,gBAAetkB,KAAK4d,KAAKrX,GAAG+d,cAAcrN,UAAW,GAClEjX,KAAK4d,KAAKrX,GAAGge,kBAAiBvkB,KAAK4d,KAAKrX,GAAGge,gBAAgBtN,UAAW,GACtEjX,KAAK4d,KAAKrX,GAAGie,gBAAexkB,KAAK4d,KAAKrX,GAAGie,cAAcvN,UAAW,GAGzEjX,KAAK6D,UAEP0F,SAAU,WACRvJ,KAAK6D,SAEL7D,KAAK4d,QACL5d,KAAKykB,aAELzkB,KAAK0kB,oBAAsB1kB,KAAKiB,QAAQ0jB,sBAAwB3kB,KAAKoJ,WAAWnI,QAAQ0jB,qBACxF3kB,KAAK4kB,6BAA+B5kB,KAAK0kB,qBAAuB1kB,KAAKiB,QAAQ4jB,+BAAiC7kB,KAAKoJ,WAAWnI,QAAQ4jB,8BACtI7kB,KAAK8kB,6BAA+B9kB,KAAK0kB,qBAAuB1kB,KAAKiB,QAAQ8jB,+BAAiC/kB,KAAKoJ,WAAWnI,QAAQ8jB,8BACtI/kB,KAAKglB,kBAAoBhlB,KAAKiB,QAAQgkB,uBAAyBjlB,KAAKoJ,WAAWnI,QAAQgkB,sBACvFjlB,KAAKklB,gBAAkBllB,KAAKiB,QAAQkkB,mBAAqBnlB,KAAKoJ,WAAWnI,QAAQkkB,mBAEnF3b,MAAO,WAGDxJ,KAAKiB,QAAQ6X,SAiCb9Y,KAAKolB,MAAQplB,KAAK6H,MAAMgZ,mBACxB7gB,KAAKsJ,UAAUd,YAAYxI,KAAKolB,OAChCplB,KAAKqlB,SAAWrlB,KAAK6H,MAAMyd,kBAC3BtlB,KAAKolB,MAAM5c,YAAYxI,KAAKqlB,UAC5BrlB,KAAKulB,WAAa5gB,SAAS6Q,cAAc,OACzCxV,KAAKolB,MAAM5c,YAAYxI,KAAKulB,cArC9BvlB,KAAKmW,OAASxR,SAAS6Q,cAAc,QACrCxV,KAAKmW,OAAOJ,YAAc/V,KAAK0W,WAC/B1W,KAAK2U,MAAQ3U,KAAK6H,MAAM0X,UAAUvf,KAAKmW,QACvCnW,KAAKsJ,UAAUd,YAAYxI,KAAK2U,OAChC3U,KAAKghB,eAAiBhhB,KAAK6H,MAAMoZ,wBACjCjhB,KAAK2U,MAAMnM,YAAYxI,KAAKghB,gBACzBhhB,KAAK8H,OAAOyP,cACbvX,KAAKuX,YAAcvX,KAAK6H,MAAM8Y,eAAe3gB,KAAK8H,OAAOyP,aACzDvX,KAAKsJ,UAAUd,YAAYxI,KAAKuX,cAElCvX,KAAK4gB,aAAejc,SAAS6Q,cAAc,OAC3CxV,KAAKsJ,UAAUd,YAAYxI,KAAK4gB,cAEN,SAAvB5gB,KAAK8H,OAAO0P,QACbxX,KAAKqlB,SAAWrlB,KAAK6H,MAAMoZ,wBAC3BjhB,KAAK2U,MAAMnM,YAAYxI,KAAKqlB,UAC5BrlB,KAAKkkB,YAAclkB,KAAK6H,MAAM2d,eAC9BxlB,KAAKsJ,UAAUd,YAAYxI,KAAKkkB,aAChClkB,KAAKulB,WAAavlB,KAAK6H,MAAM4d,oBAAoBzlB,KAAKkkB,aAEtDlkB,KAAK0lB,WAAa,OAGlB1lB,KAAKolB,MAAQplB,KAAK6H,MAAMgZ,mBACxB7gB,KAAKsJ,UAAUd,YAAYxI,KAAKolB,OAChCplB,KAAKulB,WAAa5gB,SAAS6Q,cAAc,OACzCxV,KAAKolB,MAAM5c,YAAYxI,KAAKulB,YAC5BvlB,KAAKqlB,SAAWrlB,KAAK6H,MAAMyd,kBAC3BtlB,KAAKolB,MAAM5c,YAAYxI,KAAKqlB,YAahCrlB,KAAK2lB,eAEP5T,oBAAqB,SAASjG,GAC5B9L,KAAK6W,eACL7W,KAAK4lB,aAAY,GACjB5lB,KAAK6D,OAAOiI,IAEd+Z,aAAc,WACZ,IAAI7lB,KAAK8lB,WACP,GAAG9lB,KAAK8H,OAAOkJ,QAAUlL,MAAMC,QAAQ/F,KAAK8H,OAAOkJ,OAAQ,CACzD,IAAI/M,EAAMjE,KAAKoJ,WAAW4E,WAAWhO,KAAK8H,OAAOkJ,OACjDhR,KAAK8lB,WAAa7hB,EAAI0Q,OAAS,YAG/B3U,KAAK8lB,WAAa,OAGtB,OAAO9lB,KAAK8lB,YAEdC,cAAe,SAASxf,GACtB,OAAGT,MAAMC,QAAQ/F,KAAK8H,OAAOkJ,OACxBzK,GAAKvG,KAAK8H,OAAOkJ,MAAM7P,QACS,IAA9BnB,KAAK8H,OAAOmJ,mBAGPjR,KAAK8H,OAAOmJ,gBACX7K,KAAWpG,KAAK8H,OAAOmJ,sBAD3B,EAKE7K,KAAWpG,KAAK8H,OAAOkJ,MAAMzK,IAGhCvG,KAAK8H,OAAOkJ,MACX5K,KAAWpG,KAAK8H,OAAOkJ,WAMlCiT,YAAa,SAAS1d,GACpB,IAAIuB,EAAS9H,KAAK+lB,cAAcxf,GAGhCvG,KAAKgmB,UAAYhmB,KAAKgmB,cACtB,IAAItW,EAAc/N,IAAemG,GACjC,YAA0C,IAAhC9H,KAAKgmB,UAAUtW,GAAqC1P,KAAKgmB,UAAUtW,IAG7E5H,EAAS9H,KAAKoJ,WAAW4E,WAAWlG,GAEpC9H,KAAKgmB,UAAUtW,IACbiF,MAAO7M,EAAO6M,OAAS,OACvBsR,QAAWne,EAAA,QACX4R,MAAO,GACPwM,cAAepe,EAAO2J,YAAc3J,EAAOkJ,OAGtChR,KAAKgmB,UAAUtW,KAExByW,iBAAkB,SAAS5f,GACzB,IAAIyf,EAAYhmB,KAAKikB,YAAY1d,GAC7BuB,EAAS9H,KAAK+lB,cAAcxf,IAChCuB,EAAS9H,KAAKoJ,WAAW4E,WAAWlG,IAC7B6M,MAAQqR,EAAUrR,MAAM,KAAKpO,EAAE,GAEtC,IAEI4O,EAFArJ,EAAS9L,KAAKoJ,WAAWH,eAAenB,GAI1CqN,EADCnV,KAAKkkB,YACGlkB,KAAK6H,MAAMue,gBAEdJ,EAAUE,cACPlmB,KAAK6H,MAAMsb,uBAGXnjB,KAAK6H,MAAMgZ,mBAGtB7gB,KAAKulB,WAAW/c,YAAY2M,GAE5B,IAAItS,EAAM7C,KAAKoJ,WAAWD,aAAa2C,GACrC1C,WAAYpJ,KAAKoJ,WACjBtB,OAAQA,EACRwB,UAAW6L,EACXpJ,KAAM/L,KAAK+L,KAAK,IAAIxF,EACpB2L,OAAQlS,KACRqJ,UAAU,IAWZ,OATAxG,EAAI0G,WACJ1G,EAAI2G,QACJ3G,EAAI4G,YAEA5G,EAAIme,iBACNne,EAAIwjB,eAAiBrmB,KAAK6H,MAAMyd,kBAChCnQ,EAAO3M,YAAY3F,EAAIwjB,iBAGlBxjB,GAETqH,QAAS,WACPlK,KAAKsmB,OAAM,GACRtmB,KAAK2U,OAAS3U,KAAK2U,MAAMoC,YAAY/W,KAAK2U,MAAMoC,WAAWC,YAAYhX,KAAK2U,OAC5E3U,KAAKuX,aAAevX,KAAKuX,YAAYR,YAAY/W,KAAKuX,YAAYR,WAAWC,YAAYhX,KAAKuX,aAC9FvX,KAAKulB,YAAcvlB,KAAKulB,WAAWxO,YAAY/W,KAAKulB,WAAWxO,WAAWC,YAAYhX,KAAKulB,YAC3FvlB,KAAKqlB,UAAYrlB,KAAKqlB,SAAStO,YAAY/W,KAAKqlB,SAAStO,WAAWC,YAAYhX,KAAKqlB,UACrFrlB,KAAKolB,OAASplB,KAAKolB,MAAMrO,YAAY/W,KAAKolB,MAAMrO,WAAWC,YAAYhX,KAAKolB,OAE/EplB,KAAK4d,KAAO5d,KAAKykB,UAAYzkB,KAAK2U,MAAQ3U,KAAKuX,YAAcvX,KAAKulB,WAAavlB,KAAKolB,MAAQplB,KAAKqlB,SAAW,KAE5GrlB,KAAK6D,UAEPyiB,MAAO,SAASC,GACd,GAAIvmB,KAAK4d,KAAT,CACA,IAAInW,EAAOzH,KACX6G,EAAM7G,KAAK4d,KAAK,SAASrX,EAAE+X,GACtBiI,IACEjI,EAAIkI,KAAOlI,EAAIkI,IAAIzP,YAAYuH,EAAIkI,IAAIzP,WAAWC,YAAYsH,EAAIkI,KACrE/e,EAAKgf,WAAWnI,GAAI,GACpB7W,EAAKgd,UAAUle,GAAK,MAEtBkB,EAAKmW,KAAKrX,GAAK,OAEjBkB,EAAKmW,QACF2I,IAAM9e,EAAKgd,gBAEhBgC,WAAY,SAASnI,EAAIiI,GACvB,IAAIpR,EAASmJ,EAAIhV,UACdid,GACDjI,EAAIpU,UACDiL,EAAO4B,YAAY5B,EAAO4B,WAAWC,YAAY7B,GACjDmJ,EAAIkI,KAAOlI,EAAIkI,IAAIzP,YAAYuH,EAAIkI,IAAIzP,WAAWC,YAAYsH,EAAIkI,OAGlElI,EAAIkI,MAAKlI,EAAIkI,IAAI/M,MAAMgC,QAAU,QACpCtG,EAAOsE,MAAMgC,QAAU,OACvB6C,EAAIhM,eAGRoU,OAAQ,WACN,OAAI5gB,MAAMC,QAAQ/F,KAAK8H,OAAOkJ,SAA2C,IAAhChR,KAAK8H,OAAOmJ,gBAC5CvL,KAAKiT,IAAI3Y,KAAK8H,OAAOkJ,MAAM7P,OAAOnB,KAAK8H,OAAOoJ,UAAYyV,KAG1D3mB,KAAK8H,OAAOoJ,UAAYyV,KAGnCf,YAAa,SAASgB,GACpB,IAAInf,EAAOzH,KACX6G,EAAM7G,KAAK4d,KAAM,SAASrX,EAAE+X,GACtBA,EAAIkI,MAELI,EACDtI,EAAIuI,SAAS9Q,YAAcuI,EAAI/H,gBAG5B+H,EAAIkI,MAAQ/e,EAAKie,YAClBje,EAAKI,MAAMif,cAAcxI,EAAIkI,KAC7BlI,EAAIhV,UAAUmQ,MAAMgC,QAAU,KAG9BhU,EAAKI,MAAMkf,gBAAgBzI,EAAIkI,KAC/BlI,EAAIhV,UAAUmQ,MAAMgC,QAAU,YAKtC9R,SAAU,SAASM,EAAO8N,GAOxB,GALA9N,EAAQA,MAEHnE,MAAMC,QAAQkE,KAASA,GAASA,IAEpBtI,IAAesI,KACdjK,KAAKiY,WAAvB,CAGA,GAAGjY,KAAK8H,OAAOqJ,SACb,KAAMlH,EAAM9I,OAASnB,KAAK8H,OAAOqJ,UAC/BlH,EAAMM,KAAKvK,KAAKikB,YAAYha,EAAM9I,QAAvB,SAGZnB,KAAK0mB,UAAYzc,EAAM9I,OAASnB,KAAK0mB,WACtCzc,EAAQA,EAAM+c,MAAM,EAAEhnB,KAAK0mB,WAG7B,IAAIjf,EAAOzH,KACX6G,EAAMoD,EAAM,SAAS1D,EAAEuI,GAClBrH,EAAKmW,KAAKrX,GAEXkB,EAAKmW,KAAKrX,GAAGoD,SAASmF,EAAIiJ,GAEpBtQ,EAAKgd,UAAUle,IACrBkB,EAAKmW,KAAKrX,GAAKkB,EAAKgd,UAAUle,GAC9BkB,EAAKmW,KAAKrX,GAAGoD,SAASmF,EAAIiJ,GAC1BtQ,EAAKmW,KAAKrX,GAAG+C,UAAUmQ,MAAMgC,QAAU,GACpChU,EAAKmW,KAAKrX,GAAGigB,MAAK/e,EAAKmW,KAAKrX,GAAGigB,IAAI/M,MAAMgC,QAAU,IACtDhU,EAAKmW,KAAKrX,GAAG8L,YAGb5K,EAAKwf,OAAOnY,EAAIiJ,KAIpB,IAAI,IAAI/K,EAAE/C,EAAM9I,OAAQ6L,EAAEvF,EAAKmW,KAAKzc,OAAQ6L,IAC1CvF,EAAKgf,WAAWhf,EAAKmW,KAAK5Q,IAC1BvF,EAAKmW,KAAK5Q,GAAK,KAEjBvF,EAAKmW,KAAOnW,EAAKmW,KAAKoJ,MAAM,EAAE/c,EAAM9I,QAGpC,IAAI+lB,EAAiB,KACrBrgB,EAAMY,EAAKmW,KAAM,SAASrX,EAAE+X,GAC1B,GAAGA,EAAIkI,MAAQ/e,EAAKie,WAElB,OADAwB,EAAiB5I,EAAIkI,KACd,KAGPU,GAAkBzf,EAAKmW,KAAKzc,SAAQ+lB,EAAiBzf,EAAKmW,KAAK,GAAG4I,KAEtE/e,EAAKie,WAAawB,EAElBzf,EAAKoP,aAAakB,GAClBtQ,EAAKme,aAAY,GACjBne,EAAKme,cAELne,EAAKoD,aAIPgM,aAAc,SAASsQ,GACrB,IAAI1f,EAAOzH,KACPonB,EAAOpnB,KAAKiK,MAAOjK,KAAKiK,MAAM9I,OAAS,EAQ3C,GAPAnB,KAAKiK,SAELpD,EAAM7G,KAAK4d,KAAK,SAASrX,EAAEuF,GAEzBrE,EAAKwC,MAAM1D,GAAKuF,EAAOhC,aAGtBsd,IAASpnB,KAAKiK,MAAM9I,QAAUgmB,EAAO,CAEtC,IAAIhW,EAAWnR,KAAK8H,OAAOqJ,UAAYnR,KAAK8H,OAAOqJ,UAAYnR,KAAK4d,KAAKzc,OAEzE0F,EAAM7G,KAAK4d,KAAK,SAASrX,EAAEuF,GAEtBA,EAAOyY,kBACLhe,IAAMkB,EAAKmW,KAAKzc,OAAS,EAC1B2K,EAAOyY,gBAAgB9K,MAAMgC,QAAU,OAGvC3P,EAAOyY,gBAAgB9K,MAAMgC,QAAU,IAKxC3P,EAAO0Y,gBAEN1Y,EAAO0Y,cAAc/K,MAAMgC,QAD1BtK,EACoC,OAGA,IAKzC1J,EAAKwC,MAAM1D,GAAKuF,EAAOhC,aAGzB,IAAIud,GAAkB,EAElBrnB,KAAKiK,MAAM9I,OAIe,IAAtBnB,KAAKiK,MAAM9I,QACjBnB,KAAKokB,uBAAuB3K,MAAMgC,QAAU,OAGzCtK,GAAYnR,KAAK8kB,6BAClB9kB,KAAKqkB,uBAAuB5K,MAAMgC,QAAU,QAG5Czb,KAAKqkB,uBAAuB5K,MAAMgC,QAAU,GAC5C4L,GAAkB,KAIjBlW,GAAYnR,KAAK8kB,6BAClB9kB,KAAKqkB,uBAAuB5K,MAAMgC,QAAU,QAG5Czb,KAAKqkB,uBAAuB5K,MAAMgC,QAAU,GAC5C4L,GAAkB,GAGjBlW,GAAYnR,KAAK4kB,6BAClB5kB,KAAKokB,uBAAuB3K,MAAMgC,QAAU,QAG5Czb,KAAKokB,uBAAuB3K,MAAMgC,QAAU,GAC5C4L,GAAkB,KA7BpBrnB,KAAKqkB,uBAAuB5K,MAAMgC,QAAU,OAC5Czb,KAAKokB,uBAAuB3K,MAAMgC,QAAU,QAiC1Czb,KAAK0mB,UAAY1mB,KAAK0mB,UAAY1mB,KAAK4d,KAAKzc,QAAWnB,KAAKklB,gBAC9DllB,KAAKmkB,eAAe1K,MAAMgC,QAAU,QAGpCzb,KAAKmkB,eAAe1K,MAAMgC,QAAU,GACpC4L,GAAkB,IAGhBrnB,KAAKohB,WAAaiG,EACpBrnB,KAAKqlB,SAAS5L,MAAMgC,QAAU,eAG9Bzb,KAAKqlB,SAAS5L,MAAMgC,QAAU,SAIpCwL,OAAQ,SAAShd,EAAO8N,GACtB,IAAItQ,EAAOzH,KACPuG,EAAIvG,KAAK4d,KAAKzc,OAElBsG,EAAKmW,KAAKrX,GAAKvG,KAAKmmB,iBAAiB5f,GACrCkB,EAAKgd,UAAUle,GAAKkB,EAAKmW,KAAKrX,GAE3BkB,EAAKyc,cACNzc,EAAKmW,KAAKrX,GAAGsgB,SAAWliB,SAAS6Q,cAAc,QAC/C/N,EAAKmW,KAAKrX,GAAGsgB,SAAS9Q,YAActO,EAAKmW,KAAKrX,GAAGgQ,gBACjD9O,EAAKmW,KAAKrX,GAAGigB,IAAM/e,EAAKI,MAAMyf,OAAO7f,EAAKmW,KAAKrX,GAAGsgB,UAClDpf,EAAKmW,KAAKrX,GAAGigB,IAAI1M,iBAAiB,QAAS,SAAS5S,GAClDO,EAAKie,WAAaje,EAAKmW,KAAKrX,GAAGigB,IAC/B/e,EAAKme,cACL1e,EAAE6S,iBACF7S,EAAE8S,oBAGJvS,EAAKI,MAAM0f,OAAO9f,EAAKyc,YAAazc,EAAKmW,KAAKrX,GAAGigB,MAGnD,IAAIgB,EAAkB/f,EAAKmW,KAAKrX,GAAGya,gBAAkBvZ,EAAKmW,KAAKrX,GAAG8f,eAG9D5e,EAAKid,sBACPjd,EAAKmW,KAAKrX,GAAGie,cAAgBxkB,KAAKyU,UAAUhN,EAAKoe,eAAe,SAAS7lB,KAAKyI,UAAU,2BAA2BhB,EAAKoe,kBACxHpe,EAAKmW,KAAKrX,GAAGie,cAAczP,WAAa,UACxCtN,EAAKmW,KAAKrX,GAAGie,cAAc5Y,aAAa,SAASrF,GACjDkB,EAAKmW,KAAKrX,GAAGie,cAAc1K,iBAAiB,QAAQ,SAAS5S,GAC3DA,EAAE6S,iBACF7S,EAAE8S,kBACF,IAAIzT,EAAgC,EAA5BvG,KAAK2L,aAAa,UAEtB1B,EAAQxC,EAAKqC,WAEb2d,KACAP,EAAiB,KACrBrgB,EAAMoD,EAAM,SAAS+C,EAAEsR,GAClBtR,IAAIzG,EAYPkhB,EAAOld,KAAK+T,GAVP7W,EAAKmW,KAAK5Q,GAAGwZ,MAAQ/e,EAAKie,aAGxBje,EAAKmW,KAAK5Q,EAAE,GAAIka,EAAiBzf,EAAKmW,KAAK5Q,GAAGwZ,IAEzCxZ,IAAGka,EAAiBzf,EAAKmW,KAAK5Q,EAAE,GAAGwZ,QAOjD/e,EAAKkC,SAAS8d,GACXP,IACDzf,EAAKie,WAAawB,EAClBzf,EAAKme,eAGPne,EAAKoD,UAAS,KAGb2c,GACDA,EAAgBhf,YAAYf,EAAKmW,KAAKrX,GAAGie,gBAI1Cje,IAAMkB,EAAKud,oBACZvd,EAAKmW,KAAKrX,GAAG+d,cAAgBtkB,KAAKyU,UAAU,GAAG,SAASzU,KAAKyI,UAAU,yBACvEhB,EAAKmW,KAAKrX,GAAG+d,cAAcvP,WAAa,UACxCtN,EAAKmW,KAAKrX,GAAG+d,cAAc1Y,aAAa,SAASrF,GACjDkB,EAAKmW,KAAKrX,GAAG+d,cAAcxK,iBAAiB,QAAQ,SAAS5S,GAC3DA,EAAE6S,iBACF7S,EAAE8S,kBACF,IAAIzT,EAAgC,EAA5BvG,KAAK2L,aAAa,UAE1B,KAAGpF,GAAG,GAAN,CACA,IAAIqX,EAAOnW,EAAKqC,WACZ7F,EAAM2Z,EAAKrX,EAAE,GACjBqX,EAAKrX,EAAE,GAAKqX,EAAKrX,GACjBqX,EAAKrX,GAAKtC,EAEVwD,EAAKkC,SAASiU,GACdnW,EAAKie,WAAaje,EAAKmW,KAAKrX,EAAE,GAAGigB,IACjC/e,EAAKme,cAELne,EAAKoD,UAAS,MAGb2c,GACDA,EAAgBhf,YAAYf,EAAKmW,KAAKrX,GAAG+d,gBAIzC7c,EAAKud,oBACPvd,EAAKmW,KAAKrX,GAAGge,gBAAkBvkB,KAAKyU,UAAU,GAAG,WAAWzU,KAAKyI,UAAU,2BAC3EhB,EAAKmW,KAAKrX,GAAGge,gBAAgBxP,WAAa,YAC1CtN,EAAKmW,KAAKrX,GAAGge,gBAAgB3Y,aAAa,SAASrF,GACnDkB,EAAKmW,KAAKrX,GAAGge,gBAAgBzK,iBAAiB,QAAQ,SAAS5S,GAC7DA,EAAE6S,iBACF7S,EAAE8S,kBACF,IAAIzT,EAAgC,EAA5BvG,KAAK2L,aAAa,UAEtBiS,EAAOnW,EAAKqC,WAChB,KAAGvD,GAAGqX,EAAKzc,OAAO,GAAlB,CACA,IAAI8C,EAAM2Z,EAAKrX,EAAE,GACjBqX,EAAKrX,EAAE,GAAKqX,EAAKrX,GACjBqX,EAAKrX,GAAKtC,EAEVwD,EAAKkC,SAASiU,GACdnW,EAAKie,WAAaje,EAAKmW,KAAKrX,EAAE,GAAGigB,IACjC/e,EAAKme,cACLne,EAAKoD,UAAS,MAGb2c,GACDA,EAAgBhf,YAAYf,EAAKmW,KAAKrX,GAAGge,kBAI1Cta,GAAOxC,EAAKmW,KAAKrX,GAAGoD,SAASM,EAAO8N,GACvCtQ,EAAKme,eAEPD,YAAa,WACX,IAAIle,EAAOzH,KAEXA,KAAKohB,WAAY,EACjBphB,KAAKqhB,cAAgBrhB,KAAKyU,UAAU,GAAG,WAAWzU,KAAKyI,UAAU,oBACjEzI,KAAKghB,eAAexY,YAAYxI,KAAKqhB,eACrC,IAAIqG,EAAqBjgB,EAAK8d,WAAW9L,MAAMgC,QAC3CkM,EAAmBlgB,EAAK4d,SAAS5L,MAAMgC,QAC3Czb,KAAKqhB,cAAcvH,iBAAiB,QAAQ,SAAS5S,GACnDA,EAAE6S,iBACF7S,EAAE8S,kBACCvS,EAAK2Z,WACN3Z,EAAK2Z,WAAY,EACd3Z,EAAK2d,QAAO3d,EAAK2d,MAAM3L,MAAMgC,QAAU,IAC1ChU,EAAK8d,WAAW9L,MAAMgC,QAAUiM,EAC7BjgB,EAAKyc,cAAazc,EAAKyc,YAAYzK,MAAMgC,QAAU,IACtDhU,EAAK4d,SAAS5L,MAAMgC,QAAUkM,EAC9BlgB,EAAKuN,cAAchV,KAAK,GAAG,WAAWyH,EAAKgB,UAAU,sBAGrDhB,EAAK2Z,WAAY,EACjB3Z,EAAK8d,WAAW9L,MAAMgC,QAAU,OAC7BhU,EAAKyc,cAAazc,EAAKyc,YAAYzK,MAAMgC,QAAU,QACtDhU,EAAK4d,SAAS5L,MAAMgC,QAAU,OAC3BhU,EAAK2d,QAAO3d,EAAK2d,MAAM3L,MAAMgC,QAAU,QAC1ChU,EAAKuN,cAAchV,KAAK,GAAG,SAASyH,EAAKgB,UAAU,qBAKpDzI,KAAKiB,QAAQmgB,WACdpa,EAAShH,KAAKqhB,cAAc,SAI3BrhB,KAAK8H,OAAO7G,cAA2D,IAAzCjB,KAAK8H,OAAO7G,QAAQqgB,iBAChDthB,KAAK8H,OAAO7G,QAAQqgB,mBAAkBthB,KAAKqhB,cAAc5H,MAAMgC,QAAU,QAEtEzb,KAAKoJ,WAAWnI,QAAQqgB,mBAC9BthB,KAAKqhB,cAAc5H,MAAMgC,QAAU,QAIrCzb,KAAKmkB,eAAiBnkB,KAAKyU,UAAUzU,KAAK6lB,eAAe,MAAM7lB,KAAKyI,UAAU,wBAAwBzI,KAAK6lB,kBAE3G7lB,KAAKmkB,eAAerK,iBAAiB,QAAQ,SAAS5S,GACpDA,EAAE6S,iBACF7S,EAAE8S,kBACF,IAAIzT,EAAIkB,EAAKmW,KAAKzc,OACfsG,EAAKgd,UAAUle,IAChBkB,EAAKmW,KAAKrX,GAAKkB,EAAKgd,UAAUle,GAC9BkB,EAAKmW,KAAKrX,GAAGoD,SAASlC,EAAKmW,KAAKrX,GAAG4M,cAAc,GACjD1L,EAAKmW,KAAKrX,GAAG+C,UAAUmQ,MAAMgC,QAAU,GACpChU,EAAKmW,KAAKrX,GAAGigB,MAAK/e,EAAKmW,KAAKrX,GAAGigB,IAAI/M,MAAMgC,QAAU,IACtDhU,EAAKmW,KAAKrX,GAAG8L,YAGb5K,EAAKwf,SAEPxf,EAAKie,WAAaje,EAAKmW,KAAKrX,GAAGigB,IAC/B/e,EAAKme,cACLne,EAAKoP,eACLpP,EAAKoD,UAAS,KAEhBpD,EAAK4d,SAAS7c,YAAYxI,KAAKmkB,gBAE/BnkB,KAAKqkB,uBAAyBrkB,KAAKyU,UAAUzU,KAAKyI,UAAU,sBAAsBzI,KAAK6lB,iBAAiB,SAAS7lB,KAAKyI,UAAU,4BAA4BzI,KAAK6lB,kBACjK7lB,KAAKqkB,uBAAuBvK,iBAAiB,QAAQ,SAAS5S,GAC5DA,EAAE6S,iBACF7S,EAAE8S,kBACF,IAAI4D,EAAOnW,EAAKqC,WAEZod,EAAiB,KAClBzf,EAAKmW,KAAKzc,OAAS,GAAKsG,EAAKmW,KAAKnW,EAAKmW,KAAKzc,OAAO,GAAGqlB,MAAQ/e,EAAKie,aAAYwB,EAAiBzf,EAAKmW,KAAKnW,EAAKmW,KAAKzc,OAAO,GAAGqlB,KAEjI5I,EAAK9K,MACLrL,EAAKkC,SAASiU,GACXsJ,IACDzf,EAAKie,WAAawB,EAClBzf,EAAKme,eAEPne,EAAKoD,UAAS,KAEhBpD,EAAK4d,SAAS7c,YAAYxI,KAAKqkB,wBAE/BrkB,KAAKokB,uBAAyBpkB,KAAKyU,UAAUzU,KAAKyI,UAAU,qBAAqB,SAASzI,KAAKyI,UAAU,4BACzGzI,KAAKokB,uBAAuBtK,iBAAiB,QAAQ,SAAS5S,GAC5DA,EAAE6S,iBACF7S,EAAE8S,kBACFvS,EAAKkC,aACLlC,EAAKoD,UAAS,KAEhBpD,EAAK4d,SAAS7c,YAAYxI,KAAKokB,wBAE5B3c,EAAKmgB,OACN5nB,KAAKmkB,eAAe1K,MAAMC,MAAQ,OAClC1Z,KAAKmkB,eAAe1K,MAAMoO,UAAY,OACtC7nB,KAAKmkB,eAAe1K,MAAM8G,aAAe,MAEzCvgB,KAAKqkB,uBAAuB5K,MAAMC,MAAQ,OAC1C1Z,KAAKqkB,uBAAuB5K,MAAMoO,UAAY,OAC9C7nB,KAAKqkB,uBAAuB5K,MAAM8G,aAAe,MAEjDvgB,KAAKokB,uBAAuB3K,MAAMC,MAAQ,OAC1C1Z,KAAKokB,uBAAuB3K,MAAMoO,UAAY,OAC9C7nB,KAAKokB,uBAAuB3K,MAAM8G,aAAe,QAGrDxW,qBAAsB,SAAS0F,GAC7B,IAAIhI,EAAOzH,KAGP0jB,KACAC,KAWJ,GAVA9c,EAAM4I,EAAQ,SAASlJ,EAAEnD,GACpBA,EAAM2I,OAAStE,EAAKsE,KACrB2X,EAAUnZ,KAAKnH,GAGfugB,EAAapZ,KAAKnH,KAKnBpD,KAAK4gB,aACN,GAAG8C,EAAUviB,OAAQ,CAEnBnB,KAAK4gB,aAAaxW,UAAY,GAC9BpK,KAAK4gB,aAAanH,MAAMgC,QAAU,GAClC5U,EAAM6c,EAAW,SAASnd,EAAEnD,GAC1BqE,EAAKmZ,aAAapY,YAAYf,EAAKI,MAAM+b,gBAAgBxgB,EAAMuM,iBAKjE3P,KAAK4gB,aAAanH,MAAMgC,QAAU,OAKtC5U,EAAM7G,KAAK4d,KAAM,SAASrX,EAAE+X,GAC1BA,EAAIvU,qBAAqB4Z,QAK/Btc,EAAWG,SAAS0D,QAAQ6T,MAAQ1X,EAAWG,SAAS0D,QAAQ6Y,MAAMpgB,QACpE0O,SAAU,WAER,GADArS,KAAK6D,SACF7D,KAAK4d,KACN,IAAI,IAAIrX,EAAE,EAAGA,EAAEvG,KAAK4d,KAAKzc,OAAQoF,IAC/BvG,KAAK4d,KAAKrX,GAAG8L,YAInBC,WAAY,WAEV,GADAtS,KAAK6D,SACF7D,KAAK4d,KACN,IAAI,IAAIrX,EAAE,EAAGA,EAAEvG,KAAK4d,KAAKzc,OAAQoF,IAC/BvG,KAAK4d,KAAKrX,GAAG+L,cAInBC,cAAe,WACb,OAAO7M,KAAKC,IAAID,KAAKiT,IAAI,GAAG3Y,KAAK0Z,OAAO,IAE1CnQ,SAAU,WACR,IAAIue,EAAc9nB,KAAKoJ,WAAW4E,WAAWhO,KAAK8H,OAAOkJ,WAEzDhR,KAAK8lB,WAAagC,EAAYnT,OAAS,MACvC3U,KAAK+nB,aAAeD,EAAA,SAA0B,KAC9C9nB,KAAKgoB,uBAAyBF,EAAYrW,YAAcqW,EAAY9W,MACpEhR,KAAK0Z,MAAQ,GACb1Z,KAAK6D,UAEP2F,MAAO,WAELxJ,KAAK+e,MAAQ/e,KAAK6H,MAAMogB,WACxBjoB,KAAKsJ,UAAUd,YAAYxI,KAAK+e,OAChC/e,KAAKkoB,MAAQloB,KAAK6H,MAAMsgB,eACxBnoB,KAAK+e,MAAMvW,YAAYxI,KAAKkoB,OAC5BloB,KAAKooB,WAAapoB,KAAK6H,MAAMwgB,cAC7BroB,KAAKkoB,MAAM1f,YAAYxI,KAAKooB,YAC5BpoB,KAAKulB,WAAavlB,KAAK6H,MAAMygB,eAC7BtoB,KAAK+e,MAAMvW,YAAYxI,KAAKulB,YAG5B,IAAIthB,EAAMjE,KAAKmmB,iBAAiB,GAAE,GA2BlC,GA1BAnmB,KAAK+nB,aAAe9jB,EAAIkP,aACxBnT,KAAK0Z,MAAQzV,EAAIsO,gBAAkB,EAE/BvS,KAAKiB,QAAQ6X,SAef9Y,KAAKolB,MAAQzgB,SAAS6Q,cAAc,OACpCxV,KAAKsJ,UAAUd,YAAYxI,KAAKolB,SAfhCplB,KAAK2U,MAAQ3U,KAAK6H,MAAM0X,UAAUvf,KAAK0W,YACvC1W,KAAKsJ,UAAUd,YAAYxI,KAAK2U,OAChC3U,KAAKghB,eAAiBhhB,KAAK6H,MAAMoZ,wBACjCjhB,KAAK2U,MAAMnM,YAAYxI,KAAKghB,gBACzBhhB,KAAK8H,OAAOyP,cACbvX,KAAKuX,YAAcvX,KAAK6H,MAAM8Y,eAAe3gB,KAAK8H,OAAOyP,aACzDvX,KAAKsJ,UAAUd,YAAYxI,KAAKuX,cAElCvX,KAAKolB,MAAQplB,KAAK6H,MAAMgZ,mBACxB7gB,KAAKsJ,UAAUd,YAAYxI,KAAKolB,OAChCplB,KAAK4gB,aAAejc,SAAS6Q,cAAc,OAC3CxV,KAAKolB,MAAM5c,YAAYxI,KAAK4gB,eAO9B5gB,KAAKolB,MAAM5c,YAAYxI,KAAK+e,OAC5B/e,KAAKqlB,SAAWrlB,KAAK6H,MAAMyd,kBAC3BtlB,KAAKolB,MAAM5c,YAAYxI,KAAKqlB,UAEzBrlB,KAAKgoB,uBAGN,IAFA,IAAIO,EAAKtkB,EAAI6S,kBACT0R,EAAQvkB,EAAIqZ,gBAAkBxW,IAAYyhB,GACtChiB,EAAE,EAAGA,EAAEiiB,EAAMrnB,OAAQoF,IAAK,CAChC,IAAIkiB,EA1CGzoB,KA0CO6H,MAAM6gB,mBAAmBH,EAAGC,EAAMjiB,IAAImQ,YACjD6R,EAAGC,EAAMjiB,IAAItF,QAAQ8c,SAAQ0K,EAAGhP,MAAMgC,QAAU,QA3C5Czb,KA4CFooB,WAAW5f,YAAYigB,QA5CrBzoB,KAgDJooB,WAAW5f,YAhDPxI,KAgDwB6H,MAAM6gB,mBAAmB1oB,KAAK8lB,aAGjE7hB,EAAIiG,UACJlK,KAAKulB,WAAWnb,UAAY,GAG5BpK,KAAK2oB,qBAvDM3oB,KAuDsB6H,MAAM6gB,mBAAmB,KAvD/C1oB,KAwDNooB,WAAW5f,YAAYxI,KAAK2oB,sBAGjC3oB,KAAK2lB,eAEP5T,oBAAqB,SAASjG,GAC5B9L,KAAK6W,eACL7W,KAAK6D,UAEP+kB,eAAgB,WACd,OAAOxiB,MAAY6f,QAAUjmB,KAAK+nB,eAA3B,SAETlC,aAAc,WACZ,OAAO7lB,KAAK8lB,YAEdK,iBAAkB,SAAS5f,EAAEsiB,GAC3B,IAAIC,EAAc1iB,KAAWpG,KAAK8H,OAAOkJ,OACrClF,EAAS9L,KAAKoJ,WAAWH,eAAe6f,EAAa9oB,KAAKoJ,YAC1DkV,EAAMte,KAAKulB,WAAW/c,YAAYxI,KAAK6H,MAAMwgB,eAC7ClT,EAASmJ,EACTte,KAAKgoB,yBACP7S,EAASnV,KAAK6H,MAAMyX,eACpBhB,EAAI9V,YAAY2M,IAGlB,IAAItS,EAAM7C,KAAKoJ,WAAWD,aAAa2C,GACrC1C,WAAYpJ,KAAKoJ,WACjBtB,OAAQghB,EACRxf,UAAW6L,EACXpJ,KAAM/L,KAAK+L,KAAK,IAAIxF,EACpB2L,OAAQlS,KACR8Y,SAAS,EACTgG,WAAW,IAgBb,OAbAjc,EAAI0G,WACAsf,IACFhmB,EAAI2G,QACJ3G,EAAI4G,YAEJ5G,EAAIkmB,cAAgBzK,EAAI9V,YAAYxI,KAAK6H,MAAMyX,gBAC/Czc,EAAIyb,IAAMA,EACVzb,EAAImmB,eAAiBhpB,KAAK6H,MAAMyd,kBAChCziB,EAAIkmB,cAAcvgB,YAAY3F,EAAImmB,gBAClCnmB,EAAImmB,eAAevP,MAAMwP,OAAS,EAClCpmB,EAAImmB,eAAevP,MAAMwG,QAAU,GAG9Bpd,GAETqH,QAAS,WACPlK,KAAKoK,UAAY,GACdpK,KAAK2U,OAAS3U,KAAK2U,MAAMoC,YAAY/W,KAAK2U,MAAMoC,WAAWC,YAAYhX,KAAK2U,OAC5E3U,KAAKuX,aAAevX,KAAKuX,YAAYR,YAAY/W,KAAKuX,YAAYR,WAAWC,YAAYhX,KAAKuX,aAC9FvX,KAAKulB,YAAcvlB,KAAKulB,WAAWxO,YAAY/W,KAAKulB,WAAWxO,WAAWC,YAAYhX,KAAKulB,YAC3FvlB,KAAK+e,OAAS/e,KAAK+e,MAAMhI,YAAY/W,KAAK+e,MAAMhI,WAAWC,YAAYhX,KAAK+e,OAC5E/e,KAAKolB,OAASplB,KAAKolB,MAAMrO,YAAY/W,KAAKolB,MAAMrO,WAAWC,YAAYhX,KAAKolB,OAE/EplB,KAAK4d,KAAO5d,KAAK2U,MAAQ3U,KAAKuX,YAAcvX,KAAKulB,WAAavlB,KAAK+e,MAAQ/e,KAAKolB,MAAQ,KAExFplB,KAAK6D,UAEP8F,SAAU,SAASM,EAAO8N,GAKxB,GAHA9N,EAAQA,MAGLjK,KAAK8H,OAAOqJ,SACb,KAAMlH,EAAM9I,OAASnB,KAAK8H,OAAOqJ,UAC/BlH,EAAMM,KAAKvK,KAAK4oB,kBAQpB,GALG5oB,KAAK8H,OAAOoJ,UAAYjH,EAAM9I,OAASnB,KAAK8H,OAAOoJ,WACpDjH,EAAQA,EAAM+c,MAAM,EAAEhnB,KAAK8H,OAAOoJ,WAGnBvP,IAAesI,KACdjK,KAAKiY,WAAvB,CAEA,IAAIiR,GAAkB,EAElBzhB,EAAOzH,KACX6G,EAAMoD,EAAM,SAAS1D,EAAEuI,GAClBrH,EAAKmW,KAAKrX,GAEXkB,EAAKmW,KAAKrX,GAAGoD,SAASmF,IAGtBrH,EAAKwf,OAAOnY,GACZoa,GAAkB,KAItB,IAAI,IAAIlc,EAAE/C,EAAM9I,OAAQ6L,EAAEvF,EAAKmW,KAAKzc,OAAQ6L,IAAK,CAC/C,IAAImI,EAAS1N,EAAKmW,KAAK5Q,GAAG1D,UACtB7B,EAAKugB,wBACPvgB,EAAKmW,KAAK5Q,GAAGsR,IAAIvH,WAAWC,YAAYvP,EAAKmW,KAAK5Q,GAAGsR,KAEvD7W,EAAKmW,KAAK5Q,GAAG9C,UACViL,EAAO4B,YAAY5B,EAAO4B,WAAWC,YAAY7B,GACpD1N,EAAKmW,KAAK5Q,GAAK,KACfkc,GAAkB,EAEpBzhB,EAAKmW,KAAOnW,EAAKmW,KAAKoJ,MAAM,EAAE/c,EAAM9I,QAEpCsG,EAAKoP,gBACFqS,GAAmBnR,IAAStQ,EAAK0hB,oBAEpC1hB,EAAKoD,aAIPse,kBAAmB,WACjB,IAAI1hB,EAAOzH,KAGPmR,EAAWnR,KAAK8H,OAAOqJ,UAAYnR,KAAK8H,OAAOqJ,UAAYnR,KAAK4d,KAAKzc,OAErEioB,GAAmB,EACvBviB,EAAM7G,KAAK4d,KAAK,SAASrX,EAAEuF,GAEtBA,EAAOyY,kBACLhe,IAAMkB,EAAKmW,KAAKzc,OAAS,EAC1B2K,EAAOyY,gBAAgB9K,MAAMgC,QAAU,QAGvC2N,GAAmB,EACnBtd,EAAOyY,gBAAgB9K,MAAMgC,QAAU,KAKxC3P,EAAO0Y,gBACLrT,EACDrF,EAAO0Y,cAAc/K,MAAMgC,QAAU,QAGrC2N,GAAmB,EACnBtd,EAAO0Y,cAAc/K,MAAMgC,QAAU,KAItC3P,EAAOwY,gBACR8E,GAAmB,KAKvBviB,EAAM7G,KAAK4d,KAAK,SAASrX,EAAEuF,GAEvBA,EAAOid,cAActP,MAAMgC,QAD1B2N,EACoC,GAGA,SAIvCppB,KAAK2oB,qBAAqBlP,MAAMgC,QAD/B2N,EACyC,GAGA,OAG5C,IAAI/B,GAAkB,EAElBrnB,KAAKiK,MAAM9I,OAKe,IAAtBnB,KAAKiK,MAAM9I,QACjBnB,KAAK+e,MAAMtF,MAAMgC,QAAU,GAC3Bzb,KAAKokB,uBAAuB3K,MAAMgC,QAAU,OAGzCtK,GAAYnR,KAAK8kB,6BAClB9kB,KAAKqkB,uBAAuB5K,MAAMgC,QAAU,QAG5Czb,KAAKqkB,uBAAuB5K,MAAMgC,QAAU,GAC5C4L,GAAkB,KAIpBrnB,KAAK+e,MAAMtF,MAAMgC,QAAU,GAExBtK,GAAYnR,KAAK8kB,6BAClB9kB,KAAKqkB,uBAAuB5K,MAAMgC,QAAU,QAG5Czb,KAAKqkB,uBAAuB5K,MAAMgC,QAAU,GAC5C4L,GAAkB,GAGjBlW,GAAYnR,KAAK4kB,6BAClB5kB,KAAKokB,uBAAuB3K,MAAMgC,QAAU,QAG5Czb,KAAKokB,uBAAuB3K,MAAMgC,QAAU,GAC5C4L,GAAkB,KAjCpBrnB,KAAKqkB,uBAAuB5K,MAAMgC,QAAU,OAC5Czb,KAAKokB,uBAAuB3K,MAAMgC,QAAU,OAC5Czb,KAAK+e,MAAMtF,MAAMgC,QAAU,QAoCzBzb,KAAK8H,OAAOoJ,UAAYlR,KAAK8H,OAAOoJ,UAAYlR,KAAK4d,KAAKzc,QAAWnB,KAAKklB,gBAC5EllB,KAAKmkB,eAAe1K,MAAMgC,QAAU,QAGpCzb,KAAKmkB,eAAe1K,MAAMgC,QAAU,GACpC4L,GAAkB,GAOlBrnB,KAAKqlB,SAAS5L,MAAMgC,QAJlB4L,EAI4B,GAHA,QAMlCxQ,aAAc,WACZ,IAAIpP,EAAOzH,KACXA,KAAKiK,SAELpD,EAAM7G,KAAK4d,KAAK,SAASrX,EAAEuF,GAEzBrE,EAAKwC,MAAM1D,GAAKuF,EAAOhC,aAEzB9J,KAAKiY,WAAatW,IAAe3B,KAAKiK,QAExCgd,OAAQ,SAAShd,GACf,IAAIxC,EAAOzH,KACPuG,EAAIvG,KAAK4d,KAAKzc,OAElBsG,EAAKmW,KAAKrX,GAAKvG,KAAKmmB,iBAAiB5f,GAErC,IAAIihB,EAAkB/f,EAAKmW,KAAKrX,GAAGyiB,eAG/BhpB,KAAK0kB,sBACPjd,EAAKmW,KAAKrX,GAAGie,cAAgBxkB,KAAKyU,UAAU,GAAG,SAASzU,KAAKyI,UAAU,kCACvEhB,EAAKmW,KAAKrX,GAAGie,cAAczP,WAAa,UACxCtN,EAAKmW,KAAKrX,GAAGie,cAAc5Y,aAAa,SAASrF,GACjDkB,EAAKmW,KAAKrX,GAAGie,cAAc1K,iBAAiB,QAAQ,SAAS5S,GAC3DA,EAAE6S,iBACF7S,EAAE8S,kBACF,IAAIzT,EAAgC,EAA5BvG,KAAK2L,aAAa,UAEtB1B,EAAQxC,EAAKqC,WAEb2d,KACJ5gB,EAAMoD,EAAM,SAAS+C,EAAEsR,GAClBtR,IAAIzG,GACPkhB,EAAOld,KAAK+T,KAEd7W,EAAKkC,SAAS8d,GACdhgB,EAAKoD,UAAS,KAEhB2c,EAAgBhf,YAAYf,EAAKmW,KAAKrX,GAAGie,gBAIxCje,IAAMvG,KAAKglB,oBACZvd,EAAKmW,KAAKrX,GAAG+d,cAAgBtkB,KAAKyU,UAAU,GAAG,SAASzU,KAAKyI,UAAU,yBACvEhB,EAAKmW,KAAKrX,GAAG+d,cAAcvP,WAAa,UACxCtN,EAAKmW,KAAKrX,GAAG+d,cAAc1Y,aAAa,SAASrF,GACjDkB,EAAKmW,KAAKrX,GAAG+d,cAAcxK,iBAAiB,QAAQ,SAAS5S,GAC3DA,EAAE6S,iBACF7S,EAAE8S,kBACF,IAAIzT,EAAgC,EAA5BvG,KAAK2L,aAAa,UAE1B,KAAGpF,GAAG,GAAN,CACA,IAAIqX,EAAOnW,EAAKqC,WACZ7F,EAAM2Z,EAAKrX,EAAE,GACjBqX,EAAKrX,EAAE,GAAKqX,EAAKrX,GACjBqX,EAAKrX,GAAKtC,EAEVwD,EAAKkC,SAASiU,GACdnW,EAAKoD,UAAS,MAEhB2c,EAAgBhf,YAAYf,EAAKmW,KAAKrX,GAAG+d,gBAGvCtkB,KAAKglB,oBACPvd,EAAKmW,KAAKrX,GAAGge,gBAAkBvkB,KAAKyU,UAAU,GAAG,WAAWzU,KAAKyI,UAAU,2BAC3EhB,EAAKmW,KAAKrX,GAAGge,gBAAgBxP,WAAa,YAC1CtN,EAAKmW,KAAKrX,GAAGge,gBAAgB3Y,aAAa,SAASrF,GACnDkB,EAAKmW,KAAKrX,GAAGge,gBAAgBzK,iBAAiB,QAAQ,SAAS5S,GAC7DA,EAAE6S,iBACF7S,EAAE8S,kBACF,IAAIzT,EAAgC,EAA5BvG,KAAK2L,aAAa,UACtBiS,EAAOnW,EAAKqC,WAChB,KAAGvD,GAAGqX,EAAKzc,OAAO,GAAlB,CACA,IAAI8C,EAAM2Z,EAAKrX,EAAE,GACjBqX,EAAKrX,EAAE,GAAKqX,EAAKrX,GACjBqX,EAAKrX,GAAKtC,EAEVwD,EAAKkC,SAASiU,GACdnW,EAAKoD,UAAS,MAEhB2c,EAAgBhf,YAAYf,EAAKmW,KAAKrX,GAAGge,kBAGxCta,GAAOxC,EAAKmW,KAAKrX,GAAGoD,SAASM,IAElC0b,YAAa,WACX,IAAIle,EAAOzH,KAEXA,KAAKohB,WAAY,EACjBphB,KAAKqhB,cAAgBrhB,KAAKyU,UAAU,GAAG,WAAWzU,KAAKyI,UAAU,oBAC9DzI,KAAKghB,iBACNhhB,KAAKghB,eAAexY,YAAYxI,KAAKqhB,eACrCrhB,KAAKqhB,cAAcvH,iBAAiB,QAAQ,SAAS5S,GACnDA,EAAE6S,iBACF7S,EAAE8S,kBAECvS,EAAK2Z,WACN3Z,EAAK2Z,WAAY,EACjB3Z,EAAK2d,MAAM3L,MAAMgC,QAAU,GAC3BhU,EAAKuN,cAAchV,KAAK,GAAG,WAAWyH,EAAKgB,UAAU,sBAGrDhB,EAAK2Z,WAAY,EACjB3Z,EAAK2d,MAAM3L,MAAMgC,QAAU,OAC3BhU,EAAKuN,cAAchV,KAAK,GAAG,SAASyH,EAAKgB,UAAU,qBAKpDzI,KAAKiB,QAAQmgB,WACdpa,EAAShH,KAAKqhB,cAAc,SAI3BrhB,KAAK8H,OAAO7G,cAA2D,IAAzCjB,KAAK8H,OAAO7G,QAAQqgB,iBAChDthB,KAAK8H,OAAO7G,QAAQqgB,mBAAkBthB,KAAKqhB,cAAc5H,MAAMgC,QAAU,QAEtEzb,KAAKoJ,WAAWnI,QAAQqgB,mBAC9BthB,KAAKqhB,cAAc5H,MAAMgC,QAAU,SAKvCzb,KAAKmkB,eAAiBnkB,KAAKyU,UAAUzU,KAAK6lB,eAAe,MAAM7lB,KAAKyI,UAAU,wBAAwBzI,KAAK6lB,kBAC3G7lB,KAAKmkB,eAAerK,iBAAiB,QAAQ,SAAS5S,GACpDA,EAAE6S,iBACF7S,EAAE8S,kBAEFvS,EAAKwf,SACLxf,EAAKoP,eACLpP,EAAK0hB,oBACL1hB,EAAKoD,UAAS,KAEhBpD,EAAK4d,SAAS7c,YAAYxI,KAAKmkB,gBAE/BnkB,KAAKqkB,uBAAyBrkB,KAAKyU,UAAUzU,KAAKyI,UAAU,sBAAsBzI,KAAK6lB,iBAAiB,SAAS7lB,KAAKyI,UAAU,4BAA4BzI,KAAK6lB,kBACjK7lB,KAAKqkB,uBAAuBvK,iBAAiB,QAAQ,SAAS5S,GAC5DA,EAAE6S,iBACF7S,EAAE8S,kBAEF,IAAI4D,EAAOnW,EAAKqC,WAChB8T,EAAK9K,MACLrL,EAAKkC,SAASiU,GACdnW,EAAKoD,UAAS,KAEhBpD,EAAK4d,SAAS7c,YAAYxI,KAAKqkB,wBAE/BrkB,KAAKokB,uBAAyBpkB,KAAKyU,UAAUzU,KAAKyI,UAAU,qBAAqB,SAASzI,KAAKyI,UAAU,4BACzGzI,KAAKokB,uBAAuBtK,iBAAiB,QAAQ,SAAS5S,GAC5DA,EAAE6S,iBACF7S,EAAE8S,kBAEFvS,EAAKkC,aACLlC,EAAKoD,UAAS,KAEhBpD,EAAK4d,SAAS7c,YAAYxI,KAAKokB,2BAKnC/c,EAAWG,SAAS0D,QAAQme,SAAWhiB,EAAWyK,eAAenO,QAC/D0O,SAAU,WACR,GAAGrS,KAAKkL,QAAS,CACf,IAAI,IAAI3E,EAAE,EAAGA,EAAEvG,KAAKkL,QAAQ/J,OAAQoF,IAC9BvG,KAAKkL,QAAQ3E,IACjBvG,KAAKkL,QAAQ3E,GAAG+L,aAEftS,KAAKkL,QAAQlL,KAAKqO,OAAOrO,KAAKkL,QAAQlL,KAAKqO,MAAMgE,WAEtDrS,KAAK6D,UAEPyO,WAAY,WAEV,GADAtS,KAAK6D,SACF7D,KAAKkL,QACN,IAAI,IAAI3E,EAAE,EAAGA,EAAEvG,KAAKkL,QAAQ/J,OAAQoF,IAC9BvG,KAAKkL,QAAQ3E,IACjBvG,KAAKkL,QAAQ3E,GAAG+L,cAItBC,cAAe,WACb,OAAIvS,KAAKkL,QAAQlL,KAAKqO,MACf3I,KAAKC,IAAI3F,KAAKkL,QAAQlL,KAAKqO,MAAMkE,gBAAgB,GADpB,GAGtC/F,OAAQ,WACN,GAAGxM,KAAKkL,QACN,IAAI,IAAI3E,EAAE,EAAGA,EAAEvG,KAAKkL,QAAQ/J,OAAQoF,IAC9BvG,KAAKkL,QAAQ3E,IACjBvG,KAAKkL,QAAQ3E,GAAGiG,SAGpBxM,KAAKspB,SAASrS,UAAW,EACzBjX,KAAK6D,UAEP4I,QAAS,WACP,GAAGzM,KAAKkL,QACN,IAAI,IAAI3E,EAAE,EAAGA,EAAEvG,KAAKkL,QAAQ/J,OAAQoF,IAC9BvG,KAAKkL,QAAQ3E,IACjBvG,KAAKkL,QAAQ3E,GAAGkG,UAGpBzM,KAAKspB,SAASrS,UAAW,EACzBjX,KAAK6D,UAEP0lB,aAAc,SAAShjB,GACrB,IAAIkB,EAAOzH,KAEPA,KAAKkL,QAAQ3E,IACfvG,KAAKwpB,iBAAiBjjB,GAGxB,IAAIkjB,EAAgBhiB,EAAKqC,WAEzBrC,EAAK4G,KAAO9H,EAEZkB,EAAK4K,WAELxL,EAAMY,EAAKyD,QAAQ,SAASmD,EAAKvC,GAC3BA,IACDrE,EAAK4G,OAASA,GACZ5G,EAAKiiB,aAAa5d,EAAOnC,SAAS8f,GAAc,GACnD3d,EAAOxC,UAAUmQ,MAAMgC,QAAU,IAE9B3P,EAAOxC,UAAUmQ,MAAMgC,QAAU,UAExChU,EAAKoP,eACLpP,EAAKkiB,qBAEPH,iBAAkB,SAASjjB,GACzB,IAKIuB,EALAL,EAAOzH,KACPqO,EAAOrO,KAAK4pB,MAAMrjB,GAClB4O,EAAS1N,EAAKI,MAAMsb,uBACxB1b,EAAK4X,cAAc7W,YAAY2M,GAIZ,iBAAT9G,GACRvG,EAAS1B,KAAWqB,EAAKK,SAClBuG,KAAOA,GAGdvG,EAAS1B,KAAWqB,EAAKK,OAAOuG,GAChCvG,EAASL,EAAK2B,WAAW4E,WAAWlG,GAGjCuG,EAAKhF,UAAYvD,MAAMC,QAAQsI,EAAKhF,WAAa5B,EAAKK,OAAOuB,UAAYvD,MAAMC,QAAQ0B,EAAKK,OAAOuB,YACpGvB,EAAOuB,SAAW5B,EAAKK,OAAOuB,SAAS6F,OAAOb,EAAKhF,YAIvD,IAAIyC,EAASrE,EAAK2B,WAAWH,eAAenB,GAE5CL,EAAKyD,QAAQ3E,GAAKkB,EAAK2B,WAAWD,aAAa2C,GAC7C1C,WAAY3B,EAAK2B,WACjBtB,OAAQA,EACRwB,UAAW6L,EACXpJ,KAAMtE,EAAKsE,KACXmG,OAAQzK,EACR4B,UAAU,IAEZ5B,EAAKyD,QAAQ3E,GAAGgD,WAChB9B,EAAKyD,QAAQ3E,GAAGiD,QAChB/B,EAAKyD,QAAQ3E,GAAGkD,YAEbhC,EAAKyD,QAAQ3E,GAAG4P,SAAQ1O,EAAKyD,QAAQ3E,GAAG4P,OAAOsD,MAAMgC,QAAU,QAElEhU,EAAKyD,QAAQ3E,GAAGoE,OAASlD,EAAKoiB,iBAAiBtjB,GAE/C4O,EAAO2E,iBAAiB,qBAAqB,WAC3CrS,EAAKkiB,sBAGJpjB,IAAMkB,EAAK4G,OAAM8G,EAAOsE,MAAMgC,QAAU,SAE7ClS,SAAU,WAYR,GATAvJ,KAAK4pB,SACL5pB,KAAKqO,KAAO,EACZrO,KAAKkL,WACLlL,KAAK8pB,cAEL9pB,KAAK0pB,aAAc,OACqC,IAA9C1pB,KAAKoJ,WAAWnI,QAAQ8oB,oBAAmC/pB,KAAK0pB,YAAc1pB,KAAKoJ,WAAWnI,QAAQ8oB,wBACnE,IAAnC/pB,KAAKiB,QAAQ8oB,oBAAmC/pB,KAAK0pB,YAAc1pB,KAAKiB,QAAQ8oB,mBAEvF/pB,KAAK8H,OAAO6G,MACb3O,KAAK2O,OAAQ,EACb3O,KAAK4pB,MAAQ5pB,KAAK8H,OAAO6G,aAClB3O,KAAK8H,OAAO6G,WAEhB,GAAG3O,KAAK8H,OAAOyG,MAClBvO,KAAKuO,OAAQ,EACbvO,KAAK4pB,MAAQ5pB,KAAK8H,OAAOyG,aAClBvO,KAAK8H,OAAOyG,UAEhB,CACH,GAAIvO,KAAK8H,OAAOuG,MAA6B,QAArBrO,KAAK8H,OAAOuG,KAgB5BvI,MAAMC,QAAQ/F,KAAK8H,OAAOuG,MAChCrO,KAAK4pB,MAAQ5pB,KAAK8H,OAAOuG,KAGzBrO,KAAK4pB,OAAS5pB,KAAK8H,OAAOuG,WAhB1B,GAHArO,KAAK4pB,OAAS,SAAS,SAAS,UAAU,UAAU,SAAS,QAAQ,QAGlE5pB,KAAK8H,OAAOwG,SAAU,CACvB,IAAIA,EAAWtO,KAAK8H,OAAOwG,SACJ,iBAApB,IAAOA,EAAP,YAAA3H,IAAO2H,KAA2BxI,MAAMC,QAAQuI,KACjDA,GAAYA,IAEd,IAAI0b,KACJnjB,EAAM7G,KAAK4pB,MAAM,SAASrjB,EAAE8H,IACK,IAA5BC,EAASW,QAAQZ,IAAc2b,EAAczf,KAAK8D,KAEvDrO,KAAK4pB,MAAQI,SASVhqB,KAAK8H,OAAOuG,KAGrBrO,KAAKiqB,aAAejqB,KAAKmX,eAAenX,KAAK4pB,QAE/CpgB,MAAO,WACL,IAAI/B,EAAOzH,KACPsJ,EAAYtJ,KAAKsJ,UAErBtJ,KAAKmW,OAASnW,KAAK+Y,MAAQ/Y,KAAK6H,MAAMmR,kBAAkBhZ,KAAK0W,YAC7D1W,KAAKsJ,UAAUd,YAAYxI,KAAKmW,QAEhCnW,KAAKspB,SAAWtpB,KAAK6H,MAAMqiB,YAAYlqB,KAAKiqB,cAC5C3gB,EAAUd,YAAYxI,KAAKspB,UAC3BtpB,KAAKspB,SAASxP,iBAAiB,SAAS,SAAS5S,GAC/CA,EAAE6S,iBACF7S,EAAE8S,kBAEFvS,EAAK8hB,aAAa9hB,EAAKwiB,aAAahb,QAAQjP,KAAKiK,QACjDxC,EAAKoD,UAAS,KAGhB7K,KAAKqf,cAAgB1a,SAAS6Q,cAAc,OAC5ClM,EAAUd,YAAYxI,KAAKqf,eAG3B,IAAIzW,KACDnB,EAAK2B,WAAWnI,QAAQ4H,oBACzBD,EAAkBC,kBAAoBpB,EAAK2B,WAAWnI,QAAQ4H,mBAGhE7I,KAAK6pB,iBAAmB7pB,KAAK6H,MAAMsiB,mBAAmBnqB,KAAKspB,UAC3DziB,EAAM7G,KAAK4pB,MAAM,SAASrjB,EAAE8H,GAG1B,IAAIvG,EAFJL,EAAKyD,QAAQ3E,IAAK,EAIC,iBAAT8H,GACRvG,EAAS1B,KAAWqB,EAAKK,SAClBuG,KAAOA,GAGdvG,EAAS1B,KAAWqB,EAAKK,OAAOuG,GAG7BA,EAAKhF,UAAYvD,MAAMC,QAAQsI,EAAKhF,WAAa5B,EAAKK,OAAOuB,UAAYvD,MAAMC,QAAQ0B,EAAKK,OAAOuB,YACpGvB,EAAOuB,SAAW5B,EAAKK,OAAOuB,SAAS6F,OAAOb,EAAKhF,YAIvD5B,EAAKqiB,WAAWvjB,GAAK,IAAIc,EAAW0B,UAAUtB,EAAK2B,WAAWtB,EAAOc,KAGvE5I,KAAKupB,aAAa,IAEpBxX,oBAAqB,SAASjG,GACzB9L,KAAKkL,QAAQlL,KAAKqO,QACnBrO,KAAK6W,eACL7W,KAAK2pB,qBAGP3pB,KAAK6D,UAEP8lB,kBAAmB,WACjB,IAAIM,EAAejqB,KAAKmX,eAAenX,KAAK4pB,OAC5C/iB,EAAM7G,KAAK6pB,iBAAkB,SAAStjB,EAAEoE,GACtCA,EAAOoL,YAAckU,EAAa1jB,MAGtCsQ,aAAc,WACZ7W,KAAKiK,MAAQjK,KAAKkL,QAAQlL,KAAKqO,MAAMvE,YAEvCH,SAAU,SAASmF,EAAIiJ,GAErB,IAAItQ,EAAOzH,KACX6G,EAAM7G,KAAK8pB,WAAY,SAASvjB,EAAEuC,GAChC,IAAIA,EAAUe,SAASiF,GAAK3N,OAG1B,OAFAsG,EAAK4G,KAAO9H,EACZkB,EAAK6hB,SAASrf,MAAQxC,EAAKwiB,aAAa1jB,IACjC,IAIXvG,KAAKupB,aAAavpB,KAAKqO,MAEvBrO,KAAKkL,QAAQlL,KAAKqO,MAAM1E,SAASmF,EAAIiJ,GAErC/X,KAAK6W,eACLpP,EAAKoD,YAEPX,QAAS,WACPrD,EAAM7G,KAAKkL,QAAS,SAASmD,EAAKvC,GAC7BA,GAAQA,EAAO5B,YAEjBlK,KAAKqf,eAAiBrf,KAAKqf,cAActI,YAAY/W,KAAKqf,cAActI,WAAWC,YAAYhX,KAAKqf,eACpGrf,KAAKspB,UAAYtpB,KAAKspB,SAASvS,YAAY/W,KAAKspB,SAASvS,WAAWC,YAAYhX,KAAKspB,UACxFtpB,KAAK6D,UAEPkG,qBAAsB,SAAS0F,GAC7B,IAAIhI,EAAOzH,KAGX,GAAGA,KAAK2O,OAAS3O,KAAKuO,MAAO,CAC3B,IAAI6b,EAAapqB,KAAK2O,MAAO,QAAU,QACvC9H,EAAM7G,KAAKkL,QAAQ,SAAS3E,EAAEuF,GAC5B,GAAIA,EAAJ,CACA,IAAIue,EAAQ5iB,EAAKsE,KAAK,IAAIqe,EAAW,IAAI7jB,EAAE,IACvC+jB,KACJzjB,EAAM4I,EAAQ,SAASzC,EAAE5J,GACvB,GAAGA,EAAM2I,KAAKgB,OAAO,EAAEsd,EAAMlpB,UAAUkpB,EAAO,CAC5C,IAAIE,EAAYnkB,KAAWhD,GAC3BmnB,EAAUxe,KAAOtE,EAAKsE,KAAKwe,EAAUxe,KAAKgB,OAAOsd,EAAMlpB,QACvDmpB,EAAW/f,KAAKggB,MAIpBze,EAAO/B,qBAAqBugB,WAI9BzjB,EAAM7G,KAAKkL,QAAQ,SAASmD,EAAKvC,GAC3BA,GACJA,EAAO/B,qBAAqB0F,QAOpCpI,EAAWG,SAAS0D,QAApB,KAAsC7D,EAAWyK,eAAenO,QAC9D4O,cAAe,WACb,OAAO,GAET/I,MAAO,WACWxJ,KAAKsJ,UACrBtJ,KAAK2U,MAAQ3U,KAAKmW,OAASnW,KAAK+Y,MAAQ/Y,KAAK6H,MAAMmR,kBAAkBhZ,KAAK0W,YAC1E1W,KAAKsJ,UAAUd,YAAYxI,KAAK2U,OAEhC3U,KAAKiB,QAAQupB,YAAcxqB,KAAKiB,QAAQupB,gBAExCxqB,KAAA,KAAeA,KAAK8H,OAAL,KACf9H,KAAKyqB,SAAW,EAChBzqB,KAAK0qB,kBACL1qB,KAAK2qB,eAGL,IADA,IAAIljB,EAAOzH,KACHuG,EAAE,EAAGA,EAAEvG,KAAA,KAAamB,OAAQoF,IAClCvG,KAAK0qB,eAAenkB,GAAKvG,KAAKiB,QAAQupB,YAAYjkB,IAAM,UAAUA,EAAE,GACpEvG,KAAK2qB,YAAYpkB,GAAKvG,KAAK4qB,QAAQ5qB,KAAA,KAAauG,IAIlDvG,KAAKspB,SAAWtpB,KAAK6H,MAAMqiB,YAAYlqB,KAAK0qB,gBAC5C1qB,KAAKsJ,UAAUd,YAAYxI,KAAKspB,UAGhCtpB,KAAK6qB,aAAe7qB,KAAK6H,MAAMgZ,mBAC/B7gB,KAAKsJ,UAAUd,YAAYxI,KAAK6qB,cAE7B7qB,KAAKiB,QAAQ6pB,eAAc9qB,KAAK6qB,aAAapR,MAAMgC,QAAU,QAEhEzb,KAAKspB,SAASxP,iBAAiB,SAAS,WACtCrS,EAAKgjB,SAAWhjB,EAAKijB,eAAezb,QAAQjP,KAAKiK,OACjDxC,EAAKwC,MAAQxC,EAAA,KAAaA,EAAKgjB,UAC/BhjB,EAAKoP,eACLpP,EAAKoD,UAAS,KAEhB7K,KAAKiK,MAAQjK,KAAA,KAAa,GAC1BA,KAAK6W,eAEsB,IAAxB7W,KAAA,KAAamB,SAAcnB,KAAKspB,SAAS7P,MAAMgC,QAAU,SAE9D5E,aAAc,WACZ,IAAIpP,EAAOzH,KACXyH,EAAKgjB,UAAY,EACjB,IAAI/a,EAAc/N,IAAe3B,KAAKiK,OACtCpD,EAAM7G,KAAA,KAAc,SAASuG,EAAGU,GAC9B,GAAGyI,IAAgB/N,IAAesF,GAEhC,OADAQ,EAAKgjB,SAAWlkB,GACT,IAIRkB,EAAKgjB,SAAS,EACfhjB,EAAKkC,SAASlC,EAAA,KAAa,KAI7BzH,KAAKspB,SAASrf,MAAQjK,KAAK0qB,eAAe1qB,KAAKyqB,UAC/CzqB,KAAK6qB,aAAazgB,UAAYpK,KAAK2qB,YAAY3qB,KAAKyqB,YAEtDje,OAAQ,WACFxM,KAAK6Z,kBAAiB7Z,KAAKspB,SAASrS,UAAW,GACnDjX,KAAK6D,UAEP4I,QAAS,WACPzM,KAAKspB,SAASrS,UAAW,EACzBjX,KAAK6D,UAEP+mB,QAAS,SAAS3jB,GAChB,IAAIQ,EAAOzH,KAEX,GAAU,OAAPiH,EACD,MAAO,gBAGJ,GAAiB,iBAAd,IAAOA,EAAP,YAAAN,IAAOM,IAAiB,CAE9B,IAAIpE,EAAM,GAkBV,OAhBAgE,EAAMI,EAAG,SAASV,EAAE4b,GAClB,IAAI7G,EAAO7T,EAAKmjB,QAAQzI,GAGnBrc,MAAMC,QAAQkB,KAEjBqU,EAAO,YAAY/U,EAAE,UAAU+U,EAAK,UAItCzY,GAAO,OAAOyY,EAAK,UAGCzY,EAAnBiD,MAAMC,QAAQkB,GAAW,OAAOpE,EAAI,QAC5B,4EAA4EA,EAAI,QAKxF,MAAiB,kBAAPoE,EACNA,EAAI,OAAS,QAGA,iBAAPA,EACNA,EAAG0L,QAAQ,KAAK,SAASA,QAAQ,KAAK,QAAQA,QAAQ,KAAK,QAI3D1L,GAGX0C,SAAU,SAASmF,GACd9O,KAAKiK,QAAU6E,IAChB9O,KAAKiK,MAAQ6E,EACb9O,KAAK6W,eACL7W,KAAK6K,aAGTX,QAAS,WACJlK,KAAK6qB,cAAgB7qB,KAAK6qB,aAAa9T,YAAY/W,KAAK6qB,aAAa9T,WAAWC,YAAYhX,KAAK6qB,cACjG7qB,KAAK2U,OAAS3U,KAAK2U,MAAMoC,YAAY/W,KAAK2U,MAAMoC,WAAWC,YAAYhX,KAAK2U,OAC5E3U,KAAKspB,UAAYtpB,KAAKspB,SAASvS,YAAY/W,KAAKspB,SAASvS,WAAWC,YAAYhX,KAAKspB,UAExFtpB,KAAK6D,YAITwD,EAAWG,SAAS0D,QAAQ6f,OAAS1jB,EAAWyK,eAAenO,QAC7DgG,SAAU,SAASM,EAAM8N,GAIvB,IAAIG,EAHJjO,EAAQjK,KAAKgrB,SAAS/gB,GAAO,IAI1BjK,KAAKirB,YAAYhc,QAAQiJ,GAAa,IACvCA,EAAYlY,KAAKirB,YAAY,IAG5BjrB,KAAKiK,QAAUiO,IAIlBlY,KAAK6X,MAAM5N,MAAQjK,KAAKkrB,aAAalrB,KAAKirB,YAAYhc,QAAQiJ,IAC3DlY,KAAKmrB,SAASnrB,KAAKmrB,QAAQA,QAAQ,MAAMnrB,KAAK6X,MAAM5N,OACvDjK,KAAKiK,MAAQiO,EACblY,KAAK6K,aAEPwH,SAAU,WACRrS,KAAK6D,SACD7D,KAAK6X,OACT7X,KAAK6X,MAAMjM,aAAa,OAAO5L,KAAK0S,WAEtCJ,WAAY,WACVtS,KAAK6D,SACD7D,KAAK6X,OACT7X,KAAK6X,MAAMC,gBAAgB,SAE7BvF,cAAe,WACb,IAAIvS,KAAKkrB,aAAc,OAAO,EAE9B,IADA,IAAIE,EAAeprB,KAAK0W,WAAWvV,OAC3BoF,EAAE,EAAGA,EAAEvG,KAAKkrB,aAAa/pB,OAAQoF,IACvC6kB,EAAe1lB,KAAKC,IAAIylB,EAAaprB,KAAKkrB,aAAa3kB,GAAGpF,OAAO,GAEnE,OAAOuE,KAAKiT,IAAI,GAAGjT,KAAKC,IAAIylB,EAAa,EAAE,KAE7CJ,SAAU,SAAS/gB,GACjB,MAAwB,YAArBjK,KAAK8H,OAAOuG,OACJpE,EAEkB,WAArBjK,KAAK8H,OAAOuG,KACX,EAAEpE,EAEkB,YAArBjK,KAAK8H,OAAOuG,KACX3I,KAAKwK,MAAY,EAANjG,GAGX,GAAGA,GAGdH,SAAU,WACR,OAAO9J,KAAKiK,OAEdV,SAAU,WACR,IAKIhD,EALAkB,EAAOzH,KAQX,GAPAA,KAAK6Y,WAAa,SAClB7Y,KAAKkrB,gBACLlrB,KAAKirB,eACLjrB,KAAKqrB,gBAIFrrB,KAAK8H,OAAL,KAAqB,CACtB,IAAI2T,EAAUzb,KAAK8H,OAAO7G,SAAWjB,KAAK8H,OAAO7G,QAAQupB,gBAEzD3jB,EAAM7G,KAAK8H,OAAL,KAAoB,SAASvB,EAAEoE,GACnClD,EAAKyjB,aAAa3kB,GAAK,GAAGoE,EAC1BlD,EAAK4jB,aAAa9kB,GAAK,IAAIkV,EAAQlV,IAAMoE,GACzClD,EAAKwjB,YAAY1kB,GAAKkB,EAAKujB,SAASrgB,KAGlC3K,KAAKkX,eACPzP,EAAK4jB,aAAavX,QAAQ,KAC1BrM,EAAKyjB,aAAapX,QAAQ,aAC1BrM,EAAKwjB,YAAYnX,aAAQ1S,SAKxB,GAAwB,YAArBpB,KAAK8H,OAAOuG,KAClB5G,EAAK4jB,aAAerrB,KAAK8H,OAAO7G,SAAWjB,KAAK8H,OAAO7G,QAAQupB,cAAgB,OAAO,SACtF/iB,EAAKyjB,cAAgB,IAAI,IACzBzjB,EAAKwjB,cAAe,GAAK,GAErBjrB,KAAKkX,eACPzP,EAAK4jB,aAAavX,QAAQ,KAC1BrM,EAAKyjB,aAAapX,QAAQ,aAC1BrM,EAAKwjB,YAAYnX,aAAQ1S,QAKxB,KAAGpB,KAAK8H,OAAOwjB,WA0DlB,KAAM,wDAnDN,GANAtrB,KAAKsrB,cACLtrB,KAAKqrB,gBACLrrB,KAAKkrB,gBACLlrB,KAAKirB,eAGAnlB,MAAMC,QAAQ/F,KAAK8H,OAAOwjB,YAkB7B,IAAI/kB,EAAE,EAAGA,EAAEvG,KAAK8H,OAAOwjB,WAAWnqB,OAAQoF,IAEA,iBAA9BvG,KAAK8H,OAAOwjB,WAAW/kB,GAC/BvG,KAAKsrB,WAAW/kB,IACdD,OAAQtG,KAAK8H,OAAOwjB,WAAW/kB,IAIzBT,MAAMC,QAAQ/F,KAAK8H,OAAOwjB,WAAW/kB,IAI7CvG,KAAKsrB,WAAW/kB,GAAKvG,KAAK8H,OAAOwjB,WAAW/kB,GAH5CvG,KAAKsrB,WAAW/kB,GAAKH,KAAWpG,KAAK8H,OAAOwjB,WAAW/kB,SA1BxDvG,KAAK8H,OAAOyjB,UACbvrB,KAAKsrB,aAEDhlB,OAAQtG,KAAK8H,OAAOwjB,WACpBrhB,MAAOjK,KAAK8H,OAAOyjB,YAKvBvrB,KAAKsrB,aAEDhlB,OAAQtG,KAAK8H,OAAOwjB,aAyB5B,IAAI/kB,EAAE,EAAGA,EAAEvG,KAAKsrB,WAAWnqB,OAAQoF,IAC9BvG,KAAKsrB,WAAW/kB,GAAG0D,QACpBjK,KAAKsrB,WAAW/kB,GAAG0D,MAAQjK,KAAKoJ,WAAWgC,gBAAgBpL,KAAKsrB,WAAW/kB,GAAG0D,MAAOjK,KAAKwS,kBAEzFxS,KAAKsrB,WAAW/kB,GAAGoO,QACpB3U,KAAKsrB,WAAW/kB,GAAGoO,MAAQ3U,KAAKoJ,WAAWgC,gBAAgBpL,KAAKsrB,WAAW/kB,GAAGoO,MAAO3U,KAAKwS,kBAEzFxS,KAAKsrB,WAAW/kB,GAAGwI,SACpB/O,KAAKsrB,WAAW/kB,GAAGwI,OAAS/O,KAAKoJ,WAAWgC,gBAAgBpL,KAAKsrB,WAAW/kB,GAAGwI,OAAQ/O,KAAKwS,oBASpGhJ,MAAO,WACL,IAAI/B,EAAOzH,KACPA,KAAKiB,QAAQ6X,UAAS9Y,KAAKmW,OAASnW,KAAK+Y,MAAQ/Y,KAAK6H,MAAMmR,kBAAkBhZ,KAAK0W,aACpF1W,KAAK8H,OAAOyP,cAAavX,KAAKuX,YAAcvX,KAAK6H,MAAMoR,wBAAwBjZ,KAAK8H,OAAOyP,cAE3FvX,KAAKiB,QAAQ6X,UAAS9Y,KAAKsJ,UAAUyL,WAAa,YAErD/U,KAAK6X,MAAQ7X,KAAK6H,MAAM2jB,eAAexrB,KAAKkrB,cAC5ClrB,KAAK6H,MAAM4jB,iBAAiBzrB,KAAK6X,MAAM7X,KAAKkrB,aAAalrB,KAAKqrB,eAE3DrrB,KAAK8H,OAAO6R,UAAY3Z,KAAK8H,OAAO8R,YACrC5Z,KAAK6Z,iBAAkB,EACvB7Z,KAAK6X,MAAMZ,UAAW,GAGxBjX,KAAK6X,MAAMiC,iBAAiB,SAAS,SAAS5S,GAC5CA,EAAE6S,iBACF7S,EAAE8S,kBACFvS,EAAKikB,kBAGP1rB,KAAKua,QAAUva,KAAK6H,MAAM2S,eAAexa,KAAK+Y,MAAO/Y,KAAK6X,MAAO7X,KAAKuX,aACtEvX,KAAKsJ,UAAUd,YAAYxI,KAAKua,SAEhCva,KAAKiK,MAAQjK,KAAKirB,YAAY,IAEhCS,cAAe,WACb,IAEIC,EAFA7c,EAAM9O,KAAK6X,MAAM5N,OAKnB0hB,GADqC,IAApC3rB,KAAKkrB,aAAajc,QAAQH,GACjB9O,KAAKirB,YAAY,GAGjBjrB,KAAKirB,YAAYjrB,KAAKkrB,aAAajc,QAAQH,OAIxC9O,KAAKiK,QAGpBjK,KAAKiK,MAAQ0hB,EACb3rB,KAAK6K,UAAS,KAEhB+gB,aAAc,WAEZ,GAAGnoB,OAAOsX,QAAUtX,OAAOsX,OAAO/W,IAAMP,OAAOsX,OAAO/W,GAAGmnB,UAAYnrB,KAAKkrB,aAAa/pB,OAAS,GAAMnB,KAAKkrB,aAAa/pB,QAAUnB,KAAKsrB,YAAc,CACnJ,IAAIrqB,EAAUmF,KAAWiB,EAAW4T,QAAQkQ,SACzCnrB,KAAK8H,OAAO7G,SAAWjB,KAAK8H,OAAO7G,QAAQ4qB,kBAAiB5qB,EAAUmF,EAAQnF,EAAQjB,KAAK8H,OAAO7G,QAAQ4qB,kBAC7G7rB,KAAKmrB,QAAU1nB,OAAOsX,OAAO/a,KAAK6X,OAAOsT,QAAQlqB,GACjD,IAAIwG,EAAOzH,KACXA,KAAKmrB,QAAQ9gB,GAAG,eAAe,WAC7B5C,EAAKoQ,MAAM5N,MAAQxC,EAAK0jB,QAAQA,QAAQ,OACxC1jB,EAAKikB,kBAEP1rB,KAAKmrB,QAAQ9gB,GAAG,SAAS,WACvB5C,EAAKoQ,MAAM5N,MAAQxC,EAAK0jB,QAAQA,QAAQ,OACxC1jB,EAAKikB,uBAIP1rB,KAAKmrB,QAAU,MAGnB1hB,UAAW,WACTzJ,KAAK6D,SACL7D,KAAK6H,MAAM4S,gBAAgBza,KAAK6X,OAChC7X,KAAK4rB,gBAEPvY,qBAAsB,WACpB,IAAiBK,EAAM1G,EAGvB,GAAGhN,KAAKsrB,WAAY,CAClB5X,EAAO1T,KAAKkW,wBAIZ,IAHA,IAAIwU,KACAoB,KAEIvlB,EAAE,EAAGA,EAAEvG,KAAKsrB,WAAWnqB,OAAQoF,IAErC,GAAGT,MAAMC,QAAQ/F,KAAKsrB,WAAW/kB,IAC/BmkB,EAAiBA,EAAexb,OAAOlP,KAAKsrB,WAAW/kB,IACvDulB,EAAgBA,EAAc5c,OAAOlP,KAAKsrB,WAAW/kB,QAElD,CACH,IAAIyK,KASJ,GANEA,EADClL,MAAMC,QAAQ/F,KAAKsrB,WAAW/kB,GAAGD,QAC1BtG,KAAKsrB,WAAW/kB,GAAGD,OAGnBoN,EAAK1T,KAAKsrB,WAAW/kB,GAAGD,QAGxB,CAMR,GAJGtG,KAAKsrB,WAAW/kB,GAAGygB,QACpBhW,EAAQlL,MAAMhC,UAAUkjB,MAAM9iB,MAAM8M,EAAMhR,KAAKsrB,WAAW/kB,GAAGygB,QAG5DhnB,KAAKsrB,WAAW/kB,GAAGwI,OAAQ,CAC5B,IAAIgd,KACJ,IAAI/e,EAAE,EAAGA,EAAEgE,EAAM7P,OAAQ6L,IACpBhN,KAAKsrB,WAAW/kB,GAAGwI,QAAQxI,EAAEyG,EAAEgf,KAAKhb,EAAMhE,GAAGyG,QAAQC,KAAQqY,EAAUxhB,KAAKyG,EAAMhE,IAEvFgE,EAAQ+a,EAGV,IAAIE,KACAC,KACJ,IAAIlf,EAAE,EAAGA,EAAEgE,EAAM7P,OAAQ6L,IAAK,CAC5B,IAAIgf,EAAOhb,EAAMhE,GAGdhN,KAAKsrB,WAAW/kB,GAAG0D,MACpBiiB,EAAYlf,GAAKhN,KAAKsrB,WAAW/kB,GAAG0D,OAClC1D,EAAGyG,EACHgf,KAAMA,IAKRE,EAAYlf,GAAKgE,EAAMhE,GAItBhN,KAAKsrB,WAAW/kB,GAAGoO,MACpBsX,EAAYjf,GAAKhN,KAAKsrB,WAAW/kB,GAAGoO,OAClCpO,EAAGyG,EACHgf,KAAMA,IAKRC,EAAYjf,GAAKkf,EAAYlf,GAMjC0d,EAAiBA,EAAexb,OAAOgd,GACvCJ,EAAgBA,EAAc5c,OAAO+c,IAK3C,IAAIE,EAAansB,KAAKiK,MAEtBjK,KAAK6H,MAAM4jB,iBAAiBzrB,KAAK6X,MAAO6S,EAAgBoB,GACxD9rB,KAAKkrB,aAAeR,EACpB1qB,KAAKqrB,aAAeS,EACpB9rB,KAAKirB,YAAcP,EAEhB1qB,KAAKmrB,SACNnrB,KAAKmrB,QAAQA,QAAQ,YAIoB,IAAxCT,EAAezb,QAAQkd,IACxBnsB,KAAK6X,MAAM5N,MAAQkiB,EACnBnsB,KAAKiK,MAAQkiB,IAIbnsB,KAAK6X,MAAM5N,MAAQygB,EAAe,GAClC1qB,KAAKiK,MAAQygB,EAAe,IAAM,GAC/B1qB,KAAKkS,OAAQlS,KAAKkS,OAAOH,oBAAoB/R,MAC3CA,KAAKoJ,WAAWyB,WACrB7K,KAAKoJ,WAAWkD,eAAetM,KAAK+L,OAGtC/L,KAAK4rB,eAGP5rB,KAAK6D,UAEP2I,OAAQ,WACFxM,KAAK6Z,kBACP7Z,KAAK6X,MAAMZ,UAAW,EACnBjX,KAAKmrB,SAASnrB,KAAKmrB,QAAQA,QAAQ,UAAS,IAEjDnrB,KAAK6D,UAEP4I,QAAS,WACPzM,KAAK6X,MAAMZ,UAAW,EACnBjX,KAAKmrB,SAASnrB,KAAKmrB,QAAQA,QAAQ,UAAS,GAC/CnrB,KAAK6D,UAEPqG,QAAS,WACJlK,KAAK+Y,OAAS/Y,KAAK+Y,MAAMhC,YAAY/W,KAAK+Y,MAAMhC,WAAWC,YAAYhX,KAAK+Y,OAC5E/Y,KAAKuX,aAAevX,KAAKuX,YAAYR,YAAY/W,KAAKuX,YAAYR,WAAWC,YAAYhX,KAAKuX,aAC9FvX,KAAK6X,OAAS7X,KAAK6X,MAAMd,YAAY/W,KAAK6X,MAAMd,WAAWC,YAAYhX,KAAK6X,OAC5E7X,KAAKmrB,UACNnrB,KAAKmrB,QAAQA,QAAQ,WACrBnrB,KAAKmrB,QAAU,MAGjBnrB,KAAK6D,YAITwD,EAAWG,SAAS0D,QAAQkhB,UAAY/kB,EAAWyK,eAAenO,QAChEgG,SAAU,SAASM,EAAM8N,GAIvB,IAAIG,EAHJjO,EAAQjK,KAAKgrB,SAAS/gB,GAAO,IAI1BjK,KAAKirB,YAAYhc,QAAQiJ,GAAa,IACvCA,EAAYlY,KAAKirB,YAAY,IAG5BjrB,KAAKiK,QAAUiO,IAIlBlY,KAAK6X,MAAM5N,MAAQjK,KAAKkrB,aAAalrB,KAAKirB,YAAYhc,QAAQiJ,IAE3DlY,KAAKosB,WACNpsB,KAAKosB,UAAU,GAAGA,UAAUC,QAAQnU,GAGtClY,KAAKiK,MAAQiO,EACblY,KAAK6K,aAEPwH,SAAU,WACRrS,KAAK6D,SACD7D,KAAK6X,OACT7X,KAAK6X,MAAMjM,aAAa,OAAO5L,KAAK0S,WAEtCJ,WAAY,WACVtS,KAAK6D,SACD7D,KAAK6X,OACT7X,KAAK6X,MAAMC,gBAAgB,SAE7BvF,cAAe,WACb,IAAIvS,KAAKkrB,aAAc,OAAO,EAE9B,IADA,IAAIE,EAAeprB,KAAK0W,WAAWvV,OAC3BoF,EAAE,EAAGA,EAAEvG,KAAKkrB,aAAa/pB,OAAQoF,IACvC6kB,EAAe1lB,KAAKC,IAAIylB,EAAaprB,KAAKkrB,aAAa3kB,GAAGpF,OAAO,GAEnE,OAAOuE,KAAKiT,IAAI,GAAGjT,KAAKC,IAAIylB,EAAa,EAAE,KAE7CJ,SAAU,SAAS/gB,GACjB,MAAwB,YAArBjK,KAAK8H,OAAOuG,OACJpE,EAEkB,WAArBjK,KAAK8H,OAAOuG,KACX,EAAEpE,EAEkB,YAArBjK,KAAK8H,OAAOuG,KACX3I,KAAKwK,MAAY,EAANjG,GAGX,GAAGA,GAGdH,SAAU,WACR,OAAO9J,KAAKiK,OAEdV,SAAU,WACR,IAKIhD,EALAkB,EAAOzH,KAQX,GAPAA,KAAK6Y,WAAa,SAClB7Y,KAAKkrB,gBACLlrB,KAAKirB,eACLjrB,KAAKqrB,gBAIFrrB,KAAK8H,OAAOwkB,KAAM,CACnB,IAAI7Q,EAAUzb,KAAK8H,OAAO7G,SAAWjB,KAAK8H,OAAO7G,QAAQupB,gBAEzD3jB,EAAM7G,KAAK8H,OAAOwkB,KAAK,SAAS/lB,EAAEoE,GAChClD,EAAKyjB,aAAa3kB,GAAK,GAAGoE,EAC1BlD,EAAK4jB,aAAa9kB,GAAK,IAAIkV,EAAQlV,IAAMoE,GACzClD,EAAKwjB,YAAY1kB,GAAKkB,EAAKujB,SAASrgB,UAInC,GAAwB,YAArB3K,KAAK8H,OAAOuG,KAClB5G,EAAK4jB,aAAerrB,KAAK8H,OAAO7G,SAAWjB,KAAK8H,OAAO7G,QAAQupB,cAAgB,OAAO,SACtF/iB,EAAKyjB,cAAgB,IAAI,KACzBzjB,EAAKwjB,cAAe,GAAK,OAGtB,KAAGjrB,KAAK8H,OAAOwjB,WA0DlB,KAAM,wDAnDN,GANAtrB,KAAKsrB,cACLtrB,KAAKqrB,gBACLrrB,KAAKkrB,gBACLlrB,KAAKirB,eAGAnlB,MAAMC,QAAQ/F,KAAK8H,OAAOwjB,YAkB7B,IAAI/kB,EAAE,EAAGA,EAAEvG,KAAK8H,OAAOwjB,WAAWnqB,OAAQoF,IAEA,iBAA9BvG,KAAK8H,OAAOwjB,WAAW/kB,GAC/BvG,KAAKsrB,WAAW/kB,IACdD,OAAQtG,KAAK8H,OAAOwjB,WAAW/kB,IAIzBT,MAAMC,QAAQ/F,KAAK8H,OAAOwjB,WAAW/kB,IAI7CvG,KAAKsrB,WAAW/kB,GAAKvG,KAAK8H,OAAOwjB,WAAW/kB,GAH5CvG,KAAKsrB,WAAW/kB,GAAKH,KAAWpG,KAAK8H,OAAOwjB,WAAW/kB,SA1BxDvG,KAAK8H,OAAOyjB,UACbvrB,KAAKsrB,aAEDhlB,OAAQtG,KAAK8H,OAAOwjB,WACpBrhB,MAAOjK,KAAK8H,OAAOyjB,YAKvBvrB,KAAKsrB,aAEDhlB,OAAQtG,KAAK8H,OAAOwjB,aAyB5B,IAAI/kB,EAAE,EAAGA,EAAEvG,KAAKsrB,WAAWnqB,OAAQoF,IAC9BvG,KAAKsrB,WAAW/kB,GAAG0D,QACpBjK,KAAKsrB,WAAW/kB,GAAG0D,MAAQjK,KAAKoJ,WAAWgC,gBAAgBpL,KAAKsrB,WAAW/kB,GAAG0D,MAAOjK,KAAKwS,kBAEzFxS,KAAKsrB,WAAW/kB,GAAGoO,QACpB3U,KAAKsrB,WAAW/kB,GAAGoO,MAAQ3U,KAAKoJ,WAAWgC,gBAAgBpL,KAAKsrB,WAAW/kB,GAAGoO,MAAO3U,KAAKwS,kBAEzFxS,KAAKsrB,WAAW/kB,GAAGwI,SACpB/O,KAAKsrB,WAAW/kB,GAAGwI,OAAS/O,KAAKoJ,WAAWgC,gBAAgBpL,KAAKsrB,WAAW/kB,GAAGwI,OAAQ/O,KAAKwS,oBASpGhJ,MAAO,WACL,IAAI/B,EAAOzH,KACPA,KAAKiB,QAAQ6X,UAAS9Y,KAAKmW,OAASnW,KAAK+Y,MAAQ/Y,KAAK6H,MAAMmR,kBAAkBhZ,KAAK0W,aACpF1W,KAAK8H,OAAOyP,cAAavX,KAAKuX,YAAcvX,KAAK6H,MAAMoR,wBAAwBjZ,KAAK8H,OAAOyP,cAE3FvX,KAAKiB,QAAQ6X,UAAS9Y,KAAKsJ,UAAUyL,WAAa,YAErD/U,KAAK6X,MAAQ7X,KAAK6H,MAAM2jB,eAAexrB,KAAKkrB,cAC5ClrB,KAAK6H,MAAM4jB,iBAAiBzrB,KAAK6X,MAAM7X,KAAKkrB,aAAalrB,KAAKqrB,eAE3DrrB,KAAK8H,OAAO6R,UAAY3Z,KAAK8H,OAAO8R,YACrC5Z,KAAK6Z,iBAAkB,EACvB7Z,KAAK6X,MAAMZ,UAAW,GAGxBjX,KAAK6X,MAAMiC,iBAAiB,SAAS,SAAS5S,GAC5CA,EAAE6S,iBACF7S,EAAE8S,kBACFvS,EAAKikB,kBAGP1rB,KAAKua,QAAUva,KAAK6H,MAAM2S,eAAexa,KAAK+Y,MAAO/Y,KAAK6X,MAAO7X,KAAKuX,aACtEvX,KAAKsJ,UAAUd,YAAYxI,KAAKua,SAEhCva,KAAKiK,MAAQjK,KAAKirB,YAAY,IAEhCS,cAAe,WACb,IAAI5c,EAAM9O,KAAK6X,MAAM5N,OAGkB,IAApCjK,KAAKkrB,aAAajc,QAAQH,IACf9O,KAAKkrB,aAAa,GAGhClrB,KAAKiK,MAAQjK,KAAKirB,YAAYjrB,KAAKkrB,aAAajc,QAAQH,IACxD9O,KAAK6K,UAAS,IAEhB0hB,eAAgB,WAEd,IAAI9kB,EAAOzH,KACX,GAAGyD,OAAOsX,QAAUtX,OAAOsX,OAAO/W,IAAMP,OAAOsX,OAAO/W,GAAGooB,YAAcpsB,KAAKkrB,aAAa/pB,QAAU,GAAMnB,KAAKkrB,aAAa/pB,QAAUnB,KAAKsrB,YAAc,CACtJ,IAAIrqB,EAAUmF,KAAWiB,EAAW4T,QAAQmR,WACzCpsB,KAAK8H,OAAO7G,SAAWjB,KAAK8H,OAAO7G,QAAQurB,oBAAmBvrB,EAAUmF,EAAQnF,EAAQjB,KAAK8H,OAAO7G,QAAQurB,oBAC/GxsB,KAAKosB,UAAY3oB,OAAOsX,OAAO/a,KAAK6X,OAAOuU,UAAUhmB,EAAQnF,GAE3DwrB,QAAQ,EACR5hB,SAAW,WACTpD,EAAKikB,yBAKT1rB,KAAKosB,UAAY,MAGrB3iB,UAAW,WACTzJ,KAAK6D,SACL7D,KAAK6H,MAAM4S,gBAAgBza,KAAK6X,OAChC7X,KAAKusB,kBAEPlZ,qBAAsB,WACpB,IAAiBK,EAAM1G,EAGvB,GAAGhN,KAAKsrB,WAAY,CAClB5X,EAAO1T,KAAKkW,wBAIZ,IAHA,IAAIwU,KACAoB,KAEIvlB,EAAE,EAAGA,EAAEvG,KAAKsrB,WAAWnqB,OAAQoF,IAErC,GAAGT,MAAMC,QAAQ/F,KAAKsrB,WAAW/kB,IAC/BmkB,EAAiBA,EAAexb,OAAOlP,KAAKsrB,WAAW/kB,IACvDulB,EAAgBA,EAAc5c,OAAOlP,KAAKsrB,WAAW/kB,SAGlD,GAAGmN,EAAK1T,KAAKsrB,WAAW/kB,GAAGD,QAAS,CACvC,IAAI0K,EAAQ0C,EAAK1T,KAAKsrB,WAAW/kB,GAAGD,QAOpC,GAJGtG,KAAKsrB,WAAW/kB,GAAGygB,QACpBhW,EAAQlL,MAAMhC,UAAUkjB,MAAM9iB,MAAM8M,EAAMhR,KAAKsrB,WAAW/kB,GAAGygB,QAG5DhnB,KAAKsrB,WAAW/kB,GAAGwI,OAAQ,CAC5B,IAAIgd,KACJ,IAAI/e,EAAE,EAAGA,EAAEgE,EAAM7P,OAAQ6L,IACpBhN,KAAKsrB,WAAW/kB,GAAGwI,QAAQxI,EAAEyG,EAAEgf,KAAKhb,EAAMhE,MAAM+e,EAAUxhB,KAAKyG,EAAMhE,IAE1EgE,EAAQ+a,EAGV,IAAIE,KACAC,KACJ,IAAIlf,EAAE,EAAGA,EAAEgE,EAAM7P,OAAQ6L,IAAK,CAC5B,IAAIgf,EAAOhb,EAAMhE,GAGdhN,KAAKsrB,WAAW/kB,GAAG0D,MACpBiiB,EAAYlf,GAAKhN,KAAKsrB,WAAW/kB,GAAG0D,OAClC1D,EAAGyG,EACHgf,KAAMA,IAKRE,EAAYlf,GAAKgE,EAAMhE,GAItBhN,KAAKsrB,WAAW/kB,GAAGoO,MACpBsX,EAAYjf,GAAKhN,KAAKsrB,WAAW/kB,GAAGoO,OAClCpO,EAAGyG,EACHgf,KAAMA,IAKRC,EAAYjf,GAAKkf,EAAYlf,GAMjC0d,EAAiBA,EAAexb,OAAOgd,GACvCJ,EAAgBA,EAAc5c,OAAO+c,GAIzC,IAAIE,EAAansB,KAAKiK,MAEtBjK,KAAK6H,MAAM4jB,iBAAiBzrB,KAAK6X,MAAO6S,EAAgBoB,GACxD9rB,KAAKkrB,aAAeR,EACpB1qB,KAAKqrB,aAAeS,EACpB9rB,KAAKirB,YAAcP,GAGwB,IAAxCA,EAAezb,QAAQkd,IACxBnsB,KAAK6X,MAAM5N,MAAQkiB,EACnBnsB,KAAKiK,MAAQkiB,IAKbnsB,KAAK6X,MAAM5N,MAAQygB,EAAe,GAClC1qB,KAAKiK,MAAQygB,EAAe,IAAM,GAC/B1qB,KAAKkS,OAAQlS,KAAKkS,OAAOH,oBAAoB/R,MAC3CA,KAAKoJ,WAAWyB,WACrB7K,KAAKoJ,WAAWkD,eAAetM,KAAK+L,OAGnC/L,KAAKosB,UAENpsB,KAAK0sB,uBAAuBhC,GAG5B1qB,KAAKusB,iBAGPvsB,KAAK6D,WAGT6oB,uBAAwB,SAAShC,GAC/B,IAAIiC,EAAa3sB,KAAKosB,UAAU,GAAGA,UAC/B3kB,EAAOzH,KAIX,IAAI,IAAIgP,KAFR2d,EAAWniB,MACXmiB,EAAWC,eACElC,EACXiC,EAAWE,WAAW5iB,MAAMygB,EAAe1b,GAAG7M,KAAKuoB,EAAe1b,KAEpE2d,EAAWN,QAAQrsB,KAAKiK,OACxB0iB,EAAWtiB,GAAG,SAAS,WACrB5C,EAAKikB,mBAGTlf,OAAQ,WACFxM,KAAK6Z,kBACP7Z,KAAK6X,MAAMZ,UAAW,EACnBjX,KAAKosB,WACNpsB,KAAKosB,UAAU,GAAGA,UAAUU,UAGhC9sB,KAAK6D,UAEP4I,QAAS,WACPzM,KAAK6X,MAAMZ,UAAW,EACnBjX,KAAKosB,WACNpsB,KAAKosB,UAAU,GAAGA,UAAUW,OAE9B/sB,KAAK6D,UAEPqG,QAAS,WACJlK,KAAK+Y,OAAS/Y,KAAK+Y,MAAMhC,YAAY/W,KAAK+Y,MAAMhC,WAAWC,YAAYhX,KAAK+Y,OAC5E/Y,KAAKuX,aAAevX,KAAKuX,YAAYR,YAAY/W,KAAKuX,YAAYR,WAAWC,YAAYhX,KAAKuX,aAC9FvX,KAAK6X,OAAS7X,KAAK6X,MAAMd,YAAY/W,KAAK6X,MAAMd,WAAWC,YAAYhX,KAAK6X,OAC5E7X,KAAKosB,YACNpsB,KAAKosB,UAAU,GAAGA,UAAUliB,UAC5BlK,KAAKosB,UAAY,MAEnBpsB,KAAK6D,YAITwD,EAAWG,SAAS0D,QAAQ8hB,YAAc3lB,EAAWyK,eAAenO,QAClE4F,SAAU,WAER,IAAIhD,EADJvG,KAAK6D,SAGL7D,KAAK0qB,kBACL1qB,KAAKitB,iBAEL,IAAIC,EAAeltB,KAAKoJ,WAAW4E,WAAWhO,KAAK8H,OAAOkJ,WAEtD9J,EAAIgmB,EAAA,SACJC,EAAID,EAAajsB,SAASisB,EAAajsB,QAAQupB,gBAGnD,IAFAxqB,KAAKotB,eACLptB,KAAKqtB,iBACD9mB,EAAE,EAAGA,EAAEW,EAAE/F,OAAQoF,IAEhBvG,KAAKmY,SAASjR,EAAEX,MAAQW,EAAEX,KAE7BvG,KAAKotB,YAAY7iB,KAAKrD,EAAEX,GAAG,IAC3BvG,KAAKqtB,cAAc9iB,MAAM4iB,EAAE5mB,IAAIW,EAAEX,IAAI,IACrCvG,KAAKitB,cAAc/lB,EAAEX,GAAG,IAAMW,EAAEX,KAGpCiD,MAAO,WACL,IAAiBjD,EAAbkB,EAAOzH,KAIX,GAHIA,KAAKiB,QAAQ6X,UAAS9Y,KAAKmW,OAASnW,KAAK+Y,MAAQ/Y,KAAK6H,MAAMmR,kBAAkBhZ,KAAK0W,aACpF1W,KAAK8H,OAAOyP,cAAavX,KAAKuX,YAAcvX,KAAK6H,MAAMoR,wBAAwBjZ,KAAK8H,OAAOyP,eAEzFvX,KAAK8H,OAAO0P,QAAUxX,KAAKotB,YAAYjsB,OAAS,GAA6B,aAAvBnB,KAAK8H,OAAO0P,OAAuB,CAK5F,IAJAxX,KAAK6Y,WAAa,aAElB7Y,KAAKstB,UACLttB,KAAKqlB,YACD9e,EAAE,EAAGA,EAAEvG,KAAKotB,YAAYjsB,OAAQoF,IAAK,CACvCvG,KAAKstB,OAAOttB,KAAKotB,YAAY7mB,IAAMvG,KAAK6H,MAAM0a,cAC9CviB,KAAK0qB,eAAe1qB,KAAKotB,YAAY7mB,IAAMvG,KAAKstB,OAAOttB,KAAKotB,YAAY7mB,IACxE,IAAIwS,EAAQ/Y,KAAK6H,MAAM2a,iBAAiBxiB,KAAKqtB,cAAc9mB,IAC3DvG,KAAKqlB,SAASrlB,KAAKotB,YAAY7mB,IAAMvG,KAAK6H,MAAM2S,eAAezB,EAAO/Y,KAAKstB,OAAOttB,KAAKotB,YAAY7mB,KAGrGvG,KAAKua,QAAUva,KAAK6H,MAAM0lB,uBAAuBvtB,KAAKqlB,SAASrlB,KAAK+Y,MAAM/Y,KAAKuX,iBAE5E,CAOH,IANAvX,KAAK6Y,WAAa,SAClB7Y,KAAK6X,MAAQ7X,KAAK6H,MAAM2jB,eAAexrB,KAAKotB,aAC5CptB,KAAK6H,MAAM4jB,iBAAiBzrB,KAAK6X,MAAM7X,KAAKotB,YAAYptB,KAAKqtB,eAC7DrtB,KAAK6X,MAAMwR,UAAW,EACtBrpB,KAAK6X,MAAM2V,KAAO9nB,KAAKiT,IAAI,GAAG3Y,KAAKotB,YAAYjsB,QAE3CoF,EAAE,EAAGA,EAAEvG,KAAKotB,YAAYjsB,OAAQoF,IAClCvG,KAAK0qB,eAAe1qB,KAAKotB,YAAY7mB,IAAMvG,KAAK6X,MAAMzB,SAAS7P,IAG9DvG,KAAK8H,OAAO6R,UAAY3Z,KAAK8H,OAAO8R,YACrC5Z,KAAK6Z,iBAAkB,EACvB7Z,KAAK6X,MAAMZ,UAAW,GAGxBjX,KAAKua,QAAUva,KAAK6H,MAAM2S,eAAexa,KAAK+Y,MAAO/Y,KAAK6X,MAAO7X,KAAKuX,aAGxEvX,KAAKsJ,UAAUd,YAAYxI,KAAKua,SAChCva,KAAKua,QAAQT,iBAAiB,SAAS,SAAS5S,GAC9CA,EAAE6S,iBACF7S,EAAE8S,kBAEF,IAAIyT,KACJ,IAAIlnB,EAAI,EAAGA,EAAEkB,EAAK2lB,YAAYjsB,OAAQoF,KACjCkB,EAAKijB,eAAejjB,EAAK2lB,YAAY7mB,IAAIkkB,UAAYhjB,EAAKijB,eAAejjB,EAAK2lB,YAAY7mB,IAAIqc,UAAS6K,EAAUljB,KAAK9C,EAAKwlB,cAAcxlB,EAAK2lB,YAAY7mB,KAG/JkB,EAAKimB,YAAYD,GACjBhmB,EAAKoD,UAAS,MAGlBlB,SAAU,SAASM,EAAO8N,GACxB,IAAIxR,EAMJ,IAJoB,iBAAjB,KADH0D,EAAQA,OACL,YAAAtD,IAAOsD,IAAoBA,GAASA,GAC7BnE,MAAMC,QAAQkE,KAASA,MAG7B1D,EAAE,EAAGA,EAAE0D,EAAM9I,OAAQoF,IACA,iBAAb0D,EAAM1D,KAAiB0D,EAAM1D,IAAM,IAI/C,IAAIA,KAAKvG,KAAK0qB,eACR1qB,KAAK0qB,eAAehkB,eAAeH,KAEvCvG,KAAK0qB,eAAenkB,GAAuB,WAApBvG,KAAK6Y,WAAyB,WAAa,YAAoC,IAAtB5O,EAAMgF,QAAQ1I,IAGhGvG,KAAK0tB,YAAYzjB,GACjBjK,KAAK6K,YAEP+gB,aAAc,WACZ,GAAGnoB,OAAOsX,QAAUtX,OAAOsX,OAAO/W,IAAMP,OAAOsX,OAAO/W,GAAGmnB,QAAS,CAC9D,IAAIlqB,EAAUwC,OAAOsX,OAAOpX,UAAU0D,EAAW4T,QAAQkQ,SACtDnrB,KAAK8H,OAAO7G,SAAWjB,KAAK8H,OAAO7G,QAAQ4qB,kBAAiB5qB,EAAUmF,EAAQnF,EAAQjB,KAAK8H,OAAO7G,QAAQ4qB,kBAC7G7rB,KAAKmrB,QAAU1nB,OAAOsX,OAAO/a,KAAK6X,OAAOsT,QAAQlqB,GACjD,IAAIwG,EAAOzH,KACXA,KAAKmrB,QAAQ9gB,GAAG,eAAe,WAC3B,IAAIyE,EAAKrH,EAAK0jB,QAAQA,QAAQ,OAC9B1jB,EAAKwC,MAAQ6E,EACbrH,EAAKoD,UAAS,UAIlB7K,KAAKmrB,QAAU,MAGrBO,cAAe,WACX1rB,KAAKiK,MAAQjK,KAAK6X,MAAM5N,MACxBjK,KAAK6K,UAAS,IAElBpB,UAAW,WACPzJ,KAAK6D,SACL7D,KAAK4rB,gBAETvZ,SAAU,WACRrS,KAAK6D,SACD7D,KAAK6X,OACT7X,KAAK6X,MAAMjM,aAAa,OAAO5L,KAAK0S,WAEtCJ,WAAY,WACVtS,KAAK6D,SACD7D,KAAK6X,OACT7X,KAAK6X,MAAMC,gBAAgB,SAE7BvF,cAAe,WACb,IAAI6Y,EAAeprB,KAAK0W,WAAWvV,OACnC,IAAI,IAAIoF,KAAKvG,KAAKitB,cACZjtB,KAAKitB,cAAcvmB,eAAeH,KACtC6kB,EAAe1lB,KAAKC,IAAIylB,GAAcprB,KAAKitB,cAAc1mB,GAAG,IAAIpF,OAAO,IAGzE,OAAOuE,KAAKiT,IAAI,GAAGjT,KAAKC,IAAIylB,EAAa,EAAE,KAE7CsC,YAAa,SAASzjB,GAGpB,IAFA,IAAIgM,GAAU,EACVwX,KACIlnB,EAAE,EAAGA,EAAE0D,EAAM9I,OAAQoF,IAC3B,GAAIvG,KAAK0qB,eAAezgB,EAAM1D,GAAG,IAAjC,CAIA,IAAI2R,EAAYlY,KAAKmY,SAASnY,KAAKitB,cAAchjB,EAAM1D,KACvDknB,EAAUljB,KAAK2N,GACZA,IAAcjO,EAAM1D,KAAI0P,GAAU,QALnCA,GAAU,EASd,OAFAjW,KAAKiK,MAAQwjB,EACVztB,KAAKmrB,SAASnrB,KAAKmrB,QAAQA,QAAQ,MAAMnrB,KAAKiK,OAC1CgM,GAETkC,SAAU,SAASlO,GACjB,MAA8B,WAA3BjK,KAAK8H,OAAOkJ,MAAM3C,KACZ,EAAEpE,EAEwB,YAA3BjK,KAAK8H,OAAOkJ,MAAM3C,KACjB3I,KAAKwK,MAAY,EAANjG,GAGX,GAAGA,GAGduC,OAAQ,WACN,IAAIxM,KAAK6Z,gBAAiB,CACxB,GAAG7Z,KAAK6X,MACN7X,KAAK6X,MAAMZ,UAAW,OAEnB,GAAGjX,KAAKstB,OACX,IAAI,IAAI/mB,KAAKvG,KAAKstB,OACZttB,KAAKstB,OAAO5mB,eAAeH,KAC/BvG,KAAKstB,OAAO/mB,GAAG0Q,UAAW,GAG3BjX,KAAKmrB,SAASnrB,KAAKmrB,QAAQA,QAAQ,UAAS,GAEjDnrB,KAAK6D,UAEP4I,QAAS,WACP,GAAGzM,KAAK6X,MACN7X,KAAK6X,MAAMZ,UAAW,OAEnB,GAAGjX,KAAKstB,OACX,IAAI,IAAI/mB,KAAKvG,KAAKstB,OACZttB,KAAKstB,OAAO5mB,eAAeH,KAC/BvG,KAAKstB,OAAO/mB,GAAG0Q,UAAW,GAG3BjX,KAAKmrB,SAASnrB,KAAKmrB,QAAQA,QAAQ,UAAS,GAC/CnrB,KAAK6D,UAEPqG,QAAS,WACJlK,KAAKmrB,UACJnrB,KAAKmrB,QAAQA,QAAQ,WACrBnrB,KAAKmrB,QAAU,MAEnBnrB,KAAK6D,YAITwD,EAAWG,SAAS0D,QAAQyiB,OAAStmB,EAAWyK,eAAenO,QAC7D4O,cAAe,WACb,OAAO,GAET/I,MAAO,WACL,IAAI/B,EAAOzH,KAQX,GAPAA,KAAK2U,MAAQ3U,KAAKmW,OAASnW,KAAK+Y,MAAQ/Y,KAAK6H,MAAMmR,kBAAkBhZ,KAAK0W,YAG1E1W,KAAK6X,MAAQ7X,KAAK6H,MAAM0R,kBAAkB,UAC1CvZ,KAAKsJ,UAAUd,YAAYxI,KAAK6X,QAG5B7X,KAAK8H,OAAO6R,WAAa3Z,KAAK8H,OAAO8R,SAAU,CACjD,IAAInW,OAAOmqB,WAAY,KAAM,wCAG7B5tB,KAAK6tB,SAAW7tB,KAAK6H,MAAM0R,kBAAkB,QAE7CvZ,KAAK6tB,SAAS/T,iBAAiB,SAAS,SAAS5S,GAI/C,GAHAA,EAAE6S,iBACF7S,EAAE8S,kBAECha,KAAK8tB,OAAS9tB,KAAK8tB,MAAM3sB,OAAQ,CAClC,IAAI4sB,EAAK,IAAIH,WACbG,EAAGC,OAAS,SAAStpB,GACnB+C,EAAKwC,MAAQvF,EAAIupB,OAAO7K,OACxB3b,EAAKymB,iBACLzmB,EAAKoD,UAAS,GACdkjB,EAAK,MAEPA,EAAGI,cAAcnuB,KAAK8tB,MAAM,OAKlC9tB,KAAKouB,QAAUpuB,KAAK6H,MAAMoR,wBAAwBjZ,KAAK8H,OAAOyP,aAC9DvX,KAAKsJ,UAAUd,YAAYxI,KAAKouB,SAEhCpuB,KAAKua,QAAUva,KAAK6H,MAAM2S,eAAexa,KAAK+Y,MAAO/Y,KAAK6tB,UAAU7tB,KAAK6X,MAAO7X,KAAKouB,SACrFpuB,KAAKsJ,UAAUd,YAAYxI,KAAKua,UAElC2T,eAAgB,WACd,GAAGluB,KAAKquB,eAAiBruB,KAAKiK,QAC9BjK,KAAKquB,aAAeruB,KAAKiK,MAEzBjK,KAAKouB,QAAQhkB,UAAY,GAErBpK,KAAKiK,OAAT,CAEA,IAAIqkB,EAAOtuB,KAAKiK,MAAMskB,MAAM,sBAG5B,GAFGD,IAAMA,EAAOA,EAAK,IAEjBA,GAKF,GADAtuB,KAAKouB,QAAQhkB,UAAY,0BAA0BkkB,EAAK,4BAA4B5oB,KAAKwK,OAAOlQ,KAAKiK,MAAM9I,OAAOnB,KAAKiK,MAAM4I,MAAM,KAAK,GAAG1R,OAAO,GAAG,SAAS,SACxI,UAAnBmtB,EAAKvhB,OAAO,EAAE,GAAc,CAC7B/M,KAAKouB,QAAQhkB,WAAa,OAC1B,IAAIokB,EAAM7pB,SAAS6Q,cAAc,OACjCgZ,EAAI/U,MAAMgV,SAAW,OACrBD,EAAI/U,MAAMuG,UAAY,QACtBwO,EAAIjS,IAAMvc,KAAKiK,MACfjK,KAAKouB,QAAQ5lB,YAAYgmB,SAV3BxuB,KAAKouB,QAAQhkB,UAAY,8BAc7BoC,OAAQ,WACHxM,KAAK6tB,WAAU7tB,KAAK6tB,SAAS5W,UAAW,GAC3CjX,KAAK6D,UAEP4I,QAAS,WACJzM,KAAK6tB,WAAU7tB,KAAK6tB,SAAS5W,UAAW,GAC3CjX,KAAK6D,UAEP8F,SAAU,SAASmF,GACd9O,KAAKiK,QAAU6E,IAChB9O,KAAKiK,MAAQ6E,EACb9O,KAAK6X,MAAM5N,MAAQjK,KAAKiK,MACxBjK,KAAKkuB,iBACLluB,KAAK6K,aAGTX,QAAS,WACJlK,KAAKouB,SAAWpuB,KAAKouB,QAAQrX,YAAY/W,KAAKouB,QAAQrX,WAAWC,YAAYhX,KAAKouB,SAClFpuB,KAAK2U,OAAS3U,KAAK2U,MAAMoC,YAAY/W,KAAK2U,MAAMoC,WAAWC,YAAYhX,KAAK2U,OAC5E3U,KAAK6X,OAAS7X,KAAK6X,MAAMd,YAAY/W,KAAK6X,MAAMd,WAAWC,YAAYhX,KAAK6X,OAC5E7X,KAAK6tB,UAAY7tB,KAAK6tB,SAAS9W,YAAY/W,KAAK6tB,SAAS9W,WAAWC,YAAYhX,KAAK6tB,UAExF7tB,KAAK6D,YAITwD,EAAWG,SAAS0D,QAAQwjB,OAASrnB,EAAWyK,eAAenO,QAC7D4O,cAAe,WACb,OAAO,GAET/I,MAAO,WACL,IAAI/B,EAAOzH,KAQX,GAPAA,KAAK2U,MAAQ3U,KAAKmW,OAASnW,KAAK+Y,MAAQ/Y,KAAK6H,MAAMmR,kBAAkBhZ,KAAK0W,YAG1E1W,KAAK6X,MAAQ7X,KAAK6H,MAAM0R,kBAAkB,UAC1CvZ,KAAKsJ,UAAUd,YAAYxI,KAAK6X,QAG5B7X,KAAK8H,OAAO6R,WAAa3Z,KAAK8H,OAAO8R,SAAU,CAEjD,IAAI5Z,KAAKoJ,WAAWnI,QAAQytB,OAAQ,KAAM,4CAG1C1uB,KAAK6tB,SAAW7tB,KAAK6H,MAAM0R,kBAAkB,QAE7CvZ,KAAK6tB,SAAS/T,iBAAiB,SAAS,SAAS5S,GAI/C,GAHAA,EAAE6S,iBACF7S,EAAE8S,kBAECha,KAAK8tB,OAAS9tB,KAAK8tB,MAAM3sB,OAAQ,CAClC,IAAI4sB,EAAK,IAAIH,WACbG,EAAGC,OAAS,SAAStpB,GACnB+C,EAAKknB,cAAgBjqB,EAAIupB,OAAO7K,OAChC3b,EAAKymB,iBACLzmB,EAAKoD,UAAS,GACdkjB,EAAK,MAEPA,EAAGI,cAAcnuB,KAAK8tB,MAAM,OAKlC,IAAIvW,EAAcvX,KAAK8H,OAAOyP,YACzBA,IAAaA,EAAc,IAEhCvX,KAAKouB,QAAUpuB,KAAK6H,MAAMoR,wBAAwB1B,GAClDvX,KAAKsJ,UAAUd,YAAYxI,KAAKouB,SAEhCpuB,KAAKua,QAAUva,KAAK6H,MAAM2S,eAAexa,KAAK+Y,MAAO/Y,KAAK6tB,UAAU7tB,KAAK6X,MAAO7X,KAAKouB,SACrFpuB,KAAKsJ,UAAUd,YAAYxI,KAAKua,UAElC2T,eAAgB,WACd,GAAGluB,KAAKquB,eAAiBruB,KAAK2uB,gBAC9B3uB,KAAKquB,aAAeruB,KAAK2uB,cAEzB3uB,KAAKouB,QAAQhkB,UAAY,GAErBpK,KAAK2uB,eAAT,CAEA,IAAIlnB,EAAOzH,KAEPsuB,EAAOtuB,KAAK2uB,cAAcJ,MAAM,sBACjCD,IAAMA,EAAOA,EAAK,IACjBA,IAAMA,EAAO,WAEjB,IAAIM,EAAO5uB,KAAK6tB,SAASC,MAAM,GAG/B,GADA9tB,KAAKouB,QAAQhkB,UAAY,0BAA0BkkB,EAAK,4BAA4BM,EAAKpB,KAAK,SACxE,UAAnBc,EAAKvhB,OAAO,EAAE,GAAc,CAC7B/M,KAAKouB,QAAQhkB,WAAa,OAC1B,IAAIokB,EAAM7pB,SAAS6Q,cAAc,OACjCgZ,EAAI/U,MAAMgV,SAAW,OACrBD,EAAI/U,MAAMuG,UAAY,QACtBwO,EAAIjS,IAAMvc,KAAK2uB,cACf3uB,KAAKouB,QAAQ5lB,YAAYgmB,GAG3BxuB,KAAKouB,QAAQhkB,WAAa,OAC1B,IAAIykB,EAAe7uB,KAAKyU,UAAU,SAAU,SAAU,UACtDzU,KAAKouB,QAAQ5lB,YAAYqmB,GACzBA,EAAa/U,iBAAiB,QAAQ,SAASxV,GAC7CA,EAAMyV,iBAEN8U,EAAajjB,aAAa,WAAY,YACtCnE,EAAKI,MAAM+U,iBAAiBnV,EAAKomB,UAE7BpmB,EAAKI,MAAMinB,iBACbrnB,EAAKsnB,YAActnB,EAAKI,MAAMinB,iBAC9BrnB,EAAK2mB,QAAQ5lB,YAAYf,EAAKsnB,cAGhCtnB,EAAK2B,WAAWnI,QAAQytB,OAAOjnB,EAAKsE,KAAM6iB,GACxCI,QAAS,SAAS3tB,GAChBoG,EAAKkC,SAAStI,GAEXoG,EAAKyK,OAAQzK,EAAKyK,OAAOH,oBAAoBtK,GAC3CA,EAAK2B,WAAWyB,WAEjBpD,EAAKsnB,aAAatnB,EAAK2mB,QAAQpX,YAAYvP,EAAKsnB,aACpDF,EAAa/W,gBAAgB,aAE/BmX,QAAS,SAAS7rB,GAChBqE,EAAKI,MAAM8U,cAAclV,EAAKomB,SAAUzqB,GACpCqE,EAAKsnB,aAAatnB,EAAK2mB,QAAQpX,YAAYvP,EAAKsnB,aACpDF,EAAa/W,gBAAgB,aAE/BoX,eAAgB,SAASC,GACnB1nB,EAAKsnB,cACHI,EAAU1nB,EAAKI,MAAMunB,kBAAkB3nB,EAAKsnB,YAAaI,GACxD1nB,EAAKI,MAAMwnB,yBAAyB5nB,EAAKsnB,qBAMxDviB,OAAQ,WACHxM,KAAK6tB,WAAU7tB,KAAK6tB,SAAS5W,UAAW,GAC3CjX,KAAK6D,UAEP4I,QAAS,WACJzM,KAAK6tB,WAAU7tB,KAAK6tB,SAAS5W,UAAW,GAC3CjX,KAAK6D,UAEP8F,SAAU,SAASmF,GACd9O,KAAKiK,QAAU6E,IAChB9O,KAAKiK,MAAQ6E,EACb9O,KAAK6X,MAAM5N,MAAQjK,KAAKiK,MACxBjK,KAAK6K,aAGTX,QAAS,WACJlK,KAAKouB,SAAWpuB,KAAKouB,QAAQrX,YAAY/W,KAAKouB,QAAQrX,WAAWC,YAAYhX,KAAKouB,SAClFpuB,KAAK2U,OAAS3U,KAAK2U,MAAMoC,YAAY/W,KAAK2U,MAAMoC,WAAWC,YAAYhX,KAAK2U,OAC5E3U,KAAK6X,OAAS7X,KAAK6X,MAAMd,YAAY/W,KAAK6X,MAAMd,WAAWC,YAAYhX,KAAK6X,OAC5E7X,KAAK6tB,UAAY7tB,KAAK6tB,SAAS9W,YAAY/W,KAAK6tB,SAAS9W,WAAWC,YAAYhX,KAAK6tB,UAExF7tB,KAAK6D,YAITwD,EAAWG,SAAS0D,QAAQmX,SAAWhb,EAAWyK,eAAenO,QAC/DgG,SAAU,SAASM,EAAM8N,GACvB/X,KAAKiK,QAAUA,EACfjK,KAAK6X,MAAM+K,QAAU5iB,KAAKiK,MAC1BjK,KAAK6K,YAEPwH,SAAU,WACRrS,KAAK6D,SACD7D,KAAK6X,OACT7X,KAAK6X,MAAMjM,aAAa,OAAO5L,KAAK0S,WAEtCJ,WAAY,WACVtS,KAAK6D,SACD7D,KAAK6X,OACT7X,KAAK6X,MAAMC,gBAAgB,SAE7BvF,cAAe,WACb,OAAO7M,KAAKiT,IAAI,GAAGjT,KAAKC,IAAI3F,KAAK0W,WAAWvV,OAAO,EAAE,KAEvDqI,MAAO,WACL,IAAI/B,EAAOzH,KACPA,KAAKiB,QAAQ6X,UACf9Y,KAAK+Y,MAAQ/Y,KAAKmW,OAASnW,KAAK6H,MAAM2a,iBAAiBxiB,KAAK0W,aAE3D1W,KAAK8H,OAAOyP,cAAavX,KAAKuX,YAAcvX,KAAK6H,MAAMoR,wBAAwBjZ,KAAK8H,OAAOyP,cAC3FvX,KAAKiB,QAAQ6X,UAAS9Y,KAAKsJ,UAAUyL,WAAa,YAErD/U,KAAK6X,MAAQ7X,KAAK6H,MAAM0a,cACxBviB,KAAKua,QAAUva,KAAK6H,MAAM2S,eAAexa,KAAK+Y,MAAO/Y,KAAK6X,MAAO7X,KAAKuX,cAEnEvX,KAAK8H,OAAO6R,UAAY3Z,KAAK8H,OAAO8R,YACrC5Z,KAAK6Z,iBAAkB,EACvB7Z,KAAK6X,MAAMZ,UAAW,GAGxBjX,KAAK6X,MAAMiC,iBAAiB,SAAS,SAAS5S,GAC5CA,EAAE6S,iBACF7S,EAAE8S,kBACFvS,EAAKwC,MAAQjK,KAAK4iB,QAClBnb,EAAKoD,UAAS,KAGhB7K,KAAKsJ,UAAUd,YAAYxI,KAAKua,UAElC/N,OAAQ,WACFxM,KAAK6Z,kBACP7Z,KAAK6X,MAAMZ,UAAW,GAExBjX,KAAK6D,UAEP4I,QAAS,WACPzM,KAAK6X,MAAMZ,UAAW,EACtBjX,KAAK6D,UAEPqG,QAAS,WACJlK,KAAK+Y,OAAS/Y,KAAK+Y,MAAMhC,YAAY/W,KAAK+Y,MAAMhC,WAAWC,YAAYhX,KAAK+Y,OAC5E/Y,KAAKuX,aAAevX,KAAKuX,YAAYR,YAAY/W,KAAKuX,YAAYR,WAAWC,YAAYhX,KAAKuX,aAC9FvX,KAAK6X,OAAS7X,KAAK6X,MAAMd,YAAY/W,KAAK6X,MAAMd,WAAWC,YAAYhX,KAAK6X,OAC/E7X,KAAK6D,YAITwD,EAAWG,SAAS0D,QAAQokB,eAAiBjoB,EAAWyK,eAAenO,QACrE6F,MAAO,WACLxJ,KAAK2U,MAAQ3U,KAAK6H,MAAMmR,kBAAkBhZ,KAAK0W,YAE/C1W,KAAKghB,eAAiBhhB,KAAK6H,MAAMoZ,wBACjCjhB,KAAK2U,MAAMnM,YAAYxI,KAAKghB,gBAC5BhhB,KAAK4gB,aAAejc,SAAS6Q,cAAc,OAExCxV,KAAK8H,OAAOyP,cACbvX,KAAKuX,YAAcvX,KAAK6H,MAAM8Y,eAAe3gB,KAAK8H,OAAOyP,cAG3DvX,KAAK6X,MAAQlT,SAAS6Q,cAAc,UACpCxV,KAAK6X,MAAMjM,aAAa,WAAY,YAEpC,IAAI2jB,EAAQvvB,KAAK6H,MAAM2S,eAAexa,KAAK2U,MAAO3U,KAAK6X,MAAO7X,KAAKuX,aAEnEvX,KAAKsJ,UAAUd,YAAY+mB,GAC3BvvB,KAAKsJ,UAAUd,YAAYxI,KAAK4gB,cAEhCnd,OAAOsX,OAAO/a,KAAK6X,OAAOuU,WACxBoD,WAAW,EACXC,cAAc,EACdhD,QAAQ,KAGZhjB,UAAW,WACP,IAAIhC,EAAOzH,KACXA,KAAK6X,MAAMuU,UAAU/hB,GAAG,SAAU,SAAS/F,GACvCmD,EAAKoP,eACLpP,EAAKoD,UAAS,MAGtBX,QAAS,WACPlK,KAAKsmB,OAAM,GACRtmB,KAAK2U,OAAS3U,KAAK2U,MAAMoC,YAAY/W,KAAK2U,MAAMoC,WAAWC,YAAYhX,KAAK2U,OAC5E3U,KAAKuX,aAAevX,KAAKuX,YAAYR,YAAY/W,KAAKuX,YAAYR,WAAWC,YAAYhX,KAAKuX,aAC9FvX,KAAK6X,OAAS7X,KAAK6X,MAAMd,YAAY/W,KAAK6X,MAAMd,WAAWC,YAAYhX,KAAK6X,OAE/E7X,KAAK6D,UAEPyiB,MAAO,SAASC,KAChB5c,SAAU,SAASM,EAAO8N,GACxB,IAAItQ,EAAOzH,KAEXiK,EAAQA,MACHnE,MAAMC,QAAQkE,KAASA,GAASA,IAErCjK,KAAK6X,MAAMuU,UAAUQ,eACrB5sB,KAAK6X,MAAMuU,UAAU1L,OAAM,GAE3BzW,EAAMylB,QAAQ,SAAS1D,GACrBvkB,EAAKoQ,MAAMuU,UAAUS,WAAW1qB,KAAM6pB,EAAM/hB,MAAO+hB,MAErDhsB,KAAK6X,MAAMuU,UAAUziB,SAASM,GAE9BjK,KAAK6W,aAAakB,IAEpBlB,aAAc,SAASsQ,GACrBnnB,KAAKiK,MAAQjK,KAAK6X,MAAMuU,UAAUtiB,YAEpCC,qBAAsB,SAAS0F,GAC7B,IAAIhI,EAAOzH,KAGP0jB,KACAC,KAWJ,GAVA9c,EAAM4I,EAAQ,SAASlJ,EAAEnD,GACpBA,EAAM2I,OAAStE,EAAKsE,KACrB2X,EAAUnZ,KAAKnH,GAGfugB,EAAapZ,KAAKnH,KAKnBpD,KAAK4gB,aAEN,GAAG8C,EAAUviB,OAAQ,CAEnBnB,KAAK4gB,aAAaxW,UAAY,GAC9BpK,KAAK4gB,aAAanH,MAAMgC,QAAU,GAClC5U,EAAM6c,EAAW,SAASnd,EAAEnD,GAC1BqE,EAAKmZ,aAAapY,YAAYf,EAAKI,MAAM+b,gBAAgBxgB,EAAMuM,iBAKjE3P,KAAK4gB,aAAanH,MAAMgC,QAAU,UAM1C,IACMkU,EADFC,GACED,EAAOhrB,SAASkrB,iBAEXC,QAAgB,UAChBH,EAAKI,sBAA8B,wBACnCJ,EAAKK,mBAA2B,qBAChCL,EAAKM,kBAA0B,oBAC/BN,EAAKO,iBAAyB,wBAAlC,EA44DL,OAz4DF7oB,EAAW8oB,cAAgB7sB,EAAMK,QAC/B4E,aAAc,WACZ,OAAO5D,SAAS6Q,cAAc,QAEhC4a,wBAAyB,WACvB,IAAInpB,EAAKtC,SAAS6Q,cAAc,OAIhC,OAHAvO,EAAGwS,MAAQxS,EAAGwS,UACdxS,EAAGwS,MAAM4W,SAAW,QACpBppB,EAAGwS,MAAM6W,WAAa,OACfrpB,GAETwY,SAAU,WACR,IAAIxY,EAAKtC,SAAS6Q,cAAc,OAOhC,OANAvO,EAAGwS,MAAM8W,gBAAkB,QAC3BtpB,EAAGwS,MAAM+W,OAAS,kBAClBvpB,EAAGwS,MAAMgX,UAAY,gBACrBxpB,EAAGwS,MAAMuC,SAAW,WACpB/U,EAAGwS,MAAMiX,OAAS,KAClBzpB,EAAGwS,MAAMgC,QAAU,OACZxU,GAET6Z,iBAAkB,WAEhB,OADSnc,SAAS6Q,cAAc,QAGlC+I,WAAY,WACV,IAAItX,EAAKtC,SAAS6Q,cAAc,OAEhC,OADAvO,EAAG8N,UAAY,MACR9N,GAET8Z,cAAe,WAEb,OADSpc,SAAS6Q,cAAc,QAGlCgJ,kBAAmB,SAASvX,EAAGumB,KAG/BhZ,QAAS,SAASrS,GAChB,IAAI8E,EAAKtC,SAAS6Q,cAAc,KAGhC,OAFAvO,EAAG2E,aAAa,OAAO,KACvB3E,EAAGuB,YAAY7D,SAASgsB,eAAexuB,IAChC8E,GAET2pB,cAAe,SAASza,GACtBA,EAAOsD,MAAMoX,MAAQ,QAEvBC,aAAc,SAAS/X,GACrBA,EAAMU,MAAMoX,MAAQ,QAEtBE,aAAc,SAAS5a,GACrBA,EAAOsD,MAAMoX,MAAQ,IAEvBG,YAAa,SAASjY,GACpBA,EAAMU,MAAMoX,MAAQ,IAEtB7X,kBAAmB,SAAS7W,GAC1B,IAAI8E,EAAKtC,SAAS6Q,cAAc,SAEhC,OADAvO,EAAGuB,YAAY7D,SAASgsB,eAAexuB,IAChC8E,GAETub,iBAAkB,SAASrgB,GACzB,IAAI8E,EAAKjH,KAAKgZ,kBAAkB7W,GAEhC,OADA8E,EAAGwS,MAAMwX,WAAa,SACfhqB,GAETsY,UAAW,SAASpd,GAClB,IAAI8E,EAAKtC,SAAS6Q,cAAc,MAQhC,MAPmB,iBAATrT,EACR8E,EAAG8O,YAAc5T,EAGjB8E,EAAGuB,YAAYrG,GAGV8E,GAETsb,YAAa,WACX,IAAItb,EAAKjH,KAAKuZ,kBAAkB,YAGhC,OAFAtS,EAAGwS,MAAMgC,QAAU,eACnBxU,EAAGwS,MAAMC,MAAQ,OACVzS,GAETsmB,uBAAwB,SAASlI,EAAStM,EAAMxB,GAC9C,IAAItQ,EAAKtC,SAAS6Q,cAAc,OAOhC,IAAI,IAAIjP,KALLwS,IACDA,EAAMU,MAAMgC,QAAU,QACtBxU,EAAGuB,YAAYuQ,IAGJsM,EACPA,EAAS3e,eAAeH,KAC5B8e,EAAS9e,GAAGkT,MAAMgC,QAAU,eAC5B4J,EAAS9e,GAAGkT,MAAMyX,YAAc,OAChCjqB,EAAGuB,YAAY6c,EAAS9e,KAK1B,OAFGgR,GAAatQ,EAAGuB,YAAY+O,GAExBtQ,GAETukB,eAAgB,SAASvqB,GACvB,IAAI8pB,EAASpmB,SAAS6Q,cAAc,UAEpC,OADGvU,GAASjB,KAAKyrB,iBAAiBV,EAAQ9pB,GACnC8pB,GAETb,YAAa,SAASjpB,GACpB,IAAIqoB,EAAWtpB,KAAKwrB,eAAevqB,GAUnC,OATAqoB,EAAS7P,MAAM8W,gBAAkB,cACjCjH,EAAS7P,MAAMgC,QAAU,eACzB6N,EAAS7P,MAAM0X,UAAY,SAC3B7H,EAAS7P,MAAMwX,WAAa,SAC5B3H,EAAS7P,MAAMS,OAAS,OACxBoP,EAAS7P,MAAM8G,aAAe,EAC9B+I,EAAS7P,MAAM6W,WAAa,MAC5BhH,EAAS7P,MAAMwG,QAAU,YACzBqJ,EAAS7P,MAAMC,MAAQ,OAChB4P,GAETa,mBAAoB,SAASb,GAC3B,OAAOA,EAAS8H,qBAAqB,WAEvCC,mBAAoB,SAAS/H,EAAUroB,EAASqwB,GAC9CtxB,KAAKyrB,iBAAiBnC,EAAUroB,EAASqwB,IAE3C7F,iBAAkB,SAASV,EAAQ9pB,EAASqwB,GAC1CA,EAASA,MACTvG,EAAO3gB,UAAY,GACnB,IAAI,IAAI7D,EAAE,EAAGA,EAAEtF,EAAQE,OAAQoF,IAAK,CAClC,IAAIoE,EAAShG,SAAS6Q,cAAc,UACpC7K,EAAOiB,aAAa,QAAQ3K,EAAQsF,IACpCoE,EAAOoL,YAAcub,EAAO/qB,IAAMtF,EAAQsF,GAC1CwkB,EAAOviB,YAAYmC,KAGvBwO,iBAAkB,WAChB,IAAIlS,EAAKtC,SAAS6Q,cAAc,YAKhC,OAJAvO,EAAGwS,MAAQxS,EAAGwS,UACdxS,EAAGwS,MAAMC,MAAQ,OACjBzS,EAAGwS,MAAMS,OAAS,QAClBjT,EAAGwS,MAAM8X,UAAY,aACdtqB,GAEToS,cAAe,SAASV,EAAIhT,EAAIyT,GAC9B,IAAInS,EAAKjH,KAAKuZ,kBAAkB,SAIhC,OAHAtS,EAAG2E,aAAa,MAAM+M,GACtB1R,EAAG2E,aAAa,MAAMjG,GACtBsB,EAAG2E,aAAa,OAAOwN,GAChBnS,GAETsS,kBAAmB,SAASlL,GAC1B,IAAIpH,EAAKtC,SAAS6Q,cAAc,SAEhC,OADAvO,EAAG2E,aAAa,OAAOyC,GAChBpH,GAETwT,gBAAiB,SAAS5C,KAG1B2C,eAAgB,SAASzB,EAAOlB,EAAON,GACrC,IAAItQ,EAAKtC,SAAS6Q,cAAc,OAWhC,OAVAvO,EAAG8N,UAAY,eACZgE,GAAO9R,EAAGuB,YAAYuQ,GACP,aAAflB,EAAMxJ,KACP0K,EAAM8B,aAAahD,EAAMkB,EAAMyY,YAG/BvqB,EAAGuB,YAAYqP,GAGdN,GAAatQ,EAAGuB,YAAY+O,GACxBtQ,GAET4Z,iBAAkB,WAChB,IAAI5Z,EAAKtC,SAAS6Q,cAAc,OAKhC,OAJAvO,EAAGwS,MAAQxS,EAAGwS,UACdxS,EAAGwS,MAAM2G,YAAc,OACvBnZ,EAAGwS,MAAM6W,WAAa,OACtBrpB,EAAGwS,MAAMgY,WAAa,iBACfxqB,GAETkc,qBAAsB,WACpB,OAAOxe,SAAS6Q,cAAc,QAEhCmL,eAAgB,SAASxe,GACvB,IAAI8E,EAAKtC,SAAS6Q,cAAc,KAEhC,OADAvO,EAAGmD,UAAYjI,EACR8E,GAETyqB,uBAAwB,SAASvvB,GAC/B,OAAOnC,KAAK2gB,eAAexe,IAE7B8W,wBAAyB,SAAS9W,GAChC,OAAOnC,KAAK2gB,eAAexe,IAE7B8e,sBAAuB,WACrB,OAAOjhB,KAAKslB,mBAEdA,gBAAiB,WACf,OAAO3gB,SAAS6Q,cAAc,QAEhCf,UAAW,SAAStS,EAAMuS,EAAMC,GAC9B,IAAI1N,EAAKtC,SAAS6Q,cAAc,UAGhC,OAFAvO,EAAGoH,KAAO,SACVrO,KAAKgV,cAAc/N,EAAG9E,EAAKuS,EAAKC,GACzB1N,GAET+N,cAAe,SAASC,EAAQ9S,EAAMuS,EAAMC,GAC1CM,EAAO7K,UAAY,GAChBsK,IACDO,EAAOzM,YAAYkM,GACnBO,EAAO7K,WAAa,KAEtB6K,EAAOzM,YAAY7D,SAASgsB,eAAexuB,IACxCwS,GAAOM,EAAOrJ,aAAa,QAAQ+I,IAExCsT,SAAU,WACR,OAAOtjB,SAAS6Q,cAAc,UAEhC6S,YAAa,WACX,OAAO1jB,SAAS6Q,cAAc,OAEhC2S,aAAc,WACZ,OAAOxjB,SAAS6Q,cAAc,UAEhC8S,aAAc,WACZ,OAAO3jB,SAAS6Q,cAAc,UAEhCkT,mBAAoB,SAASvmB,GAC3B,IAAI8E,EAAKtC,SAAS6Q,cAAc,MAEhC,OADAvO,EAAG8O,YAAc5T,EACV8E,GAETqY,aAAc,WAEZ,OADS3a,SAAS6Q,cAAc,OAGlCoO,gBAAiB,SAASzhB,GACxB,IAAI8E,EAAKtC,SAAS6Q,cAAc,KAIhC,OAHAvO,EAAGwS,MAAQxS,EAAGwS,UACdxS,EAAGwS,MAAMoX,MAAQ,MACjB5pB,EAAGuB,YAAY7D,SAASgsB,eAAexuB,IAChC8E,GAET0V,cAAe,SAAS9E,EAAO1V,KAE/Bya,iBAAkB,SAAS/E,KAE3BgM,iBAAkB,SAASvF,KAE3BwF,oBAAqB,SAASxF,KAE9BkH,aAAc,WACZ,IAAIve,EAAKtC,SAAS6Q,cAAc,OAEhC,OADAvO,EAAGmD,UAAY,oJACRnD,GAET0qB,YAAa,SAAS1qB,EAAG2qB,GAEvB,IAAI,IAAIrrB,KADRU,EAAGwS,MAAQxS,EAAGwS,UACDmY,EACPA,EAAOlrB,eAAeH,KAC1BU,EAAGwS,MAAMlT,GAAKqrB,EAAOrrB,KAGzBsN,QAAS,SAAS8b,EAAMkC,GACtB,KAAOlC,GAAQA,IAAShrB,UAAU,CAChC,IAAIgrB,EAAKC,GAQP,OAAO,EAPP,GAAID,EAAKC,GAAUiC,GACjB,OAAOlC,EAEPA,EAAOA,EAAK5Y,WAOlB,OAAO,GAETuQ,OAAQ,SAASwK,GACf,IAAI7qB,EAAKtC,SAAS6Q,cAAc,OAchC,OAbAvO,EAAGuB,YAAYspB,GACf7qB,EAAGwS,MAAQxS,EAAGwS,UACdzZ,KAAK2xB,YAAY1qB,GACfupB,OAAQ,iBACRuB,YAAa,gBACblK,UAAW,SACXmK,WAAY,OACZC,aAAc,MACdC,wBAAyB,EACzBC,qBAAsB,EACtBlB,WAAY,OACZmB,OAAQ,YAEHnrB,GAETwe,oBAAqB,SAAS4M,GAC5B,OAAOA,EAAWjc,SAAS,IAE7BgQ,cAAe,WACb,OAAOpmB,KAAK6gB,oBAEdiG,cAAe,SAASN,GACtBxmB,KAAK2xB,YAAYnL,GACf8L,QAAS,EACTlwB,WAAY,WAGhB2kB,gBAAiB,SAASP,GACxBxmB,KAAK2xB,YAAYnL,GACf8L,QAAQ,GACRlwB,WAAY,MAGhBmlB,OAAQ,SAASpS,EAAQqR,GACvBrR,EAAOiB,SAAS,GAAG5N,YAAYge,IAEjC5Q,aAAc,WACZ,IAAIV,EAAOvQ,SAAS6Q,cAAc,KAElC,OADAN,EAAKuE,MAAMgC,QAAU,QACdvG,GAETK,mBAAoB,WAElB,OADS5Q,SAAS6Q,cAAc,QAGlCnB,eAAgB,WAEd,OADS1P,SAAS6Q,cAAc,QAGlCM,gBAAiB,SAASX,EAAOD,EAAKW,GACpCV,EAAO3M,YAAY0M,GACnBW,EAAM4D,MAAMC,MAAM,OAClBvE,EAAO3M,YAAYqN,IAErBH,gBAAiB,SAASP,EAAOD,EAAKO,GACpCN,EAAO3M,YAAY0M,GACnBA,EAAK1M,YAAYiN,MAIrBpO,EAAWG,SAASI,OAAO2qB,WAAalrB,EAAW8oB,cAAcxsB,QAC/D0V,cAAe,SAASV,EAAKhT,EAAKyT,GAEhC,OAAOpZ,KAAK6D,OAAO8U,EAAKhT,EAAKyT,IAE/B0H,iBAAkB,WAChB,IAAI7Z,EAAKtC,SAAS6Q,cAAc,OAEhC,OADAvO,EAAG8N,UAAY,kBACR9N,GAETsX,WAAY,WACV,IAAItX,EAAKtC,SAAS6Q,cAAc,OAEhC,OADAvO,EAAG8N,UAAY,YACR9N,GAET+R,kBAAmB,SAAS7W,GAC1B,IAAI8E,EAAKjH,KAAK6D,OAAO1B,GAGrB,OAFA8E,EAAGwS,MAAMgC,QAAU,eACnBxU,EAAGwS,MAAMwX,WAAa,OACfhqB,GAETuX,kBAAmB,SAASvX,EAAGumB,GAC7BvmB,EAAG8N,UAAY,OAAOyY,GAExBhC,eAAgB,SAASvqB,GACvB,IAAI4W,EAAQ7X,KAAK6D,OAAO5C,GAGxB,OAFA4W,EAAM4B,MAAMC,MAAQ,OACpB7B,EAAM4B,MAAMgV,SAAW,MAChB5W,GAET0B,kBAAmB,SAASlL,GAC1B,IAAIpH,EAAKjH,KAAK6D,OAAOwK,GAErB,OADApH,EAAGwS,MAAMC,MAAQ,MACVzS,GAETwT,gBAAiB,SAAS5C,GACrBA,EAAM2a,eACT3a,EAAM2a,aAAexyB,KAAK6T,QAAQgE,EAAM,kBACxCA,EAAMwN,SAAWrlB,KAAK6T,QAAQgE,EAAM,aACjC7X,KAAK6T,QAAQgE,EAAM,cACpBA,EAAM2a,aAAazd,UAAY8C,EAAM2a,aAAazd,UAAUpC,QAAQ,iBAAiB,IAAIA,QAAQ,WAAW,KAC5GkF,EAAMwN,SAAStQ,UAAY8C,EAAM2a,aAAazd,UAAUpC,QAAQ,YAAY,IAAIA,QAAQ,WAAW,KACnGkF,EAAM4B,MAAM8G,aAAe,KAK/BM,iBAAkB,WAChB,IAAI5Z,EAAKtC,SAAS6Q,cAAc,OAGhC,OAFAvO,EAAG8N,UAAY,kBACf9N,EAAGwS,MAAMgJ,cAAgB,EAClBxb,GAETgS,wBAAyB,SAAS9W,GAChC,IAAI8E,EAAKtC,SAAS6Q,cAAc,KAGhC,OAFAvO,EAAG8N,UAAY,cACf9N,EAAG8O,YAAc5T,EACV8E,GAETuT,eAAgB,SAASzB,EAAOlB,EAAON,GACrC,IAAI1U,EAAM8B,SAAS6Q,cAAc,OACjC3S,EAAIkS,UAAY,gBAEhB,IAAIsQ,EAAW1gB,SAAS6Q,cAAc,OAqBtC,OApBA6P,EAAStQ,UAAY,WAElBgE,GAAwC,aAA/BlB,EAAMlM,aAAa,SAC7B9I,EAAI2F,YAAY6c,GAChBtM,EAAMhE,WAAa,YACnBgE,EAAMvQ,YAAYqP,GAClBwN,EAAS7c,YAAYuQ,GACrBsM,EAAS5L,MAAMS,OAAS,SAGrBnB,IACDA,EAAMhE,WAAa,iBACnBlS,EAAI2F,YAAYuQ,IAElBsM,EAAS7c,YAAYqP,GACrBhV,EAAI2F,YAAY6c,IAGf9N,GAAa8N,EAAS7c,YAAY+O,GAE9B1U,GAEToe,sBAAuB,WACrB,IAAIha,EAAKjH,KAAKslB,kBAEd,OADAre,EAAGwS,MAAM6W,WAAa,OACfrpB,GAETqe,gBAAiB,WACf,IAAIre,EAAKtC,SAAS6Q,cAAc,OAEhC,OADAvO,EAAG8N,UAAY,YACR9N,GAETwN,UAAW,SAAStS,EAAMuS,EAAMC,GAC9B,IAAI1N,EAAMjH,KAAK6D,OAAO1B,EAAMuS,EAAMC,GAElC,OADA1N,EAAG8N,WAAa,mBACT9N,GAETghB,SAAU,WACR,IAAIhhB,EAAKtC,SAAS6Q,cAAc,SAIhC,OAHAvO,EAAG8N,UAAY,uBACf9N,EAAGwS,MAAMC,MAAQ,OACjBzS,EAAGwS,MAAMgV,SAAW,OACbxnB,GAET0V,cAAe,SAAS9E,EAAM1V,GACxB0V,EAAM2a,cAAiB3a,EAAMwN,WACjCxN,EAAM2a,aAAazd,WAAa,SAC5B8C,EAAM4a,OAMR5a,EAAM4a,OAAOhZ,MAAMgC,QAAU,IAL7B5D,EAAM4a,OAAS9tB,SAAS6Q,cAAc,KACtCqC,EAAM4a,OAAO1d,UAAY,sBACzB8C,EAAMwN,SAAS7c,YAAYqP,EAAM4a,SAMnC5a,EAAM4a,OAAO1c,YAAc5T,IAE7Bya,iBAAkB,SAAS/E,GACrBA,EAAM4a,SACV5a,EAAM4a,OAAOhZ,MAAMgC,QAAU,OAC7B5D,EAAM2a,aAAazd,UAAY8C,EAAM2a,aAAazd,UAAUpC,QAAQ,YAAY,MAElF6S,aAAc,WACZ,IAAIve,EAAKtC,SAAS6Q,cAAc,OAGhC,OAFAvO,EAAG8N,UAAY,qBACf9N,EAAGmD,UAAY,gIACRnD,GAETqgB,OAAQ,SAASnlB,GACf,IAAI8E,EAAKtC,SAAS6Q,cAAc,MAC5BzS,EAAI4B,SAAS6Q,cAAc,KAI/B,OAHAzS,EAAE6I,aAAa,OAAO,KACtB7I,EAAEyF,YAAYrG,GACd8E,EAAGuB,YAAYzF,GACRkE,GAETwe,oBAAqB,SAAS4M,GAC5B,OAAOA,EAAWjc,SAAS,IAE7BgQ,cAAe,WACb,IAAInf,EAAKtC,SAAS6Q,cAAc,OAEhC,OADAvO,EAAG8N,UAAY,kBACR9N,GAET6f,cAAe,SAASN,GACtBA,EAAIzR,WAAa,WAEnBgS,gBAAiB,SAASP,GACxBA,EAAIzR,UAAYyR,EAAIzR,UAAUpC,QAAQ,aAAa,KAErD4U,OAAQ,SAASpS,EAAQqR,GACvBrR,EAAOiB,SAAS,GAAG5N,YAAYge,IAEjCsI,eAAgB,WACd,IAAIxlB,EAAY3E,SAAS6Q,cAAc,OACvClM,EAAUyL,UAAY,WAEtB,IAAI2d,EAAM/tB,SAAS6Q,cAAc,OAKjC,OAJAkd,EAAI3d,UAAY,MAChB2d,EAAIjZ,MAAMC,MAAQ,KAClBpQ,EAAUd,YAAYkqB,GAEfppB,GAET8lB,kBAAmB,SAASL,EAAaI,GAClCJ,IAELA,EAAYyC,WAAW/X,MAAMC,MAAQyV,EAAW,MAElDE,yBAA0B,SAASN,GAC5BA,IAELA,EAAYha,UAAY,mCACxBga,EAAYyC,WAAW/X,MAAMC,MAAQ,WAIzCrS,EAAWG,SAASI,OAAO+qB,WAAatrB,EAAW8oB,cAAcxsB,QAC/D6nB,eAAgB,SAASvqB,GACvB,IAAIgG,EAAKjH,KAAK6D,OAAO5C,GAGrB,OAFAgG,EAAG8N,WAAa,eAET9N,GAETuX,kBAAmB,SAASvX,EAAGumB,GAC7BvmB,EAAG8N,UAAY,UAAUyY,GAE3B/S,gBAAiB,SAAS5C,GACrBA,EAAM2a,eACT3a,EAAM2a,aAAexyB,KAAK6T,QAAQgE,EAAM,eACrC7X,KAAK6T,QAAQgE,EAAM,cACpBA,EAAM2a,aAAa/Y,MAAM8G,aAAe,KAK5CpH,iBAAkB,WAChB,IAAIlS,EAAKtC,SAAS6Q,cAAc,YAEhC,OADAvO,EAAG8N,UAAY,eACR9N,GAEToS,cAAe,SAASV,EAAKhT,EAAKyT,GAEhC,OAAOpZ,KAAK6D,OAAO8U,EAAKhT,EAAKyT,IAE/BG,kBAAmB,SAASlL,GAC1B,IAAIpH,EAAKjH,KAAK6D,OAAOwK,GAIrB,MAHY,aAATA,IACDpH,EAAG8N,WAAa,gBAEX9N,GAETuT,eAAgB,SAASzB,EAAOlB,EAAON,GACrC,IAAIgY,EAAQ5qB,SAAS6Q,cAAc,OAsBnC,OApBGuD,GAAwB,aAAflB,EAAMxJ,MAChBkhB,EAAMxa,WAAa,YACnBgE,EAAMvQ,YAAYqP,GAClBkB,EAAMU,MAAMmZ,SAAW,OACvBrD,EAAM9V,MAAMkJ,UAAY,IACxB4M,EAAM/mB,YAAYuQ,GAClBlB,EAAM4B,MAAMuC,SAAW,WACvBnE,EAAM4B,MAAM4W,SAAW,SAGvBd,EAAMxa,WAAa,cAChBgE,IACDA,EAAMhE,WAAa,iBACnBwa,EAAM/mB,YAAYuQ,IAEpBwW,EAAM/mB,YAAYqP,IAGjBN,GAAagY,EAAM/mB,YAAY+O,GAE3BgY,GAET1O,iBAAkB,WAChB,IAAI5Z,EAAKtC,SAAS6Q,cAAc,OAGhC,OAFAvO,EAAG8N,UAAY,eACf9N,EAAGwS,MAAMgJ,cAAgB,EAClBxb,GAETgS,wBAAyB,SAAS9W,GAChC,IAAI8E,EAAKtC,SAAS6Q,cAAc,KAGhC,OAFAvO,EAAG8N,UAAY,aACf9N,EAAGmD,UAAYjI,EACR8E,GAETga,sBAAuB,WACrB,IAAIha,EAAKjH,KAAKslB,kBAEd,OADAre,EAAGwS,MAAM6W,WAAa,OACfrpB,GAETqe,gBAAiB,WACf,IAAIre,EAAKtC,SAAS6Q,cAAc,OAEhC,OADAvO,EAAG8N,UAAY,YACR9N,GAETwN,UAAW,SAAStS,EAAMuS,EAAMC,GAC9B,IAAI1N,EAAKjH,KAAK6D,OAAO1B,EAAMuS,EAAMC,GAEjC,OADA1N,EAAG8N,WAAa,kBACT9N,GAETghB,SAAU,WACR,IAAIhhB,EAAKtC,SAAS6Q,cAAc,SAIhC,OAHAvO,EAAG8N,UAAY,uBACf9N,EAAGwS,MAAMC,MAAQ,OACjBzS,EAAGwS,MAAMgV,SAAW,OACbxnB,GAGT0V,cAAe,SAAS9E,EAAM1V,GACxB0V,EAAM2a,eACV3a,EAAM2a,aAAazd,WAAa,aAC5B8C,EAAM4a,OAMR5a,EAAM4a,OAAOhZ,MAAMgC,QAAU,IAL7B5D,EAAM4a,OAAS9tB,SAAS6Q,cAAc,KACtCqC,EAAM4a,OAAO1d,UAAY,sBACzB8C,EAAM2a,aAAahqB,YAAYqP,EAAM4a,SAMvC5a,EAAM4a,OAAO1c,YAAc5T,IAE7Bya,iBAAkB,SAAS/E,GACrBA,EAAM4a,SACV5a,EAAM4a,OAAOhZ,MAAMgC,QAAU,OAC7B5D,EAAM2a,aAAazd,UAAY8C,EAAM2a,aAAazd,UAAUpC,QAAQ,gBAAgB,MAEtF6S,aAAc,WACZ,IAAIve,EAAKtC,SAAS6Q,cAAc,OAGhC,OAFAvO,EAAGmD,UAAY,4EACfnD,EAAG8N,UAAY,OACR9N,GAETqgB,OAAQ,SAASnlB,GACf,IAAI8E,EAAKtC,SAAS6Q,cAAc,KAIhC,OAHAvO,EAAG8N,UAAY,kBACf9N,EAAG2E,aAAa,OAAO,KACvB3E,EAAGuB,YAAYrG,GACR8E,GAET6f,cAAe,SAASN,GACtBA,EAAIzR,WAAa,WAEnBgS,gBAAiB,SAASP,GACxBA,EAAIzR,UAAYyR,EAAIzR,UAAUpC,QAAQ,aAAa,KAErDmc,eAAgB,WACd,IAEIxlB,EAAY3E,SAAS6Q,cAAc,OACvClM,EAAUyL,UAAY,WAEtB,IAAI2d,EAAM/tB,SAAS6Q,cAAc,OASjC,OARAkd,EAAI3d,UAAY,eAChB2d,EAAI9mB,aAAa,OAAQ,eACzB8mB,EAAI9mB,aAAa,gBARe,GAShC8mB,EAAI9mB,aAAa,gBATP,GAUV8mB,EAAI9mB,aAAa,gBAVE,KAWnB8mB,EAAItoB,UAAYyoB,KAChBvpB,EAAUd,YAAYkqB,GAEfppB,GAET8lB,kBAAmB,SAASL,EAAaI,GACvC,GAAKJ,EAAL,CAEA,IAAI2D,EAAM3D,EAAYyC,WAClBsB,EAAa3D,EAAW,IAC5BuD,EAAI9mB,aAAa,gBAAiBujB,GAClCuD,EAAIjZ,MAAMC,MAAQoZ,EAClBJ,EAAItoB,UAAY0oB,IAElBzD,yBAA0B,SAASN,GACjC,GAAKA,EAAL,CAEA,IAAI2D,EAAM3D,EAAYyC,WACtBzC,EAAYha,UAAY,mCACxB2d,EAAI5a,gBAAgB,iBACpB4a,EAAIjZ,MAAMC,MAAQ,OAClBgZ,EAAItoB,UAAY,OAKpB/C,EAAWG,SAASI,OAAOmrB,WAAa1rB,EAAW8oB,cAAcxsB,QAC/Dwf,qBAAsB,WACpB,IAAIlc,EAAKtC,SAAS6Q,cAAc,OAEhC,OADAvO,EAAGwS,MAAM8G,aAAe,OACjBtZ,GAETukB,eAAgB,SAASvqB,GACvB,IAAIgG,EAAKjH,KAAK6D,OAAO5C,GAIrB,OAHAgG,EAAGwS,MAAMuZ,SAAW,OACpB/rB,EAAGwS,MAAMwG,QAAU,MACnBhZ,EAAGwS,MAAMkJ,UAAY,MACd1b,GAETijB,YAAa,SAASjpB,GACpB,IAAIgG,EAAKjH,KAAK6D,OAAO5C,GAErB,OADAgG,EAAGwS,MAAMwZ,aAAe,MACjBhsB,GAETwT,gBAAiB,SAAS5C,GACrB7X,KAAK6T,QAAQgE,EAAM,cACpBA,EAAM4B,MAAM8G,aAAe,GAE7B1I,EAAM0X,MAAQvvB,KAAK6T,QAAQgE,EAAM,kBAEnCmB,kBAAmB,SAAS7W,GAC1B,IAAI8E,EAAKjH,KAAK6D,OAAO1B,GAErB,OADA8E,EAAGwS,MAAMgC,QAAU,eACZxU,GAETsS,kBAAmB,SAASlL,GAC1B,IAAIpH,EAAKjH,KAAK6D,OAAOwK,GAGrB,OAFApH,EAAGwS,MAAMC,MAAQ,OACjBzS,EAAGwS,MAAM8G,aAAsB,aAAPlS,EAAmB,IAAM,OAC1CpH,GAETgS,wBAAyB,SAAS9W,GAChC,IAAI8E,EAAKtC,SAAS6Q,cAAc,KAIhC,OAHAvO,EAAG8O,YAAc5T,EACjB8E,EAAGwS,MAAMkJ,UAAY,QACrB1b,EAAGwS,MAAM0X,UAAY,SACdlqB,GAET4Z,iBAAkB,WAChB,IAAI5Z,EAAKtC,SAAS6Q,cAAc,OAGhC,OAFAvO,EAAG8N,UAAY,QACf9N,EAAGwS,MAAMgJ,cAAgB,EAClBxb,GAETga,sBAAuB,WACrB,IAAIha,EAAKjH,KAAKslB,kBAId,OAHAre,EAAGwS,MAAMgC,QAAU,eACnBxU,EAAGwS,MAAM6W,WAAa,OACtBrpB,EAAGwS,MAAMyZ,cAAgB,SAClBjsB,GAETqe,gBAAiB,WACf,IAAIre,EAAKtC,SAAS6Q,cAAc,OAEhC,OADAvO,EAAG8N,UAAY,eACR9N,GAETwN,UAAW,SAAStS,EAAMuS,EAAMC,GAC9B,IAAI1N,EAAKjH,KAAK6D,OAAO1B,EAAMuS,EAAMC,GAEjC,OADA1N,EAAG8N,WAAa,gBACT9N,GAET0V,cAAe,SAAS9E,EAAM1V,GACxB0V,EAAM0X,QACV1X,EAAM0X,MAAMxa,WAAa,SAErB8C,EAAM4a,OAKR5a,EAAM4a,OAAOhZ,MAAMgC,QAAU,IAJ7B5D,EAAMsb,mBAAmB,WAAW,iCACpCtb,EAAM4a,OAAS5a,EAAMd,WAAWqc,uBAAuB,SAAS,IAMlEvb,EAAM4a,OAAO1c,YAAc5T,IAE7Bya,iBAAkB,SAAS/E,GACrBA,EAAM4a,SACV5a,EAAM0X,MAAMxa,UAAY8C,EAAM0X,MAAMxa,UAAUpC,QAAQ,UAAU,IAChEkF,EAAM4a,OAAOhZ,MAAMgC,QAAU,SAE/BqT,eAAgB,WACd,IAAIC,EAAcpqB,SAAS6Q,cAAc,OACzCuZ,EAAYha,UAAY,WAExB,IAAIse,EAAQ1uB,SAAS6Q,cAAc,QAInC,OAHA6d,EAAMte,UAAY,QAClBse,EAAM5Z,MAAMC,MAAQ,KACpBqV,EAAYvmB,YAAY6qB,GACjBtE,GAETK,kBAAmB,SAASL,EAAaI,GAClCJ,IACLA,EAAYyC,WAAW/X,MAAMC,MAAQyV,EAAW,MAElDE,yBAA0B,SAASN,GAC5BA,IACLA,EAAYyC,WAAW/X,MAAMC,MAAQ,WAKzCrS,EAAWG,SAASI,OAAO0rB,YAAcjsB,EAAWG,SAASI,OAAOmrB,WAAWpvB,QAC7Esd,sBAAuB,WACrB,IAAIha,EAAKjH,KAAK6D,SAEd,OADAoD,EAAGwS,MAAMmZ,SAAW,OACb3rB,GAET+R,kBAAmB,SAAS7W,GAC1B,IAAI8E,EAAKjH,KAAK6D,OAAO1B,GAErB,OADA8E,EAAGwS,MAAMwX,WAAa,OACfhqB,GAETue,aAAc,WACZ,IAAIve,EAAKtC,SAAS6Q,cAAc,OAGhC,OAFAvO,EAAG8N,UAAY,MACf9N,EAAGmD,UAAY,0FACRnD,GAETuX,kBAAmB,SAASvX,EAAGumB,GAE7BvmB,EAAG8N,UAAY,YADF,OAAO,MAAM,MAAM,QAAQ,OAAO,OAAO,MAAM,QAAQ,QAAQ,OAAO,MAAM,SAAS,UAClEyY,IAElClG,OAAQ,SAASnlB,GACf,IAAI8E,EAAKtC,SAAS6Q,cAAc,MAC5BzS,EAAI4B,SAAS6Q,cAAc,KAI/B,OAHAzS,EAAE6I,aAAa,OAAO,KACtB7I,EAAEyF,YAAYrG,GACd8E,EAAGuB,YAAYzF,GACRkE,GAETwe,oBAAqB,SAAS4M,GAC5B,OAAOA,EAAWjc,SAAS,IAE7BgQ,cAAe,WACb,IAAInf,EAAKtC,SAAS6Q,cAAc,OAGhC,OAFAvO,EAAG8N,UAAY,iBACf9N,EAAGwS,MAAM2G,YAAc,MAChBnZ,GAET6f,cAAe,SAASN,GACtBA,EAAIzR,WAAa,WAEnBgS,gBAAiB,SAASP,GACxBA,EAAIzR,UAAYyR,EAAIzR,UAAUpC,QAAQ,aAAa,KAErD4U,OAAQ,SAASpS,EAAQqR,GACvBrR,EAAOiB,SAAS,GAAG5N,YAAYge,MAKnCnf,EAAWG,SAASI,OAAO2rB,YAAclsB,EAAWG,SAASI,OAAOmrB,WAAWpvB,QAC7Esd,sBAAuB,WACrB,IAAIha,EAAKjH,KAAK6D,SAEd,OADAoD,EAAGwS,MAAMmZ,SAAW,OACb3rB,GAETuX,kBAAmB,SAASvX,EAAGumB,GAC7BvmB,EAAG8N,UAAY,iBAAiByY,GAElCvU,wBAAyB,SAAS9W,GAChC,IAAI8E,EAAKjH,KAAK6D,OAAO1B,GAErB,OADA8E,EAAGwS,MAAMmZ,SAAW,QACb3rB,GAET+R,kBAAmB,SAAS7W,GAC1B,IAAI8E,EAAKjH,KAAK6D,OAAO1B,GAErB,OADA8E,EAAGwS,MAAMwX,WAAa,OACfhqB,KAKXI,EAAWG,SAASI,OAAO4rB,YAAcnsB,EAAWG,SAASI,OAAOmrB,WAAWpvB,QAC7EsV,wBAAyB,SAAS9W,GAChC,IAAI8E,EAAKjH,KAAK6D,OAAO1B,GAErB,OADA8E,EAAGwS,MAAMmZ,SAAW,QACb3rB,GAETuX,kBAAmB,SAASvX,EAAGumB,GAC7BvmB,EAAG8N,UAAY,kBAAkByY,GAEnC/Y,UAAW,SAAStS,EAAMuS,EAAMC,GAC9B,IAAI1N,EAAKjH,KAAK6D,OAAO1B,EAAKuS,EAAKC,GAE/B,OADA1N,EAAG8N,UAAY9N,EAAG8N,UAAUpC,QAAQ,YAAY,IAAM,QAC/C1L,GAETue,aAAc,WACZ,IAAIve,EAAKtC,SAAS6Q,cAAc,OAEhC,OADAvO,EAAGmD,UAAY,2EACRnD,GAETqgB,OAAQ,SAASnlB,GACf,IAAI8E,EAAKtC,SAAS6Q,cAAc,MAC5BzS,EAAI4B,SAAS6Q,cAAc,KAI/B,OAHAzS,EAAE6I,aAAa,OAAO,KACtB7I,EAAEyF,YAAYrG,GACd8E,EAAGuB,YAAYzF,GACRkE,GAETwe,oBAAqB,SAAS4M,GAC5B,OAAOA,EAAWjc,SAAS,IAE7BgQ,cAAe,WACb,IAAInf,EAAKtC,SAAS6Q,cAAc,OAGhC,OAFAvO,EAAG8N,UAAY,iBACf9N,EAAGwS,MAAM2G,YAAc,MAChBnZ,GAET6f,cAAe,SAASN,GACtBA,EAAIzR,WAAa,WAEnBgS,gBAAiB,SAASP,GACxBA,EAAIzR,UAAYyR,EAAIzR,UAAUpC,QAAQ,aAAa,KAErD4U,OAAQ,SAASpS,EAAQqR,GACvBrR,EAAOiB,SAAS,GAAG5N,YAAYge,MAInCnf,EAAWG,SAASI,OAAO6rB,YAAcpsB,EAAWG,SAASI,OAAO4rB,YAAY7vB,QAC9Ekd,iBAAkB,WAChB,IAAI5Z,EAAKtC,SAAS6Q,cAAc,OAEhC,OADAvO,EAAG8N,UAAY,oBACR9N,GAETqe,gBAAiB,WACf,IAAIre,EAAKtC,SAAS6Q,cAAc,OAGhC,OAFAvO,EAAG8N,UAAY,oBACf9N,EAAGwS,MAAM8G,aAAe,EACjBtZ,GAET+R,kBAAmB,SAAS7W,GAC1B,IAAI8E,EAAKjH,KAAK6D,OAAO1B,GAErB,OADA8E,EAAGwS,MAAMgC,QAAU,QACZxU,GAETuT,eAAgB,SAASzB,EAAOlB,EAAON,GACrC,IAAItQ,EAAKtC,SAAS6Q,cAAc,OAahC,OAZAvO,EAAG8N,UAAY,eACZgE,GAAO9R,EAAGuB,YAAYuQ,GACP,aAAflB,EAAMxJ,KACP0K,EAAM8B,aAAahD,EAAMkB,EAAMyY,YAExBzY,EACPA,EAAMvQ,YAAYqP,GAElB5Q,EAAGuB,YAAYqP,GAGdN,GAAawB,EAAMvQ,YAAY+O,GAC3BtQ,GAET0V,cAAe,SAAS9E,EAAM1V,GAC5B,GAAI0V,EAAM0X,MAAV,CAGA,GAFA1X,EAAM0X,MAAMxa,WAAa,SAErB8C,EAAM4a,OAUR5a,EAAM4a,OAAOhZ,MAAMgC,QAAU,GAC7B5D,EAAM9C,UAAY,OAXF,CAChB,IAAI2e,EAAU/uB,SAAS6Q,cAAc,QACrCke,EAAQ3e,UAAY,wBACpB8C,EAAM0X,MAAM6B,qBAAqB,SAAS,GAAG5oB,YAAYkrB,GAEzD7b,EAAM9C,UAAY8C,EAAM9C,UAAY,oBAEpC8C,EAAM4a,OAASiB,EAOjB7b,EAAM4a,OAAO1c,YAAc5T,IAE7Bya,iBAAkB,SAAS/E,GACrBA,EAAM4a,SACV5a,EAAM9C,UAAY8C,EAAM9C,UAAUpC,QAAQ,qBAAqB,IAC5DkF,EAAM4a,OAAO1b,YACdc,EAAM4a,OAAO1b,WAAWC,YAAYa,EAAM4a,YAKhDprB,EAAWG,SAASI,OAAO0T,KAAOjU,EAAW8oB,cAAcxsB,QACzDqV,kBAAmB,SAAS7W,GAC1B,IAAI8E,EAAKjH,KAAK6D,OAAO1B,GAIrB,OAHA8E,EAAGwS,MAAMgC,QAAU,QACnBxU,EAAGwS,MAAM8G,aAAe,MACxBtZ,EAAGwS,MAAMwX,WAAa,OACfhqB,GAETgS,wBAAyB,SAAS9W,GAChC,IAAI8E,EAAKjH,KAAK6D,OAAO1B,GAKrB,OAJA8E,EAAGwS,MAAMmZ,SAAW,OACpB3rB,EAAGwS,MAAMwP,OAAS,EAClBhiB,EAAGwS,MAAMgC,QAAU,eACnBxU,EAAGwS,MAAM0X,UAAY,SACdlqB,GAET4Z,iBAAkB,WAChB,IAAI5Z,EAAKjH,KAAK6D,SAKd,OAJAoD,EAAGwS,MAAM+W,OAAS,iBAClBvpB,EAAGwS,MAAMwG,QAAU,MACnBhZ,EAAGwS,MAAMwP,OAAS,MAClBhiB,EAAGwS,MAAMwY,aAAe,MACjBhrB,GAETkc,qBAAsB,WACpB,IAAIlc,EAAKjH,KAAK6D,SAEd,OADAoD,EAAGwS,MAAM8G,aAAe,MACjBtZ,GAETga,sBAAuB,WACrB,IAAIha,EAAKjH,KAAKslB,kBAKd,OAJAre,EAAGwS,MAAMgC,QAAU,eACnBxU,EAAGwS,MAAM6W,WAAa,OACtBrpB,EAAGwS,MAAMmZ,SAAW,OACpB3rB,EAAGwS,MAAMyZ,cAAgB,SAClBjsB,GAETghB,SAAU,WACR,IAAIhhB,EAAKjH,KAAK6D,SAGd,OAFAoD,EAAGwS,MAAMka,aAAe,iBACxB1sB,EAAGwS,MAAM8G,aAAe,MACjBtZ,GAET0V,cAAe,SAAS9E,EAAO1V,GAG7B,GAFA0V,EAAM4B,MAAMma,YAAc,MAEtB/b,EAAM4a,OASR5a,EAAM4a,OAAOhZ,MAAMgC,QAAU,YATb,CAChB,IAAI8T,EAAQvvB,KAAK6T,QAAQgE,EAAM,iBAC/BA,EAAM4a,OAAS9tB,SAAS6Q,cAAc,OACtCqC,EAAM4a,OAAO7mB,aAAa,QAAQ,UAClCiM,EAAM4a,OAAOhZ,MAAQ5B,EAAM4a,OAAOhZ,UAClC5B,EAAM4a,OAAOhZ,MAAMoX,MAAQ,MAC3BtB,EAAM/mB,YAAYqP,EAAM4a,QAM1B5a,EAAM4a,OAAOroB,UAAY,GACzByN,EAAM4a,OAAOjqB,YAAY7D,SAASgsB,eAAexuB,KAEnDya,iBAAkB,SAAS/E,GACzBA,EAAM4B,MAAMma,YAAc,GACvB/b,EAAM4a,SAAQ5a,EAAM4a,OAAOhZ,MAAMgC,QAAU,SAEhDqT,eAAgB,WACd,IAEIC,EAAcpqB,SAAS6Q,cAAc,YAGzC,OAFAuZ,EAAYnjB,aAAa,MAHf,KAIVmjB,EAAYnjB,aAAa,QAJF,GAKhBmjB,GAETK,kBAAmB,SAASL,EAAaI,GAClCJ,GACLA,EAAYnjB,aAAa,QAASujB,IAEpCE,yBAA0B,SAASN,GAC5BA,GACLA,EAAYjX,gBAAgB,YAIhCzQ,EAAWG,SAASI,OAAOisB,SAAWxsB,EAAW8oB,cAAcxsB,QAC7DskB,SAAU,WACR,IAAIhhB,EAAKjH,KAAK6D,SAGd,OAFAoD,EAAG2E,aAAa,cAAc,GAC9B3E,EAAG2E,aAAa,cAAc,GACvB3E,GAETyhB,mBAAoB,SAASvmB,GAC3B,IAAI8E,EAAKjH,KAAK6D,OAAO1B,GAGrB,OAFA8E,EAAG8N,UAAY,kBACf9N,EAAGwS,MAAMwX,WAAa,OACfhqB,GAETqY,aAAc,WACZ,IAAIrY,EAAKjH,KAAK6D,SAEd,OADAoD,EAAG8N,UAAY,oBACR9N,GAETga,sBAAuB,WACrB,IAAIha,EAAKjH,KAAKslB,kBAId,OAHAre,EAAGwS,MAAM6W,WAAa,OACtBrpB,EAAGwS,MAAMmZ,SAAW,OACpB3rB,EAAGwS,MAAMgC,QAAU,eACZxU,GAETgS,wBAAyB,SAAS9W,GAChC,IAAI8E,EAAKjH,KAAK2gB,eAAexe,GAG7B,OAFA8E,EAAGwS,MAAM6W,WAAa,OACtBrpB,EAAGwS,MAAMgC,QAAU,eACZxU,GAETuT,eAAgB,SAASzB,EAAOlB,EAAON,GACrC,IAAItQ,EAAKjH,KAAK6D,OAAOkV,EAAMlB,EAAMN,GASjC,MARkB,aAAfM,EAAMxJ,MACPpH,EAAGwS,MAAMuY,WAAa,OAEtB/qB,EAAGwS,MAAMwG,QAAU,SAGnBhZ,EAAGwS,MAAMwG,QAAU,cAEdhZ,GAET0Z,eAAgB,SAASxe,GACvB,IAAI8E,EAAKtC,SAAS6Q,cAAc,QAIhC,OAHAvO,EAAGwS,MAAMmZ,SAAW,OACpB3rB,EAAGwS,MAAM0X,UAAY,SACrBlqB,EAAG8O,YAAc5T,EACV8E,GAETqe,gBAAiB,WACf,IAAIre,EAAKtC,SAAS6Q,cAAc,OAGhC,OAFAvO,EAAG8N,UAAY,eACf9N,EAAGwS,MAAMmZ,SAAW,OACb3rB,GAET+R,kBAAmB,SAAS7W,GAC1B,IAAI8E,EAAKtC,SAAS6Q,cAAc,SAIhC,OAHAvO,EAAGwS,MAAMwX,WAAa,OACtBhqB,EAAGwS,MAAMgC,QAAU,QACnBxU,EAAG8O,YAAc5T,EACV8E,GAETwN,UAAW,SAAStS,EAAMuS,EAAMC,GAC9B,IAAIM,EAAStQ,SAAS6Q,cAAc,UACpCP,EAAOF,UAAY,qDAGhBL,IAASvS,GACV8S,EAAOF,WAAa,uBACpBL,EAAKK,WAAa,0CAClBE,EAAOzM,YAAYkM,IAGbA,GACNO,EAAOF,WAAa,+BACpBL,EAAKK,WAAa,0CAClBE,EAAOzM,YAAYkM,IAInBO,EAAOF,WAAa,uBAGtB,IAAI9N,EAAKtC,SAAS6Q,cAAc,QAOhC,OANAvO,EAAG8N,UAAY,iBACf9N,EAAG8O,YAAc5T,GAAMwS,GAAO,IAC9BM,EAAOzM,YAAYvB,GAEnBgO,EAAOrJ,aAAa,QAAQ+I,GAErBM,GAETD,cAAe,SAASC,EAAO9S,EAAMuS,EAAMC,GACzCM,EAAO7K,UAAY,GACnB6K,EAAOF,UAAY,qDAGhBL,IAASvS,GACV8S,EAAOF,WAAa,uBACpBL,EAAKK,WAAa,0CAClBE,EAAOzM,YAAYkM,IAGbA,GACNO,EAAOF,WAAa,+BACpBL,EAAKK,WAAa,0CAClBE,EAAOzM,YAAYkM,IAInBO,EAAOF,WAAa,uBAGtB,IAAI9N,EAAKtC,SAAS6Q,cAAc,QAChCvO,EAAG8N,UAAY,iBACf9N,EAAG8O,YAAc5T,GAAMwS,GAAO,IAC9BM,EAAOzM,YAAYvB,GAEnBgO,EAAOrJ,aAAa,QAAQ+I,IAE9BkM,iBAAkB,WAChB,IAAI5Z,EAAKtC,SAAS6Q,cAAc,OAIhC,OAHAvO,EAAG8N,UAAY,kCACf9N,EAAGwS,MAAMwG,QAAU,YACnBhZ,EAAGwS,MAAM8G,aAAe,OACjBtZ,GAETwT,gBAAiB,SAAS5C,GACrBA,EAAMwN,WACTxN,EAAMwN,SAAWrlB,KAAK6T,QAAQgE,EAAM,mBAEtC8E,cAAe,SAAS9E,EAAM1V,GACxB0V,EAAMwN,WACNxN,EAAM4a,OAMR5a,EAAM4a,OAAOhZ,MAAMgC,QAAU,IAL7B5D,EAAM4a,OAAS9tB,SAAS6Q,cAAc,OACtCqC,EAAM4a,OAAO1d,UAAY,iBACzB8C,EAAMwN,SAAS7c,YAAYqP,EAAM4a,SAMnC5a,EAAM4a,OAAO1c,YAAc5T,IAE7Bya,iBAAkB,SAAS/E,GACrBA,EAAM4a,SACV5a,EAAM4a,OAAOhZ,MAAMgC,QAAU,SAE/BqL,cAAe,SAASN,GACtBA,EAAIzR,UAAYyR,EAAIzR,UAAUpC,QAAQ,uBAAuB,IAAI,oBAEnEoU,gBAAiB,SAASP,GACxBA,EAAIzR,UAAYyR,EAAIzR,UAAUpC,QAAQ,sBAAsB,IAAI,uBAIpEtL,EAAWG,SAASI,OAAOksB,UAAYzsB,EAAW8oB,cAAcxsB,QAC5DqV,kBAAmB,SAAU7W,GAEzB,OADSnC,KAAK6D,OAAO1B,IAGzB8W,wBAAyB,SAAU9W,GAE/B,OADSnC,KAAK6D,OAAO1B,IAGzB0e,iBAAkB,WAEd,OADS7gB,KAAK6D,UAGlBsf,qBAAsB,WAElB,OADSnjB,KAAK6D,UAGlBod,sBAAuB,WAEnB,OADSjhB,KAAKslB,mBAGlB2C,SAAU,WAEN,OADSjoB,KAAK6D,UAGlB8Y,cAAe,SAAU9E,EAAO1V,GAC5B,GAAK0V,EAAM4a,OAOP5a,EAAM4a,OAAOhZ,MAAMgC,QAAU,YAPd,CACf,IAAI8T,EAAQvvB,KAAK6T,QAAQgE,EAAO,iBAChCA,EAAM4a,OAAS9tB,SAAS6Q,cAAc,OACtCqC,EAAM4a,OAAO7mB,aAAa,QAAS,UACnC2jB,EAAM/mB,YAAYqP,EAAM4a,QAM5B5a,EAAM4a,OAAOroB,UAAY,GACzByN,EAAM4a,OAAOjqB,YAAY7D,SAASgsB,eAAexuB,KAErDya,iBAAkB,SAAU/E,GACxBA,EAAM4B,MAAMma,YAAc,GACtB/b,EAAM4a,SAAQ5a,EAAM4a,OAAOhZ,MAAMgC,QAAU,SAEnDqT,eAAgB,WACZ,IAEIC,EAAcpqB,SAAS6Q,cAAc,YAGzC,OAFAuZ,EAAYnjB,aAAa,MAHf,KAIVmjB,EAAYnjB,aAAa,QAJF,GAKhBmjB,GAEXK,kBAAmB,SAAUL,EAAaI,GACjCJ,GACLA,EAAYnjB,aAAa,QAASujB,IAEtCE,yBAA0B,SAAUN,GAC3BA,GACLA,EAAYjX,gBAAgB,YAIpCzQ,EAAW0sB,gBAAkBzwB,EAAMK,QACjCqwB,SACEC,SAAU,GACVC,OAAQ,GACRC,OAAU,GACVlY,KAAM,GACNmY,IAAK,GACLC,OAAQ,GACRC,KAAM,GACNC,OAAQ,GACRC,SAAU,IAEZC,YAAa,GACbC,aAAc,SAASjpB,GACrB,OAAGzL,KAAKg0B,QAAQvoB,GAAazL,KAAKy0B,YAAYz0B,KAAKg0B,QAAQvoB,GAC/C,MAEdoJ,QAAS,SAASpJ,GAChB,IAAIkpB,EAAY30B,KAAK00B,aAAajpB,GAElC,IAAIkpB,EAAW,OAAO,KAEtB,IAAIpuB,EAAI5B,SAAS6Q,cAAc,KAE/B,OADAjP,EAAEwO,UAAY4f,EACPpuB,KAIXc,EAAWG,SAASY,SAASmqB,WAAalrB,EAAW0sB,gBAAgBpwB,QACnEqwB,SACEC,SAAU,eACVC,OAAQ,aACRC,OAAU,QACVlY,KAAM,SACNmY,IAAK,OACLC,OAAQ,aACRC,KAAM,KACNC,OAAQ,WACRC,SAAU,cAEZC,YAAa,UAGfptB,EAAWG,SAASY,SAASuqB,WAAatrB,EAAW0sB,gBAAgBpwB,QACnEqwB,SACEC,SAAU,eACVC,OAAQ,gBACRC,OAAU,SACVlY,KAAM,SACNmY,IAAK,OACLC,OAAQ,gBACRC,KAAM,eACNC,OAAQ,WACRC,SAAU,cAEZC,YAAa,yBAGfptB,EAAWG,SAASY,SAASwsB,aAAevtB,EAAW0sB,gBAAgBpwB,QACrEqwB,SACEC,SAAU,eACVC,OAAQ,gBACRC,OAAU,SACVlY,KAAM,SACNmY,IAAK,OACLC,OAAQ,aACRC,KAAM,OACNC,OAAQ,WACRC,SAAU,cAEZC,YAAa,UAGfptB,EAAWG,SAASY,SAASysB,aAAextB,EAAW0sB,gBAAgBpwB,QACrEqwB,SACEC,SAAU,sBACVC,OAAQ,uBACRC,OAAU,QACVlY,KAAM,SACNmY,IAAK,OACLC,OAAQ,MACRC,KAAM,OACNC,OAAQ,WACRC,SAAU,cAEZC,YAAa,WAGfptB,EAAWG,SAASY,SAAS0sB,YAAcztB,EAAW0sB,gBAAgBpwB,QACpEqwB,SACEC,SAAU,QACVC,OAAQ,OACRC,OAAU,SACVlY,KAAM,OACNmY,IAAK,UACLC,OAAQ,QACRC,KAAM,YACNC,OAAQ,WACRC,SAAU,cAEZC,YAAa,eAGfptB,EAAWG,SAASY,SAASkrB,YAAcjsB,EAAW0sB,gBAAgBpwB,QACpEqwB,SACEC,SAAU,QACVC,OAAQ,OACRC,OAAU,IACVlY,KAAM,SACNmY,IAAK,WACLC,OAAQ,WACRC,KAAM,OACNC,OAAQ,WACRC,SAAU,cAEZC,YAAa,QAGfptB,EAAWG,SAASY,SAASyrB,SAAWxsB,EAAW0sB,gBAAgBpwB,QACjEqwB,SACEC,SAAU,eACVC,OAAQ,eACRC,OAAU,QACVlY,KAAM,SACNmY,IAAK,YACLC,OAAQ,aACRC,KAAM,OACNC,OAAQ,iBACRC,SAAU,kBAEZC,YAAa,qBAGfptB,EAAWG,SAAS8D,UAApB,QAA2C,WACzC,OACEC,QAAS,SAASxD,GAChB,IAAI+nB,EAAU/nB,EAASwmB,MAAM,mCACzBwG,EAAIjF,GAAWA,EAAQ3uB,OAG3B,IAAI4zB,EAAG,OAAO,WAAa,OAAOhtB,GAiClC,IA7BA,IAAIitB,KACAC,EAAkB,SAAS1uB,GAC7B,IAEI2uB,EAGEC,EALF/lB,EAAI0gB,EAAQvpB,GAAGoM,QAAQ,SAAS,IAAIyiB,OAAOviB,MAAM,KACjD7D,EAAII,EAAEjO,OAGP6N,EAAI,EAELkmB,EAAO,SAASxhB,GAEd,IADAyhB,EAAMzhB,EACFnN,EAAE,EAAGA,EAAEyI,IACTmmB,EAAMA,EAAI/lB,EAAE7I,KADAA,KAId,OAAO4uB,IAIT/lB,EAAIA,EAAE,GACN8lB,EAAO,SAASxhB,GACd,OAAOA,EAAKtE,KAIhB4lB,EAAazqB,MACX4U,EAAG2Q,EAAQvpB,GACX8G,EAAG6nB,KAGC3uB,EAAE,EAAGA,EAAEwuB,EAAGxuB,IAChB0uB,EAAgB1uB,GAIlB,OAAO,SAASmN,GACd,IACIrG,EADAxK,EAAMkF,EAAS,GAEnB,IAAIxB,EAAE,EAAGA,EAAEwuB,EAAGxuB,IACZ8G,EAAI2nB,EAAazuB,GACjB1D,EAAMA,EAAI8P,QAAQtF,EAAE8R,EAAG9R,EAAEA,EAAEqG,IAE7B,OAAO7Q,MAMfwE,EAAWG,SAAS8D,UAAU+pB,IAAM,WAClC,QAAI5xB,OAAO6xB,MAGT/pB,QAAS,SAASxD,GAChB,IAAIwtB,EAAW,IAAI9xB,OAAO6xB,KACxBnzB,KAAM4F,IAGR,OAAO,SAASytB,GACd,OAAOD,EAASz1B,OAAO01B,OAM/BnuB,EAAWG,SAAS8D,UAAUmqB,WAAa,WACzC,OAAOhyB,OAAOiyB,YAGhBruB,EAAWG,SAAS8D,UAAUqqB,MAAQ,WACpC,QAAIlyB,OAAOmyB,QAGTrqB,QAAS,SAASxD,GAChB,IAAIwtB,EAAW9xB,OAAOmyB,MAAMrqB,QAAQxD,GACpC,OAAO,SAASytB,GACd,OAAOD,EAASz1B,OAAO01B,OAM/BnuB,EAAWG,SAAS8D,UAAUuqB,OAAS,WACrC,SAAIpyB,OAAOqyB,OAASryB,OAAOqyB,KAAKC,MAG9BxqB,QAAS,SAASxD,GAChB,OAAO,SAASytB,GACd,OAAO/xB,OAAOqyB,KAAKC,GAAGhuB,EAASytB,OAMvCnuB,EAAWG,SAAS8D,UAAU0qB,SAAW,WACvC,QAAIvyB,OAAOwyB,WAGT1qB,QAAS,SAASxD,GAChB,OAAO,SAASmuB,GACd,OAAOzyB,OAAOwyB,SAASn2B,OAAOiI,EAAUmuB,OAMhD7uB,EAAWG,SAAS8D,UAAU6qB,KAAO,WACnC,OAAO1yB,OAAO0yB,MAGhB9uB,EAAWG,SAAS8D,UAAU8qB,WAAa,WACzC,QAAI3yB,OAAO4yB,IAGT9qB,QAAS,SAASxD,GAChB,OAAO,SAASytB,GACd,OAAO/xB,OAAO4yB,EAAEtuB,SAASA,EAAUytB,OAO3CnuB,EAAWG,SAASK,MAAQ,OAG5BR,EAAWG,SAASO,SAAW,UAG/BV,EAAWG,SAASvG,WAGpBoG,EAAWG,SAASiB,UAAY,SAASgD,EAAK6qB,GAC5C,IAAIC,EAAOlvB,EAAWG,SAAS8H,UAAUjI,EAAWG,SAASgvB,UAC7D,IAAID,EAAM,KAAM,oBAAoBlvB,EAAWG,SAASgvB,SAExD,IAAI5e,EAAS2e,EAAK9qB,IAAQpE,EAAWG,SAAS8H,UAAUjI,EAAWG,SAASivB,kBAAkBhrB,GAE9F,QAAqB,IAAXmM,EAAwB,KAAM,4BAA4BnM,EAEpE,GAAG6qB,EACD,IAAI,IAAI/vB,EAAE,EAAGA,EAAE+vB,EAAUn1B,OAAQoF,IAC/BqR,EAASA,EAAOjF,QAAQ,IAAI5B,OAAO,SAASxK,EAAE,KAAK,KAAK+vB,EAAU/vB,IAItE,OAAOqR,GAITvQ,EAAWG,SAASivB,iBAAmB,KACvCpvB,EAAWG,SAASgvB,SAAWnvB,EAAWG,SAASivB,iBACnDpvB,EAAWG,SAAS8H,UAAUonB,IAI5BC,aAAc,uBAIdC,eAAgB,iBAIhBC,WAAY,6CAIZC,YAAa,mEAKbC,YAAa,wHAIbC,UAAW,sDAIXC,iBAAkB,0CAKlBC,WAAY,8BAIZC,qBAAsB,yDAKtBC,eAAgB,kCAKhBC,iBAAkB,oCAKlBC,mBAAoB,gCAKpBC,mBAAoB,8BAKpBC,mBAAoB,mCAKpBC,mBAAoB,+BAKpBC,gBAAiB,8CAKjBC,gBAAiB,+CAIjBC,cAAe,qCAIfC,sBAAuB,4CAKvBC,eAAgB,sCAKhBC,eAAgB,uCAIhBC,kBAAmB,+BAKnBC,oBAAqB,4CAKrBC,oBAAqB,6CAKrBC,eAAgB,kDAKhBC,4BAA6B,8DAK7BC,iBAAkB,2BAIlBC,kBAAmB,MAInBC,wBAAyB,aAKzBC,mBAAoB,aAKpBC,yBAA0B,oBAK1BC,qBAAsB,YAItBC,uBAAwB,YAIxBC,qBAAsB,UAKtBC,wBAAyB,eAIzBC,8BAA+B,SAI/BC,gBAAiB,WAIjBC,cAAe,SAKfC,iBAAkB,YAClBC,eAAgB,WAIlB7xB,EAAW4T,SACTY,KACEhU,MAAO,IAETwQ,cAGA2C,YAGAmQ,WAGAiB,cAKFvlB,EAAMQ,EAAWG,SAAS0D,QAAS,SAAS3E,EAAEuF,GAC5CzE,EAAWG,SAAS0D,QAAQ3E,GAAGtF,QAAU6K,EAAO7K,cAKlDoG,EAAWG,SAASwD,UAAU8I,QAAQ,SAAShM,GAC7C,GAA0B,iBAAhBA,EAAOuG,KAAmB,MAAO,aAG7ChH,EAAWG,SAASwD,UAAU8I,QAAQ,SAAShM,GAE7C,IAAIA,EAAOuG,MAAQvG,EAAO2J,WAAa,MAAO,WAGhDpK,EAAWG,SAASwD,UAAU8I,QAAQ,SAAShM,GAE7C,GAA0B,iBAAhBA,EAAOuG,KAAmB,OAAOvG,EAAOuG,OAGpDhH,EAAWG,SAASwD,UAAU8I,QAAQ,SAAShM,GAC7C,GAAmB,YAAhBA,EAAOuG,KAER,MAAqB,aAAlBvG,EAAO0P,QAA0B1P,EAAO7G,SAAW6G,EAAO7G,QAAQohB,SAC5D,WAGDhb,EAAW4T,QAAQmR,UAAU5f,OAAU,YAAc,WAIjEnF,EAAWG,SAASwD,UAAU8I,QAAQ,SAAShM,GAE7C,GAAmB,QAAhBA,EAAOuG,KAAgB,MAAO,aAGnChH,EAAWG,SAASwD,UAAU8I,QAAQ,SAAShM,GAE7C,GAAmB,WAAhBA,EAAOuG,MAAqBvG,EAAO+N,OAAuC,WAA9B/N,EAAO+N,MAAMsjB,eAC1D,MAAO,WAIX9xB,EAAWG,SAASwD,UAAU8I,QAAQ,SAAShM,GAC7C,GAAmB,WAAhBA,EAAOuG,MAAuC,QAAlBvG,EAAO0P,QAAoB1P,EAAO7G,UAAqC,IAA1B6G,EAAO7G,QAAQytB,QACtFjrB,OAAOmqB,WAAY,MAAO,WAIjCvmB,EAAWG,SAASwD,UAAU8I,QAAQ,SAAShM,GAE7C,GAAkB,SAAfA,EAAOuG,MAAoC,SAAjBvG,EAAO0P,OAClC,MAAO,UAIXnQ,EAAWG,SAASwD,UAAU8I,QAAQ,SAAShM,GAC7C,GAAGA,EAAOwjB,WAAY,OAAQjkB,EAAW4T,QAAQmR,UAAU5f,OAAU,YAAc,WAGrFnF,EAAWG,SAASwD,UAAU8I,QAAQ,SAAShM,GAC7C,GAAGA,EAAA,KAAgB,CACjB,GAAmB,UAAhBA,EAAOuG,MAAoC,WAAhBvG,EAAOuG,KACnC,MAAO,OAEJ,GAAmB,WAAhBvG,EAAOuG,MAAqC,YAAhBvG,EAAOuG,MAAsC,WAAhBvG,EAAOuG,KACtE,OAAQhH,EAAW4T,QAAQmR,UAAU5f,OAAU,YAAc,YAKnEnF,EAAWG,SAASwD,UAAU8I,QAAQ,SAAShM,GAC7C,GAAmB,UAAhBA,EAAOuG,MAAoBvG,EAAOkJ,QAAWlL,MAAMC,QAAQ+B,EAAOkJ,QAAWlJ,EAAOsJ,cAAgB,SAAS,SAAS,WAAWnC,QAAQnH,EAAOkJ,MAAM3C,OAAS,EAAG,CAEnK,GAAGvG,EAAOkJ,MAAMsb,KACd,MAAO,cAGJ,GAAGjlB,EAAW4T,QAAQmR,UAAU5f,QAAgC,WAAtB1E,EAAOkJ,MAAM3C,KAC1D,MAAO,oBAKbhH,EAAWG,SAASwD,UAAU8I,QAAQ,SAAShM,GAE7C,GAAGA,EAAO6G,OAAS7G,EAAOyG,MAAO,MAAO,aAM1C,WACE,GAAG9K,OAAOsX,QAAUtX,OAAO21B,MAAO,CAChC,IAAIC,EAAI51B,OAAOsX,QAAUtX,OAAO21B,MAChCC,EAAEjwB,WAAa/B,EAAWG,SAE1B6xB,EAAEr1B,GAAGoF,WAAa,SAASnI,GACzB,IAAIwG,EAAOzH,KACP8L,EAAS9L,KAAKiD,KAAK,cACvB,GAAe,UAAZhC,EAAqB,CACtB,IAAI6K,EAAQ,KAAM,8DAGlB,KAAG5K,UAAUC,OAAS,GAKpB,OAAO2K,EAAOhC,WAJdgC,EAAOnC,SAASzI,UAAU,QAOzB,IAAe,aAAZD,EAAwB,CAC9B,IAAI6K,EAAQ,KAAM,+CAGlB,OAAG5K,UAAUC,OAAS,EACb2K,EAAOjC,SAAS3I,UAAU,IAI1B4K,EAAOjC,WAGE,YAAZ5I,EACH6K,IACDA,EAAO5B,UACPlK,KAAKiD,KAAK,aAAa,QAKtB6I,GACDA,EAAO5B,UAIT4B,EAAS,IAAIzE,EAAWrH,KAAKs5B,IAAI,GAAGr4B,GACpCjB,KAAKiD,KAAK,aAAa6I,GAGvBA,EAAOzB,GAAG,SAAS,WACjB5C,EAAKuC,QAAQ,YAEf8B,EAAOzB,GAAG,QAAQ,WAChB5C,EAAKuC,QAAQ,YAIjB,OAAOhK,OAzDb,GA8DSqH,EA16PX,GCJIkyB,GAAe,EAGNC,EAAa,SAAAv4B,GAAA,OAAW,IAAA6B,EAAAC,EAAY,SAACC,EAASE,GAAW,IAAAu2B,EAKhEx4B,EAHFy4B,eAFkEt4B,IAAAq4B,EAExD,IAFwDA,EAAAE,EAKhE14B,EAFF24B,gBAHkEx4B,IAAAu4B,EAGvD,GAHuDA,EAAAE,EAKhE54B,EADF64B,cAJkE14B,IAAAy4B,EAIzD,KAJyDA,EAO9DE,EAAeC,YAAY,WAC3Bv2B,OAAOw2B,SACTC,cAAcH,GACd/2B,EAAQS,OAAOw2B,UAEhBL,GAEGO,EAAcv0B,WAAW,WAC7Bs0B,cAAcH,GACdl0B,aAAas0B,GACbj3B,EAAO,wBACNw2B,GAEGU,EAAgB,WAChB32B,OAAOw2B,QACTC,cAAcH,GACdl0B,aAAas0B,GACbn3B,EAAQS,OAAOw2B,SAEfx2B,OAAO0Y,SAAS,yBAA0B,WACxC+d,cAAcH,GACdl0B,aAAas0B,GACbn3B,EAAQS,OAAOw2B,YAKA,WACnB,GAAKx2B,OAAO0Y,UAA4B,IAAjBod,EAOZ91B,OAAO0Y,SAChBie,QAR6C,CAC7Cb,GAAe,EACf,IAAMc,EAAe11B,SAAS6Q,cAAc,UAC5C6kB,EAAahsB,KAAO,yBACpBgsB,EAAa9d,KAAM,KAAKud,EAAL,cAAwBnnB,QAAQ,KAAM,KACzD0nB,EAAavgB,iBAAiB,OAAQsgB,GACtCz1B,SAAS21B,KAAK9xB,YAAY6xB,IAM9BE,OLEFh6B,uBAEA,8CAEA,mBACA,4BACA,0BACA,0BACA,kCACA,mCACA,oCACA,wBACA,sBAEA,QAEA,IAAAi6B,wCAOA,oBAEAv0B,iBAGA,wCAGA,gBACA,gDAGA,gBACA,gBACA,0BACA,eACA,cACA,oBACA,uBACA,wBACA,sBACA,wBAEA,uBAEA,IAAAw0B,EAAAz6B,oJACAiD,iCACAy3B,2CAEAC,8BAIA,mEACAC,wCACAC,0FAEA/wB,qEAGAgxB,mCACAH,sDACA7wB,qDAEAixB,uDAEAC,uIAKA,6BACA,oBAIA,8EASA,YAEAlzB,eACA,gCACA,sBACA,4BAEA,+BAXAmzB,cACA,8GAiBAnxB,kGASAoxB,+DAEA,iEAEAA,2DAGA,0FAGAnvB,cAEAjC,WAEA,8FAGAiC,0BAEA9B,IACA,8DAKAA,IAAAjK,KACAm7B,YAAAn7B,KAAAm7B,WACArxB,UAAAnI,IAAAsI,KAAAtI,IAAA3B,KAAAm7B,WAAArxB,wCAEAG,IACA,kHAQAmxB,iKAEAP,yEAEA7e,IACA,qFAMAqf,qCACA,4BAEA,aACApxB,oGAEA,UACA,+EAOAnC,6BACA,IACA,sCAEA5B,YACA,+DAKA20B,qBAGA,kCADA30B,6EASAy0B,iCACA,wCALAM,gFAQAh4B,8CACA03B,0CACAE,yCACAF,8FAKAI,yCACA7wB,0BACA,yEACA4wB,yCACAH,6DACAI,gGAGAz0B,+BACAA,GACAA,uBAEA,IAAAg1B,EAAAt7B,yCAEA,uBACA,mBACA,uCAEAqe,UACA,0BAEA,IAAAkd,EAAAv7B,sBACA,mBACA,uCAEAqe,UACA,0BAEA,IAAAmd,EAAAx7B,sBACA,mBACA,uCAEAqe,UACA,8BAGArE,iDACA,GAAA1V,EAAAm3B,YAAA,GAAAxN,EAAA+M,aAAA/M,EAAAyN,WAAAzN,EAAA3T,iBAEAP,gJAQA,2CAEA,2CAEA,GACA4hB,OACA,6BACAC,0BACAA,4BACA,yDACAA,GACA,UACA,2BACAA,0BACAA,yDACAA,6BACA,qFAOAv6B,uFAGAA,mEAKAq5B,iBACAmB,gFAGA54B,gDAGA,gCAEAgH,gCAEA/D,iFAKA+D,GACAA,qCAEAA,2BACAA,kCACA4wB,oDACAG,kEAIA3c,YM/WAyd,GADiBh8B,OAFjB,WAA0B,IAAAi8B,EAAA/7B,KAAaD,EAAAg8B,EAAA97B,eAA0BC,EAAA67B,EAAA57B,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAAA,EAAA,OAA2B+N,IAAA,SAAA+tB,YAAA,WAAkC97B,EAAA,OAAY+7B,aAAal4B,KAAA,OAAAm4B,QAAA,SAAAjyB,MAAA8xB,EAAA,WAAAI,WAAA,eAA4EluB,IAAA,eAAA+tB,YAAA,iBAAA3xB,IAAsD+xB,MAAA,SAAAC,GAAyBA,EAAAtiB,qBAA2BgiB,EAAAO,GAAA,KAAAp8B,EAAA,OAAwB+7B,aAAal4B,KAAA,OAAAm4B,QAAA,SAAAjyB,MAAA8xB,EAAA,WAAAI,WAAA,eAA4EluB,IAAA,aAAA+tB,YAAA,eAAA3xB,IAAkD+xB,MAAA,SAAAC,GAAyBN,EAAAQ,QAAAF,EAAAN,EAAAS,MAAA1B,aAA0C2B,MAAA,SAAAJ,GAA0BN,EAAAW,kBAAAL,SAAgCN,EAAAO,GAAA,KAAAP,EAAA,aAAA77B,EAAA,OAA6C87B,YAAA,eAAyB97B,EAAA,KAAA67B,EAAAO,GAAA,YAAAP,EAAAY,GAAAZ,EAAAd,mBAAAc,EAAAa,KAAAb,EAAAO,GAAA,KAAAp8B,EAAA,OAA0F87B,YAAA,yBAAmC97B,EAAA,OAAY87B,YAAA,+BAAyC97B,EAAA,aAAkBE,OAAOotB,KAAA,QAAA9Y,KAAA,kBAAuCrK,IAAKoyB,MAAAV,EAAAc,iBAA2Bd,EAAAO,GAAA,8BAAAP,EAAAO,GAAA,KAAAp8B,EAAA,aAAmE87B,YAAA,iBAAA57B,OAAoCiO,KAAA,UAAAmf,KAAA,SAAgCnjB,IAAKoyB,MAAAV,EAAAe,eAAyBf,EAAAO,GAAA,kCAAAP,EAAAO,GAAA,KAAAp8B,EAAA,OAAiE87B,YAAA,+CAAyD97B,EAAA,aAAkBE,OAAOotB,KAAA,SAAenjB,IAAKoyB,MAAAV,EAAAgB,YAAsBhB,EAAAO,GAAA,6BAAAP,EAAAO,GAAA,KAAAp8B,EAAA,aAAkEE,OAAOotB,KAAA,SAAenjB,IAAKoyB,MAAAV,EAAAiB,YAAsBjB,EAAAO,GAAA,4BAAAP,EAAAO,GAAA,KAAAp8B,EAAA,aAAiEE,OAAOotB,KAAA,SAAenjB,IAAKoyB,MAAAV,EAAAkB,YAAsBlB,EAAAO,GAAA,qCAEnhDh8B,oBCCjB,ICoFA48B,QAEA,2CDtFAz8B,EAAA,OAcA08B,CACA3C,EACAsB,GATA,EAVA,SAAAn7B,GACAF,EAAA,SAaA,kBAEA,MAUA,4ECuEA,cACA,YACA,YACA,sIAQA,gBACA,YACA,6BACA,qBAEA,4CAGA,IAAAg6B,EAAAz6B,+JAEA,0BAIAo9B,yCACAC,6CACAA,OAAA,kGAEA,IAAA/B,EAAAt7B,4LAGA6C,0EAEA,IAAA04B,EAAAv7B,8JAKAq9B,uCACAx6B,yEAEA,IAAA24B,EAAAx7B,gJAEA,qBAEAq9B,oBAIAC,qCACAC,kCACAC,6FAEA,IAAAC,EAAAz9B,oKAKAq9B,kDACAx6B,iFAEA,IAAA66B,EAAA19B,sKAKAq9B,+CACAx6B,yEAEA,IAAA86B,EAAA39B,wJAEA,qBAEAq9B,4BAIAO,6CACAL,kCACAM,qGAEA,IAAAC,EAAA99B,oKAKAq9B,oCACAx6B,kGAGAk7B,OACAC,4DAGA,8BAAAh+B,KAAA49B,mBAAAz8B,OAAA,kDAEA,IACA,yEAKA88B,iEACAC,gIAIAC,kBACA,mDAGAD,6CAGAn6B,UACA,kBACAq6B,yCAKAr6B,+CAGA,iIAGA,8BAGA,IAAAs6B,EAAAr+B,uJAEA,GAEA,kCACAK,4BAEAi+B,mBACAC,+CACAC,+CACAhB,mDAEAiB,kCACAC,iDACAb,+GAGA,IAAAc,EAAA3+B,8BAGA,6DACAK,wCAEA,QAEA+9B,mCANAA,yGAWAr6B,sCACAd,UACAg7B,8HAMAh7B,UACA27B,6DAGAj9B,IAAAsI,KAAAtI,IAAAk9B,qBAIA50B,OACA60B,oBChRAC,GADiBj/B,OAFjB,WAA0B,IAAAi8B,EAAA/7B,KAAaD,EAAAg8B,EAAA97B,eAA0BC,EAAA67B,EAAA57B,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAAA,EAAA,OAA2B87B,YAAA,yBAAmC97B,EAAA,OAAY87B,YAAA,iCAA2C97B,EAAA,MAAA67B,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAp8B,EAAA,OAAkD87B,YAAA,6BAAwCD,EAAAiD,GAAAjD,EAAA,4BAAAgC,GAAqD,OAAA79B,EAAA,OAAiBuL,IAAAsyB,EAAA19B,GAAA27B,YAAA,8BAAyD97B,EAAA,aAAkBE,OAAOiO,KAAA0tB,EAAAkD,+BAAAlB,GAAAvQ,KAAA,QAAA9Y,KAAA,gBAA0FwqB,UAAWzC,MAAA,SAAAJ,GAAyBN,EAAAoD,gBAAApB,OAAiChC,EAAAO,GAAA,iBAAAP,EAAAY,GAAAoB,EAAAppB,OAAA,2BAAwEonB,EAAAO,GAAA,KAAAp8B,EAAA,OAA2B87B,YAAA,qBAA+B97B,EAAA,MAAA67B,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAp8B,EAAA,OAAkD87B,YAAA,0BAAoC97B,EAAA,aAAkBE,OAAOotB,KAAA,QAAA9Y,KAAA,mBAAwCwqB,UAAWzC,MAAA,SAAAJ,GAAyB,OAAAN,EAAAwB,qBAAAlB,OAA0CN,EAAAO,GAAA,8BAAAP,EAAAO,GAAA,KAAAp8B,EAAA,aAAmEE,OAAOotB,KAAA,QAAA9Y,KAAA,gBAAqCwqB,UAAWzC,MAAA,SAAAJ,GAAyB,OAAAN,EAAAqD,iBAAA/C,OAAsCN,EAAAO,GAAA,qCAAAP,EAAAO,GAAA,KAAAp8B,EAAA,OAAoE87B,YAAA,wBAAkCD,EAAAO,GAAA,aAAAP,EAAAY,GAAAZ,EAAAuB,WAAA3oB,OAAA,cAAAonB,EAAAO,GAAA,KAAAp8B,EAAA,UAA0F+N,IAAA,gBAAA+tB,YAAA,kBAAA57B,OAAyDmc,IAAAwf,EAAAmC,gBAAsBnC,EAAAO,GAAA,KAAAp8B,EAAA,OAA0B87B,YAAA,uBAAiC97B,EAAA,MAAA67B,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAp8B,EAAA,OAAkD87B,YAAA,oBAA8B97B,EAAA,WAAgBE,OAAOiO,KAAA,cAAApE,MAAA8xB,EAAAsD,UAA0Ch1B,IAAKi1B,YAAAvD,EAAAwD,cAA4Br/B,EAAA,eAAoBE,OAAO2D,KAAA,iBAAAgV,MAAA,YAA0C7Y,EAAA,OAAY87B,YAAA,qBAA+B97B,EAAA,eAAoBE,OAAO6C,KAAA84B,EAAAuB,WAAA5C,WAAAqB,EAAAyD,kBAAwDn1B,IAAKo1B,cAAA,SAAApD,GAA+BN,EAAAuB,WAAAjB,GAAsBqD,oBAAA,SAAArD,GAAsCN,EAAAyD,iBAAAnD,OAA8B,KAAAN,EAAAO,GAAA,KAAAp8B,EAAA,eAAsCE,OAAO2D,KAAA,aAAAgV,MAAA,YAAsC7Y,EAAA,OAAY87B,YAAA,qBAA+B97B,EAAA,eAAoBE,OAAO6C,KAAA84B,EAAA94B,KAAAy3B,WAAAqB,EAAArB,YAA4CrwB,IAAKo1B,cAAA,SAAApD,GAA+BN,EAAA94B,KAAAo5B,GAAgBqD,oBAAA,SAAArD,GAAsCN,EAAArB,WAAA2B,OAAwB,iBAAAN,EAAAO,GAAA,KAAAp8B,EAAA,aAAgDE,OAAOuU,MAAA,wBAAAgrB,QAAA5D,EAAA6D,iBAAAlmB,MAAA,OAA6ErP,IAAKw1B,iBAAA,SAAAxD,GAAkCN,EAAA6D,iBAAAvD,MAA8Bn8B,EAAA,MAAA67B,EAAAO,GAAA,2BAAAP,EAAAO,GAAA,yBAAAp8B,EAAA,KAAqFE,OAAOiV,KAAA,mEAAA4Y,OAAA,WAA4F8N,EAAAO,GAAA,QAAAP,EAAAO,GAAA,gCAEnmFh8B,oBCCjB,IAuBAw/B,EAvBAr/B,EAAA,OAcAs/B,CACA7C,EACA6B,GATA,EAVA,SAAAp+B,GACAF,EAAA,SAaA,kBAEA,MAUA,QCtBA+B,EAAA,QAAIw9B,IAAIC,EAAA,GAER,IAAAC,EAAA,IAAmBD,EAAA,GACjBE,SAEIp0B,KAAM,IACNhI,KAAM,WACNg6B,UAAW+B,IAGX/zB,KAAM,YACNhI,KAAM,WACNg6B,UAAW+B,MCRjBt9B,EAAA,QAAIw9B,IAAII,EAAAr9B,GAERP,EAAA,QAAI69B,OAAOC,eAAgB,EAG3B,IAAI99B,EAAA,SACFyE,GAAI,OACJi5B,SACAK,YAAcC,IAAAhgC,GACduH,SAAU","file":"static/js/app.ee1c5ac4fe18e8ea90a4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-58121ac2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-58121ac2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-58121ac2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n<div>\n  <div class=\"editor\"\n    ref=\"editor\">\n    <div class=\"editor__monaco\"\n      @wheel.prevent\n      v-show=\"isShowCode\"\n      ref=\"monacoEditor\">\n    </div>\n    <div class=\"editor__json\"\n      @wheel=\"onWheel($event, $refs.jsonEditor)\"\n      @click=\"onJsonEditorClick($event)\"\n      v-show=\"isShowForm\"\n      ref=\"jsonEditor\">\n    </div>\n  </div>\n  <div class=\"error-line\"\n    v-if=\"errorMessage\">\n    <p>Eclipse: {{errorMessage}}</p>\n  </div>\n  <div class=\"editor__button-group\">\n    <div class=\"editor__button-group__left\">\n      <el-button\n        size=\"small\"\n        icon=\"el-icon-upload\"\n        @click=\"comfirmObject\">\n        提交配置数据\n      </el-button>\n      <el-button\n        class=\"element-hidden\"\n        type=\"warning\"\n        size=\"small\"\n        @click=\"resetObject\">\n        重置表单数据\n      </el-button>\n    </div>\n    <div class=\"editor__button-group__right element-hidden\">\n      <el-button size=\"small\"\n        @click=\"showBoth\">\n        代码和表单\n      </el-button>\n      <el-button size=\"small\"\n        @click=\"showCode\">\n        只看代码\n      </el-button>\n      <el-button size=\"small\"\n        @click=\"showForm\">\n        只看表单\n      </el-button>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport JSON5 from 'json5';\nimport JSONEditor from 'comp/json-editor-class';\nimport { loadMonaco } from 'comp/monaco-editor-loader';\n\n((JSONEditorClass) => {\n  JSONEditorClass.defaults.language = 'zh';\n  JSONEditorClass.defaults.languages.zh = {\n    button_collapse: '折叠',\n    button_expand: '展开',\n    button_move_down_title: '下移',\n    button_move_up_title: '上移',\n    button_add_row_title: '添加{{0}}',\n    button_delete_row_title: '删除{{0}}',\n    button_delete_last_title: '删除末尾{{0}}',\n    button_delete_all_title: '删除全部',\n    custom_set_image: '设置图片',\n    custom_set_url: '设置链接',\n  };\n})(JSONEditor);\n\nexport default {\n  components: {\n  },\n  props: {\n    data: {\n      required: true,\n    },\n    dataSchema: {\n      type: Object,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      MonacoEditor: null,\n      JsonEditor: null,\n      primeData: {},\n      primeDataSchema: {},\n      dataString: '',\n      errorMessage: '',\n      editorHeight: 0,\n      jsonEditorDefaultString: '',\n      isShowCode: false,\n      isShowForm: true,\n      currentEditorPath: '',\n      currentUploadImgUrl: '',\n      showUploadImgDialog: false,\n      currentUploadSrcURL: '',\n      showUploadSrcDialog: false,\n    };\n  },\n  async mounted() {\n    this.primeData = this.dataRestorSpread(this.data);\n    this.primeDataSchema = { ...this.dataSchema };\n    this.dataString = this.getDataString(this.primeData);\n\n    // Initialize the editor\n    const Monaco = await loadMonaco({\n      toPath: 'vs',\n    });\n    this.MonacoEditor = this.initMonacoEditor(Monaco, this.$refs.monacoEditor);\n    this.MonacoEditor.setValue(this.dataString);\n    this.MonacoEditor.onDidChangeModelContent(() => {\n      this.dataString = this.MonacoEditor.getValue();\n    });\n\n    this.JsonEditor = this.initJsonEditor(this.primeDataSchema, this.$refs.jsonEditor);\n    this.setJsonEditorValue(this.primeData);\n    this.jsonEditorDefaultString = JSON.stringify(this.JsonEditor.getValue());\n    this.JsonEditor && this.JsonEditor.on('change', this.jsonEditorChangeHandler);\n\n    //for resize detection\n    this.editorHeight = this.$refs.editor.clientHeight;\n  },\n  methods: {\n    initMonacoEditor(monaco, ele) {\n      const editor = monaco.editor.create(ele, {\n        language: 'java',\n        scrollBeyondLastLine: false,\n        minimap: {\n          enabled: false,\n        },\n      });\n      return editor;\n    },\n    initJsonEditor(schema, ele) {\n      if(!this.schemaValidate(schema)) {\n        this.$message.error(this.errorMessage);\n        return null;\n      };\n\n      ele.innerHTML = '';\n      const editor = new JSONEditor(ele, {\n        schema,\n        theme: 'bootstrap3',\n        disable_edit_json: true,\n        disable_properties: true,\n        no_additional_properties: true,\n      });\n      return editor;\n    },\n    jsonEditorChangeHandler() {\n      if (!this.JsonEditor || !this.JsonEditor.getValue) {\n        return;\n      }\n      const newData = this.JsonEditor.getValue();\n      if (!this.dataValidate(newData)) {\n        return;\n      };\n      // ${newData} pass validation\n      // ${primeData} validated change will always change this.JsonEditor value\n      // so if ${primeData} pass validation, ${newData} is a patch change from ${primeData}, can directly set to ${primeData}\n      if (this.dataValidate(this.primeData)) {\n        // fixbug: array `move down`/`move up`, primeData become newData immediately\n        this.primeData = JSON.parse(JSON.stringify(newData));\n      } else if( JSON.stringify(newData) !== this.JsonEditorDefaultString) {\n        this.$message.error('在表单中编辑数据前, 请在代码中的配置数据编辑到与数据约束匹配.');\n      }\n      this.jsonEditorDefaultString = newData;\n    },\n    getDataString(data) {\n      return JSON5.stringify(data, null, 2);\n    },\n    getJsonEditorValueByPath(path) {\n      const name = this.JsonEditor && this.JsonEditor.getEditor(path);\n      if (name) {\n        return name.getValue();\n      }\n      return null;\n    },\n    setJsonEditorValueByPath(path, value) {\n      const name = this.JsonEditor && this.JsonEditor.getEditor(path);\n      if (name) {\n        name.setValue(value);\n        return true;\n      }\n      return false;\n    },\n    setJsonEditorValue(value) {\n      if (this.dataValidate(value)\n        && this.JsonEditor\n        && this.JsonEditor.getValue\n        && JSON.stringify(value) !== JSON.stringify(this.JsonEditor.getValue())) {\n        this.JsonEditor.setValue(value);\n        return true;\n      }\n      return false;\n    },\n    setMonacoEditorValue(value) {\n      if (!this.MonacoEditor) return;\n\n      const position = this.MonacoEditor.getPosition && this.MonacoEditor.getPosition();\n\n      if (this.MonacoEditor.getValue && this.MonacoEditor.getValue() !== this.dataString) {\n        this.MonacoEditor.setValue && this.MonacoEditor.setValue(this.dataString);\n        // keep cursor position\n        this.MonacoEditor.setPosition && this.MonacoEditor.setPosition(position);\n        return true;\n      }\n      return false;\n    },\n    dataValidate(value) {\n      const editor = new JSONEditor(document.createElement('div'), {\n        schema: this.primeDataSchema,\n        required_by_default: true,\n        no_additional_properties: true,\n      });\n      const error = editor.validate(value);\n      if (error && error.length) {\n        this.errorMessage = error.map(item => `${item.path} ==> ${item.message}`).join('<br/>');\n        return false;\n      } else {\n        return true;\n      }\n    },\n    schemaValidate(schema) {\n      try {\n        new JSONEditor(document.createElement('div'), { schema });\n        this.errorMessage = '';\n        return true;\n      } catch(e) {\n        this.errorMessage = e.toString();\n        return false;\n      }\n    },\n    comfirmObject() {\n      try {\n        this.primeData = JSON5.parse(this.dataString);\n      } catch(e) {\n        this.$message.error(e.toString());\n        return;\n      }\n\n      if (!this.dataValidate(this.primeData)) {\n        this.$message.error(this.errorMessage);\n        return;\n      }\n\n      this.$emit('update:data', this.primeData);\n      this.$message.success('配置数据修改已确认.');\n    },\n    resetObject() {\n      this.primeData = this.dataRestorSpread(this.data);\n      this.dataString = this.getDataString(this.primeData);\n      this.setMonacoEditorValue(this.dataString);\n      this.setJsonEditorValue(this.primeData);\n      // TODO reset monaco editor size\n    },\n    reCreateJsonEditor() {\n      if(!this.JsonEditor) return;\n      this.JsonEditor.off('change', this.jsonEditorChangeHandler);\n      this.JsonEditor.destroy();\n      this.JsonEditor = null;\n      this.JsonEditor = this.initJsonEditor(this.primeDataSchema, this.$refs.jsonEditor);\n      this.setJsonEditorValue(this.primeData);\n      this.JsonEditor && this.JsonEditor.on('change', this.jsonEditorChangeHandler);\n    },\n    dataRestorSpread(source) {\n      if (source instanceof Array) return [ ...source ];\n      if (source instanceof Object) return { ...source };\n      return source;\n    },\n    showBoth() {\n      // force code div relayout, otherwise the CSS flex layout fail, I don't know why...\n      this.$refs.monacoEditor.style.width = '0px';\n      this.isShowCode = true;\n      this.isShowForm = true;\n      setTimeout(() => {\n        this.MonacoEditor.layout();\n      }, 200);\n    },\n    showCode() {\n      this.isShowForm = false;\n      this.isShowCode = true;\n      setTimeout(() => {\n        this.MonacoEditor.layout();\n      }, 200);\n    },\n    showForm() {\n      this.isShowCode = false;\n      this.isShowForm = true;\n      setTimeout(() => {\n        this.MonacoEditor.layout();\n      }, 200);\n    },\n    onWheel(event, target) {\n      event.stopPropagation();\n      if ((event.wheelDeltaY > 0 && target.scrollTop <= 0)\n        || (event.wheelDeltaY < 0 && (target.clientHeight + target.scrollTop >= target.scrollHeight))) {\n        event.preventDefault();\n      }\n    },\n    onJsonEditorClick(event) {\n      if (!event.srcElement.className.split(' ').includes('custom-button')) {\n        return;\n      }\n\n      const inputFormat = event.srcElement.getAttribute('data-format');\n      const inputPath = event.srcElement.getAttribute('data-path');\n\n      // 清空当前编辑字段路径\n      this.currentEditorPath = '';\n      switch (inputFormat) {\n        case 'custom-image':\n          console.log(inputFormat, inputPath);\n          this.currentEditorPath = inputPath;\n          this.showUploadImgDialog = true;\n          this.currentUploadImgUrl = this.getJsonEditorValueByPath(inputPath);\n          break;\n        case 'custom-url':\n          console.log(inputFormat, inputPath);\n          this.currentEditorPath = inputPath;\n          this.currentUploadSrcURL = this.getJsonEditorValueByPath(inputPath);\n          this.showUploadSrcDialog = true;\n          break;\n        default:\n          break;\n      };\n    },\n    getUploadImg(img) {\n      this.setJsonEditorValueByPath(this.currentEditorPath, img.url);\n    },\n    getUploadSrcURL(url) {\n      this.setJsonEditorValueByPath(this.currentEditorPath, url);\n    },\n  },\n  watch: {\n    dataSchema() {\n      this.primeDataSchema = { ...this.dataSchema };\n      this.reCreateJsonEditor();\n    },\n    data() {\n      this.primeData = this.dataRestorSpread(this.data);\n    },\n    dataString(value) {\n      this.errorMessage = '';\n      try {\n        this.primeData = JSON5.parse(value);\n      } catch(e) {\n        this.errorMessage = e.toString();\n      }\n    },\n    primeData(value, oldValue) {\n      if (JSON.stringify(value) === JSON.stringify(oldValue)) {\n        this.dataValidate(value);\n        return value;\n      }\n      this.dataString = this.getDataString(value);\n      this.setJsonEditorValue(value);\n      this.setMonacoEditorValue(this.dataString);\n      this.editorHeight = this.$refs.jsonEditor.clientHeight;\n    },\n    editorHeight(value, old) {\n      if (old !== 0) {\n        this.MonacoEditor.layout();\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n/* 局部化, 避免全局污染 */\n.editor /deep/ .editor__json {\n  @import '~bootstrap/less/bootstrap.less';\n\n  /* 用 less 做局部化要做一点修复, 原因不明 */\n  .row {\n    margin: 0;\n  }\n}\n\n.editor {\n  &__button-group {\n    display: flex;\n    justify-content: space-between;\n    margin: 15px 0 10px;\n  }\n  &__button-group--right {\n    justify-content: flex-end;\n  }\n}\n\n.editor {\n  display: flex;\n  min-height: 400px;\n  box-sizing: border-box;\n\n  &__monaco {\n    flex-basis: 40%;\n    flex-grow: 1;\n    box-sizing: border-box;\n    border: 1px solid red;\n  }\n  &__json {\n    overflow: auto;\n    max-height: 700px;\n    flex-basis: 60%;\n    flex-grow: 1;\n    padding: 10px;\n    box-sizing: border-box;\n    border: 1px solid #0000FF50;\n  }\n}\n\n.element-hidden {\n  display: none;\n}\n\n.error-line {\n  font-size: 14px;\n  color: red;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/json-editor/index.vue","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App',\n};\n</script>\n\n<style>\nhtml, body {\n  height: 100%;\n  margin: 0;\n}\n\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n  color: #2c3e50;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","// 后台接口集合\nconst APIS = {\n  // Bypassing \"Mixed Content\" Error in Github Pages\n  ROOT: `http://172.106.33.34/pipeline-node`,\n  PIPLINE: `https://cors-anywhere.herokuapp.com/http://172.106.33.34/pipeline-node/pipeline`,\n  // ROOT: 'http://localhost:7001',\n  // PIPLINE: 'http://localhost:7001/pipeline',\n};\n\nexport {\n  APIS,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/util/constants.js","import Vue from 'vue';\nimport { Loading } from 'element-ui';\nimport stringify from 'qs/lib/stringify';\n\nexport default (api, options = {}) => {\n  let url = api;\n  // 跨域\n  // options.credentials = 'include';\n  // 处理hearder\n  options.headers = options.headers || {};\n  if (!options.headers['Content-Type']) {\n    options.headers['Content-Type'] = 'application/json';\n  }\n\n  // 处理post\n  if (options.method && /^POST|PUT|DELETE$/i.test(options.method)) {\n    const params = options.body;\n    if (options.headers['Content-Type'] === 'application/json') {\n      options.body = JSON.stringify(params);\n    } else if (options.headers['Content-Type'] === 'multipart/form-data') {\n      delete options.headers['Content-Type'];\n    } else {\n      // 解决多层嵌套数据的问题\n      options.body = stringify(params, { arrayFormat: 'brackets', skipNulls: true });\n    }\n  }\n\n  // 处理get，默认get\n  if ((options.method && /^GET$/i.test(options.method)) || options.method === undefined) {\n    const params = options.params || options.body || {};\n    url += `?${stringify(params, { arrayFormat: 'brackets', skipNulls: true })}`;\n    // 解决某些浏览器下请求报错的问题 body not allowed for get or head requests\n    options.body = undefined;\n  }\n\n  let loadingInstance = Loading.service({\n    fullscreen: false,\n    text: '网络请求中, 请稍后',\n    background: 'rgba(0, 0, 0, 0.2)',\n  });\n  return fetch(url, options)\n    .then((response) => {\n      Vue.nextTick(() => {\n        loadingInstance.close();\n      });\n      if (response.status === 200) {\n        return response.json()\n          .then((json) => {\n            if (json.ret === '0') {\n              return Promise.resolve(json.data);\n            }\n            return Promise.reject({\n              status: response.status,\n              ...json,\n            });\n          });\n      }\n      return Promise.reject({\n        status: response.status,\n      });\n    }, (error) => {\n      Vue.nextTick(() => {\n        loadingInstance.close();\n      });\n      return Promise.reject({\n        status: response.status,\n      });\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/util/fetch.js","/*! JSON Editor v0.7.28 - JSON Schema -> HTML Editor\n * By Jeremy Dorn - https://github.com/jdorn/json-editor/\n * Released under the MIT license\n *\n * Date: 2016-08-07\n */\n\n/**\n * See README.md for requirements and usage info\n */\n\nexport default (function() { // jshint ignore:line\n\n  /*jshint loopfunc: true */\n  /* Simple JavaScript Inheritance\n   * By John Resig http://ejohn.org/\n   * MIT Licensed.\n   */\n  // Inspired by base2 and Prototype\n  var Class;\n  (function(){\n    var initializing = false, fnTest = /xyz/.test(function(){window.postMessage(\"xyz\");}) ? /\\b_super\\b/ : /.*/;\n   \n    // The base Class implementation (does nothing)\n    Class = function(){};\n   \n    // Create a new Class that inherits from this class\n    Class.extend = function extend(prop) {\n      var _super = this.prototype;\n     \n      // Instantiate a base class (but only create the instance,\n      // don't run the init constructor)\n      initializing = true;\n      var prototype = new this();\n      initializing = false;\n     \n      // Copy the properties over onto the new prototype\n      for (var name in prop) {\n        // Check if we're overwriting an existing function\n        prototype[name] = typeof prop[name] == \"function\" &&\n          typeof _super[name] == \"function\" && fnTest.test(prop[name]) ?\n          (function(name, fn){\n            return function() {\n              var tmp = this._super;\n             \n              // Add a new ._super() method that is the same method\n              // but on the super-class\n              this._super = _super[name];\n             \n              // The method only need to be bound temporarily, so we\n              // remove it when we're done executing\n              var ret = fn.apply(this, arguments);        \n              this._super = tmp;\n             \n              return ret;\n            };\n          })(name, prop[name]) :\n          prop[name];\n      }\n     \n      // The dummy class constructor\n      function Class() {\n        // All construction is actually done in the init method\n        if ( !initializing && this.init )\n          this.init.apply(this, arguments);\n      }\n     \n      // Populate our constructed prototype object\n      Class.prototype = prototype;\n     \n      // Enforce the constructor to be what we expect\n      Class.prototype.constructor = Class;\n   \n      // And make this class extendable\n      Class.extend = extend;\n     \n      return Class;\n    };\n    \n    return Class;\n  })();\n  \n  // CustomEvent constructor polyfill\n  // From MDN\n  (function () {\n    function CustomEvent ( event, params ) {\n      params = params || { bubbles: false, cancelable: false, detail: undefined };\n      var evt = document.createEvent( 'CustomEvent' );\n      evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n      return evt;\n    }\n  \n    CustomEvent.prototype = window.Event.prototype;\n  \n    window.CustomEvent = CustomEvent;\n  })();\n  \n  // requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel\n  // MIT license\n  (function() {\n      var lastTime = 0;\n      var vendors = ['ms', 'moz', 'webkit', 'o'];\n      for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n          window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n          window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || \n                                        window[vendors[x]+'CancelRequestAnimationFrame'];\n      }\n   \n      if (!window.requestAnimationFrame)\n          window.requestAnimationFrame = function(callback, element) {\n              var currTime = new Date().getTime();\n              var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n              var id = window.setTimeout(function() { callback(currTime + timeToCall); }, \n                timeToCall);\n              lastTime = currTime + timeToCall;\n              return id;\n          };\n   \n      if (!window.cancelAnimationFrame)\n          window.cancelAnimationFrame = function(id) {\n              clearTimeout(id);\n          };\n  }());\n  \n  // Array.isArray polyfill\n  // From MDN\n  (function() {\n    if(!Array.isArray) {\n      Array.isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n      };\n    }\n  }());\n  /**\n   * Taken from jQuery 2.1.3\n   *\n   * @param obj\n   * @returns {boolean}\n   */\n  var $isplainobject = function( obj ) {\n    // Not plain objects:\n    // - Any object or value whose internal [[Class]] property is not \"[object Object]\"\n    // - DOM nodes\n    // - window\n    if (typeof obj !== \"object\" || obj.nodeType || (obj !== null && obj === obj.window)) {\n      return false;\n    }\n  \n    if (obj.constructor && !Object.prototype.hasOwnProperty.call(obj.constructor.prototype, \"isPrototypeOf\")) {\n      return false;\n    }\n  \n    // If the function hasn't returned already, we're confident that\n    // |obj| is a plain object, created by {} or constructed with new Object\n    return true;\n  };\n  \n  var $extend = function(destination) {\n    var source, i,property;\n    for(i=1; i<arguments.length; i++) {\n      source = arguments[i];\n      for (property in source) {\n        if(!source.hasOwnProperty(property)) continue;\n        if(source[property] && $isplainobject(source[property])) {\n          if(!destination.hasOwnProperty(property)) destination[property] = {};\n          $extend(destination[property], source[property]);\n        }\n        else {\n          destination[property] = source[property];\n        }\n      }\n    }\n    return destination;\n  };\n  \n  var $each = function(obj,callback) {\n    if(!obj || typeof obj !== \"object\") return;\n    var i;\n    if(Array.isArray(obj) || (typeof obj.length === 'number' && obj.length > 0 && (obj.length - 1) in obj)) {\n      for(i=0; i<obj.length; i++) {\n        if(callback(i,obj[i])===false) return;\n      }\n    }\n    else {\n      if (Object.keys) {\n        var keys = Object.keys(obj);\n        for(i=0; i<keys.length; i++) {\n          if(callback(keys[i],obj[keys[i]])===false) return;\n        }\n      }\n      else {\n        for(i in obj) {\n          if(!obj.hasOwnProperty(i)) continue;\n          if(callback(i,obj[i])===false) return;\n        }\n      }\n    }\n  };\n  \n  var $trigger = function(el,event) {\n    var e = document.createEvent('HTMLEvents');\n    e.initEvent(event, true, true);\n    el.dispatchEvent(e);\n  };\n  var $triggerc = function(el,event) {\n    var e = new CustomEvent(event,{\n      bubbles: true,\n      cancelable: true\n    });\n  \n    el.dispatchEvent(e);\n  };\n  \n  var JSONEditor = function(element,options) {\n    if (!(element instanceof Element)) {\n      throw new Error('element should be an instance of Element');\n    }\n    options = $extend({},JSONEditor.defaults.options,options||{});\n    this.element = element;\n    this.options = options;\n    this.init();\n  };\n  JSONEditor.prototype = {\n    // necessary since we remove the ctor property by doing a literal assignment. Without this\n    // the $isplainobject function will think that this is a plain object.\n    constructor: JSONEditor,\n    init: function() {\n      var self = this;\n      \n      this.ready = false;\n  \n      var theme_class = JSONEditor.defaults.themes[this.options.theme || JSONEditor.defaults.theme];\n      if(!theme_class) throw \"Unknown theme \" + (this.options.theme || JSONEditor.defaults.theme);\n      \n      this.schema = this.options.schema;\n      this.theme = new theme_class();\n      this.template = this.options.template;\n      this.refs = this.options.refs || {};\n      this.uuid = 0;\n      this.__data = {};\n      \n      var icon_class = JSONEditor.defaults.iconlibs[this.options.iconlib || JSONEditor.defaults.iconlib];\n      if(icon_class) this.iconlib = new icon_class();\n  \n      this.root_container = this.theme.getContainer();\n      this.element.appendChild(this.root_container);\n      \n      this.translate = this.options.translate || JSONEditor.defaults.translate;\n  \n      // Fetch all external refs via ajax\n      this._loadExternalRefs(this.schema, function() {\n        self._getDefinitions(self.schema);\n        \n        // Validator options\n        var validator_options = {};\n        if(self.options.custom_validators) {\n          validator_options.custom_validators = self.options.custom_validators;\n        }\n        self.validator = new JSONEditor.Validator(self,null,validator_options);\n        \n        // Create the root editor\n        var editor_class = self.getEditorClass(self.schema);\n        self.root = self.createEditor(editor_class, {\n          jsoneditor: self,\n          schema: self.schema,\n          required: true,\n          container: self.root_container\n        });\n        \n        self.root.preBuild();\n        self.root.build();\n        self.root.postBuild();\n  \n        // Starting data\n        if(self.options.startval) self.root.setValue(self.options.startval);\n  \n        self.validation_results = self.validator.validate(self.root.getValue());\n        self.root.showValidationErrors(self.validation_results);\n        self.ready = true;\n  \n        // Fire ready event asynchronously\n        window.requestAnimationFrame(function() {\n          if(!self.ready) return;\n          self.validation_results = self.validator.validate(self.root.getValue());\n          self.root.showValidationErrors(self.validation_results);\n          self.trigger('ready');\n          self.trigger('change');\n        });\n      });\n    },\n    getValue: function() {\n      if(!this.ready) throw \"JSON Editor not ready yet.  Listen for 'ready' event before getting the value\";\n  \n      return this.root.getValue();\n    },\n    setValue: function(value) {\n      if(!this.ready) throw \"JSON Editor not ready yet.  Listen for 'ready' event before setting the value\";\n  \n      this.root.setValue(value);\n      return this;\n    },\n    validate: function(value) {\n      if(!this.ready) throw \"JSON Editor not ready yet.  Listen for 'ready' event before validating\";\n      \n      // Custom value\n      if(arguments.length === 1) {\n        return this.validator.validate(value);\n      }\n      // Current value (use cached result)\n      else {\n        return this.validation_results;\n      }\n    },\n    destroy: function() {\n      if(this.destroyed) return;\n      if(!this.ready) return;\n      \n      this.schema = null;\n      this.options = null;\n      this.root.destroy();\n      this.root = null;\n      this.root_container = null;\n      this.validator = null;\n      this.validation_results = null;\n      this.theme = null;\n      this.iconlib = null;\n      this.template = null;\n      this.__data = null;\n      this.ready = false;\n      this.element.innerHTML = '';\n      \n      this.destroyed = true;\n    },\n    on: function(event, callback) {\n      this.callbacks = this.callbacks || {};\n      this.callbacks[event] = this.callbacks[event] || [];\n      this.callbacks[event].push(callback);\n      \n      return this;\n    },\n    off: function(event, callback) {\n      // Specific callback\n      if(event && callback) {\n        this.callbacks = this.callbacks || {};\n        this.callbacks[event] = this.callbacks[event] || [];\n        var newcallbacks = [];\n        for(var i=0; i<this.callbacks[event].length; i++) {\n          if(this.callbacks[event][i]===callback) continue;\n          newcallbacks.push(this.callbacks[event][i]);\n        }\n        this.callbacks[event] = newcallbacks;\n      }\n      // All callbacks for a specific event\n      else if(event) {\n        this.callbacks = this.callbacks || {};\n        this.callbacks[event] = [];\n      }\n      // All callbacks for all events\n      else {\n        this.callbacks = {};\n      }\n      \n      return this;\n    },\n    trigger: function(event) {\n      if(this.callbacks && this.callbacks[event] && this.callbacks[event].length) {\n        for(var i=0; i<this.callbacks[event].length; i++) {\n          this.callbacks[event][i]();\n        }\n      }\n      \n      return this;\n    },\n    setOption: function(option, value) {\n      if(option === \"show_errors\") {\n        this.options.show_errors = value;\n        this.onChange();\n      }\n      // Only the `show_errors` option is supported for now\n      else {\n        throw \"Option \"+option+\" must be set during instantiation and cannot be changed later\";\n      }\n      \n      return this;\n    },\n    getEditorClass: function(schema) {\n      var classname;\n  \n      schema = this.expandSchema(schema);\n  \n      $each(JSONEditor.defaults.resolvers,function(i,resolver) {\n        var tmp = resolver(schema);\n        if(tmp) {\n          if(JSONEditor.defaults.editors[tmp]) {\n            classname = tmp;\n            return false;\n          }\n        }\n      });\n  \n      if(!classname) throw \"Unknown editor for schema \"+JSON.stringify(schema);\n      if(!JSONEditor.defaults.editors[classname]) throw \"Unknown editor \"+classname;\n  \n      return JSONEditor.defaults.editors[classname];\n    },\n    createEditor: function(editor_class, options) {\n      options = $extend({},editor_class.options||{},options);\n      return new editor_class(options);\n    },\n    onChange: function() {\n      if(!this.ready) return;\n      \n      if(this.firing_change) return;\n      this.firing_change = true;\n      \n      var self = this;\n      \n      window.requestAnimationFrame(function() {\n        self.firing_change = false;\n        if(!self.ready) return;\n  \n        // Validate and cache results\n        self.validation_results = self.validator.validate(self.root.getValue());\n        \n        if(self.options.show_errors !== \"never\") {\n          self.root.showValidationErrors(self.validation_results);\n        }\n        else {\n          self.root.showValidationErrors([]);\n        }\n        \n        // Fire change event\n        self.trigger('change');\n      });\n      \n      return this;\n    },\n    compileTemplate: function(template, name) {\n      name = name || JSONEditor.defaults.template;\n  \n      var engine;\n  \n      // Specifying a preset engine\n      if(typeof name === 'string') {\n        if(!JSONEditor.defaults.templates[name]) throw \"Unknown template engine \"+name;\n        engine = JSONEditor.defaults.templates[name]();\n  \n        if(!engine) throw \"Template engine \"+name+\" missing required library.\";\n      }\n      // Specifying a custom engine\n      else {\n        engine = name;\n      }\n  \n      if(!engine) throw \"No template engine set\";\n      if(!engine.compile) throw \"Invalid template engine set\";\n  \n      return engine.compile(template);\n    },\n    _data: function(el,key,value) {\n      // Setting data\n      if(arguments.length === 3) {\n        var uuid;\n        if(el.hasAttribute('data-jsoneditor-'+key)) {\n          uuid = el.getAttribute('data-jsoneditor-'+key);\n        }\n        else {\n          uuid = this.uuid++;\n          el.setAttribute('data-jsoneditor-'+key,uuid);\n        }\n  \n        this.__data[uuid] = value;\n      }\n      // Getting data\n      else {\n        // No data stored\n        if(!el.hasAttribute('data-jsoneditor-'+key)) return null;\n        \n        return this.__data[el.getAttribute('data-jsoneditor-'+key)];\n      }\n    },\n    registerEditor: function(editor) {\n      this.editors = this.editors || {};\n      this.editors[editor.path] = editor;\n      return this;\n    },\n    unregisterEditor: function(editor) {\n      this.editors = this.editors || {};\n      this.editors[editor.path] = null;\n      return this;\n    },\n    getEditor: function(path) {\n      if(!this.editors) return;\n      return this.editors[path];\n    },\n    watch: function(path,callback) {\n      this.watchlist = this.watchlist || {};\n      this.watchlist[path] = this.watchlist[path] || [];\n      this.watchlist[path].push(callback);\n      \n      return this;\n    },\n    unwatch: function(path,callback) {\n      if(!this.watchlist || !this.watchlist[path]) return this;\n      // If removing all callbacks for a path\n      if(!callback) {\n        this.watchlist[path] = null;\n        return this;\n      }\n      \n      var newlist = [];\n      for(var i=0; i<this.watchlist[path].length; i++) {\n        if(this.watchlist[path][i] === callback) continue;\n        else newlist.push(this.watchlist[path][i]);\n      }\n      this.watchlist[path] = newlist.length? newlist : null;\n      return this;\n    },\n    notifyWatchers: function(path) {\n      if(!this.watchlist || !this.watchlist[path]) return this;\n      for(var i=0; i<this.watchlist[path].length; i++) {\n        this.watchlist[path][i]();\n      }\n    },\n    isEnabled: function() {\n      return !this.root || this.root.isEnabled();\n    },\n    enable: function() {\n      this.root.enable();\n    },\n    disable: function() {\n      this.root.disable();\n    },\n    _getDefinitions: function(schema,path) {\n      path = path || '#/definitions/';\n      if(schema.definitions) {\n        for(var i in schema.definitions) {\n          if(!schema.definitions.hasOwnProperty(i)) continue;\n          this.refs[path+i] = schema.definitions[i];\n          if(schema.definitions[i].definitions) {\n            this._getDefinitions(schema.definitions[i],path+i+'/definitions/');\n          }\n        }\n      }\n    },\n    _getExternalRefs: function(schema) {\n      var refs = {};\n      var merge_refs = function(newrefs) {\n        for(var i in newrefs) {\n          if(newrefs.hasOwnProperty(i)) {\n            refs[i] = true;\n          }\n        }\n      };\n      \n      if(schema.$ref && typeof schema.$ref !== \"object\" && schema.$ref.substr(0,1) !== \"#\" && !this.refs[schema.$ref]) {\n        refs[schema.$ref] = true;\n      }\n      \n      for(var i in schema) {\n        if(!schema.hasOwnProperty(i)) continue;\n        if(schema[i] && typeof schema[i] === \"object\" && Array.isArray(schema[i])) {\n          for(var j=0; j<schema[i].length; j++) {\n            if(typeof schema[i][j]===\"object\") {\n              merge_refs(this._getExternalRefs(schema[i][j]));\n            }\n          }\n        }\n        else if(schema[i] && typeof schema[i] === \"object\") {\n          merge_refs(this._getExternalRefs(schema[i]));\n        }\n      }\n      \n      return refs;\n    },\n    _loadExternalRefs: function(schema, callback) {\n      var self = this;\n      var refs = this._getExternalRefs(schema);\n      \n      var done = 0, waiting = 0, callback_fired = false;\n      \n      $each(refs,function(url) {\n        if(self.refs[url]) return;\n        if(!self.options.ajax) throw \"Must set ajax option to true to load external ref \"+url;\n        self.refs[url] = 'loading';\n        waiting++;\n  \n        var r = new XMLHttpRequest(); \n        r.open(\"GET\", url, true);\n        r.onreadystatechange = function () {\n          if (r.readyState != 4) return; \n          // Request succeeded\n          if(r.status === 200) {\n            var response;\n            try {\n              response = JSON.parse(r.responseText);\n            }\n            catch(e) {\n              window.console.log(e);\n              throw \"Failed to parse external ref \"+url;\n            }\n            if(!response || typeof response !== \"object\") throw \"External ref does not contain a valid schema - \"+url;\n            \n            self.refs[url] = response;\n            self._loadExternalRefs(response,function() {\n              done++;\n              if(done >= waiting && !callback_fired) {\n                callback_fired = true;\n                callback();\n              }\n            });\n          }\n          // Request failed\n          else {\n            window.console.log(r);\n            throw \"Failed to fetch ref via ajax- \"+url;\n          }\n        };\n        r.send();\n      });\n      \n      if(!waiting) {\n        callback();\n      }\n    },\n    expandRefs: function(schema) {\n      schema = $extend({},schema);\n      \n      while (schema.$ref) {\n        var ref = schema.$ref;\n        delete schema.$ref;\n        \n        if(!this.refs[ref]) ref = decodeURIComponent(ref);\n        \n        schema = this.extendSchemas(schema,this.refs[ref]);\n      }\n      return schema;\n    },\n    expandSchema: function(schema) {\n      var self = this;\n      var extended = $extend({},schema);\n      var i;\n  \n      // Version 3 `type`\n      if(typeof schema.type === 'object') {\n        // Array of types\n        if(Array.isArray(schema.type)) {\n          $each(schema.type, function(key,value) {\n            // Schema\n            if(typeof value === 'object') {\n              schema.type[key] = self.expandSchema(value);\n            }\n          });\n        }\n        // Schema\n        else {\n          schema.type = self.expandSchema(schema.type);\n        }\n      }\n      // Version 3 `disallow`\n      if(typeof schema.disallow === 'object') {\n        // Array of types\n        if(Array.isArray(schema.disallow)) {\n          $each(schema.disallow, function(key,value) {\n            // Schema\n            if(typeof value === 'object') {\n              schema.disallow[key] = self.expandSchema(value);\n            }\n          });\n        }\n        // Schema\n        else {\n          schema.disallow = self.expandSchema(schema.disallow);\n        }\n      }\n      // Version 4 `anyOf`\n      if(schema.anyOf) {\n        $each(schema.anyOf, function(key,value) {\n          schema.anyOf[key] = self.expandSchema(value);\n        });\n      }\n      // Version 4 `dependencies` (schema dependencies)\n      if(schema.dependencies) {\n        $each(schema.dependencies,function(key,value) {\n          if(typeof value === \"object\" && !(Array.isArray(value))) {\n            schema.dependencies[key] = self.expandSchema(value);\n          }\n        });\n      }\n      // Version 4 `not`\n      if(schema.not) {\n        schema.not = this.expandSchema(schema.not);\n      }\n      \n      // allOf schemas should be merged into the parent\n      if(schema.allOf) {\n        for(i=0; i<schema.allOf.length; i++) {\n          extended = this.extendSchemas(extended,this.expandSchema(schema.allOf[i]));\n        }\n        delete extended.allOf;\n      }\n      // extends schemas should be merged into parent\n      if(schema[\"extends\"]) {\n        // If extends is a schema\n        if(!(Array.isArray(schema[\"extends\"]))) {\n          extended = this.extendSchemas(extended,this.expandSchema(schema[\"extends\"]));\n        }\n        // If extends is an array of schemas\n        else {\n          for(i=0; i<schema[\"extends\"].length; i++) {\n            extended = this.extendSchemas(extended,this.expandSchema(schema[\"extends\"][i]));\n          }\n        }\n        delete extended[\"extends\"];\n      }\n      // parent should be merged into oneOf schemas\n      if(schema.oneOf) {\n        var tmp = $extend({},extended);\n        delete tmp.oneOf;\n        for(i=0; i<schema.oneOf.length; i++) {\n          extended.oneOf[i] = this.extendSchemas(this.expandSchema(schema.oneOf[i]),tmp);\n        }\n      }\n      \n      return this.expandRefs(extended);\n    },\n    extendSchemas: function(obj1, obj2) {\n      obj1 = $extend({},obj1);\n      obj2 = $extend({},obj2);\n  \n      var self = this;\n      var extended = {};\n      $each(obj1, function(prop,val) {\n        // If this key is also defined in obj2, merge them\n        if(typeof obj2[prop] !== \"undefined\") {\n          // Required and defaultProperties arrays should be unioned together\n          if((prop === 'required'||prop === 'defaultProperties') && typeof val === \"object\" && Array.isArray(val)) {\n            // Union arrays and unique\n            extended[prop] = val.concat(obj2[prop]).reduce(function(p, c) {\n              if (p.indexOf(c) < 0) p.push(c);\n              return p;\n            }, []);\n          }\n          // Type should be intersected and is either an array or string\n          else if(prop === 'type' && (typeof val === \"string\" || Array.isArray(val))) {\n            // Make sure we're dealing with arrays\n            if(typeof val === \"string\") val = [val];\n            if(typeof obj2.type === \"string\") obj2.type = [obj2.type];\n  \n            // If type is only defined in the first schema, keep it\n            if(!obj2.type || !obj2.type.length) {\n              extended.type = val;\n            }\n            // If type is defined in both schemas, do an intersect\n            else {\n              extended.type = val.filter(function(n) {\n                return obj2.type.indexOf(n) !== -1;\n              });\n            }\n  \n            // If there's only 1 type and it's a primitive, use a string instead of array\n            if(extended.type.length === 1 && typeof extended.type[0] === \"string\") {\n              extended.type = extended.type[0];\n            }\n            // Remove the type property if it's empty\n            else if(extended.type.length === 0) {\n              delete extended.type;\n            }\n          }\n          // All other arrays should be intersected (enum, etc.)\n          else if(typeof val === \"object\" && Array.isArray(val)){\n            extended[prop] = val.filter(function(n) {\n              return obj2[prop].indexOf(n) !== -1;\n            });\n          }\n          // Objects should be recursively merged\n          else if(typeof val === \"object\" && val !== null) {\n            extended[prop] = self.extendSchemas(val,obj2[prop]);\n          }\n          // Otherwise, use the first value\n          else {\n            extended[prop] = val;\n          }\n        }\n        // Otherwise, just use the one in obj1\n        else {\n          extended[prop] = val;\n        }\n      });\n      // Properties in obj2 that aren't in obj1\n      $each(obj2, function(prop,val) {\n        if(typeof obj1[prop] === \"undefined\") {\n          extended[prop] = val;\n        }\n      });\n  \n      return extended;\n    }\n  };\n  \n  JSONEditor.defaults = {\n    themes: {},\n    templates: {},\n    iconlibs: {},\n    editors: {},\n    languages: {},\n    resolvers: [],\n    custom_validators: []\n  };\n  \n  JSONEditor.Validator = Class.extend({\n    init: function(jsoneditor,schema,options) {\n      this.jsoneditor = jsoneditor;\n      this.schema = schema || this.jsoneditor.schema;\n      this.options = options || {};\n      this.translate = this.jsoneditor.translate || JSONEditor.defaults.translate;\n    },\n    validate: function(value) {\n      return this._validateSchema(this.schema, value);\n    },\n    _validateSchema: function(schema,value,path) {\n      var self = this;\n      var errors = [];\n      var valid, i, j;\n      var stringified = JSON.stringify(value);\n  \n      path = path || 'root';\n  \n      // Work on a copy of the schema\n      schema = $extend({},this.jsoneditor.expandRefs(schema));\n  \n      /*\n       * Type Agnostic Validation\n       */\n  \n      // Version 3 `required`\n      if(schema.required && schema.required === true) {\n        if(typeof value === \"undefined\") {\n          errors.push({\n            path: path,\n            property: 'required',\n            message: this.translate(\"error_notset\")\n          });\n  \n          // Can't do any more validation at this point\n          return errors;\n        }\n      }\n      // Value not defined\n      else if(typeof value === \"undefined\") {\n        // If required_by_default is set, all fields are required\n        if(this.jsoneditor.options.required_by_default) {\n          errors.push({\n            path: path,\n            property: 'required',\n            message: this.translate(\"error_notset\")\n          });\n        }\n        // Not required, no further validation needed\n        else {\n          return errors;\n        }\n      }\n  \n      // `enum`\n      if(schema[\"enum\"]) {\n        valid = false;\n        for(i=0; i<schema[\"enum\"].length; i++) {\n          if(stringified === JSON.stringify(schema[\"enum\"][i])) valid = true;\n        }\n        if(!valid) {\n          errors.push({\n            path: path,\n            property: 'enum',\n            message: this.translate(\"error_enum\")\n          });\n        }\n      }\n  \n      // `extends` (version 3)\n      if(schema[\"extends\"]) {\n        for(i=0; i<schema[\"extends\"].length; i++) {\n          errors = errors.concat(this._validateSchema(schema[\"extends\"][i],value,path));\n        }\n      }\n  \n      // `allOf`\n      if(schema.allOf) {\n        for(i=0; i<schema.allOf.length; i++) {\n          errors = errors.concat(this._validateSchema(schema.allOf[i],value,path));\n        }\n      }\n  \n      // `anyOf`\n      if(schema.anyOf) {\n        valid = false;\n        for(i=0; i<schema.anyOf.length; i++) {\n          if(!this._validateSchema(schema.anyOf[i],value,path).length) {\n            valid = true;\n            break;\n          }\n        }\n        if(!valid) {\n          errors.push({\n            path: path,\n            property: 'anyOf',\n            message: this.translate('error_anyOf')\n          });\n        }\n      }\n  \n      // `oneOf`\n      if(schema.oneOf) {\n        valid = 0;\n        var oneof_errors = [];\n        for(i=0; i<schema.oneOf.length; i++) {\n          // Set the error paths to be path.oneOf[i].rest.of.path\n          var tmp = this._validateSchema(schema.oneOf[i],value,path);\n          if(!tmp.length) {\n            valid++;\n          }\n  \n          for(j=0; j<tmp.length; j++) {\n            tmp[j].path = path+'.oneOf['+i+']'+tmp[j].path.substr(path.length);\n          }\n          oneof_errors = oneof_errors.concat(tmp);\n  \n        }\n        if(valid !== 1) {\n          errors.push({\n            path: path,\n            property: 'oneOf',\n            message: this.translate('error_oneOf', [valid])\n          });\n          errors = errors.concat(oneof_errors);\n        }\n      }\n  \n      // `not`\n      if(schema.not) {\n        if(!this._validateSchema(schema.not,value,path).length) {\n          errors.push({\n            path: path,\n            property: 'not',\n            message: this.translate('error_not')\n          });\n        }\n      }\n  \n      // `type` (both Version 3 and Version 4 support)\n      if(schema.type) {\n        // Union type\n        if(Array.isArray(schema.type)) {\n          valid = false;\n          for(i=0;i<schema.type.length;i++) {\n            if(this._checkType(schema.type[i], value)) {\n              valid = true;\n              break;\n            }\n          }\n          if(!valid) {\n            errors.push({\n              path: path,\n              property: 'type',\n              message: this.translate('error_type_union')\n            });\n          }\n        }\n        // Simple type\n        else {\n          if(!this._checkType(schema.type, value)) {\n            errors.push({\n              path: path,\n              property: 'type',\n              message: this.translate('error_type', [schema.type])\n            });\n          }\n        }\n      }\n  \n  \n      // `disallow` (version 3)\n      if(schema.disallow) {\n        // Union type\n        if(Array.isArray(schema.disallow)) {\n          valid = true;\n          for(i=0;i<schema.disallow.length;i++) {\n            if(this._checkType(schema.disallow[i], value)) {\n              valid = false;\n              break;\n            }\n          }\n          if(!valid) {\n            errors.push({\n              path: path,\n              property: 'disallow',\n              message: this.translate('error_disallow_union')\n            });\n          }\n        }\n        // Simple type\n        else {\n          if(this._checkType(schema.disallow, value)) {\n            errors.push({\n              path: path,\n              property: 'disallow',\n              message: this.translate('error_disallow', [schema.disallow])\n            });\n          }\n        }\n      }\n  \n      /*\n       * Type Specific Validation\n       */\n  \n      // Number Specific Validation\n      if(typeof value === \"number\") {\n        // `multipleOf` and `divisibleBy`\n        if(schema.multipleOf || schema.divisibleBy) {\n          var divisor = schema.multipleOf || schema.divisibleBy;\n          // Vanilla JS, prone to floating point rounding errors (e.g. 1.14 / .01 == 113.99999)\n          valid = (value/divisor === Math.floor(value/divisor));\n  \n          // Use math.js is available\n          if(window.math) {\n            valid = window.math.mod(window.math.bignumber(value), window.math.bignumber(divisor)).equals(0);\n          }\n          // Use decimal.js is available\n          else if(window.Decimal) {\n            valid = (new window.Decimal(value)).mod(new window.Decimal(divisor)).equals(0);\n          }\n  \n          if(!valid) {\n            errors.push({\n              path: path,\n              property: schema.multipleOf? 'multipleOf' : 'divisibleBy',\n              message: this.translate('error_multipleOf', [divisor])\n            });\n          }\n        }\n  \n        // `maximum`\n        if(schema.hasOwnProperty('maximum')) {\n          // Vanilla JS, prone to floating point rounding errors (e.g. .999999999999999 == 1)\n          valid = schema.exclusiveMaximum? (value < schema.maximum) : (value <= schema.maximum);\n  \n          // Use math.js is available\n          if(window.math) {\n            valid = window.math[schema.exclusiveMaximum?'smaller':'smallerEq'](\n              window.math.bignumber(value),\n              window.math.bignumber(schema.maximum)\n            );\n          }\n          // Use Decimal.js if available\n          else if(window.Decimal) {\n            valid = (new window.Decimal(value))[schema.exclusiveMaximum?'lt':'lte'](new window.Decimal(schema.maximum));\n          }\n  \n          if(!valid) {\n            errors.push({\n              path: path,\n              property: 'maximum',\n              message: this.translate(\n                (schema.exclusiveMaximum?'error_maximum_excl':'error_maximum_incl'),\n                [schema.maximum]\n              )\n            });\n          }\n        }\n  \n        // `minimum`\n        if(schema.hasOwnProperty('minimum')) {\n          // Vanilla JS, prone to floating point rounding errors (e.g. .999999999999999 == 1)\n          valid = schema.exclusiveMinimum? (value > schema.minimum) : (value >= schema.minimum);\n  \n          // Use math.js is available\n          if(window.math) {\n            valid = window.math[schema.exclusiveMinimum?'larger':'largerEq'](\n              window.math.bignumber(value),\n              window.math.bignumber(schema.minimum)\n            );\n          }\n          // Use Decimal.js if available\n          else if(window.Decimal) {\n            valid = (new window.Decimal(value))[schema.exclusiveMinimum?'gt':'gte'](new window.Decimal(schema.minimum));\n          }\n  \n          if(!valid) {\n            errors.push({\n              path: path,\n              property: 'minimum',\n              message: this.translate(\n                (schema.exclusiveMinimum?'error_minimum_excl':'error_minimum_incl'),\n                [schema.minimum]\n              )\n            });\n          }\n        }\n      }\n      // String specific validation\n      else if(typeof value === \"string\") {\n        // `maxLength`\n        if(schema.maxLength) {\n          if((value+\"\").length > schema.maxLength) {\n            errors.push({\n              path: path,\n              property: 'maxLength',\n              message: this.translate('error_maxLength', [schema.maxLength])\n            });\n          }\n        }\n  \n        // `minLength`\n        if(schema.minLength) {\n          if((value+\"\").length < schema.minLength) {\n            errors.push({\n              path: path,\n              property: 'minLength',\n              message: this.translate((schema.minLength===1?'error_notempty':'error_minLength'), [schema.minLength])\n            });\n          }\n        }\n  \n        // `pattern`\n        if(schema.pattern) {\n          if(!(new RegExp(schema.pattern)).test(value)) {\n            errors.push({\n              path: path,\n              property: 'pattern',\n              message: this.translate('error_pattern', [schema.pattern])\n            });\n          }\n        }\n      }\n      // Array specific validation\n      else if(typeof value === \"object\" && value !== null && Array.isArray(value)) {\n        // `items` and `additionalItems`\n        if(schema.items) {\n          // `items` is an array\n          if(Array.isArray(schema.items)) {\n            for(i=0; i<value.length; i++) {\n              // If this item has a specific schema tied to it\n              // Validate against it\n              if(schema.items[i]) {\n                errors = errors.concat(this._validateSchema(schema.items[i],value[i],path+'.'+i));\n              }\n              // If all additional items are allowed\n              else if(schema.additionalItems === true) {\n                break;\n              }\n              // If additional items is a schema\n              // TODO: Incompatibility between version 3 and 4 of the spec\n              else if(schema.additionalItems) {\n                errors = errors.concat(this._validateSchema(schema.additionalItems,value[i],path+'.'+i));\n              }\n              // If no additional items are allowed\n              else if(schema.additionalItems === false) {\n                errors.push({\n                  path: path,\n                  property: 'additionalItems',\n                  message: this.translate('error_additionalItems')\n                });\n                break;\n              }\n              // Default for `additionalItems` is an empty schema\n              else {\n                break;\n              }\n            }\n          }\n          // `items` is a schema\n          else {\n            // Each item in the array must validate against the schema\n            for(i=0; i<value.length; i++) {\n              errors = errors.concat(this._validateSchema(schema.items,value[i],path+'.'+i));\n            }\n          }\n        }\n  \n        // `maxItems`\n        if(schema.maxItems) {\n          if(value.length > schema.maxItems) {\n            errors.push({\n              path: path,\n              property: 'maxItems',\n              message: this.translate('error_maxItems', [schema.maxItems])\n            });\n          }\n        }\n  \n        // `minItems`\n        if(schema.minItems) {\n          if(value.length < schema.minItems) {\n            errors.push({\n              path: path,\n              property: 'minItems',\n              message: this.translate('error_minItems', [schema.minItems])\n            });\n          }\n        }\n  \n        // `uniqueItems`\n        if(schema.uniqueItems) {\n          var seen = {};\n          for(i=0; i<value.length; i++) {\n            valid = JSON.stringify(value[i]);\n            if(seen[valid]) {\n              errors.push({\n                path: path,\n                property: 'uniqueItems',\n                message: this.translate('error_uniqueItems')\n              });\n              break;\n            }\n            seen[valid] = true;\n          }\n        }\n      }\n      // Object specific validation\n      else if(typeof value === \"object\" && value !== null) {\n        // `maxProperties`\n        if(schema.maxProperties) {\n          valid = 0;\n          for(i in value) {\n            if(!value.hasOwnProperty(i)) continue;\n            valid++;\n          }\n          if(valid > schema.maxProperties) {\n            errors.push({\n              path: path,\n              property: 'maxProperties',\n              message: this.translate('error_maxProperties', [schema.maxProperties])\n            });\n          }\n        }\n  \n        // `minProperties`\n        if(schema.minProperties) {\n          valid = 0;\n          for(i in value) {\n            if(!value.hasOwnProperty(i)) continue;\n            valid++;\n          }\n          if(valid < schema.minProperties) {\n            errors.push({\n              path: path,\n              property: 'minProperties',\n              message: this.translate('error_minProperties', [schema.minProperties])\n            });\n          }\n        }\n  \n        // Version 4 `required`\n        if(schema.required && Array.isArray(schema.required)) {\n          for(i=0; i<schema.required.length; i++) {\n            if(typeof value[schema.required[i]] === \"undefined\") {\n              errors.push({\n                path: path,\n                property: 'required',\n                message: this.translate('error_required', [schema.required[i]])\n              });\n            }\n          }\n        }\n  \n        // `properties`\n        var validated_properties = {};\n        if(schema.properties) {\n          for(i in schema.properties) {\n            if(!schema.properties.hasOwnProperty(i)) continue;\n            validated_properties[i] = true;\n            errors = errors.concat(this._validateSchema(schema.properties[i],value[i],path+'.'+i));\n          }\n        }\n  \n        // `patternProperties`\n        if(schema.patternProperties) {\n          for(i in schema.patternProperties) {\n            if(!schema.patternProperties.hasOwnProperty(i)) continue;\n  \n            var regex = new RegExp(i);\n  \n            // Check which properties match\n            for(j in value) {\n              if(!value.hasOwnProperty(j)) continue;\n              if(regex.test(j)) {\n                validated_properties[j] = true;\n                errors = errors.concat(this._validateSchema(schema.patternProperties[i],value[j],path+'.'+j));\n              }\n            }\n          }\n        }\n  \n        // The no_additional_properties option currently doesn't work with extended schemas that use oneOf or anyOf\n        if(typeof schema.additionalProperties === \"undefined\" && this.jsoneditor.options.no_additional_properties && !schema.oneOf && !schema.anyOf) {\n          schema.additionalProperties = false;\n        }\n  \n        // `additionalProperties`\n        if(typeof schema.additionalProperties !== \"undefined\") {\n          for(i in value) {\n            if(!value.hasOwnProperty(i)) continue;\n            if(!validated_properties[i]) {\n              // No extra properties allowed\n              if(!schema.additionalProperties) {\n                errors.push({\n                  path: path,\n                  property: 'additionalProperties',\n                  message: this.translate('error_additional_properties', [i])\n                });\n                break;\n              }\n              // Allowed\n              else if(schema.additionalProperties === true) {\n                break;\n              }\n              // Must match schema\n              // TODO: incompatibility between version 3 and 4 of the spec\n              else {\n                errors = errors.concat(this._validateSchema(schema.additionalProperties,value[i],path+'.'+i));\n              }\n            }\n          }\n        }\n  \n        // `dependencies`\n        if(schema.dependencies) {\n          for(i in schema.dependencies) {\n            if(!schema.dependencies.hasOwnProperty(i)) continue;\n  \n            // Doesn't need to meet the dependency\n            if(typeof value[i] === \"undefined\") continue;\n  \n            // Property dependency\n            if(Array.isArray(schema.dependencies[i])) {\n              for(j=0; j<schema.dependencies[i].length; j++) {\n                if(typeof value[schema.dependencies[i][j]] === \"undefined\") {\n                  errors.push({\n                    path: path,\n                    property: 'dependencies',\n                    message: this.translate('error_dependency', [schema.dependencies[i][j]])\n                  });\n                }\n              }\n            }\n            // Schema dependency\n            else {\n              errors = errors.concat(this._validateSchema(schema.dependencies[i],value,path));\n            }\n          }\n        }\n      }\n  \n      // Custom type validation (global)\n      $each(JSONEditor.defaults.custom_validators,function(i,validator) {\n        errors = errors.concat(validator.call(self,schema,value,path));\n      });\n      // Custom type validation (instance specific)\n      if(this.options.custom_validators) {\n        $each(this.options.custom_validators,function(i,validator) {\n          errors = errors.concat(validator.call(self,schema,value,path));\n        });\n      }\n  \n      return errors;\n    },\n    _checkType: function(type, value) {\n      // Simple types\n      if(typeof type === \"string\") {\n        if(type===\"string\") return typeof value === \"string\";\n        else if(type===\"number\") return typeof value === \"number\";\n        else if(type===\"integer\") return typeof value === \"number\" && value === Math.floor(value);\n        else if(type===\"boolean\") return typeof value === \"boolean\";\n        else if(type===\"array\") return Array.isArray(value);\n        else if(type === \"object\") return value !== null && !(Array.isArray(value)) && typeof value === \"object\";\n        else if(type === \"null\") return value === null;\n        else return true;\n      }\n      // Schema\n      else {\n        return !this._validateSchema(type,value).length;\n      }\n    }\n  });\n  \n  /**\n   * All editors should extend from this class\n   */\n  JSONEditor.AbstractEditor = Class.extend({\n    onChildEditorChange: function(editor) {\n      this.onChange(true);\n    },\n    notify: function() {\n      this.jsoneditor.notifyWatchers(this.path);\n    },\n    change: function() {\n      if(this.parent) this.parent.onChildEditorChange(this);\n      else this.jsoneditor.onChange();\n    },\n    onChange: function(bubble) {\n      this.notify();\n      if(this.watch_listener) this.watch_listener();\n      if(bubble) this.change();\n    },\n    register: function() {\n      this.jsoneditor.registerEditor(this);\n      this.onChange();\n    },\n    unregister: function() {\n      if(!this.jsoneditor) return;\n      this.jsoneditor.unregisterEditor(this);\n    },\n    getNumColumns: function() {\n      return 12;\n    },\n    init: function(options) {\n      this.jsoneditor = options.jsoneditor;\n      \n      this.theme = this.jsoneditor.theme;\n      this.template_engine = this.jsoneditor.template;\n      this.iconlib = this.jsoneditor.iconlib;\n      \n      this.translate = this.jsoneditor.translate || JSONEditor.defaults.translate;\n  \n      this.original_schema = options.schema;\n      this.schema = this.jsoneditor.expandSchema(this.original_schema);\n      \n      this.options = $extend({}, (this.options || {}), (options.schema.options || {}), options);\n      \n      if(!options.path && !this.schema.id) this.schema.id = 'root';\n      this.path = options.path || 'root';\n      this.formname = options.formname || this.path.replace(/\\.([^.]+)/g,'[$1]');\n      if(this.jsoneditor.options.form_name_root) this.formname = this.formname.replace(/^root\\[/,this.jsoneditor.options.form_name_root+'[');\n      this.key = this.path.split('.').pop();\n      this.parent = options.parent;\n      \n      this.link_watchers = [];\n      \n      if(options.container) this.setContainer(options.container);\n    },\n    setContainer: function(container) {\n      this.container = container;\n      if(this.schema.id) this.container.setAttribute('data-schemaid',this.schema.id);\n      if(this.schema.type && typeof this.schema.type === \"string\") this.container.setAttribute('data-schematype',this.schema.type);\n      this.container.setAttribute('data-schemapath',this.path);\n    },\n    \n    preBuild: function() {\n  \n    },\n    build: function() {\n      \n    },\n    postBuild: function() {\n      this.setupWatchListeners();\n      this.addLinks();\n      this.setValue(this.getDefault(), true);\n      this.updateHeaderText();\n      this.register();\n      this.onWatchedFieldChange();\n    },\n    \n    setupWatchListeners: function() {\n      var self = this;\n      \n      // Watched fields\n      this.watched = {};\n      if(this.schema.vars) this.schema.watch = this.schema.vars;\n      this.watched_values = {};\n      this.watch_listener = function() {\n        if(self.refreshWatchedFieldValues()) {\n          self.onWatchedFieldChange();\n        }\n      };\n      \n      this.register();\n      if(this.schema.hasOwnProperty('watch')) {\n        var path,path_parts,first,root,adjusted_path;\n  \n        for(var name in this.schema.watch) {\n          if(!this.schema.watch.hasOwnProperty(name)) continue;\n          path = this.schema.watch[name];\n  \n          if(Array.isArray(path)) {\n            if(path.length<2) continue;\n            path_parts = [path[0]].concat(path[1].split('.'));\n          }\n          else {\n            path_parts = path.split('.');\n            if(!self.theme.closest(self.container,'[data-schemaid=\"'+path_parts[0]+'\"]')) path_parts.unshift('#');\n          }\n          first = path_parts.shift();\n  \n          if(first === '#') first = self.jsoneditor.schema.id || 'root';\n  \n          // Find the root node for this template variable\n          root = self.theme.closest(self.container,'[data-schemaid=\"'+first+'\"]');\n          if(!root) throw \"Could not find ancestor node with id \"+first;\n  \n          // Keep track of the root node and path for use when rendering the template\n          adjusted_path = root.getAttribute('data-schemapath') + '.' + path_parts.join('.');\n          \n          self.jsoneditor.watch(adjusted_path,self.watch_listener);\n          \n          self.watched[name] = adjusted_path;\n        }\n      }\n      \n      // Dynamic header\n      if(this.schema.headerTemplate) {\n        this.header_template = this.jsoneditor.compileTemplate(this.schema.headerTemplate, this.template_engine);\n      }\n    },\n    \n    addLinks: function() {\n      // Add links\n      if(!this.no_link_holder) {\n        this.link_holder = this.theme.getLinksHolder();\n        this.container.appendChild(this.link_holder);\n        if(this.schema.links) {\n          for(var i=0; i<this.schema.links.length; i++) {\n            this.addLink(this.getLink(this.schema.links[i]));\n          }\n        }\n      }\n    },\n    \n    \n    getButton: function(text, icon, title) {\n      var btnClass = 'json-editor-btn-'+icon;\n      if(!this.iconlib) icon = null;\n      else icon = this.iconlib.getIcon(icon);\n      \n      if(!icon && title) {\n        text = title;\n        title = null;\n      }\n      \n      var btn = this.theme.getButton(text, icon, title);\n      btn.className += ' ' + btnClass + ' ';\n      return btn;\n    },\n    setButtonText: function(button, text, icon, title) {\n      if(!this.iconlib) icon = null;\n      else icon = this.iconlib.getIcon(icon);\n      \n      if(!icon && title) {\n        text = title;\n        title = null;\n      }\n      \n      return this.theme.setButtonText(button, text, icon, title);\n    },\n    addLink: function(link) {\n      if(this.link_holder) this.link_holder.appendChild(link);\n    },\n    getLink: function(data) {\n      var holder, link;\n          \n      // Get mime type of the link\n      var mime = data.mediaType || 'application/javascript';\n      var type = mime.split('/')[0];\n      \n      // Template to generate the link href\n      var href = this.jsoneditor.compileTemplate(data.href,this.template_engine);\n  \n      // Template to generate the link's download attribute\n      var download = null;\n      if(data.download) download = data.download;\n  \n      if(download && download !== true) {\n        download = this.jsoneditor.compileTemplate(download, this.template_engine);\n      }\n  \n      // Image links\n      if(type === 'image') {\n        holder = this.theme.getBlockLinkHolder();\n        link = document.createElement('a');\n        link.setAttribute('target','_blank');\n        var image = document.createElement('img');\n        \n        this.theme.createImageLink(holder,link,image);\n      \n        // When a watched field changes, update the url  \n        this.link_watchers.push(function(vars) {\n          var url = href(vars);\n          link.setAttribute('href',url);\n          link.setAttribute('title',data.rel || url);\n          image.setAttribute('src',url);\n        });\n      }\n      // Audio/Video links\n      else if(['audio','video'].indexOf(type) >=0) {\n        holder = this.theme.getBlockLinkHolder();\n        \n        link = this.theme.getBlockLink();\n        link.setAttribute('target','_blank');\n        \n        var media = document.createElement(type);\n        media.setAttribute('controls','controls');\n        \n        this.theme.createMediaLink(holder,link,media);\n        \n        // When a watched field changes, update the url  \n        this.link_watchers.push(function(vars) {\n          var url = href(vars);\n          link.setAttribute('href',url);\n          link.textContent = data.rel || url;\n          media.setAttribute('src',url);\n        });\n      }\n      // Text links\n      else {\n        link = holder = this.theme.getBlockLink();\n        holder.setAttribute('target','_blank');\n        holder.textContent = data.rel;\n  \n        // When a watched field changes, update the url\n        this.link_watchers.push(function(vars) {\n          var url = href(vars);\n          holder.setAttribute('href',url);\n          holder.textContent = data.rel || url;\n        });\n      }\n  \n      if(download && link) {\n        if(download === true) {\n          link.setAttribute('download','');\n        }\n        else {\n          this.link_watchers.push(function(vars) {\n            link.setAttribute('download',download(vars));\n          });\n        }\n      }\n      \n      if(data.class) link.className = link.className + ' ' + data.class;\n  \n      return holder;\n    },\n    refreshWatchedFieldValues: function() {\n      if(!this.watched_values) return;\n      var watched = {};\n      var changed = false;\n      var self = this;\n      \n      if(this.watched) {\n        var val,editor;\n        for(var name in this.watched) {\n          if(!this.watched.hasOwnProperty(name)) continue;\n          editor = self.jsoneditor.getEditor(this.watched[name]);\n          val = editor? editor.getValue() : null;\n          if(self.watched_values[name] !== val) changed = true;\n          watched[name] = val;\n        }\n      }\n      \n      watched.self = this.getValue();\n      if(this.watched_values.self !== watched.self) changed = true;\n      \n      this.watched_values = watched;\n      \n      return changed;\n    },\n    getWatchedFieldValues: function() {\n      return this.watched_values;\n    },\n    updateHeaderText: function() {\n      if(this.header) {\n        // If the header has children, only update the text node's value\n        if(this.header.children.length) {\n          for(var i=0; i<this.header.childNodes.length; i++) {\n            if(this.header.childNodes[i].nodeType===3) {\n              this.header.childNodes[i].nodeValue = this.getHeaderText();\n              break;\n            }\n          }\n        }\n        // Otherwise, just update the entire node\n        else {\n          this.header.textContent = this.getHeaderText();\n        }\n      }\n    },\n    getHeaderText: function(title_only) {\n      if(this.header_text) return this.header_text;\n      else if(title_only) return this.schema.title;\n      else return this.getTitle();\n    },\n    onWatchedFieldChange: function() {\n      var vars;\n      if(this.header_template) {      \n        vars = $extend(this.getWatchedFieldValues(),{\n          key: this.key,\n          i: this.key,\n          i0: (this.key*1),\n          i1: (this.key*1+1),\n          title: this.getTitle()\n        });\n        var header_text = this.header_template(vars);\n        \n        if(header_text !== this.header_text) {\n          this.header_text = header_text;\n          this.updateHeaderText();\n          this.notify();\n          //this.fireChangeHeaderEvent();\n        }\n      }\n      if(this.link_watchers.length) {\n        vars = this.getWatchedFieldValues();\n        for(var i=0; i<this.link_watchers.length; i++) {\n          this.link_watchers[i](vars);\n        }\n      }\n    },\n    setValue: function(value) {\n      this.value = value;\n    },\n    getValue: function() {\n      return this.value;\n    },\n    refreshValue: function() {\n  \n    },\n    getChildEditors: function() {\n      return false;\n    },\n    destroy: function() {\n      var self = this;\n      this.unregister(this);\n      $each(this.watched,function(name,adjusted_path) {\n        self.jsoneditor.unwatch(adjusted_path,self.watch_listener);\n      });\n      this.watched = null;\n      this.watched_values = null;\n      this.watch_listener = null;\n      this.header_text = null;\n      this.header_template = null;\n      this.value = null;\n      if(this.container && this.container.parentNode) this.container.parentNode.removeChild(this.container);\n      this.container = null;\n      this.jsoneditor = null;\n      this.schema = null;\n      this.path = null;\n      this.key = null;\n      this.parent = null;\n    },\n    getDefault: function() {\n      if(this.schema[\"default\"]) return this.schema[\"default\"];\n      if(this.schema[\"enum\"]) return this.schema[\"enum\"][0];\n      \n      var type = this.schema.type || this.schema.oneOf;\n      if(type && Array.isArray(type)) type = type[0];\n      if(type && typeof type === \"object\") type = type.type;\n      if(type && Array.isArray(type)) type = type[0];\n      \n      if(typeof type === \"string\") {\n        if(type === \"number\") return 0.0;\n        if(type === \"boolean\") return false;\n        if(type === \"integer\") return 0;\n        if(type === \"string\") return \"\";\n        if(type === \"object\") return {};\n        if(type === \"array\") return [];\n      }\n      \n      return null;\n    },\n    getTitle: function() {\n      return this.schema.title || this.key;\n    },\n    enable: function() {\n      this.disabled = false;\n    },\n    disable: function() {\n      this.disabled = true;\n    },\n    isEnabled: function() {\n      return !this.disabled;\n    },\n    isRequired: function() {\n      if(typeof this.schema.required === \"boolean\") return this.schema.required;\n      else if(this.parent && this.parent.schema && Array.isArray(this.parent.schema.required)) return this.parent.schema.required.indexOf(this.key) > -1;\n      else if(this.jsoneditor.options.required_by_default) return true;\n      else return false;\n    },  \n    getDisplayText: function(arr) {\n      var disp = [];\n      var used = {};\n      \n      // Determine how many times each attribute name is used.\n      // This helps us pick the most distinct display text for the schemas.\n      $each(arr,function(i,el) {\n        if(el.title) {\n          used[el.title] = used[el.title] || 0;\n          used[el.title]++;\n        }\n        if(el.description) {\n          used[el.description] = used[el.description] || 0;\n          used[el.description]++;\n        }\n        if(el.format) {\n          used[el.format] = used[el.format] || 0;\n          used[el.format]++;\n        }\n        if(el.type) {\n          used[el.type] = used[el.type] || 0;\n          used[el.type]++;\n        }\n      });\n      \n      // Determine display text for each element of the array\n      $each(arr,function(i,el)  {\n        var name;\n        \n        // If it's a simple string\n        if(typeof el === \"string\") name = el;\n        // Object\n        else if(el.title && used[el.title]<=1) name = el.title;\n        else if(el.format && used[el.format]<=1) name = el.format;\n        else if(el.type && used[el.type]<=1) name = el.type;\n        else if(el.description && used[el.description]<=1) name = el.descripton;\n        else if(el.title) name = el.title;\n        else if(el.format) name = el.format;\n        else if(el.type) name = el.type;\n        else if(el.description) name = el.description;\n        else if(JSON.stringify(el).length < 50) name = JSON.stringify(el);\n        else name = \"type\";\n        \n        disp.push(name);\n      });\n      \n      // Replace identical display text with \"text 1\", \"text 2\", etc.\n      var inc = {};\n      $each(disp,function(i,name) {\n        inc[name] = inc[name] || 0;\n        inc[name]++;\n        \n        if(used[name] > 1) disp[i] = name + \" \" + inc[name];\n      });\n      \n      return disp;\n    },\n    getOption: function(key) {\n      try {\n        throw \"getOption is deprecated\";\n      }\n      catch(e) {\n        window.console.error(e);\n      }\n      \n      return this.options[key];\n    },\n    showValidationErrors: function(errors) {\n  \n    }\n  });\n  \n  JSONEditor.defaults.editors[\"null\"] = JSONEditor.AbstractEditor.extend({\n    getValue: function() {\n      return null;\n    },\n    setValue: function() {\n      this.onChange();\n    },\n    getNumColumns: function() {\n      return 2;\n    }\n  });\n  \n  /*\n   * 插入自定义的一些元素\n   * @Author: CntChen\n   * @Date: 2018-04-02\n   */\n  \n  function addCustomDomByFormat() {\n    switch (this.format) {\n      case 'custom-image':\n        this.myDiv = document.createElement('div');\n        this.myDiv.innerHTML = `\n          <div style=\"display: inline-block;\">\n            <button\n              class=\"btn btn-info custom-button\"\n              data-format=\"${this.format}\"\n              data-path=\"${this.path}\"\n              style=\"margin: 5px 0 5px 20px;\"\n              >${this.translate('custom_set_image')}</button>\n          </div>\n        `;\n        this.farmImage = document.createElement('img');\n        this.farmImage.style = `\n          display: inline-block;\n          border: 1px solid #FF000050;\n          max-width: 300px;\n          max-height: 300px;\n        `;\n        this.farmImage.innerHtml = 'farm image';\n        this.myDiv.insertBefore(this.farmImage, this.myDiv.children[0]);\n        this.control.appendChild(this.myDiv);\n        break;\n      case 'custom-url':\n        this.myDiv = document.createElement('div');\n        this.myDiv.innerHTML = `\n          <div style=\"display: inline-block;\">\n            <button\n              class=\"btn btn-info custom-button\"\n              data-format=\"${this.format}\"\n              data-path=\"${this.path}\"\n              style=\"margin: 5px 0 5px 0px;\"\n              >${this.translate('custom_set_url')}</button>\n          </div>\n        `;\n        this.control.appendChild(this.myDiv);\n        break;\n      default:\n        break;\n    }\n  }\n  \n  function refreshCustomDomValue() {\n    switch (this.format) {\n      case 'custom-image':\n        if (this.farmImage) {\n          this.farmImage.src = this.value;\n        }\n        break;\n      default:\n        break;\n    }\n  }\n  \n  JSONEditor.defaults.editors.string = JSONEditor.AbstractEditor.extend({\n    register: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.setAttribute('name',this.formname);\n    },\n    unregister: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.removeAttribute('name');\n    },\n    setValue: function(value,initial,from_template) {\n      var self = this;\n      \n      if(this.template && !from_template) {\n        return;\n      }\n      \n      if(value === null || typeof value === 'undefined') value = \"\";\n      else if(typeof value === \"object\") value = JSON.stringify(value);\n      else if(typeof value !== \"string\") value = \"\"+value;\n      \n      if(value === this.serialized) return;\n  \n      // Sanitize value before setting it\n      var sanitized = this.sanitize(value);\n  \n      if(this.input.value === sanitized) {\n        return;\n      }\n  \n      this.input.value = sanitized;\n      \n      // If using SCEditor, update the WYSIWYG\n      if(this.sceditor_instance) {\n        this.sceditor_instance.val(sanitized);\n      }\n      else if(this.epiceditor) {\n        this.epiceditor.importFile(null,sanitized);\n      }\n      else if(this.ace_editor) {\n        this.ace_editor.setValue(sanitized);\n      }\n      \n      var changed = from_template || this.getValue() !== value;\n      \n      this.refreshValue();\n      \n      if(initial) this.is_dirty = false;\n      else if(this.jsoneditor.options.show_errors === \"change\") this.is_dirty = true;\n      \n      if(this.adjust_height) this.adjust_height(this.input);\n  \n      // Bubble this setValue to parents if the value changed\n      this.onChange(changed);\n    },\n    getNumColumns: function() {\n      var min = Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);\n      var num;\n      \n      if(this.input_type === 'textarea') num = 6;\n      else if(['text','email'].indexOf(this.input_type) >= 0) num = 4;\n      else num = 2;\n      \n      return Math.min(12,Math.max(min,num));\n    },\n    build: function() {\n      var self = this, i;\n      if(!this.options.compact) this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n      if(this.schema.description) this.description = this.theme.getFormInputDescription(this.schema.description);\n  \n      this.format = this.schema.format;\n      if(!this.format && this.schema.media && this.schema.media.type) {\n        this.format = this.schema.media.type.replace(/(^(application|text)\\/(x-)?(script\\.)?)|(-source$)/g,'');\n      }\n      if(!this.format && this.options.default_format) {\n        this.format = this.options.default_format;\n      }\n      if(this.options.format) {\n        this.format = this.options.format;\n      }\n  \n      // Specific format\n      if(this.format) {\n        // Text Area\n        if(this.format === 'textarea') {\n          this.input_type = 'textarea';\n          this.input = this.theme.getTextareaInput();\n        }\n        // Range Input\n        else if(this.format === 'range') {\n          this.input_type = 'range';\n          var min = this.schema.minimum || 0;\n          var max = this.schema.maximum || Math.max(100,min+1);\n          var step = 1;\n          if(this.schema.multipleOf) {\n            if(min%this.schema.multipleOf) min = Math.ceil(min/this.schema.multipleOf)*this.schema.multipleOf;\n            if(max%this.schema.multipleOf) max = Math.floor(max/this.schema.multipleOf)*this.schema.multipleOf;\n            step = this.schema.multipleOf;\n          }\n  \n          this.input = this.theme.getRangeInput(min,max,step);\n        }\n        // Source Code\n        else if([\n            'actionscript',\n            'batchfile',\n            'bbcode',\n            'c',\n            'c++',\n            'cpp',\n            'coffee',\n            'csharp',\n            'css',\n            'dart',\n            'django',\n            'ejs',\n            'erlang',\n            'golang',\n            'groovy',\n            'handlebars',\n            'haskell',\n            'haxe',\n            'html',\n            'ini',\n            'jade',\n            'java',\n            'javascript',\n            'json',\n            'less',\n            'lisp',\n            'lua',\n            'makefile',\n            'markdown',\n            'matlab',\n            'mysql',\n            'objectivec',\n            'pascal',\n            'perl',\n            'pgsql',\n            'php',\n            'python',\n            'r',\n            'ruby',\n            'sass',\n            'scala',\n            'scss',\n            'smarty',\n            'sql',\n            'stylus',\n            'svg',\n            'twig',\n            'vbscript',\n            'xml',\n            'yaml'\n          ].indexOf(this.format) >= 0\n        ) {\n          this.input_type = this.format;\n          this.source_code = true;\n          \n          this.input = this.theme.getTextareaInput();\n        }\n        // HTML5 Input type\n        else {\n          this.input_type = this.format;\n          this.input = this.theme.getFormInputField(this.input_type);\n        }\n      }\n      // Normal text input\n      else {\n        this.input_type = 'text';\n        this.input = this.theme.getFormInputField(this.input_type);\n      }\n      \n      // minLength, maxLength, and pattern\n      if(typeof this.schema.maxLength !== \"undefined\") this.input.setAttribute('maxlength',this.schema.maxLength);\n      if(typeof this.schema.pattern !== \"undefined\") this.input.setAttribute('pattern',this.schema.pattern);\n      else if(typeof this.schema.minLength !== \"undefined\") this.input.setAttribute('pattern','.{'+this.schema.minLength+',}');\n  \n      if(this.options.compact) {\n        this.container.className += ' compact';\n      }\n      else {\n        if(this.options.input_width) this.input.style.width = this.options.input_width;\n      }\n  \n      if(this.schema.readOnly || this.schema.readonly || this.schema.template) {\n        this.always_disabled = true;\n        this.input.disabled = true;\n      }\n  \n      this.input\n        .addEventListener('change',function(e) {        \n          e.preventDefault();\n          e.stopPropagation();\n          \n          // Don't allow changing if this field is a template\n          if(self.schema.template) {\n            this.value = self.value;\n            return;\n          }\n  \n          var val = this.value;\n          \n          // sanitize value\n          var sanitized = self.sanitize(val);\n          if(val !== sanitized) {\n            this.value = sanitized;\n          }\n          \n          self.is_dirty = true;\n  \n          self.refreshValue();\n          self.onChange(true);\n        });\n        \n      if(this.options.input_height) this.input.style.height = this.options.input_height;\n      if(this.options.expand_height) {\n        this.adjust_height = function(el) {\n          if(!el) return;\n          var i, ch=el.offsetHeight;\n          // Input too short\n          if(el.offsetHeight < el.scrollHeight) {\n            i=0;\n            while(el.offsetHeight < el.scrollHeight+3) {\n              if(i>100) break;\n              i++;\n              ch++;\n              el.style.height = ch+'px';\n            }\n          }\n          else {\n            i=0;\n            while(el.offsetHeight >= el.scrollHeight+3) {\n              if(i>100) break;\n              i++;\n              ch--;\n              el.style.height = ch+'px';\n            }\n            el.style.height = (ch+1)+'px';\n          }\n        };\n        \n        this.input.addEventListener('keyup',function(e) {\n          self.adjust_height(this);\n        });\n        this.input.addEventListener('change',function(e) {\n          self.adjust_height(this);\n        });\n        this.adjust_height();\n      }\n  \n      if(this.format) this.input.setAttribute('data-schemaformat',this.format);\n  \n      this.control = this.theme.getFormControl(this.label, this.input, this.description);\n      this.container.appendChild(this.control);\n  \n      // Any special formatting that needs to happen after the input is added to the dom\n      window.requestAnimationFrame(function() {\n        // Skip in case the input is only a temporary editor,\n        // otherwise, in the case of an ace_editor creation,\n        // it will generate an error trying to append it to the missing parentNode\n        if(self.input.parentNode) self.afterInputReady();\n        if(self.adjust_height) self.adjust_height(self.input);\n      });\n  \n      // Compile and store the template\n      if(this.schema.template) {\n        this.template = this.jsoneditor.compileTemplate(this.schema.template, this.template_engine);\n        this.refreshValue();\n      }\n      else {\n        this.refreshValue();\n      }\n  \n      addCustomDomByFormat.apply(this);\n    },\n    enable: function() {\n      if(!this.always_disabled) {\n        this.input.disabled = false;\n        // TODO: WYSIWYG and Markdown editors\n      }\n      this._super();\n    },\n    disable: function() {\n      this.input.disabled = true;\n      // TODO: WYSIWYG and Markdown editors\n      this._super();\n    },\n    afterInputReady: function() {\n      var self = this, options;\n      \n      // Code editor\n      if(this.source_code) {      \n        // WYSIWYG html and bbcode editor\n        if(this.options.wysiwyg && \n          ['html','bbcode'].indexOf(this.input_type) >= 0 && \n          window.jQuery && window.jQuery.fn && window.jQuery.fn.sceditor\n        ) {\n          options = $extend({},{\n            plugins: self.input_type==='html'? 'xhtml' : 'bbcode',\n            emoticonsEnabled: false,\n            width: '100%',\n            height: 300\n          },JSONEditor.plugins.sceditor,self.options.sceditor_options||{});\n          \n          window.jQuery(self.input).sceditor(options);\n          \n          self.sceditor_instance = window.jQuery(self.input).sceditor('instance');\n          \n          self.sceditor_instance.blur(function() {\n            // Get editor's value\n            var val = window.jQuery(\"<div>\"+self.sceditor_instance.val()+\"</div>\");\n            // Remove sceditor spans/divs\n            window.jQuery('#sceditor-start-marker,#sceditor-end-marker,.sceditor-nlf',val).remove();\n            // Set the value and update\n            self.input.value = val.html();\n            self.value = self.input.value;\n            self.is_dirty = true;\n            self.onChange(true);\n          });\n        }\n        // EpicEditor for markdown (if it's loaded)\n        else if (this.input_type === 'markdown' && window.EpicEditor) {\n          this.epiceditor_container = document.createElement('div');\n          this.input.parentNode.insertBefore(this.epiceditor_container,this.input);\n          this.input.style.display = 'none';\n          \n          options = $extend({},JSONEditor.plugins.epiceditor,{\n            container: this.epiceditor_container,\n            clientSideStorage: false\n          });\n          \n          this.epiceditor = new window.EpicEditor(options).load();\n          \n          this.epiceditor.importFile(null,this.getValue());\n        \n          this.epiceditor.on('update',function() {\n            var val = self.epiceditor.exportFile();\n            self.input.value = val;\n            self.value = val;\n            self.is_dirty = true;\n            self.onChange(true);\n          });\n        }\n        // ACE editor for everything else\n        else if(window.ace) {\n          var mode = this.input_type;\n          // aliases for c/cpp\n          if(mode === 'cpp' || mode === 'c++' || mode === 'c') {\n            mode = 'c_cpp';\n          }\n          \n          this.ace_container = document.createElement('div');\n          this.ace_container.style.width = '100%';\n          this.ace_container.style.position = 'relative';\n          this.ace_container.style.height = '400px';\n          this.input.parentNode.insertBefore(this.ace_container,this.input);\n          this.input.style.display = 'none';\n          this.ace_editor = window.ace.edit(this.ace_container);\n          \n          this.ace_editor.setValue(this.getValue());\n          \n          // The theme\n          if(JSONEditor.plugins.ace.theme) this.ace_editor.setTheme('ace/theme/'+JSONEditor.plugins.ace.theme);\n          // The mode\n          mode = window.ace.require(\"ace/mode/\"+mode);\n          if(mode) this.ace_editor.getSession().setMode(new mode.Mode());\n          \n          // Listen for changes\n          this.ace_editor.on('change',function() {\n            var val = self.ace_editor.getValue();\n            self.input.value = val;\n            self.refreshValue();\n            self.is_dirty = true;\n            self.onChange(true);\n          });\n        }\n      }\n      \n      self.theme.afterInputReady(self.input);\n    },\n    refreshValue: function() {\n      this.value = this.input.value;\n      if(typeof this.value !== \"string\") this.value = '';\n  \n      refreshCustomDomValue.apply(this);\n  \n      this.serialized = this.value;\n    },\n    destroy: function() {\n      // If using SCEditor, destroy the editor instance\n      if(this.sceditor_instance) {\n        this.sceditor_instance.destroy();\n      }\n      else if(this.epiceditor) {\n        this.epiceditor.unload();\n      }\n      else if(this.ace_editor) {\n        this.ace_editor.destroy();\n      }\n      \n      \n      this.template = null;\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n      if(this.label && this.label.parentNode) this.label.parentNode.removeChild(this.label);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n  \n      this._super();\n    },\n    /**\n     * This is overridden in derivative editors\n     */\n    sanitize: function(value) {\n      return value;\n    },\n    /**\n     * Re-calculates the value if needed\n     */\n    onWatchedFieldChange: function() {    \n      var self = this, vars, j;\n      \n      // If this editor needs to be rendered by a macro template\n      if(this.template) {\n        vars = this.getWatchedFieldValues();\n        this.setValue(this.template(vars),false,true);\n      }\n      \n      this._super();\n    },\n    showValidationErrors: function(errors) {\n      var self = this;\n      \n      if(this.jsoneditor.options.show_errors === \"always\") {}\n      else if(!this.is_dirty && this.previous_error_setting===this.jsoneditor.options.show_errors) return;\n      \n      this.previous_error_setting = this.jsoneditor.options.show_errors;\n  \n      var messages = [];\n      $each(errors,function(i,error) {\n        if(error.path === self.path) {\n          messages.push(error.message);\n        }\n      });\n  \n      if(messages.length) {\n        this.theme.addInputError(this.input, messages.join('. ')+'.');\n      }\n      else {\n        this.theme.removeInputError(this.input);\n      }\n    }\n  });\n  \n  JSONEditor.defaults.editors.number = JSONEditor.defaults.editors.string.extend({\n    sanitize: function(value) {\n      return (value+\"\").replace(/[^0-9\\.\\-eE]/g,'');\n    },\n    getNumColumns: function() {\n      return 2;\n    },\n    getValue: function() {\n      return this.value*1;\n    }\n  });\n  \n  JSONEditor.defaults.editors.integer = JSONEditor.defaults.editors.number.extend({\n    sanitize: function(value) {\n      value = value + \"\";\n      return value.replace(/[^0-9\\-]/g,'');\n    },\n    getNumColumns: function() {\n      return 2;\n    }\n  });\n  \n  JSONEditor.defaults.editors.object = JSONEditor.AbstractEditor.extend({\n    getDefault: function() {\n      return $extend({},this.schema[\"default\"] || {});\n    },\n    getChildEditors: function() {\n      return this.editors;\n    },\n    register: function() {\n      this._super();\n      if(this.editors) {\n        for(var i in this.editors) {\n          if(!this.editors.hasOwnProperty(i)) continue;\n          this.editors[i].register();\n        }\n      }\n    },\n    unregister: function() {\n      this._super();\n      if(this.editors) {\n        for(var i in this.editors) {\n          if(!this.editors.hasOwnProperty(i)) continue;\n          this.editors[i].unregister();\n        }\n      }\n    },\n    getNumColumns: function() {\n      return Math.max(Math.min(12,this.maxwidth),3);\n    },\n    enable: function() {\n      if(this.editjson_button) this.editjson_button.disabled = false;\n      if(this.addproperty_button) this.addproperty_button.disabled = false;\n  \n      this._super();\n      if(this.editors) {\n        for(var i in this.editors) {\n          if(!this.editors.hasOwnProperty(i)) continue;\n          this.editors[i].enable();\n        }\n      }\n    },\n    disable: function() {\n      if(this.editjson_button) this.editjson_button.disabled = true;\n      if(this.addproperty_button) this.addproperty_button.disabled = true;\n      this.hideEditJSON();\n  \n      this._super();\n      if(this.editors) {\n        for(var i in this.editors) {\n          if(!this.editors.hasOwnProperty(i)) continue;\n          this.editors[i].disable();\n        }\n      }\n    },\n    layoutEditors: function() {\n      var self = this, i, j;\n  \n      if(!this.row_container) return;\n  \n      // Sort editors by propertyOrder\n      this.property_order = Object.keys(this.editors);\n      this.property_order = this.property_order.sort(function(a,b) {\n        var ordera = self.editors[a].schema.propertyOrder;\n        var orderb = self.editors[b].schema.propertyOrder;\n        if(typeof ordera !== \"number\") ordera = 1000;\n        if(typeof orderb !== \"number\") orderb = 1000;\n  \n        return ordera - orderb;\n      });\n  \n      var container;\n  \n      if(this.format === 'grid') {\n        var rows = [];\n        $each(this.property_order, function(j,key) {\n          var editor = self.editors[key];\n          if(editor.property_removed) return;\n          var found = false;\n          var width = editor.options.hidden? 0 : (editor.options.grid_columns || editor.getNumColumns());\n          var height = editor.options.hidden? 0 : editor.container.offsetHeight;\n          // See if the editor will fit in any of the existing rows first\n          for(var i=0; i<rows.length; i++) {\n            // If the editor will fit in the row horizontally\n            if(rows[i].width + width <= 12) {\n              // If the editor is close to the other elements in height\n              // i.e. Don't put a really tall editor in an otherwise short row or vice versa\n              if(!height || (rows[i].minh*0.5 < height && rows[i].maxh*2 > height)) {\n                found = i;\n              }\n            }\n          }\n  \n          // If there isn't a spot in any of the existing rows, start a new row\n          if(found === false) {\n            rows.push({\n              width: 0,\n              minh: 999999,\n              maxh: 0,\n              editors: []\n            });\n            found = rows.length-1;\n          }\n  \n          rows[found].editors.push({\n            key: key,\n            //editor: editor,\n            width: width,\n            height: height\n          });\n          rows[found].width += width;\n          rows[found].minh = Math.min(rows[found].minh,height);\n          rows[found].maxh = Math.max(rows[found].maxh,height);\n        });\n  \n        // Make almost full rows width 12\n        // Do this by increasing all editors' sizes proprotionately\n        // Any left over space goes to the biggest editor\n        // Don't touch rows with a width of 6 or less\n        for(i=0; i<rows.length; i++) {\n          if(rows[i].width < 12) {\n            var biggest = false;\n            var new_width = 0;\n            for(j=0; j<rows[i].editors.length; j++) {\n              if(biggest === false) biggest = j;\n              else if(rows[i].editors[j].width > rows[i].editors[biggest].width) biggest = j;\n              rows[i].editors[j].width *= 12/rows[i].width;\n              rows[i].editors[j].width = Math.floor(rows[i].editors[j].width);\n              new_width += rows[i].editors[j].width;\n            }\n            if(new_width < 12) rows[i].editors[biggest].width += 12-new_width;\n            rows[i].width = 12;\n          }\n        }\n  \n        // layout hasn't changed\n        if(this.layout === JSON.stringify(rows)) return false;\n        this.layout = JSON.stringify(rows);\n  \n        // Layout the form\n        container = document.createElement('div');\n        for(i=0; i<rows.length; i++) {\n          var row = this.theme.getGridRow();\n          container.appendChild(row);\n          for(j=0; j<rows[i].editors.length; j++) {\n            var key = rows[i].editors[j].key;\n            var editor = this.editors[key];\n  \n            if(editor.options.hidden) editor.container.style.display = 'none';\n            else this.theme.setGridColumnSize(editor.container,rows[i].editors[j].width);\n            row.appendChild(editor.container);\n          }\n        }\n      }\n      // Normal layout\n      else {\n        container = document.createElement('div');\n        $each(this.property_order, function(i,key) {\n          var editor = self.editors[key];\n          if(editor.property_removed) return;\n          var row = self.theme.getGridRow();\n          container.appendChild(row);\n  \n          if(editor.options.hidden) editor.container.style.display = 'none';\n          else self.theme.setGridColumnSize(editor.container,12);\n          row.appendChild(editor.container);\n        });\n      }\n      this.row_container.innerHTML = '';\n      this.row_container.appendChild(container);\n    },\n    getPropertySchema: function(key) {\n      // Schema declared directly in properties\n      var schema = this.schema.properties[key] || {};\n      schema = $extend({},schema);\n      var matched = this.schema.properties[key]? true : false;\n  \n      // Any matching patternProperties should be merged in\n      if(this.schema.patternProperties) {\n        for(var i in this.schema.patternProperties) {\n          if(!this.schema.patternProperties.hasOwnProperty(i)) continue;\n          var regex = new RegExp(i);\n          if(regex.test(key)) {\n            schema.allOf = schema.allOf || [];\n            schema.allOf.push(this.schema.patternProperties[i]);\n            matched = true;\n          }\n        }\n      }\n  \n      // Hasn't matched other rules, use additionalProperties schema\n      if(!matched && this.schema.additionalProperties && typeof this.schema.additionalProperties === \"object\") {\n        schema = $extend({},this.schema.additionalProperties);\n      }\n  \n      return schema;\n    },\n    preBuild: function() {\n      this._super();\n  \n      this.editors = {};\n      this.cached_editors = {};\n      var self = this;\n  \n      this.format = this.options.layout || this.options.object_layout || this.schema.format || this.jsoneditor.options.object_layout || 'normal';\n  \n      this.schema.properties = this.schema.properties || {};\n  \n      this.minwidth = 0;\n      this.maxwidth = 0;\n  \n      // If the object should be rendered as a table row\n      if(this.options.table_row) {\n        $each(this.schema.properties, function(key,schema) {\n          var editor = self.jsoneditor.getEditorClass(schema);\n          self.editors[key] = self.jsoneditor.createEditor(editor,{\n            jsoneditor: self.jsoneditor,\n            schema: schema,\n            path: self.path+'.'+key,\n            parent: self,\n            compact: true,\n            required: true\n          });\n          self.editors[key].preBuild();\n  \n          var width = self.editors[key].options.hidden? 0 : (self.editors[key].options.grid_columns || self.editors[key].getNumColumns());\n  \n          self.minwidth += width;\n          self.maxwidth += width;\n        });\n        this.no_link_holder = true;\n      }\n      // If the object should be rendered as a table\n      else if(this.options.table) {\n        // TODO: table display format\n        throw \"Not supported yet\";\n      }\n      // If the object should be rendered as a div\n      else {\n        if(!this.schema.defaultProperties) {\n          if(this.jsoneditor.options.display_required_only || this.options.display_required_only) {\n            this.schema.defaultProperties = [];\n            $each(this.schema.properties, function(k,s) {\n              if(self.isRequired({key: k, schema: s})) {\n                self.schema.defaultProperties.push(k);\n              }\n            });\n          }\n          else {\n            self.schema.defaultProperties = Object.keys(self.schema.properties);\n          }\n        }\n  \n        // Increase the grid width to account for padding\n        self.maxwidth += 1;\n  \n        $each(this.schema.defaultProperties, function(i,key) {\n          self.addObjectProperty(key, true);\n  \n          if(self.editors[key]) {\n            self.minwidth = Math.max(self.minwidth,(self.editors[key].options.grid_columns || self.editors[key].getNumColumns()));\n            self.maxwidth += (self.editors[key].options.grid_columns || self.editors[key].getNumColumns());\n          }\n        });\n      }\n  \n      // Sort editors by propertyOrder\n      this.property_order = Object.keys(this.editors);\n      this.property_order = this.property_order.sort(function(a,b) {\n        var ordera = self.editors[a].schema.propertyOrder;\n        var orderb = self.editors[b].schema.propertyOrder;\n        if(typeof ordera !== \"number\") ordera = 1000;\n        if(typeof orderb !== \"number\") orderb = 1000;\n  \n        return ordera - orderb;\n      });\n    },\n    build: function() {\n      var self = this;\n  \n      // If the object should be rendered as a table row\n      if(this.options.table_row) {\n        this.editor_holder = this.container;\n        $each(this.editors, function(key,editor) {\n          var holder = self.theme.getTableCell();\n          self.editor_holder.appendChild(holder);\n  \n          editor.setContainer(holder);\n          editor.build();\n          editor.postBuild();\n  \n          if(self.editors[key].options.hidden) {\n            holder.style.display = 'none';\n          }\n          if(self.editors[key].options.input_width) {\n            holder.style.width = self.editors[key].options.input_width;\n          }\n        });\n      }\n      // If the object should be rendered as a table\n      else if(this.options.table) {\n        // TODO: table display format\n        throw \"Not supported yet\";\n      }\n      // If the object should be rendered as a div\n      else {\n        this.header = document.createElement('span');\n        this.header.textContent = this.getTitle();\n        this.title = this.theme.getHeader(this.header);\n        this.container.appendChild(this.title);\n        this.container.style.position = 'relative';\n  \n        // Edit JSON modal\n        this.editjson_holder = this.theme.getModal();\n        this.editjson_textarea = this.theme.getTextareaInput();\n        this.editjson_textarea.style.height = '170px';\n        this.editjson_textarea.style.width = '300px';\n        this.editjson_textarea.style.display = 'block';\n        this.editjson_save = this.getButton('Save','save','Save');\n        this.editjson_save.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          self.saveJSON();\n        });\n        this.editjson_cancel = this.getButton('Cancel','cancel','Cancel');\n        this.editjson_cancel.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          self.hideEditJSON();\n        });\n        this.editjson_holder.appendChild(this.editjson_textarea);\n        this.editjson_holder.appendChild(this.editjson_save);\n        this.editjson_holder.appendChild(this.editjson_cancel);\n  \n        // Manage Properties modal\n        this.addproperty_holder = this.theme.getModal();\n        this.addproperty_list = document.createElement('div');\n        this.addproperty_list.style.width = '295px';\n        this.addproperty_list.style.maxHeight = '160px';\n        this.addproperty_list.style.padding = '5px 0';\n        this.addproperty_list.style.overflowY = 'auto';\n        this.addproperty_list.style.overflowX = 'hidden';\n        this.addproperty_list.style.paddingLeft = '5px';\n        this.addproperty_list.setAttribute('class', 'property-selector');\n        this.addproperty_add = this.getButton('add','add','add');\n        this.addproperty_input = this.theme.getFormInputField('text');\n        this.addproperty_input.setAttribute('placeholder','Property name...');\n        this.addproperty_input.style.width = '220px';\n        this.addproperty_input.style.marginBottom = '0';\n        this.addproperty_input.style.display = 'inline-block';\n        this.addproperty_add.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          if(self.addproperty_input.value) {\n            if(self.editors[self.addproperty_input.value]) {\n              window.alert('there is already a property with that name');\n              return;\n            }\n  \n            self.addObjectProperty(self.addproperty_input.value);\n            if(self.editors[self.addproperty_input.value]) {\n              self.editors[self.addproperty_input.value].disable();\n            }\n            self.onChange(true);\n          }\n        });\n        this.addproperty_holder.appendChild(this.addproperty_list);\n        this.addproperty_holder.appendChild(this.addproperty_input);\n        this.addproperty_holder.appendChild(this.addproperty_add);\n        var spacer = document.createElement('div');\n        spacer.style.clear = 'both';\n        this.addproperty_holder.appendChild(spacer);\n  \n  \n        // Description\n        if(this.schema.description) {\n          this.description = this.theme.getDescription(this.schema.description);\n          this.container.appendChild(this.description);\n        }\n  \n        // Validation error placeholder area\n        this.error_holder = document.createElement('div');\n        this.container.appendChild(this.error_holder);\n  \n        // Container for child editor area\n        this.editor_holder = this.theme.getIndentedPanel();\n        this.container.appendChild(this.editor_holder);\n  \n        // Container for rows of child editors\n        this.row_container = this.theme.getGridContainer();\n        this.editor_holder.appendChild(this.row_container);\n  \n        $each(this.editors, function(key,editor) {\n          var holder = self.theme.getGridColumn();\n          self.row_container.appendChild(holder);\n  \n          editor.setContainer(holder);\n          editor.build();\n          editor.postBuild();\n        });\n  \n        // Control buttons\n        this.title_controls = this.theme.getHeaderButtonHolder();\n        this.editjson_controls = this.theme.getHeaderButtonHolder();\n        this.addproperty_controls = this.theme.getHeaderButtonHolder();\n        this.title.appendChild(this.title_controls);\n        this.title.appendChild(this.editjson_controls);\n        this.title.appendChild(this.addproperty_controls);\n  \n        // Show/Hide button\n        this.collapsed = false;\n        this.toggle_button = this.getButton('','collapse',this.translate('button_collapse'));\n        this.title_controls.appendChild(this.toggle_button);\n        this.toggle_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          if(self.collapsed) {\n            self.editor_holder.style.display = '';\n            self.collapsed = false;\n            self.setButtonText(self.toggle_button,'','collapse',self.translate('button_collapse'));\n          }\n          else {\n            self.editor_holder.style.display = 'none';\n            self.collapsed = true;\n            self.setButtonText(self.toggle_button,'','expand',self.translate('button_expand'));\n          }\n        });\n  \n        // If it should start collapsed\n        if(this.options.collapsed) {\n          $trigger(this.toggle_button,'click');\n        }\n  \n        // Collapse button disabled\n        if(this.schema.options && typeof this.schema.options.disable_collapse !== \"undefined\") {\n          if(this.schema.options.disable_collapse) this.toggle_button.style.display = 'none';\n        }\n        else if(this.jsoneditor.options.disable_collapse) {\n          this.toggle_button.style.display = 'none';\n        }\n  \n        // Edit JSON Button\n        this.editjson_button = this.getButton('JSON','edit','Edit JSON');\n        this.editjson_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          self.toggleEditJSON();\n        });\n        this.editjson_controls.appendChild(this.editjson_button);\n        this.editjson_controls.appendChild(this.editjson_holder);\n  \n        // Edit JSON Buttton disabled\n        if(this.schema.options && typeof this.schema.options.disable_edit_json !== \"undefined\") {\n          if(this.schema.options.disable_edit_json) this.editjson_button.style.display = 'none';\n        }\n        else if(this.jsoneditor.options.disable_edit_json) {\n          this.editjson_button.style.display = 'none';\n        }\n  \n        // Object Properties Button\n        this.addproperty_button = this.getButton('Properties','edit','Object Properties');\n        this.addproperty_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          self.toggleAddProperty();\n        });\n        this.addproperty_controls.appendChild(this.addproperty_button);\n        this.addproperty_controls.appendChild(this.addproperty_holder);\n        this.refreshAddProperties();\n      }\n  \n      // Fix table cell ordering\n      if(this.options.table_row) {\n        this.editor_holder = this.container;\n        $each(this.property_order,function(i,key) {\n          self.editor_holder.appendChild(self.editors[key].container);\n        });\n      }\n      // Layout object editors in grid if needed\n      else {\n        // Initial layout\n        this.layoutEditors();\n        // Do it again now that we know the approximate heights of elements\n        this.layoutEditors();\n      }\n    },\n    showEditJSON: function() {\n      if(!this.editjson_holder) return;\n      this.hideAddProperty();\n  \n      // Position the form directly beneath the button\n      // TODO: edge detection\n      this.editjson_holder.style.left = this.editjson_button.offsetLeft+\"px\";\n      this.editjson_holder.style.top = this.editjson_button.offsetTop + this.editjson_button.offsetHeight+\"px\";\n  \n      // Start the textarea with the current value\n      this.editjson_textarea.value = JSON.stringify(this.getValue(),null,2);\n  \n      // Disable the rest of the form while editing JSON\n      this.disable();\n  \n      this.editjson_holder.style.display = '';\n      this.editjson_button.disabled = false;\n      this.editing_json = true;\n    },\n    hideEditJSON: function() {\n      if(!this.editjson_holder) return;\n      if(!this.editing_json) return;\n  \n      this.editjson_holder.style.display = 'none';\n      this.enable();\n      this.editing_json = false;\n    },\n    saveJSON: function() {\n      if(!this.editjson_holder) return;\n  \n      try {\n        var json = JSON.parse(this.editjson_textarea.value);\n        this.setValue(json);\n        this.hideEditJSON();\n      }\n      catch(e) {\n        window.alert('invalid JSON');\n        throw e;\n      }\n    },\n    toggleEditJSON: function() {\n      if(this.editing_json) this.hideEditJSON();\n      else this.showEditJSON();\n    },\n    insertPropertyControlUsingPropertyOrder: function (property, control, container) {\n      var propertyOrder;\n      if (this.schema.properties[property])\n        propertyOrder = this.schema.properties[property].propertyOrder;\n      if (typeof propertyOrder !== \"number\") propertyOrder = 1000;\n      control.propertyOrder = propertyOrder;\n  \n      for (var i = 0; i < container.childNodes.length; i++) {\n        var child = container.childNodes[i];\n        if (control.propertyOrder < child.propertyOrder) {\n          this.addproperty_list.insertBefore(control, child);\n          control = null;\n          break;\n        }\n      }\n      if (control) {\n        this.addproperty_list.appendChild(control);\n      }\n    },\n    addPropertyCheckbox: function(key) {\n      var self = this;\n      var checkbox, label, labelText, control;\n  \n      checkbox = self.theme.getCheckbox();\n      checkbox.style.width = 'auto';\n  \n      if (this.schema.properties[key] && this.schema.properties[key].title)\n        labelText = this.schema.properties[key].title;\n      else\n        labelText = key;\n  \n      label = self.theme.getCheckboxLabel(labelText);\n  \n      control = self.theme.getFormControl(label,checkbox);\n      control.style.paddingBottom = control.style.marginBottom = control.style.paddingTop = control.style.marginTop = 0;\n      control.style.height = 'auto';\n      //control.style.overflowY = 'hidden';\n  \n      this.insertPropertyControlUsingPropertyOrder(key, control, this.addproperty_list);\n  \n      checkbox.checked = key in this.editors;\n      checkbox.addEventListener('change',function() {\n        if(checkbox.checked) {\n          self.addObjectProperty(key);\n        }\n        else {\n          self.removeObjectProperty(key);\n        }\n        self.onChange(true);\n      });\n      self.addproperty_checkboxes[key] = checkbox;\n  \n      return checkbox;\n    },\n    showAddProperty: function() {\n      if(!this.addproperty_holder) return;\n      this.hideEditJSON();\n  \n      // Position the form directly beneath the button\n      // TODO: edge detection\n      this.addproperty_holder.style.left = this.addproperty_button.offsetLeft+\"px\";\n      this.addproperty_holder.style.top = this.addproperty_button.offsetTop + this.addproperty_button.offsetHeight+\"px\";\n  \n      // Disable the rest of the form while editing JSON\n      this.disable();\n  \n      this.adding_property = true;\n      this.addproperty_button.disabled = false;\n      this.addproperty_holder.style.display = '';\n      this.refreshAddProperties();\n    },\n    hideAddProperty: function() {\n      if(!this.addproperty_holder) return;\n      if(!this.adding_property) return;\n  \n      this.addproperty_holder.style.display = 'none';\n      this.enable();\n  \n      this.adding_property = false;\n    },\n    toggleAddProperty: function() {\n      if(this.adding_property) this.hideAddProperty();\n      else this.showAddProperty();\n    },\n    removeObjectProperty: function(property) {\n      if(this.editors[property]) {\n        this.editors[property].unregister();\n        delete this.editors[property];\n  \n        this.refreshValue();\n        this.layoutEditors();\n      }\n    },\n    addObjectProperty: function(name, prebuild_only) {\n      var self = this;\n  \n      // Property is already added\n      if(this.editors[name]) return;\n  \n      // Property was added before and is cached\n      if(this.cached_editors[name]) {\n        this.editors[name] = this.cached_editors[name];\n        if(prebuild_only) return;\n        this.editors[name].register();\n      }\n      // New property\n      else {\n        if(!this.canHaveAdditionalProperties() && (!this.schema.properties || !this.schema.properties[name])) {\n          return;\n        }\n  \n        var schema = self.getPropertySchema(name);\n  \n  \n        // Add the property\n        var editor = self.jsoneditor.getEditorClass(schema);\n  \n        self.editors[name] = self.jsoneditor.createEditor(editor,{\n          jsoneditor: self.jsoneditor,\n          schema: schema,\n          path: self.path+'.'+name,\n          parent: self\n        });\n        self.editors[name].preBuild();\n  \n        if(!prebuild_only) {\n          var holder = self.theme.getChildEditorHolder();\n          self.editor_holder.appendChild(holder);\n          self.editors[name].setContainer(holder);\n          self.editors[name].build();\n          self.editors[name].postBuild();\n        }\n  \n        self.cached_editors[name] = self.editors[name];\n      }\n  \n      // If we're only prebuilding the editors, don't refresh values\n      if(!prebuild_only) {\n        self.refreshValue();\n        self.layoutEditors();\n      }\n    },\n    onChildEditorChange: function(editor) {\n      this.refreshValue();\n      this._super(editor);\n    },\n    canHaveAdditionalProperties: function() {\n      if (typeof this.schema.additionalProperties === \"boolean\") {\n        return this.schema.additionalProperties;\n      }\n      return !this.jsoneditor.options.no_additional_properties;\n    },\n    destroy: function() {\n      $each(this.cached_editors, function(i,el) {\n        el.destroy();\n      });\n      if(this.editor_holder) this.editor_holder.innerHTML = '';\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.error_holder && this.error_holder.parentNode) this.error_holder.parentNode.removeChild(this.error_holder);\n  \n      this.editors = null;\n      this.cached_editors = null;\n      if(this.editor_holder && this.editor_holder.parentNode) this.editor_holder.parentNode.removeChild(this.editor_holder);\n      this.editor_holder = null;\n  \n      this._super();\n    },\n    getValue: function() {\n      var result = this._super();\n      if(this.jsoneditor.options.remove_empty_properties || this.options.remove_empty_properties) {\n        for(var i in result) {\n          if(result.hasOwnProperty(i)) {\n            if(!result[i]) delete result[i];\n          }\n        }\n      }\n      return result;\n    },\n    refreshValue: function() {\n      this.value = {};\n      var self = this;\n  \n      for(var i in this.editors) {\n        if(!this.editors.hasOwnProperty(i)) continue;\n        this.value[i] = this.editors[i].getValue();\n      }\n      \n      if(this.adding_property) this.refreshAddProperties();\n    },\n    refreshAddProperties: function() {\n      if(this.options.disable_properties || (this.options.disable_properties !== false && this.jsoneditor.options.disable_properties)) {\n        this.addproperty_controls.style.display = 'none';\n        return;\n      }\n  \n      var can_add = false, can_remove = false, num_props = 0, i, show_modal = false;\n  \n      // Get number of editors\n      for(i in this.editors) {\n        if(!this.editors.hasOwnProperty(i)) continue;\n        num_props++;\n      }\n  \n      // Determine if we can add back removed properties\n      can_add = this.canHaveAdditionalProperties() && !(typeof this.schema.maxProperties !== \"undefined\" && num_props >= this.schema.maxProperties);\n  \n      if(this.addproperty_checkboxes) {\n        this.addproperty_list.innerHTML = '';\n      }\n      this.addproperty_checkboxes = {};\n  \n      // Check for which editors can't be removed or added back\n      for(i in this.cached_editors) {\n        if(!this.cached_editors.hasOwnProperty(i)) continue;\n  \n        this.addPropertyCheckbox(i);\n  \n        if(this.isRequired(this.cached_editors[i]) && i in this.editors) {\n          this.addproperty_checkboxes[i].disabled = true;\n        }\n  \n        if(typeof this.schema.minProperties !== \"undefined\" && num_props <= this.schema.minProperties) {\n          this.addproperty_checkboxes[i].disabled = this.addproperty_checkboxes[i].checked;\n          if(!this.addproperty_checkboxes[i].checked) show_modal = true;\n        }\n        else if(!(i in this.editors)) {\n          if(!can_add  && !this.schema.properties.hasOwnProperty(i)) {\n            this.addproperty_checkboxes[i].disabled = true;\n          }\n          else {\n            this.addproperty_checkboxes[i].disabled = false;\n            show_modal = true;\n          }\n        }\n        else {\n          show_modal = true;\n          can_remove = true;\n        }\n      }\n  \n      if(this.canHaveAdditionalProperties()) {\n        show_modal = true;\n      }\n  \n      // Additional addproperty checkboxes not tied to a current editor\n      for(i in this.schema.properties) {\n        if(!this.schema.properties.hasOwnProperty(i)) continue;\n        if(this.cached_editors[i]) continue;\n        show_modal = true;\n        this.addPropertyCheckbox(i);\n      }\n  \n      // If no editors can be added or removed, hide the modal button\n      if(!show_modal) {\n        this.hideAddProperty();\n        this.addproperty_controls.style.display = 'none';\n      }\n      // If additional properties are disabled\n      else if(!this.canHaveAdditionalProperties()) {\n        this.addproperty_add.style.display = 'none';\n        this.addproperty_input.style.display = 'none';\n      }\n      // If no new properties can be added\n      else if(!can_add) {\n        this.addproperty_add.disabled = true;\n      }\n      // If new properties can be added\n      else {\n        this.addproperty_add.disabled = false;\n      }\n    },\n    isRequired: function(editor) {\n      if(typeof editor.schema.required === \"boolean\") return editor.schema.required;\n      else if(Array.isArray(this.schema.required)) return this.schema.required.indexOf(editor.key) > -1;\n      else if(this.jsoneditor.options.required_by_default) return true;\n      else return false;\n    },\n    setValue: function(value, initial) {\n      var self = this;\n      value = value || {};\n  \n      if(typeof value !== \"object\" || Array.isArray(value)) value = {};\n  \n      // First, set the values for all of the defined properties\n      $each(this.cached_editors, function(i,editor) {\n        // Value explicitly set\n        if(typeof value[i] !== \"undefined\") {\n          self.addObjectProperty(i);\n          editor.setValue(value[i],initial);\n        }\n        // Otherwise, remove value unless this is the initial set or it's required\n        else if(!initial && !self.isRequired(editor)) {\n          self.removeObjectProperty(i);\n        }\n        // Otherwise, set the value to the default\n        else {\n          editor.setValue(editor.getDefault(),initial);\n        }\n      });\n  \n      $each(value, function(i,val) {\n        if(!self.cached_editors[i]) {\n          self.addObjectProperty(i);\n          if(self.editors[i]) self.editors[i].setValue(val,initial);\n        }\n      });\n  \n      this.refreshValue();\n      this.layoutEditors();\n      this.onChange();\n    },\n    showValidationErrors: function(errors) {\n      var self = this;\n  \n      // Get all the errors that pertain to this editor\n      var my_errors = [];\n      var other_errors = [];\n      $each(errors, function(i,error) {\n        if(error.path === self.path) {\n          my_errors.push(error);\n        }\n        else {\n          other_errors.push(error);\n        }\n      });\n  \n      // Show errors for this editor\n      if(this.error_holder) {\n        if(my_errors.length) {\n          var message = [];\n          this.error_holder.innerHTML = '';\n          this.error_holder.style.display = '';\n          $each(my_errors, function(i,error) {\n            self.error_holder.appendChild(self.theme.getErrorMessage(error.message));\n          });\n        }\n        // Hide error area\n        else {\n          this.error_holder.style.display = 'none';\n        }\n      }\n  \n      // Show error for the table row if this is inside a table\n      if(this.options.table_row) {\n        if(my_errors.length) {\n          this.theme.addTableRowError(this.container);\n        }\n        else {\n          this.theme.removeTableRowError(this.container);\n        }\n      }\n  \n      // Show errors for child editors\n      $each(this.editors, function(i,editor) {\n        editor.showValidationErrors(other_errors);\n      });\n    }\n  });\n  \n  JSONEditor.defaults.editors.array = JSONEditor.AbstractEditor.extend({\n    getDefault: function() {\n      return this.schema[\"default\"] || [];\n    },\n    register: function() {\n      this._super();\n      if(this.rows) {\n        for(var i=0; i<this.rows.length; i++) {\n          this.rows[i].register();\n        }\n      }\n    },\n    unregister: function() {\n      this._super();\n      if(this.rows) {\n        for(var i=0; i<this.rows.length; i++) {\n          this.rows[i].unregister();\n        }\n      }\n    },\n    getNumColumns: function() {\n      var info = this.getItemInfo(0);\n      // Tabs require extra horizontal space\n      if(this.tabs_holder) {\n        return Math.max(Math.min(12,info.width+2),4);\n      }\n      else {\n        return info.width;\n      }\n    },\n    enable: function() {\n      if(this.add_row_button) this.add_row_button.disabled = false;\n      if(this.remove_all_rows_button) this.remove_all_rows_button.disabled = false;\n      if(this.delete_last_row_button) this.delete_last_row_button.disabled = false;\n      \n      if(this.rows) {\n        for(var i=0; i<this.rows.length; i++) {\n          this.rows[i].enable();\n          \n          if(this.rows[i].moveup_button) this.rows[i].moveup_button.disabled = false;\n          if(this.rows[i].movedown_button) this.rows[i].movedown_button.disabled = false;\n          if(this.rows[i].delete_button) this.rows[i].delete_button.disabled = false;\n        }\n      }\n      this._super();\n    },\n    disable: function() {\n      if(this.add_row_button) this.add_row_button.disabled = true;\n      if(this.remove_all_rows_button) this.remove_all_rows_button.disabled = true;\n      if(this.delete_last_row_button) this.delete_last_row_button.disabled = true;\n  \n      if(this.rows) {\n        for(var i=0; i<this.rows.length; i++) {\n          this.rows[i].disable();\n          \n          if(this.rows[i].moveup_button) this.rows[i].moveup_button.disabled = true;\n          if(this.rows[i].movedown_button) this.rows[i].movedown_button.disabled = true;\n          if(this.rows[i].delete_button) this.rows[i].delete_button.disabled = true;\n        }\n      }\n      this._super();\n    },\n    preBuild: function() {\n      this._super();\n      \n      this.rows = [];\n      this.row_cache = [];\n  \n      this.hide_delete_buttons = this.options.disable_array_delete || this.jsoneditor.options.disable_array_delete;\n      this.hide_delete_all_rows_buttons = this.hide_delete_buttons || this.options.disable_array_delete_all_rows || this.jsoneditor.options.disable_array_delete_all_rows;\n      this.hide_delete_last_row_buttons = this.hide_delete_buttons || this.options.disable_array_delete_last_row || this.jsoneditor.options.disable_array_delete_last_row;\n      this.hide_move_buttons = this.options.disable_array_reorder || this.jsoneditor.options.disable_array_reorder;\n      this.hide_add_button = this.options.disable_array_add || this.jsoneditor.options.disable_array_add;\n    },\n    build: function() {\n      var self = this;\n  \n      if(!this.options.compact) {\n        this.header = document.createElement('span');\n        this.header.textContent = this.getTitle();\n        this.title = this.theme.getHeader(this.header);\n        this.container.appendChild(this.title);\n        this.title_controls = this.theme.getHeaderButtonHolder();\n        this.title.appendChild(this.title_controls);\n        if(this.schema.description) {\n          this.description = this.theme.getDescription(this.schema.description);\n          this.container.appendChild(this.description);\n        }\n        this.error_holder = document.createElement('div');\n        this.container.appendChild(this.error_holder);\n  \n        if(this.schema.format === 'tabs') {\n          this.controls = this.theme.getHeaderButtonHolder();\n          this.title.appendChild(this.controls);\n          this.tabs_holder = this.theme.getTabHolder();\n          this.container.appendChild(this.tabs_holder);\n          this.row_holder = this.theme.getTabContentHolder(this.tabs_holder);\n  \n          this.active_tab = null;\n        }\n        else {\n          this.panel = this.theme.getIndentedPanel();\n          this.container.appendChild(this.panel);\n          this.row_holder = document.createElement('div');\n          this.panel.appendChild(this.row_holder);\n          this.controls = this.theme.getButtonHolder();\n          this.panel.appendChild(this.controls);\n        }\n      }\n      else {\n          this.panel = this.theme.getIndentedPanel();\n          this.container.appendChild(this.panel);\n          this.controls = this.theme.getButtonHolder();\n          this.panel.appendChild(this.controls);\n          this.row_holder = document.createElement('div');\n          this.panel.appendChild(this.row_holder);\n      }\n  \n      // Add controls\n      this.addControls();\n    },\n    onChildEditorChange: function(editor) {\n      this.refreshValue();\n      this.refreshTabs(true);\n      this._super(editor);\n    },\n    getItemTitle: function() {\n      if(!this.item_title) {\n        if(this.schema.items && !Array.isArray(this.schema.items)) {\n          var tmp = this.jsoneditor.expandRefs(this.schema.items);\n          this.item_title = tmp.title || 'item';\n        }\n        else {\n          this.item_title = 'item';\n        }\n      }\n      return this.item_title;\n    },\n    getItemSchema: function(i) {\n      if(Array.isArray(this.schema.items)) {\n        if(i >= this.schema.items.length) {\n          if(this.schema.additionalItems===true) {\n            return {};\n          }\n          else if(this.schema.additionalItems) {\n            return $extend({},this.schema.additionalItems);\n          }\n        }\n        else {\n          return $extend({},this.schema.items[i]);\n        }\n      }\n      else if(this.schema.items) {\n        return $extend({},this.schema.items);\n      }\n      else {\n        return {};\n      }\n    },\n    getItemInfo: function(i) {\n      var schema = this.getItemSchema(i);\n      \n      // Check if it's cached\n      this.item_info = this.item_info || {};\n      var stringified = JSON.stringify(schema);\n      if(typeof this.item_info[stringified] !== \"undefined\") return this.item_info[stringified];\n      \n      // Get the schema for this item\n      schema = this.jsoneditor.expandRefs(schema);\n        \n      this.item_info[stringified] = {\n        title: schema.title || \"item\",\n        'default': schema[\"default\"],\n        width: 12,\n        child_editors: schema.properties || schema.items\n      };\n      \n      return this.item_info[stringified];\n    },\n    getElementEditor: function(i) {\n      var item_info = this.getItemInfo(i);\n      var schema = this.getItemSchema(i);\n      schema = this.jsoneditor.expandRefs(schema);\n      schema.title = item_info.title+' '+(i+1);\n  \n      var editor = this.jsoneditor.getEditorClass(schema);\n  \n      var holder;\n      if(this.tabs_holder) {\n        holder = this.theme.getTabContent();\n      }\n      else if(item_info.child_editors) {\n        holder = this.theme.getChildEditorHolder();\n      }\n      else {\n        holder = this.theme.getIndentedPanel();\n      }\n  \n      this.row_holder.appendChild(holder);\n  \n      var ret = this.jsoneditor.createEditor(editor,{\n        jsoneditor: this.jsoneditor,\n        schema: schema,\n        container: holder,\n        path: this.path+'.'+i,\n        parent: this,\n        required: true\n      });\n      ret.preBuild();\n      ret.build();\n      ret.postBuild();\n  \n      if(!ret.title_controls) {\n        ret.array_controls = this.theme.getButtonHolder();\n        holder.appendChild(ret.array_controls);\n      }\n      \n      return ret;\n    },\n    destroy: function() {\n      this.empty(true);\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n      if(this.row_holder && this.row_holder.parentNode) this.row_holder.parentNode.removeChild(this.row_holder);\n      if(this.controls && this.controls.parentNode) this.controls.parentNode.removeChild(this.controls);\n      if(this.panel && this.panel.parentNode) this.panel.parentNode.removeChild(this.panel);\n      \n      this.rows = this.row_cache = this.title = this.description = this.row_holder = this.panel = this.controls = null;\n  \n      this._super();\n    },\n    empty: function(hard) {\n      if(!this.rows) return;\n      var self = this;\n      $each(this.rows,function(i,row) {\n        if(hard) {\n          if(row.tab && row.tab.parentNode) row.tab.parentNode.removeChild(row.tab);\n          self.destroyRow(row,true);\n          self.row_cache[i] = null;\n        }\n        self.rows[i] = null;\n      });\n      self.rows = [];\n      if(hard) self.row_cache = [];\n    },\n    destroyRow: function(row,hard) {\n      var holder = row.container;\n      if(hard) {\n        row.destroy();\n        if(holder.parentNode) holder.parentNode.removeChild(holder);\n        if(row.tab && row.tab.parentNode) row.tab.parentNode.removeChild(row.tab);\n      }\n      else {\n        if(row.tab) row.tab.style.display = 'none';\n        holder.style.display = 'none';\n        row.unregister();\n      }\n    },\n    getMax: function() {\n      if((Array.isArray(this.schema.items)) && this.schema.additionalItems === false) {\n        return Math.min(this.schema.items.length,this.schema.maxItems || Infinity);\n      }\n      else {\n        return this.schema.maxItems || Infinity;\n      }\n    },\n    refreshTabs: function(refresh_headers) {\n      var self = this;\n      $each(this.rows, function(i,row) {\n        if(!row.tab) return;\n  \n        if(refresh_headers) {\n          row.tab_text.textContent = row.getHeaderText();\n        }\n        else {\n          if(row.tab === self.active_tab) {\n            self.theme.markTabActive(row.tab);\n            row.container.style.display = '';\n          }\n          else {\n            self.theme.markTabInactive(row.tab);\n            row.container.style.display = 'none';\n          }\n        }\n      });\n    },\n    setValue: function(value, initial) {\n      // Update the array's value, adding/removing rows when necessary\n      value = value || [];\n      \n      if(!(Array.isArray(value))) value = [value];\n      \n      var serialized = JSON.stringify(value);\n      if(serialized === this.serialized) return;\n  \n      // Make sure value has between minItems and maxItems items in it\n      if(this.schema.minItems) {\n        while(value.length < this.schema.minItems) {\n          value.push(this.getItemInfo(value.length)[\"default\"]);\n        }\n      }\n      if(this.getMax() && value.length > this.getMax()) {\n        value = value.slice(0,this.getMax());\n      }\n  \n      var self = this;\n      $each(value,function(i,val) {\n        if(self.rows[i]) {\n          // TODO: don't set the row's value if it hasn't changed\n          self.rows[i].setValue(val,initial);\n        }\n        else if(self.row_cache[i]) {\n          self.rows[i] = self.row_cache[i];\n          self.rows[i].setValue(val,initial);\n          self.rows[i].container.style.display = '';\n          if(self.rows[i].tab) self.rows[i].tab.style.display = '';\n          self.rows[i].register();\n        }\n        else {\n          self.addRow(val,initial);\n        }\n      });\n  \n      for(var j=value.length; j<self.rows.length; j++) {\n        self.destroyRow(self.rows[j]);\n        self.rows[j] = null;\n      }\n      self.rows = self.rows.slice(0,value.length);\n  \n      // Set the active tab\n      var new_active_tab = null;\n      $each(self.rows, function(i,row) {\n        if(row.tab === self.active_tab) {\n          new_active_tab = row.tab;\n          return false;\n        }\n      });\n      if(!new_active_tab && self.rows.length) new_active_tab = self.rows[0].tab;\n  \n      self.active_tab = new_active_tab;\n  \n      self.refreshValue(initial);\n      self.refreshTabs(true);\n      self.refreshTabs();\n  \n      self.onChange();\n      \n      // TODO: sortable\n    },\n    refreshValue: function(force) {\n      var self = this;\n      var oldi = this.value? this.value.length : 0;\n      this.value = [];\n  \n      $each(this.rows,function(i,editor) {\n        // Get the value for this editor\n        self.value[i] = editor.getValue();\n      });\n      \n      if(oldi !== this.value.length || force) {\n        // If we currently have minItems items in the array\n        var minItems = this.schema.minItems && this.schema.minItems >= this.rows.length;\n        \n        $each(this.rows,function(i,editor) {\n          // Hide the move down button for the last row\n          if(editor.movedown_button) {\n            if(i === self.rows.length - 1) {\n              editor.movedown_button.style.display = 'none';\n            }\n            else {\n              editor.movedown_button.style.display = '';\n            }\n          }\n  \n          // Hide the delete button if we have minItems items\n          if(editor.delete_button) {\n            if(minItems) {\n              editor.delete_button.style.display = 'none';\n            }\n            else {\n              editor.delete_button.style.display = '';\n            }\n          }\n  \n          // Get the value for this editor\n          self.value[i] = editor.getValue();\n        });\n        \n        var controls_needed = false;\n        \n        if(!this.value.length) {\n          this.delete_last_row_button.style.display = 'none';\n          this.remove_all_rows_button.style.display = 'none';\n        }\n        else if(this.value.length === 1) {      \n          this.remove_all_rows_button.style.display = 'none';  \n  \n          // If there are minItems items in the array, or configured to hide the delete_last_row button, hide the delete button beneath the rows\n          if(minItems || this.hide_delete_last_row_buttons) {\n            this.delete_last_row_button.style.display = 'none';\n          }\n          else {\n            this.delete_last_row_button.style.display = '';\n            controls_needed = true;\n          }\n        }\n        else {\n          if(minItems || this.hide_delete_last_row_buttons) {\n            this.delete_last_row_button.style.display = 'none';\n          }\n          else {\n            this.delete_last_row_button.style.display = '';\n            controls_needed = true;\n          }\n  \n          if(minItems || this.hide_delete_all_rows_buttons) {\n            this.remove_all_rows_button.style.display = 'none';\n          }\n          else {\n            this.remove_all_rows_button.style.display = '';\n            controls_needed = true;\n          }\n        }\n  \n        // If there are maxItems in the array, hide the add button beneath the rows\n        if((this.getMax() && this.getMax() <= this.rows.length) || this.hide_add_button){\n          this.add_row_button.style.display = 'none';\n        }\n        else {\n          this.add_row_button.style.display = '';\n          controls_needed = true;\n        } \n        \n        if(!this.collapsed && controls_needed) {\n          this.controls.style.display = 'inline-block';\n        }\n        else {\n          this.controls.style.display = 'none';\n        }\n      }\n    },\n    addRow: function(value, initial) {\n      var self = this;\n      var i = this.rows.length;\n      \n      self.rows[i] = this.getElementEditor(i);\n      self.row_cache[i] = self.rows[i];\n  \n      if(self.tabs_holder) {\n        self.rows[i].tab_text = document.createElement('span');\n        self.rows[i].tab_text.textContent = self.rows[i].getHeaderText();\n        self.rows[i].tab = self.theme.getTab(self.rows[i].tab_text);\n        self.rows[i].tab.addEventListener('click', function(e) {\n          self.active_tab = self.rows[i].tab;\n          self.refreshTabs();\n          e.preventDefault();\n          e.stopPropagation();\n        });\n  \n        self.theme.addTab(self.tabs_holder, self.rows[i].tab);\n      }\n      \n      var controls_holder = self.rows[i].title_controls || self.rows[i].array_controls;\n      \n      // Buttons to delete row, move row up, and move row down\n      if(!self.hide_delete_buttons) {\n        self.rows[i].delete_button = this.getButton(self.getItemTitle(),'delete',this.translate('button_delete_row_title',[self.getItemTitle()]));\n        self.rows[i].delete_button.className += ' delete';\n        self.rows[i].delete_button.setAttribute('data-i',i);\n        self.rows[i].delete_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          var i = this.getAttribute('data-i')*1;\n  \n          var value = self.getValue();\n  \n          var newval = [];\n          var new_active_tab = null;\n          $each(value,function(j,row) {\n            if(j===i) {\n              // If the one we're deleting is the active tab\n              if(self.rows[j].tab === self.active_tab) {\n                // Make the next tab active if there is one\n                // Note: the next tab is going to be the current tab after deletion\n                if(self.rows[j+1]) new_active_tab = self.rows[j].tab;\n                // Otherwise, make the previous tab active if there is one\n                else if(j) new_active_tab = self.rows[j-1].tab;\n              }\n              \n              return; // If this is the one we're deleting\n            }\n            newval.push(row);\n          });\n          self.setValue(newval);\n          if(new_active_tab) {\n            self.active_tab = new_active_tab;\n            self.refreshTabs();\n          }\n  \n          self.onChange(true);\n        });\n        \n        if(controls_holder) {\n          controls_holder.appendChild(self.rows[i].delete_button);\n        }\n      }\n      \n      if(i && !self.hide_move_buttons) {\n        self.rows[i].moveup_button = this.getButton('','moveup',this.translate('button_move_up_title'));\n        self.rows[i].moveup_button.className += ' moveup';\n        self.rows[i].moveup_button.setAttribute('data-i',i);\n        self.rows[i].moveup_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          var i = this.getAttribute('data-i')*1;\n  \n          if(i<=0) return;\n          var rows = self.getValue();\n          var tmp = rows[i-1];\n          rows[i-1] = rows[i];\n          rows[i] = tmp;\n  \n          self.setValue(rows);\n          self.active_tab = self.rows[i-1].tab;\n          self.refreshTabs();\n  \n          self.onChange(true);\n        });\n        \n        if(controls_holder) {\n          controls_holder.appendChild(self.rows[i].moveup_button);\n        }\n      }\n      \n      if(!self.hide_move_buttons) {\n        self.rows[i].movedown_button = this.getButton('','movedown',this.translate('button_move_down_title'));\n        self.rows[i].movedown_button.className += ' movedown';\n        self.rows[i].movedown_button.setAttribute('data-i',i);\n        self.rows[i].movedown_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          var i = this.getAttribute('data-i')*1;\n  \n          var rows = self.getValue();\n          if(i>=rows.length-1) return;\n          var tmp = rows[i+1];\n          rows[i+1] = rows[i];\n          rows[i] = tmp;\n  \n          self.setValue(rows);\n          self.active_tab = self.rows[i+1].tab;\n          self.refreshTabs();\n          self.onChange(true);\n        });\n        \n        if(controls_holder) {\n          controls_holder.appendChild(self.rows[i].movedown_button);\n        }\n      }\n  \n      if(value) self.rows[i].setValue(value, initial);\n      self.refreshTabs();\n    },\n    addControls: function() {\n      var self = this;\n      \n      this.collapsed = false;\n      this.toggle_button = this.getButton('','collapse',this.translate('button_collapse'));\n      this.title_controls.appendChild(this.toggle_button);\n      var row_holder_display = self.row_holder.style.display;\n      var controls_display = self.controls.style.display;\n      this.toggle_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        if(self.collapsed) {\n          self.collapsed = false;\n          if(self.panel) self.panel.style.display = '';\n          self.row_holder.style.display = row_holder_display;\n          if(self.tabs_holder) self.tabs_holder.style.display = '';\n          self.controls.style.display = controls_display;\n          self.setButtonText(this,'','collapse',self.translate('button_collapse'));\n        }\n        else {\n          self.collapsed = true;\n          self.row_holder.style.display = 'none';\n          if(self.tabs_holder) self.tabs_holder.style.display = 'none';\n          self.controls.style.display = 'none';\n          if(self.panel) self.panel.style.display = 'none';\n          self.setButtonText(this,'','expand',self.translate('button_expand'));\n        }\n      });\n  \n      // If it should start collapsed\n      if(this.options.collapsed) {\n        $trigger(this.toggle_button,'click');\n      }\n      \n      // Collapse button disabled\n      if(this.schema.options && typeof this.schema.options.disable_collapse !== \"undefined\") {\n        if(this.schema.options.disable_collapse) this.toggle_button.style.display = 'none';\n      }\n      else if(this.jsoneditor.options.disable_collapse) {\n        this.toggle_button.style.display = 'none';\n      }\n      \n      // Add \"new row\" and \"delete last\" buttons below editor\n      this.add_row_button = this.getButton(this.getItemTitle(),'add',this.translate('button_add_row_title',[this.getItemTitle()]));\n      \n      this.add_row_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        var i = self.rows.length;\n        if(self.row_cache[i]) {\n          self.rows[i] = self.row_cache[i];\n          self.rows[i].setValue(self.rows[i].getDefault(), true);\n          self.rows[i].container.style.display = '';\n          if(self.rows[i].tab) self.rows[i].tab.style.display = '';\n          self.rows[i].register();\n        }\n        else {\n          self.addRow();\n        }\n        self.active_tab = self.rows[i].tab;\n        self.refreshTabs();\n        self.refreshValue();\n        self.onChange(true);\n      });\n      self.controls.appendChild(this.add_row_button);\n  \n      this.delete_last_row_button = this.getButton(this.translate('button_delete_last',[this.getItemTitle()]),'delete',this.translate('button_delete_last_title',[this.getItemTitle()]));\n      this.delete_last_row_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        var rows = self.getValue();\n        \n        var new_active_tab = null;\n        if(self.rows.length > 1 && self.rows[self.rows.length-1].tab === self.active_tab) new_active_tab = self.rows[self.rows.length-2].tab;\n        \n        rows.pop();\n        self.setValue(rows);\n        if(new_active_tab) {\n          self.active_tab = new_active_tab;\n          self.refreshTabs();\n        }\n        self.onChange(true);\n      });\n      self.controls.appendChild(this.delete_last_row_button);\n  \n      this.remove_all_rows_button = this.getButton(this.translate('button_delete_all'),'delete',this.translate('button_delete_all_title'));\n      this.remove_all_rows_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        self.setValue([]);\n        self.onChange(true);\n      });\n      self.controls.appendChild(this.remove_all_rows_button);\n  \n      if(self.tabs) {\n        this.add_row_button.style.width = '100%';\n        this.add_row_button.style.textAlign = 'left';\n        this.add_row_button.style.marginBottom = '3px';\n        \n        this.delete_last_row_button.style.width = '100%';\n        this.delete_last_row_button.style.textAlign = 'left';\n        this.delete_last_row_button.style.marginBottom = '3px';\n        \n        this.remove_all_rows_button.style.width = '100%';\n        this.remove_all_rows_button.style.textAlign = 'left';\n        this.remove_all_rows_button.style.marginBottom = '3px';\n      }\n    },\n    showValidationErrors: function(errors) {\n      var self = this;\n  \n      // Get all the errors that pertain to this editor\n      var my_errors = [];\n      var other_errors = [];\n      $each(errors, function(i,error) {\n        if(error.path === self.path) {\n          my_errors.push(error);\n        }\n        else {\n          other_errors.push(error);\n        }\n      });\n  \n      // Show errors for this editor\n      if(this.error_holder) {\n        if(my_errors.length) {\n          var message = [];\n          this.error_holder.innerHTML = '';\n          this.error_holder.style.display = '';\n          $each(my_errors, function(i,error) {\n            self.error_holder.appendChild(self.theme.getErrorMessage(error.message));\n          });\n        }\n        // Hide error area\n        else {\n          this.error_holder.style.display = 'none';\n        }\n      }\n  \n      // Show errors for child editors\n      $each(this.rows, function(i,row) {\n        row.showValidationErrors(other_errors);\n      });\n    }\n  });\n  \n  JSONEditor.defaults.editors.table = JSONEditor.defaults.editors.array.extend({\n    register: function() {\n      this._super();\n      if(this.rows) {\n        for(var i=0; i<this.rows.length; i++) {\n          this.rows[i].register();\n        }\n      }\n    },\n    unregister: function() {\n      this._super();\n      if(this.rows) {\n        for(var i=0; i<this.rows.length; i++) {\n          this.rows[i].unregister();\n        }\n      }\n    },\n    getNumColumns: function() {\n      return Math.max(Math.min(12,this.width),3);\n    },\n    preBuild: function() {\n      var item_schema = this.jsoneditor.expandRefs(this.schema.items || {});\n  \n      this.item_title = item_schema.title || 'row';\n      this.item_default = item_schema[\"default\"] || null;\n      this.item_has_child_editors = item_schema.properties || item_schema.items;\n      this.width = 12;\n      this._super();\n    },\n    build: function() {\n      var self = this;\n      this.table = this.theme.getTable();\n      this.container.appendChild(this.table);\n      this.thead = this.theme.getTableHead();\n      this.table.appendChild(this.thead);\n      this.header_row = this.theme.getTableRow();\n      this.thead.appendChild(this.header_row);\n      this.row_holder = this.theme.getTableBody();\n      this.table.appendChild(this.row_holder);\n  \n      // Determine the default value of array element\n      var tmp = this.getElementEditor(0,true);\n      this.item_default = tmp.getDefault();\n      this.width = tmp.getNumColumns() + 2;\n  \n      if(!this.options.compact) {\n        this.title = this.theme.getHeader(this.getTitle());\n        this.container.appendChild(this.title);\n        this.title_controls = this.theme.getHeaderButtonHolder();\n        this.title.appendChild(this.title_controls);\n        if(this.schema.description) {\n          this.description = this.theme.getDescription(this.schema.description);\n          this.container.appendChild(this.description);\n        }\n        this.panel = this.theme.getIndentedPanel();\n        this.container.appendChild(this.panel);\n        this.error_holder = document.createElement('div');\n        this.panel.appendChild(this.error_holder);\n      }\n      else {\n        this.panel = document.createElement('div');\n        this.container.appendChild(this.panel);\n      }\n  \n      this.panel.appendChild(this.table);\n      this.controls = this.theme.getButtonHolder();\n      this.panel.appendChild(this.controls);\n  \n      if(this.item_has_child_editors) {\n        var ce = tmp.getChildEditors();\n        var order = tmp.property_order || Object.keys(ce);\n        for(var i=0; i<order.length; i++) {\n          var th = self.theme.getTableHeaderCell(ce[order[i]].getTitle());\n          if(ce[order[i]].options.hidden) th.style.display = 'none';\n          self.header_row.appendChild(th);\n        }\n      }\n      else {\n        self.header_row.appendChild(self.theme.getTableHeaderCell(this.item_title));\n      }\n  \n      tmp.destroy();\n      this.row_holder.innerHTML = '';\n  \n      // Row Controls column\n      this.controls_header_cell = self.theme.getTableHeaderCell(\" \");\n      self.header_row.appendChild(this.controls_header_cell);\n  \n      // Add controls\n      this.addControls();\n    },\n    onChildEditorChange: function(editor) {\n      this.refreshValue();\n      this._super();\n    },\n    getItemDefault: function() {\n      return $extend({},{\"default\":this.item_default})[\"default\"];\n    },\n    getItemTitle: function() {\n      return this.item_title;\n    },\n    getElementEditor: function(i,ignore) {\n      var schema_copy = $extend({},this.schema.items);\n      var editor = this.jsoneditor.getEditorClass(schema_copy, this.jsoneditor);\n      var row = this.row_holder.appendChild(this.theme.getTableRow());\n      var holder = row;\n      if(!this.item_has_child_editors) {\n        holder = this.theme.getTableCell();\n        row.appendChild(holder);\n      }\n  \n      var ret = this.jsoneditor.createEditor(editor,{\n        jsoneditor: this.jsoneditor,\n        schema: schema_copy,\n        container: holder,\n        path: this.path+'.'+i,\n        parent: this,\n        compact: true,\n        table_row: true\n      });\n  \n      ret.preBuild();\n      if(!ignore) {\n        ret.build();\n        ret.postBuild();\n  \n        ret.controls_cell = row.appendChild(this.theme.getTableCell());\n        ret.row = row;\n        ret.table_controls = this.theme.getButtonHolder();\n        ret.controls_cell.appendChild(ret.table_controls);\n        ret.table_controls.style.margin = 0;\n        ret.table_controls.style.padding = 0;\n      }\n  \n      return ret;\n    },\n    destroy: function() {\n      this.innerHTML = '';\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n      if(this.row_holder && this.row_holder.parentNode) this.row_holder.parentNode.removeChild(this.row_holder);\n      if(this.table && this.table.parentNode) this.table.parentNode.removeChild(this.table);\n      if(this.panel && this.panel.parentNode) this.panel.parentNode.removeChild(this.panel);\n  \n      this.rows = this.title = this.description = this.row_holder = this.table = this.panel = null;\n  \n      this._super();\n    },\n    setValue: function(value, initial) {\n      // Update the array's value, adding/removing rows when necessary\n      value = value || [];\n  \n      // Make sure value has between minItems and maxItems items in it\n      if(this.schema.minItems) {\n        while(value.length < this.schema.minItems) {\n          value.push(this.getItemDefault());\n        }\n      }\n      if(this.schema.maxItems && value.length > this.schema.maxItems) {\n        value = value.slice(0,this.schema.maxItems);\n      }\n  \n      var serialized = JSON.stringify(value);\n      if(serialized === this.serialized) return;\n  \n      var numrows_changed = false;\n  \n      var self = this;\n      $each(value,function(i,val) {\n        if(self.rows[i]) {\n          // TODO: don't set the row's value if it hasn't changed\n          self.rows[i].setValue(val);\n        }\n        else {\n          self.addRow(val);\n          numrows_changed = true;\n        }\n      });\n  \n      for(var j=value.length; j<self.rows.length; j++) {\n        var holder = self.rows[j].container;\n        if(!self.item_has_child_editors) {\n          self.rows[j].row.parentNode.removeChild(self.rows[j].row);\n        }\n        self.rows[j].destroy();\n        if(holder.parentNode) holder.parentNode.removeChild(holder);\n        self.rows[j] = null;\n        numrows_changed = true;\n      }\n      self.rows = self.rows.slice(0,value.length);\n  \n      self.refreshValue();\n      if(numrows_changed || initial) self.refreshRowButtons();\n  \n      self.onChange();\n  \n      // TODO: sortable\n    },\n    refreshRowButtons: function() {\n      var self = this;\n  \n      // If we currently have minItems items in the array\n      var minItems = this.schema.minItems && this.schema.minItems >= this.rows.length;\n  \n      var need_row_buttons = false;\n      $each(this.rows,function(i,editor) {\n        // Hide the move down button for the last row\n        if(editor.movedown_button) {\n          if(i === self.rows.length - 1) {\n            editor.movedown_button.style.display = 'none';\n          }\n          else {\n            need_row_buttons = true;\n            editor.movedown_button.style.display = '';\n          }\n        }\n  \n        // Hide the delete button if we have minItems items\n        if(editor.delete_button) {\n          if(minItems) {\n            editor.delete_button.style.display = 'none';\n          }\n          else {\n            need_row_buttons = true;\n            editor.delete_button.style.display = '';\n          }\n        }\n  \n        if(editor.moveup_button) {\n          need_row_buttons = true;\n        }\n      });\n  \n      // Show/hide controls column in table\n      $each(this.rows,function(i,editor) {\n        if(need_row_buttons) {\n          editor.controls_cell.style.display = '';\n        }\n        else {\n          editor.controls_cell.style.display = 'none';\n        }\n      });\n      if(need_row_buttons) {\n        this.controls_header_cell.style.display = '';\n      }\n      else {\n        this.controls_header_cell.style.display = 'none';\n      }\n  \n      var controls_needed = false;\n  \n      if(!this.value.length) {\n        this.delete_last_row_button.style.display = 'none';\n        this.remove_all_rows_button.style.display = 'none';\n        this.table.style.display = 'none';\n      }\n      else if(this.value.length === 1) {\n        this.table.style.display = '';\n        this.remove_all_rows_button.style.display = 'none';\n  \n        // If there are minItems items in the array, or configured to hide the delete_last_row button, hide the delete button beneath the rows\n        if(minItems || this.hide_delete_last_row_buttons) {\n          this.delete_last_row_button.style.display = 'none';\n        }\n        else {\n          this.delete_last_row_button.style.display = '';\n          controls_needed = true;\n        }\n      }\n      else {\n        this.table.style.display = '';\n  \n        if(minItems || this.hide_delete_last_row_buttons) {\n          this.delete_last_row_button.style.display = 'none';\n        }\n        else {\n          this.delete_last_row_button.style.display = '';\n          controls_needed = true;\n        }\n  \n        if(minItems || this.hide_delete_all_rows_buttons) {\n          this.remove_all_rows_button.style.display = 'none';\n        }\n        else {\n          this.remove_all_rows_button.style.display = '';\n          controls_needed = true;\n        }\n      }\n  \n      // If there are maxItems in the array, hide the add button beneath the rows\n      if((this.schema.maxItems && this.schema.maxItems <= this.rows.length) || this.hide_add_button) {\n        this.add_row_button.style.display = 'none';\n      }\n      else {\n        this.add_row_button.style.display = '';\n        controls_needed = true;\n      }\n  \n      if(!controls_needed) {\n        this.controls.style.display = 'none';\n      }\n      else {\n        this.controls.style.display = '';\n      }\n    },\n    refreshValue: function() {\n      var self = this;\n      this.value = [];\n  \n      $each(this.rows,function(i,editor) {\n        // Get the value for this editor\n        self.value[i] = editor.getValue();\n      });\n      this.serialized = JSON.stringify(this.value);\n    },\n    addRow: function(value) {\n      var self = this;\n      var i = this.rows.length;\n  \n      self.rows[i] = this.getElementEditor(i);\n  \n      var controls_holder = self.rows[i].table_controls;\n  \n      // Buttons to delete row, move row up, and move row down\n      if(!this.hide_delete_buttons) {\n        self.rows[i].delete_button = this.getButton('','delete',this.translate('button_delete_row_title_short'));\n        self.rows[i].delete_button.className += ' delete';\n        self.rows[i].delete_button.setAttribute('data-i',i);\n        self.rows[i].delete_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          var i = this.getAttribute('data-i')*1;\n  \n          var value = self.getValue();\n  \n          var newval = [];\n          $each(value,function(j,row) {\n            if(j===i) return; // If this is the one we're deleting\n            newval.push(row);\n          });\n          self.setValue(newval);\n          self.onChange(true);\n        });\n        controls_holder.appendChild(self.rows[i].delete_button);\n      }\n  \n  \n      if(i && !this.hide_move_buttons) {\n        self.rows[i].moveup_button = this.getButton('','moveup',this.translate('button_move_up_title'));\n        self.rows[i].moveup_button.className += ' moveup';\n        self.rows[i].moveup_button.setAttribute('data-i',i);\n        self.rows[i].moveup_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          var i = this.getAttribute('data-i')*1;\n  \n          if(i<=0) return;\n          var rows = self.getValue();\n          var tmp = rows[i-1];\n          rows[i-1] = rows[i];\n          rows[i] = tmp;\n  \n          self.setValue(rows);\n          self.onChange(true);\n        });\n        controls_holder.appendChild(self.rows[i].moveup_button);\n      }\n  \n      if(!this.hide_move_buttons) {\n        self.rows[i].movedown_button = this.getButton('','movedown',this.translate('button_move_down_title'));\n        self.rows[i].movedown_button.className += ' movedown';\n        self.rows[i].movedown_button.setAttribute('data-i',i);\n        self.rows[i].movedown_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          var i = this.getAttribute('data-i')*1;\n          var rows = self.getValue();\n          if(i>=rows.length-1) return;\n          var tmp = rows[i+1];\n          rows[i+1] = rows[i];\n          rows[i] = tmp;\n  \n          self.setValue(rows);\n          self.onChange(true);\n        });\n        controls_holder.appendChild(self.rows[i].movedown_button);\n      }\n  \n      if(value) self.rows[i].setValue(value);\n    },\n    addControls: function() {\n      var self = this;\n  \n      this.collapsed = false;\n      this.toggle_button = this.getButton('','collapse',this.translate('button_collapse'));\n      if(this.title_controls) {\n        this.title_controls.appendChild(this.toggle_button);\n        this.toggle_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n  \n          if(self.collapsed) {\n            self.collapsed = false;\n            self.panel.style.display = '';\n            self.setButtonText(this,'','collapse',self.translate('button_collapse'));\n          }\n          else {\n            self.collapsed = true;\n            self.panel.style.display = 'none';\n            self.setButtonText(this,'','expand',self.translate('button_expand'));\n          }\n        });\n  \n        // If it should start collapsed\n        if(this.options.collapsed) {\n          $trigger(this.toggle_button,'click');\n        }\n  \n        // Collapse button disabled\n        if(this.schema.options && typeof this.schema.options.disable_collapse !== \"undefined\") {\n          if(this.schema.options.disable_collapse) this.toggle_button.style.display = 'none';\n        }\n        else if(this.jsoneditor.options.disable_collapse) {\n          this.toggle_button.style.display = 'none';\n        }\n      }\n  \n      // Add \"new row\" and \"delete last\" buttons below editor\n      this.add_row_button = this.getButton(this.getItemTitle(),'add',this.translate('button_add_row_title',[this.getItemTitle()]));\n      this.add_row_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n  \n        self.addRow();\n        self.refreshValue();\n        self.refreshRowButtons();\n        self.onChange(true);\n      });\n      self.controls.appendChild(this.add_row_button);\n  \n      this.delete_last_row_button = this.getButton(this.translate('button_delete_last',[this.getItemTitle()]),'delete',this.translate('button_delete_last_title',[this.getItemTitle()]));\n      this.delete_last_row_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n  \n        var rows = self.getValue();\n        rows.pop();\n        self.setValue(rows);\n        self.onChange(true);\n      });\n      self.controls.appendChild(this.delete_last_row_button);\n  \n      this.remove_all_rows_button = this.getButton(this.translate('button_delete_all'),'delete',this.translate('button_delete_all_title'));\n      this.remove_all_rows_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n  \n        self.setValue([]);\n        self.onChange(true);\n      });\n      self.controls.appendChild(this.remove_all_rows_button);\n    }\n  });\n  \n  // Multiple Editor (for when `type` is an array)\n  JSONEditor.defaults.editors.multiple = JSONEditor.AbstractEditor.extend({\n    register: function() {\n      if(this.editors) {\n        for(var i=0; i<this.editors.length; i++) {\n          if(!this.editors[i]) continue;\n          this.editors[i].unregister();\n        }\n        if(this.editors[this.type]) this.editors[this.type].register();\n      }\n      this._super();\n    },\n    unregister: function() {\n      this._super();\n      if(this.editors) {\n        for(var i=0; i<this.editors.length; i++) {\n          if(!this.editors[i]) continue;\n          this.editors[i].unregister();\n        }\n      }\n    },\n    getNumColumns: function() {\n      if(!this.editors[this.type]) return 4;\n      return Math.max(this.editors[this.type].getNumColumns(),4);\n    },\n    enable: function() {\n      if(this.editors) {\n        for(var i=0; i<this.editors.length; i++) {\n          if(!this.editors[i]) continue;\n          this.editors[i].enable();\n        }\n      }\n      this.switcher.disabled = false;\n      this._super();\n    },\n    disable: function() {\n      if(this.editors) {\n        for(var i=0; i<this.editors.length; i++) {\n          if(!this.editors[i]) continue;\n          this.editors[i].disable();\n        }\n      }\n      this.switcher.disabled = true;\n      this._super();\n    },\n    switchEditor: function(i) {\n      var self = this;\n  \n      if(!this.editors[i]) {\n        this.buildChildEditor(i);\n      }\n      \n      var current_value = self.getValue();\n  \n      self.type = i;\n  \n      self.register();\n  \n      $each(self.editors,function(type,editor) {\n        if(!editor) return;\n        if(self.type === type) {\n          if(self.keep_values) editor.setValue(current_value,true);\n          editor.container.style.display = '';\n        }\n        else editor.container.style.display = 'none';\n      });\n      self.refreshValue();\n      self.refreshHeaderText();\n    },\n    buildChildEditor: function(i) {\n      var self = this;\n      var type = this.types[i];\n      var holder = self.theme.getChildEditorHolder();\n      self.editor_holder.appendChild(holder);\n  \n      var schema;\n  \n      if(typeof type === \"string\") {\n        schema = $extend({},self.schema);\n        schema.type = type;\n      }\n      else {\n        schema = $extend({},self.schema,type);\n        schema = self.jsoneditor.expandRefs(schema);\n  \n        // If we need to merge `required` arrays\n        if(type.required && Array.isArray(type.required) && self.schema.required && Array.isArray(self.schema.required)) {\n          schema.required = self.schema.required.concat(type.required);\n        }\n      }\n  \n      var editor = self.jsoneditor.getEditorClass(schema);\n  \n      self.editors[i] = self.jsoneditor.createEditor(editor,{\n        jsoneditor: self.jsoneditor,\n        schema: schema,\n        container: holder,\n        path: self.path,\n        parent: self,\n        required: true\n      });\n      self.editors[i].preBuild();\n      self.editors[i].build();\n      self.editors[i].postBuild();\n  \n      if(self.editors[i].header) self.editors[i].header.style.display = 'none';\n  \n      self.editors[i].option = self.switcher_options[i];\n  \n      holder.addEventListener('change_header_text',function() {\n        self.refreshHeaderText();\n      });\n  \n      if(i !== self.type) holder.style.display = 'none';\n    },\n    preBuild: function() {\n      var self = this;\n  \n      this.types = [];\n      this.type = 0;\n      this.editors = [];\n      this.validators = [];\n  \n      this.keep_values = true;\n      if(typeof this.jsoneditor.options.keep_oneof_values !== \"undefined\") this.keep_values = this.jsoneditor.options.keep_oneof_values;\n      if(typeof this.options.keep_oneof_values !== \"undefined\") this.keep_values = this.options.keep_oneof_values;\n  \n      if(this.schema.oneOf) {\n        this.oneOf = true;\n        this.types = this.schema.oneOf;\n        delete this.schema.oneOf;\n      }\n      else if(this.schema.anyOf) {\n        this.anyOf = true;\n        this.types = this.schema.anyOf;\n        delete this.schema.anyOf;\n      }\n      else {\n        if(!this.schema.type || this.schema.type === \"any\") {\n          this.types = ['string','number','integer','boolean','object','array','null'];\n  \n          // If any of these primitive types are disallowed\n          if(this.schema.disallow) {\n            var disallow = this.schema.disallow;\n            if(typeof disallow !== 'object' || !(Array.isArray(disallow))) {\n              disallow = [disallow];\n            }\n            var allowed_types = [];\n            $each(this.types,function(i,type) {\n              if(disallow.indexOf(type) === -1) allowed_types.push(type);\n            });\n            this.types = allowed_types;\n          }\n        }\n        else if(Array.isArray(this.schema.type)) {\n          this.types = this.schema.type;\n        }\n        else {\n          this.types = [this.schema.type];\n        }\n        delete this.schema.type;\n      }\n  \n      this.display_text = this.getDisplayText(this.types);\n    },\n    build: function() {\n      var self = this;\n      var container = this.container;\n  \n      this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n      this.container.appendChild(this.header);\n  \n      this.switcher = this.theme.getSwitcher(this.display_text);\n      container.appendChild(this.switcher);\n      this.switcher.addEventListener('change',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n  \n        self.switchEditor(self.display_text.indexOf(this.value));\n        self.onChange(true);\n      });\n  \n      this.editor_holder = document.createElement('div');\n      container.appendChild(this.editor_holder);\n      \n        \n      var validator_options = {};\n      if(self.jsoneditor.options.custom_validators) {\n        validator_options.custom_validators = self.jsoneditor.options.custom_validators;\n      }\n  \n      this.switcher_options = this.theme.getSwitcherOptions(this.switcher);\n      $each(this.types,function(i,type) {\n        self.editors[i] = false;\n  \n        var schema;\n  \n        if(typeof type === \"string\") {\n          schema = $extend({},self.schema);\n          schema.type = type;\n        }\n        else {\n          schema = $extend({},self.schema,type);\n  \n          // If we need to merge `required` arrays\n          if(type.required && Array.isArray(type.required) && self.schema.required && Array.isArray(self.schema.required)) {\n            schema.required = self.schema.required.concat(type.required);\n          }\n        }\n  \n        self.validators[i] = new JSONEditor.Validator(self.jsoneditor,schema,validator_options);\n      });\n  \n      this.switchEditor(0);\n    },\n    onChildEditorChange: function(editor) {\n      if(this.editors[this.type]) {\n        this.refreshValue();\n        this.refreshHeaderText();\n      }\n  \n      this._super();\n    },\n    refreshHeaderText: function() {\n      var display_text = this.getDisplayText(this.types);\n      $each(this.switcher_options, function(i,option) {\n        option.textContent = display_text[i];\n      });\n    },\n    refreshValue: function() {\n      this.value = this.editors[this.type].getValue();\n    },\n    setValue: function(val,initial) {\n      // Determine type by getting the first one that validates\n      var self = this;\n      $each(this.validators, function(i,validator) {\n        if(!validator.validate(val).length) {\n          self.type = i;\n          self.switcher.value = self.display_text[i];\n          return false;\n        }\n      });\n  \n      this.switchEditor(this.type);\n  \n      this.editors[this.type].setValue(val,initial);\n  \n      this.refreshValue();\n      self.onChange();\n    },\n    destroy: function() {\n      $each(this.editors, function(type,editor) {\n        if(editor) editor.destroy();\n      });\n      if(this.editor_holder && this.editor_holder.parentNode) this.editor_holder.parentNode.removeChild(this.editor_holder);\n      if(this.switcher && this.switcher.parentNode) this.switcher.parentNode.removeChild(this.switcher);\n      this._super();\n    },\n    showValidationErrors: function(errors) {\n      var self = this;\n  \n      // oneOf and anyOf error paths need to remove the oneOf[i] part before passing to child editors\n      if(this.oneOf || this.anyOf) {\n        var check_part = this.oneOf? 'oneOf' : 'anyOf';\n        $each(this.editors,function(i,editor) {\n          if(!editor) return;\n          var check = self.path+'.'+check_part+'['+i+']';\n          var new_errors = [];\n          $each(errors, function(j,error) {\n            if(error.path.substr(0,check.length)===check) {\n              var new_error = $extend({},error);\n              new_error.path = self.path+new_error.path.substr(check.length);\n              new_errors.push(new_error);\n            }\n          });\n  \n          editor.showValidationErrors(new_errors);\n        });\n      }\n      else {\n        $each(this.editors,function(type,editor) {\n          if(!editor) return;\n          editor.showValidationErrors(errors);\n        });\n      }\n    }\n  });\n  \n  // Enum Editor (used for objects and arrays with enumerated values)\n  JSONEditor.defaults.editors[\"enum\"] = JSONEditor.AbstractEditor.extend({\n    getNumColumns: function() {\n      return 4;\n    },\n    build: function() {\n      var container = this.container;\n      this.title = this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n      this.container.appendChild(this.title);\n  \n      this.options.enum_titles = this.options.enum_titles || [];\n  \n      this[\"enum\"] = this.schema[\"enum\"];\n      this.selected = 0;\n      this.select_options = [];\n      this.html_values = [];\n  \n      var self = this;\n      for(var i=0; i<this[\"enum\"].length; i++) {\n        this.select_options[i] = this.options.enum_titles[i] || \"Value \"+(i+1);\n        this.html_values[i] = this.getHTML(this[\"enum\"][i]);\n      }\n  \n      // Switcher\n      this.switcher = this.theme.getSwitcher(this.select_options);\n      this.container.appendChild(this.switcher);\n  \n      // Display area\n      this.display_area = this.theme.getIndentedPanel();\n      this.container.appendChild(this.display_area);\n  \n      if(this.options.hide_display) this.display_area.style.display = \"none\";\n  \n      this.switcher.addEventListener('change',function() {\n        self.selected = self.select_options.indexOf(this.value);\n        self.value = self[\"enum\"][self.selected];\n        self.refreshValue();\n        self.onChange(true);\n      });\n      this.value = this[\"enum\"][0];\n      this.refreshValue();\n  \n      if(this[\"enum\"].length === 1) this.switcher.style.display = 'none';\n    },\n    refreshValue: function() {\n      var self = this;\n      self.selected = -1;\n      var stringified = JSON.stringify(this.value);\n      $each(this[\"enum\"], function(i, el) {\n        if(stringified === JSON.stringify(el)) {\n          self.selected = i;\n          return false;\n        }\n      });\n  \n      if(self.selected<0) {\n        self.setValue(self[\"enum\"][0]);\n        return;\n      }\n  \n      this.switcher.value = this.select_options[this.selected];\n      this.display_area.innerHTML = this.html_values[this.selected];\n    },\n    enable: function() {\n      if(!this.always_disabled) this.switcher.disabled = false;\n      this._super();\n    },\n    disable: function() {\n      this.switcher.disabled = true;\n      this._super();\n    },\n    getHTML: function(el) {\n      var self = this;\n  \n      if(el === null) {\n        return '<em>null</em>';\n      }\n      // Array or Object\n      else if(typeof el === \"object\") {\n        // TODO: use theme\n        var ret = '';\n  \n        $each(el,function(i,child) {\n          var html = self.getHTML(child);\n  \n          // Add the keys to object children\n          if(!(Array.isArray(el))) {\n            // TODO: use theme\n            html = '<div><em>'+i+'</em>: '+html+'</div>';\n          }\n  \n          // TODO: use theme\n          ret += '<li>'+html+'</li>';\n        });\n  \n        if(Array.isArray(el)) ret = '<ol>'+ret+'</ol>';\n        else ret = \"<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>\"+ret+'</ul>';\n  \n        return ret;\n      }\n      // Boolean\n      else if(typeof el === \"boolean\") {\n        return el? 'true' : 'false';\n      }\n      // String\n      else if(typeof el === \"string\") {\n        return el.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');\n      }\n      // Number\n      else {\n        return el;\n      }\n    },\n    setValue: function(val) {\n      if(this.value !== val) {\n        this.value = val;\n        this.refreshValue();\n        this.onChange();\n      }\n    },\n    destroy: function() {\n      if(this.display_area && this.display_area.parentNode) this.display_area.parentNode.removeChild(this.display_area);\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.switcher && this.switcher.parentNode) this.switcher.parentNode.removeChild(this.switcher);\n  \n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.select = JSONEditor.AbstractEditor.extend({\n    setValue: function(value,initial) {\n      value = this.typecast(value||'');\n  \n      // Sanitize value before setting it\n      var sanitized = value;\n      if(this.enum_values.indexOf(sanitized) < 0) {\n        sanitized = this.enum_values[0];\n      }\n  \n      if(this.value === sanitized) {\n        return;\n      }\n  \n      this.input.value = this.enum_options[this.enum_values.indexOf(sanitized)];\n      if(this.select2) this.select2.select2('val',this.input.value);\n      this.value = sanitized;\n      this.onChange();\n    },\n    register: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.setAttribute('name',this.formname);\n    },\n    unregister: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.removeAttribute('name');\n    },\n    getNumColumns: function() {\n      if(!this.enum_options) return 3;\n      var longest_text = this.getTitle().length;\n      for(var i=0; i<this.enum_options.length; i++) {\n        longest_text = Math.max(longest_text,this.enum_options[i].length+4);\n      }\n      return Math.min(12,Math.max(longest_text/7,2));\n    },\n    typecast: function(value) {\n      if(this.schema.type === \"boolean\") {\n        return !!value;\n      }\n      else if(this.schema.type === \"number\") {\n        return 1*value;\n      }\n      else if(this.schema.type === \"integer\") {\n        return Math.floor(value*1);\n      }\n      else {\n        return \"\"+value;\n      }\n    },\n    getValue: function() {\n      return this.value;\n    },\n    preBuild: function() {\n      var self = this;\n      this.input_type = 'select';\n      this.enum_options = [];\n      this.enum_values = [];\n      this.enum_display = [];\n      var i;\n  \n      // Enum options enumerated\n      if(this.schema[\"enum\"]) {\n        var display = this.schema.options && this.schema.options.enum_titles || [];\n        \n        $each(this.schema[\"enum\"],function(i,option) {\n          self.enum_options[i] = \"\"+option;\n          self.enum_display[i] = \"\"+(display[i] || option);\n          self.enum_values[i] = self.typecast(option);\n        });\n  \n        if(!this.isRequired()){\n          self.enum_display.unshift(' ');\n          self.enum_options.unshift('undefined');\n          self.enum_values.unshift(undefined);\n        }\n              \n      }\n      // Boolean\n      else if(this.schema.type === \"boolean\") {\n        self.enum_display = this.schema.options && this.schema.options.enum_titles || ['true','false'];\n        self.enum_options = ['1',''];\n        self.enum_values = [true,false];\n        \n        if(!this.isRequired()){\n          self.enum_display.unshift(' ');\n          self.enum_options.unshift('undefined');\n          self.enum_values.unshift(undefined);\n        }\n      \n      }\n      // Dynamic Enum\n      else if(this.schema.enumSource) {\n        this.enumSource = [];\n        this.enum_display = [];\n        this.enum_options = [];\n        this.enum_values = [];\n        \n        // Shortcut declaration for using a single array\n        if(!(Array.isArray(this.schema.enumSource))) {\n          if(this.schema.enumValue) {\n            this.enumSource = [\n              {\n                source: this.schema.enumSource,\n                value: this.schema.enumValue\n              }\n            ];\n          }\n          else {\n            this.enumSource = [\n              {\n                source: this.schema.enumSource\n              }\n            ];\n          }\n        }\n        else {\n          for(i=0; i<this.schema.enumSource.length; i++) {\n            // Shorthand for watched variable\n            if(typeof this.schema.enumSource[i] === \"string\") {\n              this.enumSource[i] = {\n                source: this.schema.enumSource[i]\n              };\n            }\n            // Make a copy of the schema\n            else if(!(Array.isArray(this.schema.enumSource[i]))) {\n              this.enumSource[i] = $extend({},this.schema.enumSource[i]);\n            }\n            else {\n              this.enumSource[i] = this.schema.enumSource[i];\n            }\n          }\n        }\n        \n        // Now, enumSource is an array of sources\n        // Walk through this array and fix up the values\n        for(i=0; i<this.enumSource.length; i++) {\n          if(this.enumSource[i].value) {\n            this.enumSource[i].value = this.jsoneditor.compileTemplate(this.enumSource[i].value, this.template_engine);\n          }\n          if(this.enumSource[i].title) {\n            this.enumSource[i].title = this.jsoneditor.compileTemplate(this.enumSource[i].title, this.template_engine);\n          }\n          if(this.enumSource[i].filter) {\n            this.enumSource[i].filter = this.jsoneditor.compileTemplate(this.enumSource[i].filter, this.template_engine);\n          }\n        }\n      }\n      // Other, not supported\n      else {\n        throw \"'select' editor requires the enum property to be set.\";\n      }\n    },\n    build: function() {\n      var self = this;\n      if(!this.options.compact) this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n      if(this.schema.description) this.description = this.theme.getFormInputDescription(this.schema.description);\n  \n      if(this.options.compact) this.container.className += ' compact';\n  \n      this.input = this.theme.getSelectInput(this.enum_options);\n      this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display);\n  \n      if(this.schema.readOnly || this.schema.readonly) {\n        this.always_disabled = true;\n        this.input.disabled = true;\n      }\n  \n      this.input.addEventListener('change',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        self.onInputChange();\n      });\n  \n      this.control = this.theme.getFormControl(this.label, this.input, this.description);\n      this.container.appendChild(this.control);\n  \n      this.value = this.enum_values[0];\n    },\n    onInputChange: function() {\n      var val = this.input.value;\n  \n      var new_val;\n      // Invalid option, use first option instead\n      if(this.enum_options.indexOf(val) === -1) {\n        new_val = this.enum_values[0];\n      }\n      else {\n        new_val = this.enum_values[this.enum_options.indexOf(val)];\n      }\n  \n      // If valid hasn't changed\n      if(new_val === this.value) return;\n  \n      // Store new value and propogate change event\n      this.value = new_val;\n      this.onChange(true);\n    },\n    setupSelect2: function() {\n      // If the Select2 library is loaded use it when we have lots of items\n      if(window.jQuery && window.jQuery.fn && window.jQuery.fn.select2 && (this.enum_options.length > 2 || (this.enum_options.length && this.enumSource))) {\n        var options = $extend({},JSONEditor.plugins.select2);\n        if(this.schema.options && this.schema.options.select2_options) options = $extend(options,this.schema.options.select2_options);\n        this.select2 = window.jQuery(this.input).select2(options);\n        var self = this;\n        this.select2.on('select2-blur',function() {\n          self.input.value = self.select2.select2('val');\n          self.onInputChange();\n        });\n        this.select2.on('change',function() {\n          self.input.value = self.select2.select2('val');\n          self.onInputChange();\n        });\n      }\n      else {\n        this.select2 = null;\n      }\n    },\n    postBuild: function() {\n      this._super();\n      this.theme.afterInputReady(this.input);\n      this.setupSelect2();\n    },\n    onWatchedFieldChange: function() {\n      var self = this, vars, j;\n      \n      // If this editor uses a dynamic select box\n      if(this.enumSource) {\n        vars = this.getWatchedFieldValues();\n        var select_options = [];\n        var select_titles = [];\n        \n        for(var i=0; i<this.enumSource.length; i++) {\n          // Constant values\n          if(Array.isArray(this.enumSource[i])) {\n            select_options = select_options.concat(this.enumSource[i]);\n            select_titles = select_titles.concat(this.enumSource[i]);\n          }\n          else {\n            var items = [];\n            // Static list of items\n            if(Array.isArray(this.enumSource[i].source)) {\n              items = this.enumSource[i].source;\n            // A watched field\n            } else {\n              items = vars[this.enumSource[i].source];\n            }\n            \n            if(items) {\n              // Only use a predefined part of the array\n              if(this.enumSource[i].slice) {\n                items = Array.prototype.slice.apply(items,this.enumSource[i].slice);\n              }\n              // Filter the items\n              if(this.enumSource[i].filter) {\n                var new_items = [];\n                for(j=0; j<items.length; j++) {\n                  if(this.enumSource[i].filter({i:j,item:items[j],watched:vars})) new_items.push(items[j]);\n                }\n                items = new_items;\n              }\n              \n              var item_titles = [];\n              var item_values = [];\n              for(j=0; j<items.length; j++) {\n                var item = items[j];\n                \n                // Rendered value\n                if(this.enumSource[i].value) {\n                  item_values[j] = this.enumSource[i].value({\n                    i: j,\n                    item: item\n                  });\n                }\n                // Use value directly\n                else {\n                  item_values[j] = items[j];\n                }\n                \n                // Rendered title\n                if(this.enumSource[i].title) {\n                  item_titles[j] = this.enumSource[i].title({\n                    i: j,\n                    item: item\n                  });\n                }\n                // Use value as the title also\n                else {\n                  item_titles[j] = item_values[j];\n                }\n              }\n              \n              // TODO: sort\n              \n              select_options = select_options.concat(item_values);\n              select_titles = select_titles.concat(item_titles);\n            }\n          }\n        }\n        \n        var prev_value = this.value;\n        \n        this.theme.setSelectOptions(this.input, select_options, select_titles);\n        this.enum_options = select_options;\n        this.enum_display = select_titles;\n        this.enum_values = select_options;\n        \n        if(this.select2) {\n          this.select2.select2('destroy');\n        }\n        \n        // If the previous value is still in the new select options, stick with it\n        if(select_options.indexOf(prev_value) !== -1) {\n          this.input.value = prev_value;\n          this.value = prev_value;\n        }\n        // Otherwise, set the value to the first select option\n        else {\n          this.input.value = select_options[0];\n          this.value = select_options[0] || \"\";  \n          if(this.parent) this.parent.onChildEditorChange(this);\n          else this.jsoneditor.onChange();\n          this.jsoneditor.notifyWatchers(this.path);\n        }\n        \n        this.setupSelect2();\n      }\n  \n      this._super();\n    },\n    enable: function() {\n      if(!this.always_disabled) {\n        this.input.disabled = false;\n        if(this.select2) this.select2.select2(\"enable\",true);\n      }\n      this._super();\n    },\n    disable: function() {\n      this.input.disabled = true;\n      if(this.select2) this.select2.select2(\"enable\",false);\n      this._super();\n    },\n    destroy: function() {\n      if(this.label && this.label.parentNode) this.label.parentNode.removeChild(this.label);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n      if(this.select2) {\n        this.select2.select2('destroy');\n        this.select2 = null;\n      }\n  \n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.selectize = JSONEditor.AbstractEditor.extend({\n    setValue: function(value,initial) {\n      value = this.typecast(value||'');\n  \n      // Sanitize value before setting it\n      var sanitized = value;\n      if(this.enum_values.indexOf(sanitized) < 0) {\n        sanitized = this.enum_values[0];\n      }\n  \n      if(this.value === sanitized) {\n        return;\n      }\n  \n      this.input.value = this.enum_options[this.enum_values.indexOf(sanitized)];\n  \n      if(this.selectize) {\n        this.selectize[0].selectize.addItem(sanitized);\n      }\n  \n      this.value = sanitized;\n      this.onChange();\n    },\n    register: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.setAttribute('name',this.formname);\n    },\n    unregister: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.removeAttribute('name');\n    },\n    getNumColumns: function() {\n      if(!this.enum_options) return 3;\n      var longest_text = this.getTitle().length;\n      for(var i=0; i<this.enum_options.length; i++) {\n        longest_text = Math.max(longest_text,this.enum_options[i].length+4);\n      }\n      return Math.min(12,Math.max(longest_text/7,2));\n    },\n    typecast: function(value) {\n      if(this.schema.type === \"boolean\") {\n        return !!value;\n      }\n      else if(this.schema.type === \"number\") {\n        return 1*value;\n      }\n      else if(this.schema.type === \"integer\") {\n        return Math.floor(value*1);\n      }\n      else {\n        return \"\"+value;\n      }\n    },\n    getValue: function() {\n      return this.value;\n    },\n    preBuild: function() {\n      var self = this;\n      this.input_type = 'select';\n      this.enum_options = [];\n      this.enum_values = [];\n      this.enum_display = [];\n      var i;\n  \n      // Enum options enumerated\n      if(this.schema.enum) {\n        var display = this.schema.options && this.schema.options.enum_titles || [];\n  \n        $each(this.schema.enum,function(i,option) {\n          self.enum_options[i] = \"\"+option;\n          self.enum_display[i] = \"\"+(display[i] || option);\n          self.enum_values[i] = self.typecast(option);\n        });\n      }\n      // Boolean\n      else if(this.schema.type === \"boolean\") {\n        self.enum_display = this.schema.options && this.schema.options.enum_titles || ['true','false'];\n        self.enum_options = ['1','0'];\n        self.enum_values = [true,false];\n      }\n      // Dynamic Enum\n      else if(this.schema.enumSource) {\n        this.enumSource = [];\n        this.enum_display = [];\n        this.enum_options = [];\n        this.enum_values = [];\n  \n        // Shortcut declaration for using a single array\n        if(!(Array.isArray(this.schema.enumSource))) {\n          if(this.schema.enumValue) {\n            this.enumSource = [\n              {\n                source: this.schema.enumSource,\n                value: this.schema.enumValue\n              }\n            ];\n          }\n          else {\n            this.enumSource = [\n              {\n                source: this.schema.enumSource\n              }\n            ];\n          }\n        }\n        else {\n          for(i=0; i<this.schema.enumSource.length; i++) {\n            // Shorthand for watched variable\n            if(typeof this.schema.enumSource[i] === \"string\") {\n              this.enumSource[i] = {\n                source: this.schema.enumSource[i]\n              };\n            }\n            // Make a copy of the schema\n            else if(!(Array.isArray(this.schema.enumSource[i]))) {\n              this.enumSource[i] = $extend({},this.schema.enumSource[i]);\n            }\n            else {\n              this.enumSource[i] = this.schema.enumSource[i];\n            }\n          }\n        }\n  \n        // Now, enumSource is an array of sources\n        // Walk through this array and fix up the values\n        for(i=0; i<this.enumSource.length; i++) {\n          if(this.enumSource[i].value) {\n            this.enumSource[i].value = this.jsoneditor.compileTemplate(this.enumSource[i].value, this.template_engine);\n          }\n          if(this.enumSource[i].title) {\n            this.enumSource[i].title = this.jsoneditor.compileTemplate(this.enumSource[i].title, this.template_engine);\n          }\n          if(this.enumSource[i].filter) {\n            this.enumSource[i].filter = this.jsoneditor.compileTemplate(this.enumSource[i].filter, this.template_engine);\n          }\n        }\n      }\n      // Other, not supported\n      else {\n        throw \"'select' editor requires the enum property to be set.\";\n      }\n    },\n    build: function() {\n      var self = this;\n      if(!this.options.compact) this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n      if(this.schema.description) this.description = this.theme.getFormInputDescription(this.schema.description);\n  \n      if(this.options.compact) this.container.className += ' compact';\n  \n      this.input = this.theme.getSelectInput(this.enum_options);\n      this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display);\n  \n      if(this.schema.readOnly || this.schema.readonly) {\n        this.always_disabled = true;\n        this.input.disabled = true;\n      }\n  \n      this.input.addEventListener('change',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        self.onInputChange();\n      });\n  \n      this.control = this.theme.getFormControl(this.label, this.input, this.description);\n      this.container.appendChild(this.control);\n  \n      this.value = this.enum_values[0];\n    },\n    onInputChange: function() {\n      var val = this.input.value;\n  \n      var sanitized = val;\n      if(this.enum_options.indexOf(val) === -1) {\n        sanitized = this.enum_options[0];\n      }\n  \n      this.value = this.enum_values[this.enum_options.indexOf(val)];\n      this.onChange(true);\n    },\n    setupSelectize: function() {\n      // If the Selectize library is loaded use it when we have lots of items\n      var self = this;\n      if(window.jQuery && window.jQuery.fn && window.jQuery.fn.selectize && (this.enum_options.length >= 2 || (this.enum_options.length && this.enumSource))) {\n        var options = $extend({},JSONEditor.plugins.selectize);\n        if(this.schema.options && this.schema.options.selectize_options) options = $extend(options,this.schema.options.selectize_options);\n        this.selectize = window.jQuery(this.input).selectize($extend(options,\n        {\n          create: true,\n          onChange : function() {\n            self.onInputChange();\n          }\n        }));\n      }\n      else {\n        this.selectize = null;\n      }\n    },\n    postBuild: function() {\n      this._super();\n      this.theme.afterInputReady(this.input);\n      this.setupSelectize();\n    },\n    onWatchedFieldChange: function() {\n      var self = this, vars, j;\n  \n      // If this editor uses a dynamic select box\n      if(this.enumSource) {\n        vars = this.getWatchedFieldValues();\n        var select_options = [];\n        var select_titles = [];\n  \n        for(var i=0; i<this.enumSource.length; i++) {\n          // Constant values\n          if(Array.isArray(this.enumSource[i])) {\n            select_options = select_options.concat(this.enumSource[i]);\n            select_titles = select_titles.concat(this.enumSource[i]);\n          }\n          // A watched field\n          else if(vars[this.enumSource[i].source]) {\n            var items = vars[this.enumSource[i].source];\n  \n            // Only use a predefined part of the array\n            if(this.enumSource[i].slice) {\n              items = Array.prototype.slice.apply(items,this.enumSource[i].slice);\n            }\n            // Filter the items\n            if(this.enumSource[i].filter) {\n              var new_items = [];\n              for(j=0; j<items.length; j++) {\n                if(this.enumSource[i].filter({i:j,item:items[j]})) new_items.push(items[j]);\n              }\n              items = new_items;\n            }\n  \n            var item_titles = [];\n            var item_values = [];\n            for(j=0; j<items.length; j++) {\n              var item = items[j];\n  \n              // Rendered value\n              if(this.enumSource[i].value) {\n                item_values[j] = this.enumSource[i].value({\n                  i: j,\n                  item: item\n                });\n              }\n              // Use value directly\n              else {\n                item_values[j] = items[j];\n              }\n  \n              // Rendered title\n              if(this.enumSource[i].title) {\n                item_titles[j] = this.enumSource[i].title({\n                  i: j,\n                  item: item\n                });\n              }\n              // Use value as the title also\n              else {\n                item_titles[j] = item_values[j];\n              }\n            }\n  \n            // TODO: sort\n  \n            select_options = select_options.concat(item_values);\n            select_titles = select_titles.concat(item_titles);\n          }\n        }\n  \n        var prev_value = this.value;\n  \n        this.theme.setSelectOptions(this.input, select_options, select_titles);\n        this.enum_options = select_options;\n        this.enum_display = select_titles;\n        this.enum_values = select_options;\n  \n        // If the previous value is still in the new select options, stick with it\n        if(select_options.indexOf(prev_value) !== -1) {\n          this.input.value = prev_value;\n          this.value = prev_value;\n        }\n  \n        // Otherwise, set the value to the first select option\n        else {\n          this.input.value = select_options[0];\n          this.value = select_options[0] || \"\";\n          if(this.parent) this.parent.onChildEditorChange(this);\n          else this.jsoneditor.onChange();\n          this.jsoneditor.notifyWatchers(this.path);\n        }\n  \n        if(this.selectize) {\n          // Update the Selectize options\n          this.updateSelectizeOptions(select_options);\n        }\n        else {\n          this.setupSelectize();\n        }\n  \n        this._super();\n      }\n    },\n    updateSelectizeOptions: function(select_options) {\n      var selectized = this.selectize[0].selectize,\n          self = this;\n  \n      selectized.off();\n      selectized.clearOptions();\n      for(var n in select_options) {\n        selectized.addOption({value:select_options[n],text:select_options[n]});\n      }\n      selectized.addItem(this.value);\n      selectized.on('change',function() {\n        self.onInputChange();\n      });\n    },\n    enable: function() {\n      if(!this.always_disabled) {\n        this.input.disabled = false;\n        if(this.selectize) {\n          this.selectize[0].selectize.unlock();\n        }\n      }\n      this._super();\n    },\n    disable: function() {\n      this.input.disabled = true;\n      if(this.selectize) {\n        this.selectize[0].selectize.lock();\n      }\n      this._super();\n    },\n    destroy: function() {\n      if(this.label && this.label.parentNode) this.label.parentNode.removeChild(this.label);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n      if(this.selectize) {\n        this.selectize[0].selectize.destroy();\n        this.selectize = null;\n      }\n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.multiselect = JSONEditor.AbstractEditor.extend({\n    preBuild: function() {\n      this._super();\n      var i;\n  \n      this.select_options = {};\n      this.select_values = {};\n  \n      var items_schema = this.jsoneditor.expandRefs(this.schema.items || {});\n  \n      var e = items_schema[\"enum\"] || [];\n      var t = items_schema.options? items_schema.options.enum_titles || [] : [];\n      this.option_keys = [];\n      this.option_titles = [];\n      for(i=0; i<e.length; i++) {\n        // If the sanitized value is different from the enum value, don't include it\n        if(this.sanitize(e[i]) !== e[i]) continue;\n  \n        this.option_keys.push(e[i]+\"\");\n        this.option_titles.push((t[i]||e[i])+\"\");\n        this.select_values[e[i]+\"\"] = e[i];\n      }\n    },\n    build: function() {\n      var self = this, i;\n      if(!this.options.compact) this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n      if(this.schema.description) this.description = this.theme.getFormInputDescription(this.schema.description);\n  \n      if((!this.schema.format && this.option_keys.length < 8) || this.schema.format === \"checkbox\") {\n        this.input_type = 'checkboxes';\n  \n        this.inputs = {};\n        this.controls = {};\n        for(i=0; i<this.option_keys.length; i++) {\n          this.inputs[this.option_keys[i]] = this.theme.getCheckbox();\n          this.select_options[this.option_keys[i]] = this.inputs[this.option_keys[i]];\n          var label = this.theme.getCheckboxLabel(this.option_titles[i]);\n          this.controls[this.option_keys[i]] = this.theme.getFormControl(label, this.inputs[this.option_keys[i]]);\n        }\n  \n        this.control = this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description);\n      }\n      else {\n        this.input_type = 'select';\n        this.input = this.theme.getSelectInput(this.option_keys);\n        this.theme.setSelectOptions(this.input,this.option_keys,this.option_titles);\n        this.input.multiple = true;\n        this.input.size = Math.min(10,this.option_keys.length);\n  \n        for(i=0; i<this.option_keys.length; i++) {\n          this.select_options[this.option_keys[i]] = this.input.children[i];\n        }\n  \n        if(this.schema.readOnly || this.schema.readonly) {\n          this.always_disabled = true;\n          this.input.disabled = true;\n        }\n  \n        this.control = this.theme.getFormControl(this.label, this.input, this.description);\n      }\n  \n      this.container.appendChild(this.control);\n      this.control.addEventListener('change',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n  \n        var new_value = [];\n        for(i = 0; i<self.option_keys.length; i++) {\n          if(self.select_options[self.option_keys[i]].selected || self.select_options[self.option_keys[i]].checked) new_value.push(self.select_values[self.option_keys[i]]);\n        }\n  \n        self.updateValue(new_value);\n        self.onChange(true);\n      });\n    },\n    setValue: function(value, initial) {\n      var i;\n      value = value || [];\n      if(typeof value !== \"object\") value = [value];\n      else if(!(Array.isArray(value))) value = [];\n  \n      // Make sure we are dealing with an array of strings so we can check for strict equality\n      for(i=0; i<value.length; i++) {\n        if(typeof value[i] !== \"string\") value[i] += \"\";\n      }\n  \n      // Update selected status of options\n      for(i in this.select_options) {\n        if(!this.select_options.hasOwnProperty(i)) continue;\n  \n        this.select_options[i][this.input_type === \"select\"? \"selected\" : \"checked\"] = (value.indexOf(i) !== -1);\n      }\n  \n      this.updateValue(value);\n      this.onChange();\n    },\n    setupSelect2: function() {\n      if(window.jQuery && window.jQuery.fn && window.jQuery.fn.select2) {\n          var options = window.jQuery.extend({},JSONEditor.plugins.select2);\n          if(this.schema.options && this.schema.options.select2_options) options = $extend(options,this.schema.options.select2_options);\n          this.select2 = window.jQuery(this.input).select2(options);\n          var self = this;\n          this.select2.on('select2-blur',function() {\n              var val =self.select2.select2('val');\n              self.value = val;\n              self.onChange(true);\n          });\n      }\n      else {\n          this.select2 = null;\n      }\n    },\n    onInputChange: function() {\n        this.value = this.input.value;\n        this.onChange(true);\n    },\n    postBuild: function() {\n        this._super();\n        this.setupSelect2();\n    },\n    register: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.setAttribute('name',this.formname);\n    },\n    unregister: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.removeAttribute('name');\n    },\n    getNumColumns: function() {\n      var longest_text = this.getTitle().length;\n      for(var i in this.select_values) {\n        if(!this.select_values.hasOwnProperty(i)) continue;\n        longest_text = Math.max(longest_text,(this.select_values[i]+\"\").length+4);\n      }\n  \n      return Math.min(12,Math.max(longest_text/7,2));\n    },\n    updateValue: function(value) {\n      var changed = false;\n      var new_value = [];\n      for(var i=0; i<value.length; i++) {\n        if(!this.select_options[value[i]+\"\"]) {\n          changed = true;\n          continue;\n        }\n        var sanitized = this.sanitize(this.select_values[value[i]]);\n        new_value.push(sanitized);\n        if(sanitized !== value[i]) changed = true;\n      }\n      this.value = new_value;\n      if(this.select2) this.select2.select2('val',this.value);\n      return changed;\n    },\n    sanitize: function(value) {\n      if(this.schema.items.type === \"number\") {\n        return 1*value;\n      }\n      else if(this.schema.items.type === \"integer\") {\n        return Math.floor(value*1);\n      }\n      else {\n        return \"\"+value;\n      }\n    },\n    enable: function() {\n      if(!this.always_disabled) {\n        if(this.input) {\n          this.input.disabled = false;\n        }\n        else if(this.inputs) {\n          for(var i in this.inputs) {\n            if(!this.inputs.hasOwnProperty(i)) continue;\n            this.inputs[i].disabled = false;\n          }\n        }\n        if(this.select2) this.select2.select2(\"enable\",true);\n      }\n      this._super();\n    },\n    disable: function() {\n      if(this.input) {\n        this.input.disabled = true;\n      }\n      else if(this.inputs) {\n        for(var i in this.inputs) {\n          if(!this.inputs.hasOwnProperty(i)) continue;\n          this.inputs[i].disabled = true;\n        }\n      }\n      if(this.select2) this.select2.select2(\"enable\",false);\n      this._super();\n    },\n    destroy: function() {\n      if(this.select2) {\n          this.select2.select2('destroy');\n          this.select2 = null;\n      }\n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.base64 = JSONEditor.AbstractEditor.extend({\n    getNumColumns: function() {\n      return 4;\n    },\n    build: function() {    \n      var self = this;\n      this.title = this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n  \n      // Input that holds the base64 string\n      this.input = this.theme.getFormInputField('hidden');\n      this.container.appendChild(this.input);\n      \n      // Don't show uploader if this is readonly\n      if(!this.schema.readOnly && !this.schema.readonly) {\n        if(!window.FileReader) throw \"FileReader required for base64 editor\";\n        \n        // File uploader\n        this.uploader = this.theme.getFormInputField('file');\n        \n        this.uploader.addEventListener('change',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          \n          if(this.files && this.files.length) {\n            var fr = new FileReader();\n            fr.onload = function(evt) {\n              self.value = evt.target.result;\n              self.refreshPreview();\n              self.onChange(true);\n              fr = null;\n            };\n            fr.readAsDataURL(this.files[0]);\n          }\n        });\n      }\n  \n      this.preview = this.theme.getFormInputDescription(this.schema.description);\n      this.container.appendChild(this.preview);\n  \n      this.control = this.theme.getFormControl(this.label, this.uploader||this.input, this.preview);\n      this.container.appendChild(this.control);\n    },\n    refreshPreview: function() {\n      if(this.last_preview === this.value) return;\n      this.last_preview = this.value;\n      \n      this.preview.innerHTML = '';\n      \n      if(!this.value) return;\n      \n      var mime = this.value.match(/^data:([^;,]+)[;,]/);\n      if(mime) mime = mime[1];\n      \n      if(!mime) {\n        this.preview.innerHTML = '<em>Invalid data URI</em>';\n      }\n      else {\n        this.preview.innerHTML = '<strong>Type:</strong> '+mime+', <strong>Size:</strong> '+Math.floor((this.value.length-this.value.split(',')[0].length-1)/1.33333)+' bytes';\n        if(mime.substr(0,5)===\"image\") {\n          this.preview.innerHTML += '<br>';\n          var img = document.createElement('img');\n          img.style.maxWidth = '100%';\n          img.style.maxHeight = '100px';\n          img.src = this.value;\n          this.preview.appendChild(img);\n        }\n      }\n    },\n    enable: function() {\n      if(this.uploader) this.uploader.disabled = false;\n      this._super();\n    },\n    disable: function() {\n      if(this.uploader) this.uploader.disabled = true;\n      this._super();\n    },\n    setValue: function(val) {\n      if(this.value !== val) {\n        this.value = val;\n        this.input.value = this.value;\n        this.refreshPreview();\n        this.onChange();\n      }\n    },\n    destroy: function() {\n      if(this.preview && this.preview.parentNode) this.preview.parentNode.removeChild(this.preview);\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n      if(this.uploader && this.uploader.parentNode) this.uploader.parentNode.removeChild(this.uploader);\n  \n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.upload = JSONEditor.AbstractEditor.extend({\n    getNumColumns: function() {\n      return 4;\n    },\n    build: function() {    \n      var self = this;\n      this.title = this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n  \n      // Input that holds the base64 string\n      this.input = this.theme.getFormInputField('hidden');\n      this.container.appendChild(this.input);\n      \n      // Don't show uploader if this is readonly\n      if(!this.schema.readOnly && !this.schema.readonly) {\n  \n        if(!this.jsoneditor.options.upload) throw \"Upload handler required for upload editor\";\n  \n        // File uploader\n        this.uploader = this.theme.getFormInputField('file');\n        \n        this.uploader.addEventListener('change',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          \n          if(this.files && this.files.length) {\n            var fr = new FileReader();\n            fr.onload = function(evt) {\n              self.preview_value = evt.target.result;\n              self.refreshPreview();\n              self.onChange(true);\n              fr = null;\n            };\n            fr.readAsDataURL(this.files[0]);\n          }\n        });\n      }\n  \n      var description = this.schema.description;\n      if (!description) description = '';\n  \n      this.preview = this.theme.getFormInputDescription(description);\n      this.container.appendChild(this.preview);\n  \n      this.control = this.theme.getFormControl(this.label, this.uploader||this.input, this.preview);\n      this.container.appendChild(this.control);\n    },\n    refreshPreview: function() {\n      if(this.last_preview === this.preview_value) return;\n      this.last_preview = this.preview_value;\n  \n      this.preview.innerHTML = '';\n      \n      if(!this.preview_value) return;\n  \n      var self = this;\n  \n      var mime = this.preview_value.match(/^data:([^;,]+)[;,]/);\n      if(mime) mime = mime[1];\n      if(!mime) mime = 'unknown';\n  \n      var file = this.uploader.files[0];\n  \n      this.preview.innerHTML = '<strong>Type:</strong> '+mime+', <strong>Size:</strong> '+file.size+' bytes';\n      if(mime.substr(0,5)===\"image\") {\n        this.preview.innerHTML += '<br>';\n        var img = document.createElement('img');\n        img.style.maxWidth = '100%';\n        img.style.maxHeight = '100px';\n        img.src = this.preview_value;\n        this.preview.appendChild(img);\n      }\n  \n      this.preview.innerHTML += '<br>';\n      var uploadButton = this.getButton('Upload', 'upload', 'Upload');\n      this.preview.appendChild(uploadButton);\n      uploadButton.addEventListener('click',function(event) {\n        event.preventDefault();\n  \n        uploadButton.setAttribute(\"disabled\", \"disabled\");\n        self.theme.removeInputError(self.uploader);\n  \n        if (self.theme.getProgressBar) {\n          self.progressBar = self.theme.getProgressBar();\n          self.preview.appendChild(self.progressBar);\n        }\n  \n        self.jsoneditor.options.upload(self.path, file, {\n          success: function(url) {\n            self.setValue(url);\n  \n            if(self.parent) self.parent.onChildEditorChange(self);\n            else self.jsoneditor.onChange();\n  \n            if (self.progressBar) self.preview.removeChild(self.progressBar);\n            uploadButton.removeAttribute(\"disabled\");\n          },\n          failure: function(error) {\n            self.theme.addInputError(self.uploader, error);\n            if (self.progressBar) self.preview.removeChild(self.progressBar);\n            uploadButton.removeAttribute(\"disabled\");\n          },\n          updateProgress: function(progress) {\n            if (self.progressBar) {\n              if (progress) self.theme.updateProgressBar(self.progressBar, progress);\n              else self.theme.updateProgressBarUnknown(self.progressBar);\n            }\n          }\n        });\n      });\n    },\n    enable: function() {\n      if(this.uploader) this.uploader.disabled = false;\n      this._super();\n    },\n    disable: function() {\n      if(this.uploader) this.uploader.disabled = true;\n      this._super();\n    },\n    setValue: function(val) {\n      if(this.value !== val) {\n        this.value = val;\n        this.input.value = this.value;\n        this.onChange();\n      }\n    },\n    destroy: function() {\n      if(this.preview && this.preview.parentNode) this.preview.parentNode.removeChild(this.preview);\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n      if(this.uploader && this.uploader.parentNode) this.uploader.parentNode.removeChild(this.uploader);\n  \n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.checkbox = JSONEditor.AbstractEditor.extend({\n    setValue: function(value,initial) {\n      this.value = !!value;\n      this.input.checked = this.value;\n      this.onChange();\n    },\n    register: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.setAttribute('name',this.formname);\n    },\n    unregister: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.removeAttribute('name');\n    },\n    getNumColumns: function() {\n      return Math.min(12,Math.max(this.getTitle().length/7,2));\n    },\n    build: function() {\n      var self = this;\n      if(!this.options.compact) {\n        this.label = this.header = this.theme.getCheckboxLabel(this.getTitle());\n      }\n      if(this.schema.description) this.description = this.theme.getFormInputDescription(this.schema.description);\n      if(this.options.compact) this.container.className += ' compact';\n  \n      this.input = this.theme.getCheckbox();\n      this.control = this.theme.getFormControl(this.label, this.input, this.description);\n  \n      if(this.schema.readOnly || this.schema.readonly) {\n        this.always_disabled = true;\n        this.input.disabled = true;\n      }\n  \n      this.input.addEventListener('change',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        self.value = this.checked;\n        self.onChange(true);\n      });\n  \n      this.container.appendChild(this.control);\n    },\n    enable: function() {\n      if(!this.always_disabled) {\n        this.input.disabled = false;\n      }\n      this._super();\n    },\n    disable: function() {\n      this.input.disabled = true;\n      this._super();\n    },\n    destroy: function() {\n      if(this.label && this.label.parentNode) this.label.parentNode.removeChild(this.label);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.arraySelectize = JSONEditor.AbstractEditor.extend({\n    build: function() {\n      this.title = this.theme.getFormInputLabel(this.getTitle());\n  \n      this.title_controls = this.theme.getHeaderButtonHolder();\n      this.title.appendChild(this.title_controls);\n      this.error_holder = document.createElement('div');\n  \n      if(this.schema.description) {\n        this.description = this.theme.getDescription(this.schema.description);\n      }\n  \n      this.input = document.createElement('select');\n      this.input.setAttribute('multiple', 'multiple');\n  \n      var group = this.theme.getFormControl(this.title, this.input, this.description);\n  \n      this.container.appendChild(group);\n      this.container.appendChild(this.error_holder);\n  \n      window.jQuery(this.input).selectize({\n        delimiter: false,\n        createOnBlur: true,\n        create: true\n      });\n    },\n    postBuild: function() {\n        var self = this;\n        this.input.selectize.on('change', function(event) {\n            self.refreshValue();\n            self.onChange(true);\n        });\n    },\n    destroy: function() {\n      this.empty(true);\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n  \n      this._super();\n    },\n    empty: function(hard) {},\n    setValue: function(value, initial) {\n      var self = this;\n      // Update the array's value, adding/removing rows when necessary\n      value = value || [];\n      if(!(Array.isArray(value))) value = [value];\n  \n      this.input.selectize.clearOptions();\n      this.input.selectize.clear(true);\n  \n      value.forEach(function(item) {\n        self.input.selectize.addOption({text: item, value: item});\n      });\n      this.input.selectize.setValue(value);\n  \n      this.refreshValue(initial);\n    },\n    refreshValue: function(force) {\n      this.value = this.input.selectize.getValue();\n    },\n    showValidationErrors: function(errors) {\n      var self = this;\n  \n      // Get all the errors that pertain to this editor\n      var my_errors = [];\n      var other_errors = [];\n      $each(errors, function(i,error) {\n        if(error.path === self.path) {\n          my_errors.push(error);\n        }\n        else {\n          other_errors.push(error);\n        }\n      });\n  \n      // Show errors for this editor\n      if(this.error_holder) {\n  \n        if(my_errors.length) {\n          var message = [];\n          this.error_holder.innerHTML = '';\n          this.error_holder.style.display = '';\n          $each(my_errors, function(i,error) {\n            self.error_holder.appendChild(self.theme.getErrorMessage(error.message));\n          });\n        }\n        // Hide error area\n        else {\n          this.error_holder.style.display = 'none';\n        }\n      }\n    }\n  });\n  \n  var matchKey = (function () {\n    var elem = document.documentElement;\n  \n    if (elem.matches) return 'matches';\n    else if (elem.webkitMatchesSelector) return 'webkitMatchesSelector';\n    else if (elem.mozMatchesSelector) return 'mozMatchesSelector';\n    else if (elem.msMatchesSelector) return 'msMatchesSelector';\n    else if (elem.oMatchesSelector) return 'oMatchesSelector';\n  })();\n  \n  JSONEditor.AbstractTheme = Class.extend({\n    getContainer: function() {\n      return document.createElement('div');\n    },\n    getFloatRightLinkHolder: function() {\n      var el = document.createElement('div');\n      el.style = el.style || {};\n      el.style.cssFloat = 'right';\n      el.style.marginLeft = '10px';\n      return el;\n    },\n    getModal: function() {\n      var el = document.createElement('div');\n      el.style.backgroundColor = 'white';\n      el.style.border = '1px solid black';\n      el.style.boxShadow = '3px 3px black';\n      el.style.position = 'absolute';\n      el.style.zIndex = '10';\n      el.style.display = 'none';\n      return el;\n    },\n    getGridContainer: function() {\n      var el = document.createElement('div');\n      return el;\n    },\n    getGridRow: function() {\n      var el = document.createElement('div');\n      el.className = 'row';\n      return el;\n    },\n    getGridColumn: function() {\n      var el = document.createElement('div');\n      return el;\n    },\n    setGridColumnSize: function(el,size) {\n  \n    },\n    getLink: function(text) {\n      var el = document.createElement('a');\n      el.setAttribute('href','#');\n      el.appendChild(document.createTextNode(text));\n      return el;\n    },\n    disableHeader: function(header) {\n      header.style.color = '#ccc';\n    },\n    disableLabel: function(label) {\n      label.style.color = '#ccc';\n    },\n    enableHeader: function(header) {\n      header.style.color = '';\n    },\n    enableLabel: function(label) {\n      label.style.color = '';\n    },\n    getFormInputLabel: function(text) {\n      var el = document.createElement('label');\n      el.appendChild(document.createTextNode(text));\n      return el;\n    },\n    getCheckboxLabel: function(text) {\n      var el = this.getFormInputLabel(text);\n      el.style.fontWeight = 'normal';\n      return el;\n    },\n    getHeader: function(text) {\n      var el = document.createElement('h3');\n      if(typeof text === \"string\") {\n        el.textContent = text;\n      }\n      else {\n        el.appendChild(text);\n      }\n  \n      return el;\n    },\n    getCheckbox: function() {\n      var el = this.getFormInputField('checkbox');\n      el.style.display = 'inline-block';\n      el.style.width = 'auto';\n      return el;\n    },\n    getMultiCheckboxHolder: function(controls,label,description) {\n      var el = document.createElement('div');\n  \n      if(label) {\n        label.style.display = 'block';\n        el.appendChild(label);\n      }\n  \n      for(var i in controls) {\n        if(!controls.hasOwnProperty(i)) continue;\n        controls[i].style.display = 'inline-block';\n        controls[i].style.marginRight = '20px';\n        el.appendChild(controls[i]);\n      }\n  \n      if(description) el.appendChild(description);\n  \n      return el;\n    },\n    getSelectInput: function(options) {\n      var select = document.createElement('select');\n      if(options) this.setSelectOptions(select, options);\n      return select;\n    },\n    getSwitcher: function(options) {\n      var switcher = this.getSelectInput(options);\n      switcher.style.backgroundColor = 'transparent';\n      switcher.style.display = 'inline-block';\n      switcher.style.fontStyle = 'italic';\n      switcher.style.fontWeight = 'normal';\n      switcher.style.height = 'auto';\n      switcher.style.marginBottom = 0;\n      switcher.style.marginLeft = '5px';\n      switcher.style.padding = '0 0 0 3px';\n      switcher.style.width = 'auto';\n      return switcher;\n    },\n    getSwitcherOptions: function(switcher) {\n      return switcher.getElementsByTagName('option');\n    },\n    setSwitcherOptions: function(switcher, options, titles) {\n      this.setSelectOptions(switcher, options, titles);\n    },\n    setSelectOptions: function(select, options, titles) {\n      titles = titles || [];\n      select.innerHTML = '';\n      for(var i=0; i<options.length; i++) {\n        var option = document.createElement('option');\n        option.setAttribute('value',options[i]);\n        option.textContent = titles[i] || options[i];\n        select.appendChild(option);\n      }\n    },\n    getTextareaInput: function() {\n      var el = document.createElement('textarea');\n      el.style = el.style || {};\n      el.style.width = '100%';\n      el.style.height = '300px';\n      el.style.boxSizing = 'border-box';\n      return el;\n    },\n    getRangeInput: function(min,max,step) {\n      var el = this.getFormInputField('range');\n      el.setAttribute('min',min);\n      el.setAttribute('max',max);\n      el.setAttribute('step',step);\n      return el;\n    },\n    getFormInputField: function(type) {\n      var el = document.createElement('input');\n      el.setAttribute('type',type);\n      return el;\n    },\n    afterInputReady: function(input) {\n  \n    },\n    getFormControl: function(label, input, description) {\n      var el = document.createElement('div');\n      el.className = 'form-control';\n      if(label) el.appendChild(label);\n      if(input.type === 'checkbox') {\n        label.insertBefore(input,label.firstChild);\n      }\n      else {\n        el.appendChild(input);\n      }\n  \n      if(description) el.appendChild(description);\n      return el;\n    },\n    getIndentedPanel: function() {\n      var el = document.createElement('div');\n      el.style = el.style || {};\n      el.style.paddingLeft = '10px';\n      el.style.marginLeft = '10px';\n      el.style.borderLeft = '1px solid #ccc';\n      return el;\n    },\n    getChildEditorHolder: function() {\n      return document.createElement('div');\n    },\n    getDescription: function(text) {\n      var el = document.createElement('p');\n      el.innerHTML = text;\n      return el;\n    },\n    getCheckboxDescription: function(text) {\n      return this.getDescription(text);\n    },\n    getFormInputDescription: function(text) {\n      return this.getDescription(text);\n    },\n    getHeaderButtonHolder: function() {\n      return this.getButtonHolder();\n    },\n    getButtonHolder: function() {\n      return document.createElement('div');\n    },\n    getButton: function(text, icon, title) {\n      var el = document.createElement('button');\n      el.type = 'button';\n      this.setButtonText(el,text,icon,title);\n      return el;\n    },\n    setButtonText: function(button, text, icon, title) {\n      button.innerHTML = '';\n      if(icon) {\n        button.appendChild(icon);\n        button.innerHTML += ' ';\n      }\n      button.appendChild(document.createTextNode(text));\n      if(title) button.setAttribute('title',title);\n    },\n    getTable: function() {\n      return document.createElement('table');\n    },\n    getTableRow: function() {\n      return document.createElement('tr');\n    },\n    getTableHead: function() {\n      return document.createElement('thead');\n    },\n    getTableBody: function() {\n      return document.createElement('tbody');\n    },\n    getTableHeaderCell: function(text) {\n      var el = document.createElement('th');\n      el.textContent = text;\n      return el;\n    },\n    getTableCell: function() {\n      var el = document.createElement('td');\n      return el;\n    },\n    getErrorMessage: function(text) {\n      var el = document.createElement('p');\n      el.style = el.style || {};\n      el.style.color = 'red';\n      el.appendChild(document.createTextNode(text));\n      return el;\n    },\n    addInputError: function(input, text) {\n    },\n    removeInputError: function(input) {\n    },\n    addTableRowError: function(row) {\n    },\n    removeTableRowError: function(row) {\n    },\n    getTabHolder: function() {\n      var el = document.createElement('div');\n      el.innerHTML = \"<div style='float: left; width: 130px;' class='tabs'></div><div class='content' style='margin-left: 130px;'></div><div style='clear:both;'></div>\";\n      return el;\n    },\n    applyStyles: function(el,styles) {\n      el.style = el.style || {};\n      for(var i in styles) {\n        if(!styles.hasOwnProperty(i)) continue;\n        el.style[i] = styles[i];\n      }\n    },\n    closest: function(elem, selector) {\n      while (elem && elem !== document) {\n        if (elem[matchKey]) {\n          if (elem[matchKey](selector)) {\n            return elem;\n          } else {\n            elem = elem.parentNode;\n          }\n        }\n        else {\n          return false;\n        }\n      }\n      return false;\n    },\n    getTab: function(span) {\n      var el = document.createElement('div');\n      el.appendChild(span);\n      el.style = el.style || {};\n      this.applyStyles(el,{\n        border: '1px solid #ccc',\n        borderWidth: '1px 0 1px 1px',\n        textAlign: 'center',\n        lineHeight: '30px',\n        borderRadius: '5px',\n        borderBottomRightRadius: 0,\n        borderTopRightRadius: 0,\n        fontWeight: 'bold',\n        cursor: 'pointer'\n      });\n      return el;\n    },\n    getTabContentHolder: function(tab_holder) {\n      return tab_holder.children[1];\n    },\n    getTabContent: function() {\n      return this.getIndentedPanel();\n    },\n    markTabActive: function(tab) {\n      this.applyStyles(tab,{\n        opacity: 1,\n        background: 'white'\n      });\n    },\n    markTabInactive: function(tab) {\n      this.applyStyles(tab,{\n        opacity:0.5,\n        background: ''\n      });\n    },\n    addTab: function(holder, tab) {\n      holder.children[0].appendChild(tab);\n    },\n    getBlockLink: function() {\n      var link = document.createElement('a');\n      link.style.display = 'block';\n      return link;\n    },\n    getBlockLinkHolder: function() {\n      var el = document.createElement('div');\n      return el;\n    },\n    getLinksHolder: function() {\n      var el = document.createElement('div');\n      return el;\n    },\n    createMediaLink: function(holder,link,media) {\n      holder.appendChild(link);\n      media.style.width='100%';\n      holder.appendChild(media);\n    },\n    createImageLink: function(holder,link,image) {\n      holder.appendChild(link);\n      link.appendChild(image);\n    }\n  });\n  \n  JSONEditor.defaults.themes.bootstrap2 = JSONEditor.AbstractTheme.extend({\n    getRangeInput: function(min, max, step) {\n      // TODO: use bootstrap slider\n      return this._super(min, max, step);\n    },\n    getGridContainer: function() {\n      var el = document.createElement('div');\n      el.className = 'container-fluid';\n      return el;\n    },\n    getGridRow: function() {\n      var el = document.createElement('div');\n      el.className = 'row-fluid';\n      return el;\n    },\n    getFormInputLabel: function(text) {\n      var el = this._super(text);\n      el.style.display = 'inline-block';\n      el.style.fontWeight = 'bold';\n      return el;\n    },\n    setGridColumnSize: function(el,size) {\n      el.className = 'span'+size;\n    },\n    getSelectInput: function(options) {\n      var input = this._super(options);\n      input.style.width = 'auto';\n      input.style.maxWidth = '98%';\n      return input;\n    },\n    getFormInputField: function(type) {\n      var el = this._super(type);\n      el.style.width = '98%';\n      return el;\n    },\n    afterInputReady: function(input) {\n      if(input.controlgroup) return;\n      input.controlgroup = this.closest(input,'.control-group');\n      input.controls = this.closest(input,'.controls');\n      if(this.closest(input,'.compact')) {\n        input.controlgroup.className = input.controlgroup.className.replace(/control-group/g,'').replace(/[ ]{2,}/g,' ');\n        input.controls.className = input.controlgroup.className.replace(/controls/g,'').replace(/[ ]{2,}/g,' ');\n        input.style.marginBottom = 0;\n      }\n  \n      // TODO: use bootstrap slider\n    },\n    getIndentedPanel: function() {\n      var el = document.createElement('div');\n      el.className = 'well well-small';\n      el.style.paddingBottom = 0;\n      return el;\n    },\n    getFormInputDescription: function(text) {\n      var el = document.createElement('p');\n      el.className = 'help-inline';\n      el.textContent = text;\n      return el;\n    },\n    getFormControl: function(label, input, description) {\n      var ret = document.createElement('div');\n      ret.className = 'control-group';\n  \n      var controls = document.createElement('div');\n      controls.className = 'controls';\n  \n      if(label && input.getAttribute('type') === 'checkbox') {\n        ret.appendChild(controls);\n        label.className += ' checkbox';\n        label.appendChild(input);\n        controls.appendChild(label);\n        controls.style.height = '30px';\n      }\n      else {\n        if(label) {\n          label.className += ' control-label';\n          ret.appendChild(label);\n        }\n        controls.appendChild(input);\n        ret.appendChild(controls);\n      }\n  \n      if(description) controls.appendChild(description);\n  \n      return ret;\n    },\n    getHeaderButtonHolder: function() {\n      var el = this.getButtonHolder();\n      el.style.marginLeft = '10px';\n      return el;\n    },\n    getButtonHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'btn-group';\n      return el;\n    },\n    getButton: function(text, icon, title) {\n      var el =  this._super(text, icon, title);\n      el.className += ' btn btn-default';\n      return el;\n    },\n    getTable: function() {\n      var el = document.createElement('table');\n      el.className = 'table table-bordered';\n      el.style.width = 'auto';\n      el.style.maxWidth = 'none';\n      return el;\n    },\n    addInputError: function(input,text) {\n      if(!input.controlgroup || !input.controls) return;\n      input.controlgroup.className += ' error';\n      if(!input.errmsg) {\n        input.errmsg = document.createElement('p');\n        input.errmsg.className = 'help-block errormsg';\n        input.controls.appendChild(input.errmsg);\n      }\n      else {\n        input.errmsg.style.display = '';\n      }\n  \n      input.errmsg.textContent = text;\n    },\n    removeInputError: function(input) {\n      if(!input.errmsg) return;\n      input.errmsg.style.display = 'none';\n      input.controlgroup.className = input.controlgroup.className.replace(/\\s?error/g,'');\n    },\n    getTabHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'tabbable tabs-left';\n      el.innerHTML = \"<ul class='nav nav-tabs span2' style='margin-right: 0;'></ul><div class='tab-content span10' style='overflow:visible;'></div>\";\n      return el;\n    },\n    getTab: function(text) {\n      var el = document.createElement('li');\n      var a = document.createElement('a');\n      a.setAttribute('href','#');\n      a.appendChild(text);\n      el.appendChild(a);\n      return el;\n    },\n    getTabContentHolder: function(tab_holder) {\n      return tab_holder.children[1];\n    },\n    getTabContent: function() {\n      var el = document.createElement('div');\n      el.className = 'tab-pane active';\n      return el;\n    },\n    markTabActive: function(tab) {\n      tab.className += ' active';\n    },\n    markTabInactive: function(tab) {\n      tab.className = tab.className.replace(/\\s?active/g,'');\n    },\n    addTab: function(holder, tab) {\n      holder.children[0].appendChild(tab);\n    },\n    getProgressBar: function() {\n      var container = document.createElement('div');\n      container.className = 'progress';\n  \n      var bar = document.createElement('div');\n      bar.className = 'bar';\n      bar.style.width = '0%';\n      container.appendChild(bar);\n  \n      return container;\n    },\n    updateProgressBar: function(progressBar, progress) {\n      if (!progressBar) return;\n  \n      progressBar.firstChild.style.width = progress + \"%\";\n    },\n    updateProgressBarUnknown: function(progressBar) {\n      if (!progressBar) return;\n  \n      progressBar.className = 'progress progress-striped active';\n      progressBar.firstChild.style.width = '100%';\n    }\n  });\n  \n  JSONEditor.defaults.themes.bootstrap3 = JSONEditor.AbstractTheme.extend({\n    getSelectInput: function(options) {\n      var el = this._super(options);\n      el.className += 'form-control';\n      //el.style.width = 'auto';\n      return el;\n    },\n    setGridColumnSize: function(el,size) {\n      el.className = 'col-md-'+size;\n    },\n    afterInputReady: function(input) {\n      if(input.controlgroup) return;\n      input.controlgroup = this.closest(input,'.form-group');\n      if(this.closest(input,'.compact')) {\n        input.controlgroup.style.marginBottom = 0;\n      }\n  \n      // TODO: use bootstrap slider\n    },\n    getTextareaInput: function() {\n      var el = document.createElement('textarea');\n      el.className = 'form-control';\n      return el;\n    },\n    getRangeInput: function(min, max, step) {\n      // TODO: use better slider\n      return this._super(min, max, step);\n    },\n    getFormInputField: function(type) {\n      var el = this._super(type);\n      if(type !== 'checkbox') {\n        el.className += 'form-control';\n      }\n      return el;\n    },\n    getFormControl: function(label, input, description) {\n      var group = document.createElement('div');\n  \n      if(label && input.type === 'checkbox') {\n        group.className += ' checkbox';\n        label.appendChild(input);\n        label.style.fontSize = '14px';\n        group.style.marginTop = '0';\n        group.appendChild(label);\n        input.style.position = 'relative';\n        input.style.cssFloat = 'left';\n      } \n      else {\n        group.className += ' form-group';\n        if(label) {\n          label.className += ' control-label';\n          group.appendChild(label);\n        }\n        group.appendChild(input);\n      }\n  \n      if(description) group.appendChild(description);\n  \n      return group;\n    },\n    getIndentedPanel: function() {\n      var el = document.createElement('div');\n      el.className = 'well well-sm';\n      el.style.paddingBottom = 0;\n      return el;\n    },\n    getFormInputDescription: function(text) {\n      var el = document.createElement('p');\n      el.className = 'help-block';\n      el.innerHTML = text;\n      return el;\n    },\n    getHeaderButtonHolder: function() {\n      var el = this.getButtonHolder();\n      el.style.marginLeft = '10px';\n      return el;\n    },\n    getButtonHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'btn-group';\n      return el;\n    },\n    getButton: function(text, icon, title) {\n      var el = this._super(text, icon, title);\n      el.className += 'btn btn-default';\n      return el;\n    },\n    getTable: function() {\n      var el = document.createElement('table');\n      el.className = 'table table-bordered';\n      el.style.width = 'auto';\n      el.style.maxWidth = 'none';\n      return el;\n    },\n  \n    addInputError: function(input,text) {\n      if(!input.controlgroup) return;\n      input.controlgroup.className += ' has-error';\n      if(!input.errmsg) {\n        input.errmsg = document.createElement('p');\n        input.errmsg.className = 'help-block errormsg';\n        input.controlgroup.appendChild(input.errmsg);\n      }\n      else {\n        input.errmsg.style.display = '';\n      }\n  \n      input.errmsg.textContent = text;\n    },\n    removeInputError: function(input) {\n      if(!input.errmsg) return;\n      input.errmsg.style.display = 'none';\n      input.controlgroup.className = input.controlgroup.className.replace(/\\s?has-error/g,'');\n    },\n    getTabHolder: function() {\n      var el = document.createElement('div');\n      el.innerHTML = \"<div class='tabs list-group col-md-2'></div><div class='col-md-10'></div>\";\n      el.className = 'rows';\n      return el;\n    },\n    getTab: function(text) {\n      var el = document.createElement('a');\n      el.className = 'list-group-item';\n      el.setAttribute('href','#');\n      el.appendChild(text);\n      return el;\n    },\n    markTabActive: function(tab) {\n      tab.className += ' active';\n    },\n    markTabInactive: function(tab) {\n      tab.className = tab.className.replace(/\\s?active/g,'');\n    },\n    getProgressBar: function() {\n      var min = 0, max = 100, start = 0;\n  \n      var container = document.createElement('div');\n      container.className = 'progress';\n  \n      var bar = document.createElement('div');\n      bar.className = 'progress-bar';\n      bar.setAttribute('role', 'progressbar');\n      bar.setAttribute('aria-valuenow', start);\n      bar.setAttribute('aria-valuemin', min);\n      bar.setAttribute('aria-valuenax', max);\n      bar.innerHTML = start + \"%\";\n      container.appendChild(bar);\n  \n      return container;\n    },\n    updateProgressBar: function(progressBar, progress) {\n      if (!progressBar) return;\n  \n      var bar = progressBar.firstChild;\n      var percentage = progress + \"%\";\n      bar.setAttribute('aria-valuenow', progress);\n      bar.style.width = percentage;\n      bar.innerHTML = percentage;\n    },\n    updateProgressBarUnknown: function(progressBar) {\n      if (!progressBar) return;\n  \n      var bar = progressBar.firstChild;\n      progressBar.className = 'progress progress-striped active';\n      bar.removeAttribute('aria-valuenow');\n      bar.style.width = '100%';\n      bar.innerHTML = '';\n    }\n  });\n  \n  // Base Foundation theme\n  JSONEditor.defaults.themes.foundation = JSONEditor.AbstractTheme.extend({\n    getChildEditorHolder: function() {\n      var el = document.createElement('div');\n      el.style.marginBottom = '15px';\n      return el;\n    },\n    getSelectInput: function(options) {\n      var el = this._super(options);\n      el.style.minWidth = 'none';\n      el.style.padding = '5px';\n      el.style.marginTop = '3px';\n      return el;\n    },\n    getSwitcher: function(options) {\n      var el = this._super(options);\n      el.style.paddingRight = '8px';\n      return el;\n    },\n    afterInputReady: function(input) {\n      if(this.closest(input,'.compact')) {\n        input.style.marginBottom = 0;\n      }\n      input.group = this.closest(input,'.form-control');\n    },\n    getFormInputLabel: function(text) {\n      var el = this._super(text);\n      el.style.display = 'inline-block';\n      return el;\n    },\n    getFormInputField: function(type) {\n      var el = this._super(type);\n      el.style.width = '100%';\n      el.style.marginBottom = type==='checkbox'? '0' : '12px';\n      return el;\n    },\n    getFormInputDescription: function(text) {\n      var el = document.createElement('p');\n      el.textContent = text;\n      el.style.marginTop = '-10px';\n      el.style.fontStyle = 'italic';\n      return el;\n    },\n    getIndentedPanel: function() {\n      var el = document.createElement('div');\n      el.className = 'panel';\n      el.style.paddingBottom = 0;\n      return el;\n    },\n    getHeaderButtonHolder: function() {\n      var el = this.getButtonHolder();\n      el.style.display = 'inline-block';\n      el.style.marginLeft = '10px';\n      el.style.verticalAlign = 'middle';\n      return el;\n    },\n    getButtonHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'button-group';\n      return el;\n    },\n    getButton: function(text, icon, title) {\n      var el = this._super(text, icon, title);\n      el.className += ' small button';\n      return el;\n    },\n    addInputError: function(input,text) {\n      if(!input.group) return;\n      input.group.className += ' error';\n  \n      if(!input.errmsg) {\n        input.insertAdjacentHTML('afterend','<small class=\"error\"></small>');\n        input.errmsg = input.parentNode.getElementsByClassName('error')[0];\n      }\n      else {\n        input.errmsg.style.display = '';\n      }\n  \n      input.errmsg.textContent = text;\n    },\n    removeInputError: function(input) {\n      if(!input.errmsg) return;\n      input.group.className = input.group.className.replace(/ error/g,'');\n      input.errmsg.style.display = 'none';\n    },\n    getProgressBar: function() {\n      var progressBar = document.createElement('div');\n      progressBar.className = 'progress';\n  \n      var meter = document.createElement('span');\n      meter.className = 'meter';\n      meter.style.width = '0%';\n      progressBar.appendChild(meter);\n      return progressBar;\n    },\n    updateProgressBar: function(progressBar, progress) {\n      if (!progressBar) return;\n      progressBar.firstChild.style.width = progress + '%';\n    },\n    updateProgressBarUnknown: function(progressBar) {\n      if (!progressBar) return;\n      progressBar.firstChild.style.width = '100%';\n    }\n  });\n  \n  // Foundation 3 Specific Theme\n  JSONEditor.defaults.themes.foundation3 = JSONEditor.defaults.themes.foundation.extend({\n    getHeaderButtonHolder: function() {\n      var el = this._super();\n      el.style.fontSize = '.6em';\n      return el;\n    },\n    getFormInputLabel: function(text) {\n      var el = this._super(text);\n      el.style.fontWeight = 'bold';\n      return el;\n    },\n    getTabHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'row';\n      el.innerHTML = \"<dl class='tabs vertical two columns'></dl><div class='tabs-content ten columns'></div>\";\n      return el;\n    },\n    setGridColumnSize: function(el,size) {\n      var sizes = ['zero','one','two','three','four','five','six','seven','eight','nine','ten','eleven','twelve'];\n      el.className = 'columns '+sizes[size];\n    },\n    getTab: function(text) {\n      var el = document.createElement('dd');\n      var a = document.createElement('a');\n      a.setAttribute('href','#');\n      a.appendChild(text);\n      el.appendChild(a);\n      return el;\n    },\n    getTabContentHolder: function(tab_holder) {\n      return tab_holder.children[1];\n    },\n    getTabContent: function() {\n      var el = document.createElement('div');\n      el.className = 'content active';\n      el.style.paddingLeft = '5px';\n      return el;\n    },\n    markTabActive: function(tab) {\n      tab.className += ' active';\n    },\n    markTabInactive: function(tab) {\n      tab.className = tab.className.replace(/\\s*active/g,'');\n    },\n    addTab: function(holder, tab) {\n      holder.children[0].appendChild(tab);\n    }\n  });\n  \n  // Foundation 4 Specific Theme\n  JSONEditor.defaults.themes.foundation4 = JSONEditor.defaults.themes.foundation.extend({\n    getHeaderButtonHolder: function() {\n      var el = this._super();\n      el.style.fontSize = '.6em';\n      return el;\n    },\n    setGridColumnSize: function(el,size) {\n      el.className = 'columns large-'+size;\n    },\n    getFormInputDescription: function(text) {\n      var el = this._super(text);\n      el.style.fontSize = '.8rem';\n      return el;\n    },\n    getFormInputLabel: function(text) {\n      var el = this._super(text);\n      el.style.fontWeight = 'bold';\n      return el;\n    }\n  });\n  \n  // Foundation 5 Specific Theme\n  JSONEditor.defaults.themes.foundation5 = JSONEditor.defaults.themes.foundation.extend({\n    getFormInputDescription: function(text) {\n      var el = this._super(text);\n      el.style.fontSize = '.8rem';\n      return el;\n    },\n    setGridColumnSize: function(el,size) {\n      el.className = 'columns medium-'+size;\n    },\n    getButton: function(text, icon, title) {\n      var el = this._super(text,icon,title);\n      el.className = el.className.replace(/\\s*small/g,'') + ' tiny';\n      return el;\n    },\n    getTabHolder: function() {\n      var el = document.createElement('div');\n      el.innerHTML = \"<dl class='tabs vertical'></dl><div class='tabs-content vertical'></div>\";\n      return el;\n    },\n    getTab: function(text) {\n      var el = document.createElement('dd');\n      var a = document.createElement('a');\n      a.setAttribute('href','#');\n      a.appendChild(text);\n      el.appendChild(a);\n      return el;\n    },\n    getTabContentHolder: function(tab_holder) {\n      return tab_holder.children[1];\n    },\n    getTabContent: function() {\n      var el = document.createElement('div');\n      el.className = 'content active';\n      el.style.paddingLeft = '5px';\n      return el;\n    },\n    markTabActive: function(tab) {\n      tab.className += ' active';\n    },\n    markTabInactive: function(tab) {\n      tab.className = tab.className.replace(/\\s*active/g,'');\n    },\n    addTab: function(holder, tab) {\n      holder.children[0].appendChild(tab);\n    }\n  });\n  \n  JSONEditor.defaults.themes.foundation6 = JSONEditor.defaults.themes.foundation5.extend({\n    getIndentedPanel: function() {\n      var el = document.createElement('div');\n      el.className = 'callout secondary';\n      return el;\n    },\n    getButtonHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'button-group tiny';\n      el.style.marginBottom = 0;\n      return el;\n    },\n    getFormInputLabel: function(text) {\n      var el = this._super(text);\n      el.style.display = 'block';\n      return el;\n    },\n    getFormControl: function(label, input, description) {\n      var el = document.createElement('div');\n      el.className = 'form-control';\n      if(label) el.appendChild(label);\n      if(input.type === 'checkbox') {\n        label.insertBefore(input,label.firstChild);\n      }\n      else if (label) {\n        label.appendChild(input);\n      } else {\n        el.appendChild(input);\n      }\n  \n      if(description) label.appendChild(description);\n      return el;\n    },\n    addInputError: function(input,text) {\n      if(!input.group) return;\n      input.group.className += ' error';\n  \n      if(!input.errmsg) {\n        var errorEl = document.createElement('span');\n        errorEl.className = 'form-error is-visible';\n        input.group.getElementsByTagName('label')[0].appendChild(errorEl);\n  \n        input.className = input.className + ' is-invalid-input';\n  \n        input.errmsg = errorEl;\n      }\n      else {\n        input.errmsg.style.display = '';\n        input.className = '';\n      }\n  \n      input.errmsg.textContent = text;\n    },\n    removeInputError: function(input) {\n      if(!input.errmsg) return;\n      input.className = input.className.replace(/ is-invalid-input/g,'');\n      if(input.errmsg.parentNode) {\n        input.errmsg.parentNode.removeChild(input.errmsg);\n      }\n    },\n  });\n  \n  JSONEditor.defaults.themes.html = JSONEditor.AbstractTheme.extend({\n    getFormInputLabel: function(text) {\n      var el = this._super(text);\n      el.style.display = 'block';\n      el.style.marginBottom = '3px';\n      el.style.fontWeight = 'bold';\n      return el;\n    },\n    getFormInputDescription: function(text) {\n      var el = this._super(text);\n      el.style.fontSize = '.8em';\n      el.style.margin = 0;\n      el.style.display = 'inline-block';\n      el.style.fontStyle = 'italic';\n      return el;\n    },\n    getIndentedPanel: function() {\n      var el = this._super();\n      el.style.border = '1px solid #ddd';\n      el.style.padding = '5px';\n      el.style.margin = '5px';\n      el.style.borderRadius = '3px';\n      return el;\n    },\n    getChildEditorHolder: function() {\n      var el = this._super();\n      el.style.marginBottom = '8px';\n      return el;\n    },\n    getHeaderButtonHolder: function() {\n      var el = this.getButtonHolder();\n      el.style.display = 'inline-block';\n      el.style.marginLeft = '10px';\n      el.style.fontSize = '.8em';\n      el.style.verticalAlign = 'middle';\n      return el;\n    },\n    getTable: function() {\n      var el = this._super();\n      el.style.borderBottom = '1px solid #ccc';\n      el.style.marginBottom = '5px';\n      return el;\n    },\n    addInputError: function(input, text) {\n      input.style.borderColor = 'red';\n      \n      if(!input.errmsg) {\n        var group = this.closest(input,'.form-control');\n        input.errmsg = document.createElement('div');\n        input.errmsg.setAttribute('class','errmsg');\n        input.errmsg.style = input.errmsg.style || {};\n        input.errmsg.style.color = 'red';\n        group.appendChild(input.errmsg);\n      }\n      else {\n        input.errmsg.style.display = 'block';\n      }\n      \n      input.errmsg.innerHTML = '';\n      input.errmsg.appendChild(document.createTextNode(text));\n    },\n    removeInputError: function(input) {\n      input.style.borderColor = '';\n      if(input.errmsg) input.errmsg.style.display = 'none';\n    },\n    getProgressBar: function() {\n      var max = 100, start = 0;\n  \n      var progressBar = document.createElement('progress');\n      progressBar.setAttribute('max', max);\n      progressBar.setAttribute('value', start);\n      return progressBar;\n    },\n    updateProgressBar: function(progressBar, progress) {\n      if (!progressBar) return;\n      progressBar.setAttribute('value', progress);\n    },\n    updateProgressBarUnknown: function(progressBar) {\n      if (!progressBar) return;\n      progressBar.removeAttribute('value');\n    }\n  });\n  \n  JSONEditor.defaults.themes.jqueryui = JSONEditor.AbstractTheme.extend({\n    getTable: function() {\n      var el = this._super();\n      el.setAttribute('cellpadding',5);\n      el.setAttribute('cellspacing',0);\n      return el;\n    },\n    getTableHeaderCell: function(text) {\n      var el = this._super(text);\n      el.className = 'ui-state-active';\n      el.style.fontWeight = 'bold';\n      return el;\n    },\n    getTableCell: function() {\n      var el = this._super();\n      el.className = 'ui-widget-content';\n      return el;\n    },\n    getHeaderButtonHolder: function() {\n      var el = this.getButtonHolder();\n      el.style.marginLeft = '10px';\n      el.style.fontSize = '.6em';\n      el.style.display = 'inline-block';\n      return el;\n    },\n    getFormInputDescription: function(text) {\n      var el = this.getDescription(text);\n      el.style.marginLeft = '10px';\n      el.style.display = 'inline-block';\n      return el;\n    },\n    getFormControl: function(label, input, description) {\n      var el = this._super(label,input,description);\n      if(input.type === 'checkbox') {\n        el.style.lineHeight = '25px';\n        \n        el.style.padding = '3px 0';\n      }\n      else {\n        el.style.padding = '4px 0 8px 0';\n      }\n      return el;\n    },\n    getDescription: function(text) {\n      var el = document.createElement('span');\n      el.style.fontSize = '.8em';\n      el.style.fontStyle = 'italic';\n      el.textContent = text;\n      return el;\n    },\n    getButtonHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'ui-buttonset';\n      el.style.fontSize = '.7em';\n      return el;\n    },\n    getFormInputLabel: function(text) {\n      var el = document.createElement('label');\n      el.style.fontWeight = 'bold';\n      el.style.display = 'block';\n      el.textContent = text;\n      return el;\n    },\n    getButton: function(text, icon, title) {\n      var button = document.createElement(\"button\");\n      button.className = 'ui-button ui-widget ui-state-default ui-corner-all';\n  \n      // Icon only\n      if(icon && !text) {\n        button.className += ' ui-button-icon-only';\n        icon.className += ' ui-button-icon-primary ui-icon-primary';\n        button.appendChild(icon);\n      }\n      // Icon and Text\n      else if(icon) {\n        button.className += ' ui-button-text-icon-primary';\n        icon.className += ' ui-button-icon-primary ui-icon-primary';\n        button.appendChild(icon);\n      }\n      // Text only\n      else {\n        button.className += ' ui-button-text-only';\n      }\n  \n      var el = document.createElement('span');\n      el.className = 'ui-button-text';\n      el.textContent = text||title||\".\";\n      button.appendChild(el);\n  \n      button.setAttribute('title',title);\n      \n      return button;\n    },\n    setButtonText: function(button,text, icon, title) {\n      button.innerHTML = '';\n      button.className = 'ui-button ui-widget ui-state-default ui-corner-all';\n  \n      // Icon only\n      if(icon && !text) {\n        button.className += ' ui-button-icon-only';\n        icon.className += ' ui-button-icon-primary ui-icon-primary';\n        button.appendChild(icon);\n      }\n      // Icon and Text\n      else if(icon) {\n        button.className += ' ui-button-text-icon-primary';\n        icon.className += ' ui-button-icon-primary ui-icon-primary';\n        button.appendChild(icon);\n      }\n      // Text only\n      else {\n        button.className += ' ui-button-text-only';\n      }\n  \n      var el = document.createElement('span');\n      el.className = 'ui-button-text';\n      el.textContent = text||title||\".\";\n      button.appendChild(el);\n  \n      button.setAttribute('title',title);\n    },\n    getIndentedPanel: function() {\n      var el = document.createElement('div');\n      el.className = 'ui-widget-content ui-corner-all';\n      el.style.padding = '1em 1.4em';\n      el.style.marginBottom = '20px';\n      return el;\n    },\n    afterInputReady: function(input) {\n      if(input.controls) return;\n      input.controls = this.closest(input,'.form-control');\n    },\n    addInputError: function(input,text) {\n      if(!input.controls) return;\n      if(!input.errmsg) {\n        input.errmsg = document.createElement('div');\n        input.errmsg.className = 'ui-state-error';\n        input.controls.appendChild(input.errmsg);\n      }\n      else {\n        input.errmsg.style.display = '';\n      }\n  \n      input.errmsg.textContent = text;\n    },\n    removeInputError: function(input) {\n      if(!input.errmsg) return;\n      input.errmsg.style.display = 'none';\n    },\n    markTabActive: function(tab) {\n      tab.className = tab.className.replace(/\\s*ui-widget-header/g,'')+' ui-state-active';\n    },\n    markTabInactive: function(tab) {\n      tab.className = tab.className.replace(/\\s*ui-state-active/g,'')+' ui-widget-header';\n    }\n  });\n  \n  JSONEditor.defaults.themes.barebones = JSONEditor.AbstractTheme.extend({\n      getFormInputLabel: function (text) {\n          var el = this._super(text);\n          return el;\n      },\n      getFormInputDescription: function (text) {\n          var el = this._super(text);\n          return el;\n      },\n      getIndentedPanel: function () {\n          var el = this._super();\n          return el;\n      },\n      getChildEditorHolder: function () {\n          var el = this._super();\n          return el;\n      },\n      getHeaderButtonHolder: function () {\n          var el = this.getButtonHolder();\n          return el;\n      },\n      getTable: function () {\n          var el = this._super();\n          return el;\n      },\n      addInputError: function (input, text) {\n          if (!input.errmsg) {\n              var group = this.closest(input, '.form-control');\n              input.errmsg = document.createElement('div');\n              input.errmsg.setAttribute('class', 'errmsg');\n              group.appendChild(input.errmsg);\n          }\n          else {\n              input.errmsg.style.display = 'block';\n          }\n  \n          input.errmsg.innerHTML = '';\n          input.errmsg.appendChild(document.createTextNode(text));\n      },\n      removeInputError: function (input) {\n          input.style.borderColor = '';\n          if (input.errmsg) input.errmsg.style.display = 'none';\n      },\n      getProgressBar: function () {\n          var max = 100, start = 0;\n  \n          var progressBar = document.createElement('progress');\n          progressBar.setAttribute('max', max);\n          progressBar.setAttribute('value', start);\n          return progressBar;\n      },\n      updateProgressBar: function (progressBar, progress) {\n          if (!progressBar) return;\n          progressBar.setAttribute('value', progress);\n      },\n      updateProgressBarUnknown: function (progressBar) {\n          if (!progressBar) return;\n          progressBar.removeAttribute('value');\n      }\n  });\n  \n  JSONEditor.AbstractIconLib = Class.extend({\n    mapping: {\n      collapse: '',\n      expand: '',\n      \"delete\": '',\n      edit: '',\n      add: '',\n      cancel: '',\n      save: '',\n      moveup: '',\n      movedown: ''\n    },\n    icon_prefix: '',\n    getIconClass: function(key) {\n      if(this.mapping[key]) return this.icon_prefix+this.mapping[key];\n      else return null;\n    },\n    getIcon: function(key) {\n      var iconclass = this.getIconClass(key);\n      \n      if(!iconclass) return null;\n      \n      var i = document.createElement('i');\n      i.className = iconclass;\n      return i;\n    }\n  });\n  \n  JSONEditor.defaults.iconlibs.bootstrap2 = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'chevron-down',\n      expand: 'chevron-up',\n      \"delete\": 'trash',\n      edit: 'pencil',\n      add: 'plus',\n      cancel: 'ban-circle',\n      save: 'ok',\n      moveup: 'arrow-up',\n      movedown: 'arrow-down'\n    },\n    icon_prefix: 'icon-'\n  });\n  \n  JSONEditor.defaults.iconlibs.bootstrap3 = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'chevron-down',\n      expand: 'chevron-right',\n      \"delete\": 'remove',\n      edit: 'pencil',\n      add: 'plus',\n      cancel: 'floppy-remove',\n      save: 'floppy-saved',\n      moveup: 'arrow-up',\n      movedown: 'arrow-down'\n    },\n    icon_prefix: 'glyphicon glyphicon-'\n  });\n  \n  JSONEditor.defaults.iconlibs.fontawesome3 = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'chevron-down',\n      expand: 'chevron-right',\n      \"delete\": 'remove',\n      edit: 'pencil',\n      add: 'plus',\n      cancel: 'ban-circle',\n      save: 'save',\n      moveup: 'arrow-up',\n      movedown: 'arrow-down'\n    },\n    icon_prefix: 'icon-'\n  });\n  \n  JSONEditor.defaults.iconlibs.fontawesome4 = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'caret-square-o-down',\n      expand: 'caret-square-o-right',\n      \"delete\": 'times',\n      edit: 'pencil',\n      add: 'plus',\n      cancel: 'ban',\n      save: 'save',\n      moveup: 'arrow-up',\n      movedown: 'arrow-down'\n    },\n    icon_prefix: 'fa fa-'\n  });\n  \n  JSONEditor.defaults.iconlibs.foundation2 = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'minus',\n      expand: 'plus',\n      \"delete\": 'remove',\n      edit: 'edit',\n      add: 'add-doc',\n      cancel: 'error',\n      save: 'checkmark',\n      moveup: 'up-arrow',\n      movedown: 'down-arrow'\n    },\n    icon_prefix: 'foundicon-'\n  });\n  \n  JSONEditor.defaults.iconlibs.foundation3 = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'minus',\n      expand: 'plus',\n      \"delete\": 'x',\n      edit: 'pencil',\n      add: 'page-add',\n      cancel: 'x-circle',\n      save: 'save',\n      moveup: 'arrow-up',\n      movedown: 'arrow-down'\n    },\n    icon_prefix: 'fi-'\n  });\n  \n  JSONEditor.defaults.iconlibs.jqueryui = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'triangle-1-s',\n      expand: 'triangle-1-e',\n      \"delete\": 'trash',\n      edit: 'pencil',\n      add: 'plusthick',\n      cancel: 'closethick',\n      save: 'disk',\n      moveup: 'arrowthick-1-n',\n      movedown: 'arrowthick-1-s'\n    },\n    icon_prefix: 'ui-icon ui-icon-'\n  });\n  \n  JSONEditor.defaults.templates[\"default\"] = function() {\n    return {\n      compile: function(template) {\n        var matches = template.match(/{{\\s*([a-zA-Z0-9\\-_ \\.]+)\\s*}}/g);\n        var l = matches && matches.length;\n  \n        // Shortcut if the template contains no variables\n        if(!l) return function() { return template; };\n  \n        // Pre-compute the search/replace functions\n        // This drastically speeds up template execution\n        var replacements = [];\n        var get_replacement = function(i) {\n          var p = matches[i].replace(/[{}]+/g,'').trim().split('.');\n          var n = p.length;\n          var func;\n          \n          if(n > 1) {\n            var cur;\n            func = function(vars) {\n              cur = vars;\n              for(i=0; i<n; i++) {\n                cur = cur[p[i]];\n                if(!cur) break;\n              }\n              return cur;\n            };\n          }\n          else {\n            p = p[0];\n            func = function(vars) {\n              return vars[p];\n            };\n          }\n          \n          replacements.push({\n            s: matches[i],\n            r: func\n          });\n        };\n        for(var i=0; i<l; i++) {\n          get_replacement(i);\n        }\n  \n        // The compiled function\n        return function(vars) {\n          var ret = template+\"\";\n          var r;\n          for(i=0; i<l; i++) {\n            r = replacements[i];\n            ret = ret.replace(r.s, r.r(vars));\n          }\n          return ret;\n        };\n      }\n    };\n  };\n  \n  JSONEditor.defaults.templates.ejs = function() {\n    if(!window.EJS) return false;\n  \n    return {\n      compile: function(template) {\n        var compiled = new window.EJS({\n          text: template\n        });\n  \n        return function(context) {\n          return compiled.render(context);\n        };\n      }\n    };\n  };\n  \n  JSONEditor.defaults.templates.handlebars = function() {\n    return window.Handlebars;\n  };\n  \n  JSONEditor.defaults.templates.hogan = function() {\n    if(!window.Hogan) return false;\n  \n    return {\n      compile: function(template) {\n        var compiled = window.Hogan.compile(template);\n        return function(context) {\n          return compiled.render(context);\n        };\n      }\n    };\n  };\n  \n  JSONEditor.defaults.templates.markup = function() {\n    if(!window.Mark || !window.Mark.up) return false;\n  \n    return {\n      compile: function(template) {\n        return function(context) {\n          return window.Mark.up(template,context);\n        };\n      }\n    };\n  };\n  \n  JSONEditor.defaults.templates.mustache = function() {\n    if(!window.Mustache) return false;\n  \n    return {\n      compile: function(template) {\n        return function(view) {\n          return window.Mustache.render(template, view);\n        };\n      }\n    };\n  };\n  \n  JSONEditor.defaults.templates.swig = function() {\n    return window.swig;\n  };\n  \n  JSONEditor.defaults.templates.underscore = function() {\n    if(!window._) return false;\n  \n    return {\n      compile: function(template) {\n        return function(context) {\n          return window._.template(template, context);\n        };\n      }\n    };\n  };\n  \n  // Set the default theme\n  JSONEditor.defaults.theme = 'html';\n  \n  // Set the default template engine\n  JSONEditor.defaults.template = 'default';\n  \n  // Default options when initializing JSON Editor\n  JSONEditor.defaults.options = {};\n  \n  // String translate function\n  JSONEditor.defaults.translate = function(key, variables) {\n    var lang = JSONEditor.defaults.languages[JSONEditor.defaults.language];\n    if(!lang) throw \"Unknown language \"+JSONEditor.defaults.language;\n    \n    var string = lang[key] || JSONEditor.defaults.languages[JSONEditor.defaults.default_language][key];\n    \n    if(typeof string === \"undefined\") throw \"Unknown translate string \"+key;\n    \n    if(variables) {\n      for(var i=0; i<variables.length; i++) {\n        string = string.replace(new RegExp('\\\\{\\\\{'+i+'}}','g'),variables[i]);\n      }\n    }\n    \n    return string;\n  };\n  \n  // Translation strings and default languages\n  JSONEditor.defaults.default_language = 'en';\n  JSONEditor.defaults.language = JSONEditor.defaults.default_language;\n  JSONEditor.defaults.languages.en = {\n    /**\n     * When a property is not set\n     */\n    error_notset: \"Property must be set\",\n    /**\n     * When a string must not be empty\n     */\n    error_notempty: \"Value required\",\n    /**\n     * When a value is not one of the enumerated values\n     */\n    error_enum: \"Value must be one of the enumerated values\",\n    /**\n     * When a value doesn't validate any schema of a 'anyOf' combination\n     */\n    error_anyOf: \"Value must validate against at least one of the provided schemas\",\n    /**\n     * When a value doesn't validate\n     * @variables This key takes one variable: The number of schemas the value does not validate\n     */\n    error_oneOf: 'Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.',\n    /**\n     * When a value does not validate a 'not' schema\n     */\n    error_not: \"Value must not validate against the provided schema\",\n    /**\n     * When a value does not match any of the provided types\n     */\n    error_type_union: \"Value must be one of the provided types\",\n    /**\n     * When a value does not match the given type\n     * @variables This key takes one variable: The type the value should be of\n     */\n    error_type: \"Value must be of type {{0}}\",\n    /**\n     *  When the value validates one of the disallowed types\n     */\n    error_disallow_union: \"Value must not be one of the provided disallowed types\",\n    /**\n     *  When the value validates a disallowed type\n     * @variables This key takes one variable: The type the value should not be of\n     */\n    error_disallow: \"Value must not be of type {{0}}\",\n    /**\n     * When a value is not a multiple of or divisible by a given number\n     * @variables This key takes one variable: The number mentioned above\n     */\n    error_multipleOf: \"Value must be a multiple of {{0}}\",\n    /**\n     * When a value is greater than it's supposed to be (exclusive)\n     * @variables This key takes one variable: The maximum\n     */\n    error_maximum_excl: \"Value must be less than {{0}}\",\n    /**\n     * When a value is greater than it's supposed to be (inclusive\n     * @variables This key takes one variable: The maximum\n     */\n    error_maximum_incl: \"Value must be at most {{0}}\",\n    /**\n     * When a value is lesser than it's supposed to be (exclusive)\n     * @variables This key takes one variable: The minimum\n     */\n    error_minimum_excl: \"Value must be greater than {{0}}\",\n    /**\n     * When a value is lesser than it's supposed to be (inclusive)\n     * @variables This key takes one variable: The minimum\n     */\n    error_minimum_incl: \"Value must be at least {{0}}\",\n    /**\n     * When a value have too many characters\n     * @variables This key takes one variable: The maximum character count\n     */\n    error_maxLength: \"Value must be at most {{0}} characters long\",\n    /**\n     * When a value does not have enough characters\n     * @variables This key takes one variable: The minimum character count\n     */\n    error_minLength: \"Value must be at least {{0}} characters long\",\n    /**\n     * When a value does not match a given pattern\n     */\n    error_pattern: \"Value must match the pattern {{0}}\",\n    /**\n     * When an array has additional items whereas it is not supposed to\n     */\n    error_additionalItems: \"No additional items allowed in this array\",\n    /**\n     * When there are to many items in an array\n     * @variables This key takes one variable: The maximum item count\n     */\n    error_maxItems: \"Value must have at most {{0}} items\",\n    /**\n     * When there are not enough items in an array\n     * @variables This key takes one variable: The minimum item count\n     */\n    error_minItems: \"Value must have at least {{0}} items\",\n    /**\n     * When an array is supposed to have unique items but has duplicates\n     */\n    error_uniqueItems: \"Array must have unique items\",\n    /**\n     * When there are too many properties in an object\n     * @variables This key takes one variable: The maximum property count\n     */\n    error_maxProperties: \"Object must have at most {{0}} properties\",\n    /**\n     * When there are not enough properties in an object\n     * @variables This key takes one variable: The minimum property count\n     */\n    error_minProperties: \"Object must have at least {{0}} properties\",\n    /**\n     * When a required property is not defined\n     * @variables This key takes one variable: The name of the missing property\n     */\n    error_required: \"Object is missing the required property '{{0}}'\",\n    /**\n     * When there is an additional property is set whereas there should be none\n     * @variables This key takes one variable: The name of the additional property\n     */\n    error_additional_properties: \"No additional properties allowed, but property {{0}} is set\",\n    /**\n     * When a dependency is not resolved\n     * @variables This key takes one variable: The name of the missing property for the dependency\n     */\n    error_dependency: \"Must have property {{0}}\",\n    /**\n     * Text on Delete All buttons\n     */\n    button_delete_all: \"All\",\n    /**\n     * Title on Delete All buttons\n     */\n    button_delete_all_title: \"Delete All\",\n    /**\n      * Text on Delete Last buttons\n      * @variable This key takes one variable: The title of object to delete\n      */\n    button_delete_last: \"Last {{0}}\",\n    /**\n      * Title on Delete Last buttons\n      * @variable This key takes one variable: The title of object to delete\n      */\n    button_delete_last_title: \"Delete Last {{0}}\",\n    /**\n      * Title on Add Row buttons\n      * @variable This key takes one variable: The title of object to add\n      */\n    button_add_row_title: \"Add {{0}}\",\n    /**\n      * Title on Move Down buttons\n      */\n    button_move_down_title: \"Move down\",\n    /**\n      * Title on Move Up buttons\n      */\n    button_move_up_title: \"Move up\",\n    /**\n      * Title on Delete Row buttons\n      * @variable This key takes one variable: The title of object to delete\n      */\n    button_delete_row_title: \"Delete {{0}}\",\n    /**\n      * Title on Delete Row buttons, short version (no parameter with the object title)\n      */\n    button_delete_row_title_short: \"Delete\",\n    /**\n      * Title on Collapse buttons\n      */\n    button_collapse: \"Collapse\",\n    /**\n      * Title on Expand buttons\n      */\n    button_expand: \"Expand\",\n    \n    /**\n     * Custom buttons\n     */\n    custom_set_image: \"Set Image\",\n    custom_set_url: \"Set URL\",\n  };\n  \n  // Miscellaneous Plugin Settings\n  JSONEditor.plugins = {\n    ace: {\n      theme: ''\n    },\n    epiceditor: {\n  \n    },\n    sceditor: {\n  \n    },\n    select2: {\n      \n    },\n    selectize: {\n    }\n  };\n  \n  // Default per-editor options\n  $each(JSONEditor.defaults.editors, function(i,editor) {\n    JSONEditor.defaults.editors[i].options = editor.options || {};\n  });\n  \n  // Set the default resolvers\n  // Use \"multiple\" as a fall back for everything\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    if(typeof schema.type !== \"string\") return \"multiple\";\n  });\n  // If the type is not set but properties are defined, we can infer the type is actually object\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    // If the schema is a simple type\n    if(!schema.type && schema.properties ) return \"object\";\n  });\n  // If the type is set and it's a basic type, use the primitive editor\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    // If the schema is a simple type\n    if(typeof schema.type === \"string\") return schema.type;\n  });\n  // Boolean editors\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    if(schema.type === 'boolean') {\n      // If explicitly set to 'checkbox', use that\n      if(schema.format === \"checkbox\" || (schema.options && schema.options.checkbox)) {\n        return \"checkbox\";\n      }\n      // Otherwise, default to select menu\n      return (JSONEditor.plugins.selectize.enable) ? 'selectize' : 'select';\n    }\n  });\n  // Use the multiple editor for schemas where the `type` is set to \"any\"\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    // If the schema can be of any type\n    if(schema.type === \"any\") return \"multiple\";\n  });\n  // Editor for base64 encoded files\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    // If the schema can be of any type\n    if(schema.type === \"string\" && schema.media && schema.media.binaryEncoding===\"base64\") {\n      return \"base64\";\n    }\n  });\n  // Editor for uploading files\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    if(schema.type === \"string\" && schema.format === \"url\" && schema.options && schema.options.upload === true) {\n      if(window.FileReader) return \"upload\";\n    }\n  });\n  // Use the table editor for arrays with the format set to `table`\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    // Type `array` with format set to `table`\n    if(schema.type == \"array\" && schema.format == \"table\") {\n      return \"table\";\n    }\n  });\n  // Use the `select` editor for dynamic enumSource enums\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    if(schema.enumSource) return (JSONEditor.plugins.selectize.enable) ? 'selectize' : 'select';\n  });\n  // Use the `enum` or `select` editors for schemas with enumerated properties\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    if(schema[\"enum\"]) {\n      if(schema.type === \"array\" || schema.type === \"object\") {\n        return \"enum\";\n      }\n      else if(schema.type === \"number\" || schema.type === \"integer\" || schema.type === \"string\") {\n        return (JSONEditor.plugins.selectize.enable) ? 'selectize' : 'select';\n      }\n    }\n  });\n  // Specialized editors for arrays of strings\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    if(schema.type === \"array\" && schema.items && !(Array.isArray(schema.items)) && schema.uniqueItems && ['string','number','integer'].indexOf(schema.items.type) >= 0) {\n      // For enumerated strings, number, or integers\n      if(schema.items.enum) {\n        return 'multiselect';\n      }\n      // For non-enumerated strings (tag editor)\n      else if(JSONEditor.plugins.selectize.enable && schema.items.type === \"string\") {\n        return 'arraySelectize';\n      }\n    }\n  });\n  // Use the multiple editor for schemas with `oneOf` set\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    // If this schema uses `oneOf` or `anyOf`\n    if(schema.oneOf || schema.anyOf) return \"multiple\";\n  });\n  \n  /**\n   * This is a small wrapper for using JSON Editor like a typical jQuery plugin.\n   */\n  (function() {\n    if(window.jQuery || window.Zepto) {\n      var $ = window.jQuery || window.Zepto;\n      $.jsoneditor = JSONEditor.defaults;\n      \n      $.fn.jsoneditor = function(options) {\n        var self = this;\n        var editor = this.data('jsoneditor');\n        if(options === 'value') {\n          if(!editor) throw \"Must initialize jsoneditor before getting/setting the value\";\n          \n          // Set value\n          if(arguments.length > 1) {\n            editor.setValue(arguments[1]);\n          }\n          // Get value\n          else {\n            return editor.getValue();\n          }\n        }\n        else if(options === 'validate') {\n          if(!editor) throw \"Must initialize jsoneditor before validating\";\n          \n          // Validate a specific value\n          if(arguments.length > 1) {\n            return editor.validate(arguments[1]);\n          }\n          // Validate current value\n          else {\n            return editor.validate();\n          }\n        }\n        else if(options === 'destroy') {\n          if(editor) {\n            editor.destroy();\n            this.data('jsoneditor',null);\n          }\n        }\n        else {\n          // Destroy first\n          if(editor) {\n            editor.destroy();\n          }\n          \n          // Create editor\n          editor = new JSONEditor(this.get(0),options);\n          this.data('jsoneditor',editor);\n          \n          // Setup event listeners\n          editor.on('change',function() {\n            self.trigger('change');\n          });\n          editor.on('ready',function() {\n            self.trigger('ready');\n          });\n        }\n        \n        return this;\n      };\n    }\n  })();\n  \n    return JSONEditor;\n  })();\n  \n  //# sourceMappingURL=jsoneditor.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/json-editor-class/index.js","/**\n * use AMD loader to require monaco\n * https://github.com/Microsoft/monaco-editor/issues/18\n * @Author: CntChen\n * @Date: 2017-09-20\n */\n\nlet isLoadingAMD = false;\n\n// TODO append as iframe?\nexport const loadMonaco = options => new Promise((resolve, reject) => {\n  const {\n    timeout = 5000,\n    interval = 20,\n    toPath = 'vs',\n  } = options;\n\n  const loadInterval = setInterval(() => {\n    if (window.monaco) {\n      clearInterval(loadInterval);\n      resolve(window.monaco);\n    }\n  }, interval);\n\n  const loadTimeout = setTimeout(() => {\n    clearInterval(loadInterval);\n    clearTimeout(loadTimeout);\n    reject('load monaco timeout');\n  }, timeout);\n\n  const onGoAmdLoader = () => {\n    if (window.monaco) {\n      clearInterval(loadInterval);\n      clearTimeout(loadTimeout);\n      resolve(window.monaco);\n    } else {\n      window.require(['vs/editor/editor.main'], () => {\n        clearInterval(loadInterval);\n        clearTimeout(loadTimeout);\n        resolve(window.monaco);\n      });\n    }\n  };\n\n  const insertScript = () => {\n    if (!window.require && isLoadingAMD === false) {\n      isLoadingAMD = true;\n      const loaderScript = document.createElement('script');\n      loaderScript.type = 'application/javascript';\n      loaderScript.src = `./${toPath}/loader.js`.replace('//', '/');\n      loaderScript.addEventListener('load', onGoAmdLoader);\n      document.head.appendChild(loaderScript);\n    } else if (window.require) {\n      onGoAmdLoader();\n    }\n  };\n\n  insertScript();\n});\n\nexport default {\n  loadMonaco,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/monaco-editor-loader/index.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"editor\",staticClass:\"editor\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowCode),expression:\"isShowCode\"}],ref:\"monacoEditor\",staticClass:\"editor__monaco\",on:{\"wheel\":function($event){$event.preventDefault();}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowForm),expression:\"isShowForm\"}],ref:\"jsonEditor\",staticClass:\"editor__json\",on:{\"wheel\":function($event){_vm.onWheel($event, _vm.$refs.jsonEditor)},\"click\":function($event){_vm.onJsonEditorClick($event)}}})]),_vm._v(\" \"),(_vm.errorMessage)?_c('div',{staticClass:\"error-line\"},[_c('p',[_vm._v(\"Eclipse: \"+_vm._s(_vm.errorMessage))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"editor__button-group\"},[_c('div',{staticClass:\"editor__button-group__left\"},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-upload\"},on:{\"click\":_vm.comfirmObject}},[_vm._v(\"\\n        提交配置数据\\n      \")]),_vm._v(\" \"),_c('el-button',{staticClass:\"element-hidden\",attrs:{\"type\":\"warning\",\"size\":\"small\"},on:{\"click\":_vm.resetObject}},[_vm._v(\"\\n        重置表单数据\\n      \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"editor__button-group__right element-hidden\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.showBoth}},[_vm._v(\"\\n        代码和表单\\n      \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.showCode}},[_vm._v(\"\\n        只看代码\\n      \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.showForm}},[_vm._v(\"\\n        只看表单\\n      \")])],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-707629a8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/json-editor/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-707629a8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-707629a8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-707629a8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/json-editor/index.vue\n// module id = null\n// module chunks = ","<template>\n<div>\n  <div class=\"page-content pipline\">\n    <div class=\"pipline__components-selector\">\n      <h3>模板区块</h3>\n      <div class=\"components-selector__list\">\n        <div class=\"components-selector__item\"\n          v-for=\"component in templateComponents\"\n          :key=\"component.id\">\n          <el-button\n            :type=\"getComponentSelectorButtonType(component)\"\n            size=\"small\"\n            icon=\"el-icon-menu\"\n            @click.native=\"selectComponent(component)\">\n            {{component.title}}\n          </el-button>\n        </div>\n      </div>\n    </div>\n    <div class=\"pipline__preview\">\n      <h3>页面预览</h3>\n      <div class=\"preview__button-group\">\n        <el-button\n          size=\"small\"\n          icon=\"el-icon-refresh\"\n          @click.native=\"refreshPreviewIframe\">\n          刷新\n        </el-button>\n        <el-button\n          size=\"small\"\n          icon=\"el-icon-news\"\n          @click.native=\"previewInNewPage\">\n          新页面预览\n        </el-button>\n      </div>\n      <div class=\"preview__page-title\">\n        {{baseConfig.title}}\n      </div>\n      <iframe\n        class=\"preview__iframe\"\n        ref=\"previewIframe\"\n        :src=\"previewSrc\"/>\n    </div>\n    <div class=\"pipline__fill-info\">\n      <h3>页面配置</h3>\n      <div class=\"fill-info__form\">\n        <el-tabs\n          type=\"border-card\"\n          @tab-click=\"onTabClick\"\n          :value=\"formName\">\n          <el-tab-pane\n            name=\"pageBaseConfig\"\n            label=\"页面基本配置\">\n            <div class=\"form-json-editor\">\n              <json-editor\n                :data.sync=\"baseConfig\"\n                :dataSchema.sync=\"baseConfigSchema\"/>\n            </div>\n          </el-tab-pane>\n          <el-tab-pane\n            name=\"pageConfig\"\n            label=\"页面内容配置\">\n            <div class=\"form-json-editor\">\n              <json-editor\n                :data.sync=\"data\"\n                :dataSchema.sync=\"dataSchema\"/>\n            </div>\n          </el-tab-pane>\n        </el-tabs>\n      </div>\n    </div>\n  </div>\n  <el-dialog\n    title=\"Wellcom to Pipeline !\"\n    :visible.sync=\"tipDialogVisible\"\n    width=\"35%\">\n    <h3>后台服务器性能稍差, 请耐心等待接口返回.</h3>\n    如果接口请求总是失败, 请点击<a href=\"https://172.106.33.34/pipeline-node/pipeline/prepareFromTemplate\" target=\"blank\">这里</a>允许浏览器访问自签名证书的服务器.\n  </el-dialog>\n</div>\n</template>\n\n<script>\nimport { APIS } from 'comp/util/constants';\nimport fetch from 'comp/util/fetch';\nimport JsonEditor from 'comp/json-editor';\n\nexport default {\n  name: 'pipline-editor',\n  components: {\n    'json-editor': JsonEditor,\n  },\n  data() {\n    return {\n      templateTypeList: [],\n      pageTypeList: [],\n      purpose: '',\n      templateId: '',\n      template: null,\n      pageId: '',\n      data: {},\n      dataSchema: {},\n      schemas: {},\n      baseConfig: {},\n      baseConfigSchema: {},\n      baseConfigSchemaEarly: {},\n      templateComponents: [],\n      currentComponent: null,\n      previewSrc: '',\n      formName: 'pageBaseConfig',\n      pageBaseUrl: '',\n      tipDialogVisible: false,\n    };\n  },\n  methods: {\n    async prepareFromTemplate() {\n      const ret = await fetch(`${APIS.PIPLINE}/prepareFromTemplate`, {\n        method: 'POST',\n        body: {\n          templateId: this.templateId,\n        },\n      });\n      this.pageId = ret.pageId;\n      this.previewSrc = `${APIS.ROOT}/public/pipelines/${this.pageId}/server/dist/index.html`;\n    },\n    async getPageBaseUrl() {\n      const ret = await fetch(`${APIS.PIPLINE}/pageBaseUrl`, {\n      });\n      return ret;\n    },\n    async getBaseConfig() {\n      const ret = await fetch(`${APIS.PIPLINE}/baseConfig`, {\n        body: {\n          pageId: this.pageId,\n        },\n      });\n      this.baseConfig = ret;\n    },\n    async putBaseConfig() {\n      const ret = await fetch(`${APIS.PIPLINE}/baseConfig`, {\n        method: 'PUT',\n        body: {\n          pageId: this.pageId,\n          baseConfig: this.baseConfig,\n        },\n      });\n\n      this.refreshPreviewIframe();\n      await this.getBaseConfig();\n    },\n    async getBaseConfigSchema() {\n      const ret = await fetch(`${APIS.PIPLINE}/baseConfigSchema`, {\n        body: {\n          pageId: this.pageId,\n        },\n      });\n      this.baseConfigSchemaEarly = ret;\n    },\n    async getTemplateComponents() {\n      const ret = await fetch(`${APIS.PIPLINE}/templateComponents`, {\n        body: {\n          pageId: this.pageId,\n        },\n      });\n      this.templateComponents = ret;\n    },\n    async putComponents() {\n      const ret = await fetch(`${APIS.PIPLINE}/templateComponents`, {\n        method: 'PUT',\n        body: {\n          pageId: this.pageId,\n          templateComponents: this.templateComponents,\n        },\n      });\n\n      this.refreshPreviewIframe();\n      await this.getTemplateComponents();\n    },\n    async getComponentsSchema() {\n      const ret = await fetch(`${APIS.PIPLINE}/componentsSchema`, {\n        body: {\n          pageId: this.pageId,\n        },\n      });\n      this.schemas = ret;\n    },\n    selectComponent(component) {\n      this.currentComponent = component;\n      this.tabToPageConfig();\n    },\n    selectDefaultComponent() {\n      if (this.currentComponent === null\n        && this.templateComponents.length > 0) {\n        this.currentComponent = this.templateComponents[0];\n        return true;\n      }\n      return false;\n    },\n    refreshPreviewIframe() {\n      this.$refs.previewIframe.onload = this.iframeScrollToCurrentComponent;\n      this.$refs.previewIframe.src = this.previewSrc;\n    },\n    iframeScrollToCurrentComponent() {\n      this.$refs.previewIframe.contentWindow.postMessage({\n        currentComponent: this.currentComponent,\n      }, '*');\n    },\n    previewInNewPage() {\n      window.open(this.previewSrc);\n    },\n    onTabClick(tab) {\n      switch(tab.name) {\n        case 'pageConfig':\n          this.selectDefaultComponent();\n          break;\n        default:\n          break;\n      };\n      this.formName = tab.name;\n    },\n    tabToPageConfig() {\n      this.formName = 'pageConfig';\n    },\n    getComponentSelectorButtonType(component) {\n      return (this.currentComponent && this.currentComponent.id === component.id) ? 'primary' : 'normal';\n    },\n  },\n  async mounted() {\n    setTimeout(() => {\n      this.tipDialogVisible = false;\n    }, 5000);\n\n    this.templateId = this.$route.params.id;\n    this.purpose = this.$route.query.purpose;\n\n    await this.prepareFromTemplate();\n    await this.getBaseConfigSchema();\n    await this.getBaseConfig();\n    // 用 baseConfigSchemaEarly 解决数据和约束不在一个 Vue 渲染周期内导致的校验报错\n    this.baseConfigSchema = this.baseConfigSchemaEarly;\n    await this.getComponentsSchema();\n    await this.getTemplateComponents();\n  },\n  watch: {\n    templateComponents(value, oldValue) {\n      if (!this.currentComponent) {\n        this.selectDefaultComponent();\n      } else {\n        const componentsWithId = value.filter((item) => item.id === this.currentComponent.id);\n        if (componentsWithId.length > 0) {\n          this.currentComponent = componentsWithId[0];\n        } else {\n          this.selectDefaultComponent();\n        }\n      }\n    },\n    currentComponent() {\n      this.dataSchema = this.schemas[this.currentComponent.name];\n      this.data = this.currentComponent.data;\n      this.iframeScrollToCurrentComponent();\n    },\n    data(value, oldValue) {\n      if (this.currentComponent.data === this.data) {\n        return;\n      }\n      this.currentComponent.data = this.data;\n      this.putComponents();\n    },\n    baseConfig(value, oldValue) {\n      if (JSON.stringify(oldValue) === JSON.stringify({})\n        || JSON.stringify(value) === JSON.stringify(oldValue)) {\n        return;\n      }\n      this.baseConfig = value;\n      this.putBaseConfig();\n    },\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.pipline {\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n\n  &__components-selector {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 15%;\n    border-right: 1px solid #00000020;\n  }\n\n  &__preview {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 30%;\n    border-right: 1px solid #00000020;\n  }\n\n  &__fill-info {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 55%;\n    padding: 0 10px;\n    overflow: auto;\n  }\n}\n\n.components-selector {\n  &__list {\n    display: flex;\n    flex-direction: column;\n    margin: 10px 0 0;\n  }\n\n  &__item {\n    margin: 5px 0 0;\n  }\n}\n\n.preview {\n  &__page-title {\n    margin: 12px 0 2px;\n    font-size: 18px;\n    font-weight: bold;\n  }\n\n  &__iframe {\n    margin: 0px 0 0;\n    border: 1px solid black;\n    width: 375px;\n    height: 667px;\n  }\n}\n\n.fill-info {\n  &__form {\n    width: 100%;\n    margin: 0 0 10px 0;\n  }\n\n  &__thumbnail-item {\n    display: flex;\n    align-items: center;\n  }\n\n  &__thumbnail-container {\n    border: 1px solid #00000020;\n    text-align: center;\n    line-height: 175px;\n    width: 175px;\n    height: 175px;\n  }\n\n  &__thumbnail {\n    max-width: 175px;\n    max-height: 175px;\n  }\n\n  &__upload-thumbnail {\n    margin: 0 0 0 10px;\n  }\n  \n  /* 模仿 bootstrap 中的按钮样式 */\n  &__upload-button {\n    font-size: 14px;\n    color: #ffffff;\n    background-color: #5bc0de;\n    border-color: #46b8da;\n  }\n\n  &__button {\n    margin: 10px;\n  }\n}\n\n.form {\n  &-json-editor {\n    width: 100%;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/pipeline/editor.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"page-content pipline\"},[_c('div',{staticClass:\"pipline__components-selector\"},[_c('h3',[_vm._v(\"模板区块\")]),_vm._v(\" \"),_c('div',{staticClass:\"components-selector__list\"},_vm._l((_vm.templateComponents),function(component){return _c('div',{key:component.id,staticClass:\"components-selector__item\"},[_c('el-button',{attrs:{\"type\":_vm.getComponentSelectorButtonType(component),\"size\":\"small\",\"icon\":\"el-icon-menu\"},nativeOn:{\"click\":function($event){_vm.selectComponent(component)}}},[_vm._v(\"\\n            \"+_vm._s(component.title)+\"\\n          \")])],1)}))]),_vm._v(\" \"),_c('div',{staticClass:\"pipline__preview\"},[_c('h3',[_vm._v(\"页面预览\")]),_vm._v(\" \"),_c('div',{staticClass:\"preview__button-group\"},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-refresh\"},nativeOn:{\"click\":function($event){return _vm.refreshPreviewIframe($event)}}},[_vm._v(\"\\n          刷新\\n        \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-news\"},nativeOn:{\"click\":function($event){return _vm.previewInNewPage($event)}}},[_vm._v(\"\\n          新页面预览\\n        \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"preview__page-title\"},[_vm._v(\"\\n        \"+_vm._s(_vm.baseConfig.title)+\"\\n      \")]),_vm._v(\" \"),_c('iframe',{ref:\"previewIframe\",staticClass:\"preview__iframe\",attrs:{\"src\":_vm.previewSrc}})]),_vm._v(\" \"),_c('div',{staticClass:\"pipline__fill-info\"},[_c('h3',[_vm._v(\"页面配置\")]),_vm._v(\" \"),_c('div',{staticClass:\"fill-info__form\"},[_c('el-tabs',{attrs:{\"type\":\"border-card\",\"value\":_vm.formName},on:{\"tab-click\":_vm.onTabClick}},[_c('el-tab-pane',{attrs:{\"name\":\"pageBaseConfig\",\"label\":\"页面基本配置\"}},[_c('div',{staticClass:\"form-json-editor\"},[_c('json-editor',{attrs:{\"data\":_vm.baseConfig,\"dataSchema\":_vm.baseConfigSchema},on:{\"update:data\":function($event){_vm.baseConfig=$event},\"update:dataSchema\":function($event){_vm.baseConfigSchema=$event}}})],1)]),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"name\":\"pageConfig\",\"label\":\"页面内容配置\"}},[_c('div',{staticClass:\"form-json-editor\"},[_c('json-editor',{attrs:{\"data\":_vm.data,\"dataSchema\":_vm.dataSchema},on:{\"update:data\":function($event){_vm.data=$event},\"update:dataSchema\":function($event){_vm.dataSchema=$event}}})],1)])],1)],1)])]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"Wellcom to Pipeline !\",\"visible\":_vm.tipDialogVisible,\"width\":\"35%\"},on:{\"update:visible\":function($event){_vm.tipDialogVisible=$event}}},[_c('h3',[_vm._v(\"后台服务器性能稍差, 请耐心等待接口返回.\")]),_vm._v(\"\\n    如果接口请求总是失败, 请点击\"),_c('a',{attrs:{\"href\":\"https://172.106.33.34/pipeline-node/pipeline/prepareFromTemplate\",\"target\":\"blank\"}},[_vm._v(\"这里\")]),_vm._v(\"允许浏览器访问自签名证书的服务器.\\n  \")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-17ca1617\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/pipeline/editor.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-17ca1617\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./editor.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editor.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editor.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-17ca1617\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./editor.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-17ca1617\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/pipeline/editor.vue\n// module id = null\n// module chunks = ","import Vue from 'vue';\nimport Router from 'vue-router';\nimport Pipeline from '@/pages/pipeline/editor';\n\nVue.use(Router);\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Pipeline',\n      component: Pipeline,\n    },\n    {\n      path: '/pipeline',\n      name: 'Pipeline',\n      component: Pipeline,\n    },\n  ],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport App from './App';\nimport router from './router';\n\nVue.use(ElementUI);\n\nVue.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '<App/>',\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}