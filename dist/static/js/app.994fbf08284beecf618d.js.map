{"version":3,"sources":["webpack:///./src/App.vue?9428","webpack:///./src/App.vue","webpack:///src/components/json-editor/index.vue","webpack:///src/App.vue","webpack:///./src/components/util/constants.js","webpack:///./src/components/util/fetch.js","webpack:///./src/components/json-editor-class/index.js","webpack:///./src/components/monaco-editor-loader/index.js","webpack:///./src/components/json-editor/index.vue?6d54","webpack:///./src/components/json-editor/index.vue","webpack:///src/pages/pipeline/editor.vue","webpack:///./src/pages/pipeline/editor.vue?b9c0","webpack:///./src/pages/pipeline/editor.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","JSONEditorClass","src_App","__webpack_require__","normalizeComponent","ssrContext","APIS","location","protocol","PIPLINE","util_fetch","api","options","arguments","length","undefined","url","headers","method","test","params","body","stringify_default","lib_stringify_default","arrayFormat","skipNulls","loadingInstance","element_ui_common","service","fullscreen","text","background","fetch","then","response","vue_esm","nextTick","close","status","json","ret","promise_default","a","resolve","data","reject","extends_default","error","json_editor_class","Class","initializing","fnTest","window","postMessage","extend","prop","_super","prototype","name","fn","tmp","apply","init","constructor","CustomEvent","event","bubbles","cancelable","detail","evt","document","createEvent","initCustomEvent","Event","lastTime","vendors","x","requestAnimationFrame","cancelAnimationFrame","callback","element","currTime","Date","getTime","timeToCall","Math","max","setTimeout","clearTimeout","Array","isArray","arg","Object","toString","call","$extend","destination","source","i","property","obj","hasOwnProperty","typeof_default","nodeType","$each","keys_default","keys","$trigger","el","e","initEvent","dispatchEvent","JSONEditor","Element","Error","defaults","self","ready","theme_class","themes","theme","schema","template","refs","uuid","__data","icon_class","iconlibs","iconlib","root_container","getContainer","appendChild","translate","_loadExternalRefs","_getDefinitions","validator_options","custom_validators","validator","Validator","editor_class","getEditorClass","root","createEditor","jsoneditor","required","container","preBuild","build","postBuild","startval","setValue","validation_results","validate","getValue","showValidationErrors","trigger","value","destroy","destroyed","innerHTML","on","callbacks","push","off","newcallbacks","setOption","option","show_errors","onChange","classname","expandSchema","resolvers","resolver","editors","firing_change","compileTemplate","engine","templates","compile","_data","key","hasAttribute","getAttribute","setAttribute","registerEditor","editor","path","unregisterEditor","getEditor","watch","watchlist","unwatch","newlist","notifyWatchers","isEnabled","enable","disable","definitions","_getExternalRefs","merge_refs","newrefs","$ref","substr","j","done","waiting","callback_fired","ajax","r","XMLHttpRequest","open","onreadystatechange","readyState","console","log","JSON","parse","responseText","send","expandRefs","ref","decodeURIComponent","extendSchemas","extended","type","disallow","anyOf","dependencies","not","allOf","oneOf","obj1","obj2","val","filter","n","indexOf","concat","reduce","p","c","languages","_validateSchema","valid","errors","stringified","message","required_by_default","oneof_errors","_checkType","multipleOf","divisibleBy","divisor","floor","math","mod","bignumber","equals","Decimal","exclusiveMaximum","maximum","exclusiveMinimum","minimum","maxLength","minLength","pattern","RegExp","items","additionalItems","maxItems","minItems","uniqueItems","seen","maxProperties","minProperties","validated_properties","properties","patternProperties","regex","additionalProperties","no_additional_properties","AbstractEditor","onChildEditorChange","notify","change","parent","bubble","watch_listener","register","unregister","getNumColumns","template_engine","original_schema","formname","replace","form_name_root","split","pop","link_watchers","setContainer","setupWatchListeners","addLinks","getDefault","updateHeaderText","onWatchedFieldChange","path_parts","first","adjusted_path","watched","vars","watched_values","refreshWatchedFieldValues","closest","unshift","shift","join","headerTemplate","header_template","no_link_holder","link_holder","getLinksHolder","links","addLink","getLink","getButton","icon","title","btnClass","getIcon","btn","className","setButtonText","button","link","holder","mediaType","href","download","getBlockLinkHolder","createElement","image","createImageLink","rel","getBlockLink","media","createMediaLink","textContent","class","changed","getWatchedFieldValues","header","children","childNodes","nodeValue","getHeaderText","title_only","header_text","getTitle","i0","i1","refreshValue","getChildEditors","parentNode","removeChild","disabled","isRequired","getDisplayText","arr","disp","used","description","format","descripton","inc","getOption","string","input","removeAttribute","initial","from_template","serialized","sanitized","sanitize","sceditor_instance","epiceditor","importFile","ace_editor","is_dirty","adjust_height","num","min","ceil","input_type","compact","label","getFormInputLabel","getFormInputDescription","default_format","getTextareaInput","step","getRangeInput","source_code","getFormInputField","input_width","style","width","readOnly","readonly","always_disabled","addEventListener","preventDefault","stopPropagation","input_height","height","expand_height","ch","offsetHeight","scrollHeight","control","getFormControl","afterInputReady","myDiv","farmImage","innerHtml","insertBefore","wysiwyg","jQuery","sceditor","plugins","emoticonsEnabled","sceditor_options","blur","remove","html","EpicEditor","epiceditor_container","display","clientSideStorage","load","exportFile","ace","mode","ace_container","position","edit","setTheme","require","getSession","setMode","Mode","src","unload","previous_error_setting","messages","addInputError","removeInputError","number","integer","object","maxwidth","editjson_button","addproperty_button","hideEditJSON","layoutEditors","row_container","property_order","sort","b","ordera","propertyOrder","orderb","rows","property_removed","found","hidden","grid_columns","minh","maxh","biggest","new_width","layout","row","getGridRow","setGridColumnSize","getPropertySchema","matched","cached_editors","object_layout","minwidth","table_row","table","defaultProperties","display_required_only","k","s","addObjectProperty","editor_holder","getTableCell","getHeader","editjson_holder","getModal","editjson_textarea","editjson_save","saveJSON","editjson_cancel","addproperty_holder","addproperty_list","maxHeight","padding","overflowY","overflowX","paddingLeft","addproperty_add","addproperty_input","marginBottom","alert","spacer","clear","getDescription","error_holder","getIndentedPanel","getGridContainer","getGridColumn","title_controls","getHeaderButtonHolder","editjson_controls","addproperty_controls","collapsed","toggle_button","disable_collapse","toggleEditJSON","disable_edit_json","toggleAddProperty","refreshAddProperties","showEditJSON","hideAddProperty","left","offsetLeft","top","offsetTop","editing_json","insertPropertyControlUsingPropertyOrder","child","addPropertyCheckbox","checkbox","labelText","getCheckbox","getCheckboxLabel","paddingBottom","paddingTop","marginTop","checked","removeObjectProperty","addproperty_checkboxes","showAddProperty","adding_property","prebuild_only","canHaveAdditionalProperties","getChildEditorHolder","result","remove_empty_properties","disable_properties","can_add","num_props","show_modal","my_errors","other_errors","getErrorMessage","addTableRowError","removeTableRowError","array","info","getItemInfo","tabs_holder","add_row_button","remove_all_rows_button","delete_last_row_button","moveup_button","movedown_button","delete_button","row_cache","hide_delete_buttons","disable_array_delete","hide_delete_all_rows_buttons","disable_array_delete_all_rows","hide_delete_last_row_buttons","disable_array_delete_last_row","hide_move_buttons","disable_array_reorder","hide_add_button","disable_array_add","panel","controls","getButtonHolder","row_holder","getTabHolder","getTabContentHolder","active_tab","addControls","refreshTabs","getItemTitle","item_title","getItemSchema","item_info","default","child_editors","getElementEditor","getTabContent","array_controls","empty","hard","tab","destroyRow","getMax","Infinity","refresh_headers","tab_text","markTabActive","markTabInactive","slice","addRow","new_active_tab","force","oldi","controls_needed","getTab","addTab","controls_holder","newval","row_holder_display","controls_display","tabs","textAlign","item_schema","item_default","item_has_child_editors","getTable","thead","getTableHead","header_row","getTableRow","getTableBody","ce","order","th","getTableHeaderCell","controls_header_cell","getItemDefault","ignore","schema_copy","controls_cell","table_controls","margin","numrows_changed","refreshRowButtons","need_row_buttons","multiple","switcher","switchEditor","buildChildEditor","current_value","keep_values","refreshHeaderText","types","switcher_options","validators","keep_oneof_values","allowed_types","display_text","getSwitcher","getSwitcherOptions","check_part","check","new_errors","new_error","enum_titles","selected","select_options","html_values","getHTML","display_area","hide_display","select","typecast","enum_values","enum_options","select2","longest_text","enum_display","enumSource","enumValue","getSelectInput","setSelectOptions","onInputChange","new_val","setupSelect2","select2_options","select_titles","new_items","item","item_titles","item_values","prev_value","selectize","addItem","enum","setupSelectize","selectize_options","create","updateSelectizeOptions","selectized","clearOptions","addOption","unlock","lock","multiselect","select_values","items_schema","t","option_keys","option_titles","inputs","getMultiCheckboxHolder","size","new_value","updateValue","base64","FileReader","uploader","files","fr","onload","target","refreshPreview","readAsDataURL","preview","last_preview","mime","match","img","maxWidth","upload","preview_value","file","uploadButton","getProgressBar","progressBar","success","failure","updateProgress","progress","updateProgressBar","updateProgressBarUnknown","arraySelectize","group","delimiter","createOnBlur","forEach","elem","matchKey","documentElement","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","AbstractTheme","getFloatRightLinkHolder","cssFloat","marginLeft","backgroundColor","border","boxShadow","zIndex","createTextNode","disableHeader","color","disableLabel","enableHeader","enableLabel","fontWeight","marginRight","fontStyle","getElementsByTagName","setSwitcherOptions","titles","boxSizing","firstChild","borderLeft","getCheckboxDescription","applyStyles","styles","selector","span","borderWidth","lineHeight","borderRadius","borderBottomRightRadius","borderTopRightRadius","cursor","tab_holder","opacity","bootstrap2","controlgroup","errmsg","bar","bootstrap3","fontSize","start","percentage","foundation","minWidth","paddingRight","verticalAlign","insertAdjacentHTML","getElementsByClassName","meter","foundation3","foundation4","foundation5","foundation6","errorEl","borderBottom","borderColor","jqueryui","barebones","AbstractIconLib","mapping","collapse","expand","delete","add","cancel","save","moveup","movedown","icon_prefix","getIconClass","iconclass","fontawesome3","fontawesome4","foundation2","l","replacements","get_replacement","func","cur","trim","ejs","EJS","compiled","context","handlebars","Handlebars","hogan","Hogan","markup","Mark","up","mustache","Mustache","view","swig","underscore","_","variables","lang","language","default_language","en","error_notset","error_notempty","error_enum","error_anyOf","error_oneOf","error_not","error_type_union","error_type","error_disallow_union","error_disallow","error_multipleOf","error_maximum_excl","error_maximum_incl","error_minimum_excl","error_minimum_incl","error_maxLength","error_minLength","error_pattern","error_additionalItems","error_maxItems","error_minItems","error_uniqueItems","error_maxProperties","error_minProperties","error_required","error_additional_properties","error_dependency","button_delete_all","button_delete_all_title","button_delete_last","button_delete_last_title","button_add_row_title","button_move_down_title","button_move_up_title","button_delete_row_title","button_delete_row_title_short","button_collapse","button_expand","custom_set_image","custom_set_url","binaryEncoding","Zepto","$","get","isLoadingAMD","monaco_editor_loader_loadMonaco","_options$timeout","timeout","_options$interval","interval","_options$toPath","toPath","loadInterval","setInterval","monaco","clearInterval","loadTimeout","onGoAmdLoader","loaderScript","head","insertScript","json_editor","_this","dataSchema","primeData","monacoEditor","dataString","jsonEditor","jsonEditorChangeHandler","clientHeight","errorMessage","newData","JsonEditor","getPosition","primeDataSchema","_this2","_this3","_this4","wheelDeltaY","scrollTop","inputFormat","inputPath","reCreateJsonEditor","components_json_editor","_vm","staticClass","directives","rawName","expression","wheel","$event","_v","onWheel","$refs","click","onJsonEditorClick","_s","_e","comfirmObject","resetObject","showBoth","showCode","showForm","pipeline_editor","json_editor_normalizeComponent","templateId","pageId","baseConfig","refreshPreviewIframe","getBaseConfig","_this5","_this6","_this7","templateComponents","getTemplateComponents","_this8","component","tabToPageConfig","iframeScrollToCurrentComponent","previewSrc","currentComponent","selectDefaultComponent","_this9","purpose","prepareFromTemplate","getBaseConfigSchema","baseConfigSchemaEarly","getComponentsSchema","_this10","putComponents","oldValue","putBaseConfig","pages_pipeline_editor","_l","getComponentSelectorButtonType","nativeOn","selectComponent","previewInNewPage","formName","tab-click","onTabClick","baseConfigSchema","update:data","update:dataSchema","visible","tipDialogVisible","update:visible","src_pages_pipeline_editor","editor_normalizeComponent","use","vue_router_esm","router","routes","element_ui_common_default","config","productionTip","components","App"],"mappings":"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","file":"static/js/app.994fbf08284beecf618d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-58121ac2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-58121ac2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-58121ac2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n<div>\n  <div class=\"editor\"\n    ref=\"editor\">\n    <div class=\"editor__monaco\"\n      @wheel.prevent\n      v-show=\"isShowCode\"\n      ref=\"monacoEditor\">\n    </div>\n    <div class=\"editor__json\"\n      @wheel=\"onWheel($event, $refs.jsonEditor)\"\n      @click=\"onJsonEditorClick($event)\"\n      v-show=\"isShowForm\"\n      ref=\"jsonEditor\">\n    </div>\n  </div>\n  <div class=\"error-line\"\n    v-if=\"errorMessage\">\n    <p>Eclipse: {{errorMessage}}</p>\n  </div>\n  <div class=\"editor__button-group\">\n    <div class=\"editor__button-group__left\">\n      <el-button\n        size=\"small\"\n        icon=\"el-icon-upload\"\n        @click=\"comfirmObject\">\n        提交配置数据\n      </el-button>\n      <el-button\n        class=\"element-hidden\"\n        type=\"warning\"\n        size=\"small\"\n        @click=\"resetObject\">\n        重置表单数据\n      </el-button>\n    </div>\n    <div class=\"editor__button-group__right element-hidden\">\n      <el-button size=\"small\"\n        @click=\"showBoth\">\n        代码和表单\n      </el-button>\n      <el-button size=\"small\"\n        @click=\"showCode\">\n        只看代码\n      </el-button>\n      <el-button size=\"small\"\n        @click=\"showForm\">\n        只看表单\n      </el-button>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport JSON5 from 'json5';\nimport JSONEditor from 'comp/json-editor-class';\nimport { loadMonaco } from 'comp/monaco-editor-loader';\n\n((JSONEditorClass) => {\n  JSONEditorClass.defaults.language = 'zh';\n  JSONEditorClass.defaults.languages.zh = {\n    button_collapse: '折叠',\n    button_expand: '展开',\n    button_move_down_title: '下移',\n    button_move_up_title: '上移',\n    button_add_row_title: '添加{{0}}',\n    button_delete_row_title: '删除{{0}}',\n    button_delete_last_title: '删除末尾{{0}}',\n    button_delete_all_title: '删除全部',\n    custom_set_image: '设置图片',\n    custom_set_url: '设置链接',\n  };\n})(JSONEditor);\n\nexport default {\n  components: {\n  },\n  props: {\n    data: {\n      required: true,\n    },\n    dataSchema: {\n      type: Object,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      MonacoEditor: null,\n      JsonEditor: null,\n      primeData: {},\n      primeDataSchema: {},\n      dataString: '',\n      errorMessage: '',\n      editorHeight: 0,\n      jsonEditorDefaultString: '',\n      isShowCode: false,\n      isShowForm: true,\n      currentEditorPath: '',\n      currentUploadImgUrl: '',\n      showUploadImgDialog: false,\n      currentUploadSrcURL: '',\n      showUploadSrcDialog: false,\n    };\n  },\n  async mounted() {\n    this.primeData = this.dataRestorSpread(this.data);\n    this.primeDataSchema = { ...this.dataSchema };\n    this.dataString = this.getDataString(this.primeData);\n\n    // Initialize the editor\n    const Monaco = await loadMonaco({\n      toPath: 'vs',\n    });\n    this.MonacoEditor = this.initMonacoEditor(Monaco, this.$refs.monacoEditor);\n    this.MonacoEditor.setValue(this.dataString);\n    this.MonacoEditor.onDidChangeModelContent(() => {\n      this.dataString = this.MonacoEditor.getValue();\n    });\n\n    this.JsonEditor = this.initJsonEditor(this.primeDataSchema, this.$refs.jsonEditor);\n    this.setJsonEditorValue(this.primeData);\n    this.jsonEditorDefaultString = JSON.stringify(this.JsonEditor.getValue());\n    this.JsonEditor && this.JsonEditor.on('change', this.jsonEditorChangeHandler);\n\n    //for resize detection\n    this.editorHeight = this.$refs.editor.clientHeight;\n  },\n  methods: {\n    initMonacoEditor(monaco, ele) {\n      const editor = monaco.editor.create(ele, {\n        language: 'java',\n        scrollBeyondLastLine: false,\n        minimap: {\n          enabled: false,\n        },\n      });\n      return editor;\n    },\n    initJsonEditor(schema, ele) {\n      if(!this.schemaValidate(schema)) {\n        this.$message.error(this.errorMessage);\n        return null;\n      };\n\n      ele.innerHTML = '';\n      const editor = new JSONEditor(ele, {\n        schema,\n        theme: 'bootstrap3',\n        disable_edit_json: true,\n        disable_properties: true,\n        no_additional_properties: true,\n      });\n      return editor;\n    },\n    jsonEditorChangeHandler() {\n      if (!this.JsonEditor || !this.JsonEditor.getValue) {\n        return;\n      }\n      const newData = this.JsonEditor.getValue();\n      if (!this.dataValidate(newData)) {\n        return;\n      };\n      // ${newData} pass validation\n      // ${primeData} validated change will always change this.JsonEditor value\n      // so if ${primeData} pass validation, ${newData} is a patch change from ${primeData}, can directly set to ${primeData}\n      if (this.dataValidate(this.primeData)) {\n        // fixbug: array `move down`/`move up`, primeData become newData immediately\n        this.primeData = JSON.parse(JSON.stringify(newData));\n      } else if( JSON.stringify(newData) !== this.JsonEditorDefaultString) {\n        this.$message.error('在表单中编辑数据前, 请在代码中的配置数据编辑到与数据约束匹配.');\n      }\n      this.jsonEditorDefaultString = newData;\n    },\n    getDataString(data) {\n      return JSON5.stringify(data, null, 2);\n    },\n    getJsonEditorValueByPath(path) {\n      const name = this.JsonEditor && this.JsonEditor.getEditor(path);\n      if (name) {\n        return name.getValue();\n      }\n      return null;\n    },\n    setJsonEditorValueByPath(path, value) {\n      const name = this.JsonEditor && this.JsonEditor.getEditor(path);\n      if (name) {\n        name.setValue(value);\n        return true;\n      }\n      return false;\n    },\n    setJsonEditorValue(value) {\n      if (this.dataValidate(value)\n        && this.JsonEditor\n        && this.JsonEditor.getValue\n        && JSON.stringify(value) !== JSON.stringify(this.JsonEditor.getValue())) {\n        this.JsonEditor.setValue(value);\n        return true;\n      }\n      return false;\n    },\n    setMonacoEditorValue(value) {\n      if (!this.MonacoEditor) return;\n\n      const position = this.MonacoEditor.getPosition && this.MonacoEditor.getPosition();\n\n      if (this.MonacoEditor.getValue && this.MonacoEditor.getValue() !== this.dataString) {\n        this.MonacoEditor.setValue && this.MonacoEditor.setValue(this.dataString);\n        // keep cursor position\n        this.MonacoEditor.setPosition && this.MonacoEditor.setPosition(position);\n        return true;\n      }\n      return false;\n    },\n    dataValidate(value) {\n      const editor = new JSONEditor(document.createElement('div'), {\n        schema: this.primeDataSchema,\n        required_by_default: true,\n        no_additional_properties: true,\n      });\n      const error = editor.validate(value);\n      if (error && error.length) {\n        this.errorMessage = error.map(item => `${item.path} ==> ${item.message}`).join('<br/>');\n        return false;\n      } else {\n        return true;\n      }\n    },\n    schemaValidate(schema) {\n      try {\n        new JSONEditor(document.createElement('div'), { schema });\n        this.errorMessage = '';\n        return true;\n      } catch(e) {\n        this.errorMessage = e.toString();\n        return false;\n      }\n    },\n    comfirmObject() {\n      try {\n        this.primeData = JSON5.parse(this.dataString);\n      } catch(e) {\n        this.$message.error(e.toString());\n        return;\n      }\n\n      if (!this.dataValidate(this.primeData)) {\n        this.$message.error(this.errorMessage);\n        return;\n      }\n\n      this.$emit('update:data', this.primeData);\n      this.$message.success('配置数据修改已确认.');\n    },\n    resetObject() {\n      this.primeData = this.dataRestorSpread(this.data);\n      this.dataString = this.getDataString(this.primeData);\n      this.setMonacoEditorValue(this.dataString);\n      this.setJsonEditorValue(this.primeData);\n      // TODO reset monaco editor size\n    },\n    reCreateJsonEditor() {\n      if(!this.JsonEditor) return;\n      this.JsonEditor.off('change', this.jsonEditorChangeHandler);\n      this.JsonEditor.destroy();\n      this.JsonEditor = null;\n      this.JsonEditor = this.initJsonEditor(this.primeDataSchema, this.$refs.jsonEditor);\n      this.setJsonEditorValue(this.primeData);\n      this.JsonEditor && this.JsonEditor.on('change', this.jsonEditorChangeHandler);\n    },\n    dataRestorSpread(source) {\n      if (source instanceof Array) return [ ...source ];\n      if (source instanceof Object) return { ...source };\n      return source;\n    },\n    showBoth() {\n      // force code div relayout, otherwise the CSS flex layout fail, I don't know why...\n      this.$refs.monacoEditor.style.width = '0px';\n      this.isShowCode = true;\n      this.isShowForm = true;\n      setTimeout(() => {\n        this.MonacoEditor.layout();\n      }, 200);\n    },\n    showCode() {\n      this.isShowForm = false;\n      this.isShowCode = true;\n      setTimeout(() => {\n        this.MonacoEditor.layout();\n      }, 200);\n    },\n    showForm() {\n      this.isShowCode = false;\n      this.isShowForm = true;\n      setTimeout(() => {\n        this.MonacoEditor.layout();\n      }, 200);\n    },\n    onWheel(event, target) {\n      event.stopPropagation();\n      if ((event.wheelDeltaY > 0 && target.scrollTop <= 0)\n        || (event.wheelDeltaY < 0 && (target.clientHeight + target.scrollTop >= target.scrollHeight))) {\n        event.preventDefault();\n      }\n    },\n    onJsonEditorClick(event) {\n      if (!event.srcElement.className.split(' ').includes('custom-button')) {\n        return;\n      }\n\n      const inputFormat = event.srcElement.getAttribute('data-format');\n      const inputPath = event.srcElement.getAttribute('data-path');\n\n      // 清空当前编辑字段路径\n      this.currentEditorPath = '';\n      switch (inputFormat) {\n        case 'custom-image':\n          console.log(inputFormat, inputPath);\n          this.currentEditorPath = inputPath;\n          this.showUploadImgDialog = true;\n          this.currentUploadImgUrl = this.getJsonEditorValueByPath(inputPath);\n          break;\n        case 'custom-url':\n          console.log(inputFormat, inputPath);\n          this.currentEditorPath = inputPath;\n          this.currentUploadSrcURL = this.getJsonEditorValueByPath(inputPath);\n          this.showUploadSrcDialog = true;\n          break;\n        default:\n          break;\n      };\n    },\n    getUploadImg(img) {\n      this.setJsonEditorValueByPath(this.currentEditorPath, img.url);\n    },\n    getUploadSrcURL(url) {\n      this.setJsonEditorValueByPath(this.currentEditorPath, url);\n    },\n  },\n  watch: {\n    dataSchema() {\n      this.primeDataSchema = { ...this.dataSchema };\n      this.reCreateJsonEditor();\n    },\n    data() {\n      this.primeData = this.dataRestorSpread(this.data);\n    },\n    dataString(value) {\n      this.errorMessage = '';\n      try {\n        this.primeData = JSON5.parse(value);\n      } catch(e) {\n        this.errorMessage = e.toString();\n      }\n    },\n    primeData(value, oldValue) {\n      if (JSON.stringify(value) === JSON.stringify(oldValue)) {\n        this.dataValidate(value);\n        return value;\n      }\n      this.dataString = this.getDataString(value);\n      this.setJsonEditorValue(value);\n      this.setMonacoEditorValue(this.dataString);\n      this.editorHeight = this.$refs.jsonEditor.clientHeight;\n    },\n    editorHeight(value, old) {\n      if (old !== 0) {\n        this.MonacoEditor.layout();\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n/* 局部化, 避免全局污染 */\n.editor /deep/ .editor__json {\n  @import '~bootstrap/less/bootstrap.less';\n\n  /* 用 less 做局部化要做一点修复, 原因不明 */\n  .row {\n    margin: 0;\n  }\n}\n\n.editor {\n  &__button-group {\n    display: flex;\n    justify-content: space-between;\n    margin: 15px 0 10px;\n  }\n  &__button-group--right {\n    justify-content: flex-end;\n  }\n}\n\n.editor {\n  display: flex;\n  min-height: 400px;\n  box-sizing: border-box;\n\n  &__monaco {\n    flex-basis: 40%;\n    flex-grow: 1;\n    box-sizing: border-box;\n    border: 1px solid red;\n  }\n  &__json {\n    overflow: auto;\n    max-height: 700px;\n    flex-basis: 60%;\n    flex-grow: 1;\n    padding: 10px;\n    box-sizing: border-box;\n    border: 1px solid #0000FF50;\n  }\n}\n\n.element-hidden {\n  display: none;\n}\n\n.error-line {\n  font-size: 14px;\n  color: red;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/json-editor/index.vue","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App',\n};\n</script>\n\n<style>\nhtml, body {\n  height: 100%;\n  margin: 0;\n}\n\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n  color: #2c3e50;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","// 后台接口集合\nconst APIS = {\n  ROOT: `${location.protocol}//172.106.33.34/pipeline-node`,\n  // Bypassing \"Mixed Content\" Error in Github Pages\n  PIPLINE: `https://cors-anywhere.herokuapp.com/http://172.106.33.34/pipeline-node/pipeline`,\n  // ROOT: 'http://localhost:7001',\n  // PIPLINE: 'http://localhost:7001/pipeline',\n};\n\nexport {\n  APIS,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/util/constants.js","import Vue from 'vue';\nimport { Loading } from 'element-ui';\nimport stringify from 'qs/lib/stringify';\n\nexport default (api, options = {}) => {\n  let url = api;\n  // 跨域\n  // options.credentials = 'include';\n  // 处理hearder\n  options.headers = options.headers || {};\n  if (!options.headers['Content-Type']) {\n    options.headers['Content-Type'] = 'application/json';\n  }\n\n  // 处理post\n  if (options.method && /^POST|PUT|DELETE$/i.test(options.method)) {\n    const params = options.body;\n    if (options.headers['Content-Type'] === 'application/json') {\n      options.body = JSON.stringify(params);\n    } else if (options.headers['Content-Type'] === 'multipart/form-data') {\n      delete options.headers['Content-Type'];\n    } else {\n      // 解决多层嵌套数据的问题\n      options.body = stringify(params, { arrayFormat: 'brackets', skipNulls: true });\n    }\n  }\n\n  // 处理get，默认get\n  if ((options.method && /^GET$/i.test(options.method)) || options.method === undefined) {\n    const params = options.params || options.body || {};\n    url += `?${stringify(params, { arrayFormat: 'brackets', skipNulls: true })}`;\n    // 解决某些浏览器下请求报错的问题 body not allowed for get or head requests\n    options.body = undefined;\n  }\n\n  let loadingInstance = Loading.service({\n    fullscreen: false,\n    text: '网络请求中, 请稍后',\n    background: 'rgba(0, 0, 0, 0.2)',\n  });\n  return fetch(url, options)\n    .then((response) => {\n      Vue.nextTick(() => {\n        loadingInstance.close();\n      });\n      if (response.status === 200) {\n        return response.json()\n          .then((json) => {\n            if (json.ret === '0') {\n              return Promise.resolve(json.data);\n            }\n            return Promise.reject({\n              status: response.status,\n              ...json,\n            });\n          });\n      }\n      return Promise.reject({\n        status: response.status,\n      });\n    }, (error) => {\n      Vue.nextTick(() => {\n        loadingInstance.close();\n      });\n      return Promise.reject({\n        status: response.status,\n      });\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/util/fetch.js","/*! JSON Editor v0.7.28 - JSON Schema -> HTML Editor\n * By Jeremy Dorn - https://github.com/jdorn/json-editor/\n * Released under the MIT license\n *\n * Date: 2016-08-07\n */\n\n/**\n * See README.md for requirements and usage info\n */\n\nexport default (function() { // jshint ignore:line\n\n  /*jshint loopfunc: true */\n  /* Simple JavaScript Inheritance\n   * By John Resig http://ejohn.org/\n   * MIT Licensed.\n   */\n  // Inspired by base2 and Prototype\n  var Class;\n  (function(){\n    var initializing = false, fnTest = /xyz/.test(function(){window.postMessage(\"xyz\");}) ? /\\b_super\\b/ : /.*/;\n   \n    // The base Class implementation (does nothing)\n    Class = function(){};\n   \n    // Create a new Class that inherits from this class\n    Class.extend = function extend(prop) {\n      var _super = this.prototype;\n     \n      // Instantiate a base class (but only create the instance,\n      // don't run the init constructor)\n      initializing = true;\n      var prototype = new this();\n      initializing = false;\n     \n      // Copy the properties over onto the new prototype\n      for (var name in prop) {\n        // Check if we're overwriting an existing function\n        prototype[name] = typeof prop[name] == \"function\" &&\n          typeof _super[name] == \"function\" && fnTest.test(prop[name]) ?\n          (function(name, fn){\n            return function() {\n              var tmp = this._super;\n             \n              // Add a new ._super() method that is the same method\n              // but on the super-class\n              this._super = _super[name];\n             \n              // The method only need to be bound temporarily, so we\n              // remove it when we're done executing\n              var ret = fn.apply(this, arguments);        \n              this._super = tmp;\n             \n              return ret;\n            };\n          })(name, prop[name]) :\n          prop[name];\n      }\n     \n      // The dummy class constructor\n      function Class() {\n        // All construction is actually done in the init method\n        if ( !initializing && this.init )\n          this.init.apply(this, arguments);\n      }\n     \n      // Populate our constructed prototype object\n      Class.prototype = prototype;\n     \n      // Enforce the constructor to be what we expect\n      Class.prototype.constructor = Class;\n   \n      // And make this class extendable\n      Class.extend = extend;\n     \n      return Class;\n    };\n    \n    return Class;\n  })();\n  \n  // CustomEvent constructor polyfill\n  // From MDN\n  (function () {\n    function CustomEvent ( event, params ) {\n      params = params || { bubbles: false, cancelable: false, detail: undefined };\n      var evt = document.createEvent( 'CustomEvent' );\n      evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n      return evt;\n    }\n  \n    CustomEvent.prototype = window.Event.prototype;\n  \n    window.CustomEvent = CustomEvent;\n  })();\n  \n  // requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel\n  // MIT license\n  (function() {\n      var lastTime = 0;\n      var vendors = ['ms', 'moz', 'webkit', 'o'];\n      for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n          window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n          window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || \n                                        window[vendors[x]+'CancelRequestAnimationFrame'];\n      }\n   \n      if (!window.requestAnimationFrame)\n          window.requestAnimationFrame = function(callback, element) {\n              var currTime = new Date().getTime();\n              var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n              var id = window.setTimeout(function() { callback(currTime + timeToCall); }, \n                timeToCall);\n              lastTime = currTime + timeToCall;\n              return id;\n          };\n   \n      if (!window.cancelAnimationFrame)\n          window.cancelAnimationFrame = function(id) {\n              clearTimeout(id);\n          };\n  }());\n  \n  // Array.isArray polyfill\n  // From MDN\n  (function() {\n    if(!Array.isArray) {\n      Array.isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n      };\n    }\n  }());\n  /**\n   * Taken from jQuery 2.1.3\n   *\n   * @param obj\n   * @returns {boolean}\n   */\n  var $isplainobject = function( obj ) {\n    // Not plain objects:\n    // - Any object or value whose internal [[Class]] property is not \"[object Object]\"\n    // - DOM nodes\n    // - window\n    if (typeof obj !== \"object\" || obj.nodeType || (obj !== null && obj === obj.window)) {\n      return false;\n    }\n  \n    if (obj.constructor && !Object.prototype.hasOwnProperty.call(obj.constructor.prototype, \"isPrototypeOf\")) {\n      return false;\n    }\n  \n    // If the function hasn't returned already, we're confident that\n    // |obj| is a plain object, created by {} or constructed with new Object\n    return true;\n  };\n  \n  var $extend = function(destination) {\n    var source, i,property;\n    for(i=1; i<arguments.length; i++) {\n      source = arguments[i];\n      for (property in source) {\n        if(!source.hasOwnProperty(property)) continue;\n        if(source[property] && $isplainobject(source[property])) {\n          if(!destination.hasOwnProperty(property)) destination[property] = {};\n          $extend(destination[property], source[property]);\n        }\n        else {\n          destination[property] = source[property];\n        }\n      }\n    }\n    return destination;\n  };\n  \n  var $each = function(obj,callback) {\n    if(!obj || typeof obj !== \"object\") return;\n    var i;\n    if(Array.isArray(obj) || (typeof obj.length === 'number' && obj.length > 0 && (obj.length - 1) in obj)) {\n      for(i=0; i<obj.length; i++) {\n        if(callback(i,obj[i])===false) return;\n      }\n    }\n    else {\n      if (Object.keys) {\n        var keys = Object.keys(obj);\n        for(i=0; i<keys.length; i++) {\n          if(callback(keys[i],obj[keys[i]])===false) return;\n        }\n      }\n      else {\n        for(i in obj) {\n          if(!obj.hasOwnProperty(i)) continue;\n          if(callback(i,obj[i])===false) return;\n        }\n      }\n    }\n  };\n  \n  var $trigger = function(el,event) {\n    var e = document.createEvent('HTMLEvents');\n    e.initEvent(event, true, true);\n    el.dispatchEvent(e);\n  };\n  var $triggerc = function(el,event) {\n    var e = new CustomEvent(event,{\n      bubbles: true,\n      cancelable: true\n    });\n  \n    el.dispatchEvent(e);\n  };\n  \n  var JSONEditor = function(element,options) {\n    if (!(element instanceof Element)) {\n      throw new Error('element should be an instance of Element');\n    }\n    options = $extend({},JSONEditor.defaults.options,options||{});\n    this.element = element;\n    this.options = options;\n    this.init();\n  };\n  JSONEditor.prototype = {\n    // necessary since we remove the ctor property by doing a literal assignment. Without this\n    // the $isplainobject function will think that this is a plain object.\n    constructor: JSONEditor,\n    init: function() {\n      var self = this;\n      \n      this.ready = false;\n  \n      var theme_class = JSONEditor.defaults.themes[this.options.theme || JSONEditor.defaults.theme];\n      if(!theme_class) throw \"Unknown theme \" + (this.options.theme || JSONEditor.defaults.theme);\n      \n      this.schema = this.options.schema;\n      this.theme = new theme_class();\n      this.template = this.options.template;\n      this.refs = this.options.refs || {};\n      this.uuid = 0;\n      this.__data = {};\n      \n      var icon_class = JSONEditor.defaults.iconlibs[this.options.iconlib || JSONEditor.defaults.iconlib];\n      if(icon_class) this.iconlib = new icon_class();\n  \n      this.root_container = this.theme.getContainer();\n      this.element.appendChild(this.root_container);\n      \n      this.translate = this.options.translate || JSONEditor.defaults.translate;\n  \n      // Fetch all external refs via ajax\n      this._loadExternalRefs(this.schema, function() {\n        self._getDefinitions(self.schema);\n        \n        // Validator options\n        var validator_options = {};\n        if(self.options.custom_validators) {\n          validator_options.custom_validators = self.options.custom_validators;\n        }\n        self.validator = new JSONEditor.Validator(self,null,validator_options);\n        \n        // Create the root editor\n        var editor_class = self.getEditorClass(self.schema);\n        self.root = self.createEditor(editor_class, {\n          jsoneditor: self,\n          schema: self.schema,\n          required: true,\n          container: self.root_container\n        });\n        \n        self.root.preBuild();\n        self.root.build();\n        self.root.postBuild();\n  \n        // Starting data\n        if(self.options.startval) self.root.setValue(self.options.startval);\n  \n        self.validation_results = self.validator.validate(self.root.getValue());\n        self.root.showValidationErrors(self.validation_results);\n        self.ready = true;\n  \n        // Fire ready event asynchronously\n        window.requestAnimationFrame(function() {\n          if(!self.ready) return;\n          self.validation_results = self.validator.validate(self.root.getValue());\n          self.root.showValidationErrors(self.validation_results);\n          self.trigger('ready');\n          self.trigger('change');\n        });\n      });\n    },\n    getValue: function() {\n      if(!this.ready) throw \"JSON Editor not ready yet.  Listen for 'ready' event before getting the value\";\n  \n      return this.root.getValue();\n    },\n    setValue: function(value) {\n      if(!this.ready) throw \"JSON Editor not ready yet.  Listen for 'ready' event before setting the value\";\n  \n      this.root.setValue(value);\n      return this;\n    },\n    validate: function(value) {\n      if(!this.ready) throw \"JSON Editor not ready yet.  Listen for 'ready' event before validating\";\n      \n      // Custom value\n      if(arguments.length === 1) {\n        return this.validator.validate(value);\n      }\n      // Current value (use cached result)\n      else {\n        return this.validation_results;\n      }\n    },\n    destroy: function() {\n      if(this.destroyed) return;\n      if(!this.ready) return;\n      \n      this.schema = null;\n      this.options = null;\n      this.root.destroy();\n      this.root = null;\n      this.root_container = null;\n      this.validator = null;\n      this.validation_results = null;\n      this.theme = null;\n      this.iconlib = null;\n      this.template = null;\n      this.__data = null;\n      this.ready = false;\n      this.element.innerHTML = '';\n      \n      this.destroyed = true;\n    },\n    on: function(event, callback) {\n      this.callbacks = this.callbacks || {};\n      this.callbacks[event] = this.callbacks[event] || [];\n      this.callbacks[event].push(callback);\n      \n      return this;\n    },\n    off: function(event, callback) {\n      // Specific callback\n      if(event && callback) {\n        this.callbacks = this.callbacks || {};\n        this.callbacks[event] = this.callbacks[event] || [];\n        var newcallbacks = [];\n        for(var i=0; i<this.callbacks[event].length; i++) {\n          if(this.callbacks[event][i]===callback) continue;\n          newcallbacks.push(this.callbacks[event][i]);\n        }\n        this.callbacks[event] = newcallbacks;\n      }\n      // All callbacks for a specific event\n      else if(event) {\n        this.callbacks = this.callbacks || {};\n        this.callbacks[event] = [];\n      }\n      // All callbacks for all events\n      else {\n        this.callbacks = {};\n      }\n      \n      return this;\n    },\n    trigger: function(event) {\n      if(this.callbacks && this.callbacks[event] && this.callbacks[event].length) {\n        for(var i=0; i<this.callbacks[event].length; i++) {\n          this.callbacks[event][i]();\n        }\n      }\n      \n      return this;\n    },\n    setOption: function(option, value) {\n      if(option === \"show_errors\") {\n        this.options.show_errors = value;\n        this.onChange();\n      }\n      // Only the `show_errors` option is supported for now\n      else {\n        throw \"Option \"+option+\" must be set during instantiation and cannot be changed later\";\n      }\n      \n      return this;\n    },\n    getEditorClass: function(schema) {\n      var classname;\n  \n      schema = this.expandSchema(schema);\n  \n      $each(JSONEditor.defaults.resolvers,function(i,resolver) {\n        var tmp = resolver(schema);\n        if(tmp) {\n          if(JSONEditor.defaults.editors[tmp]) {\n            classname = tmp;\n            return false;\n          }\n        }\n      });\n  \n      if(!classname) throw \"Unknown editor for schema \"+JSON.stringify(schema);\n      if(!JSONEditor.defaults.editors[classname]) throw \"Unknown editor \"+classname;\n  \n      return JSONEditor.defaults.editors[classname];\n    },\n    createEditor: function(editor_class, options) {\n      options = $extend({},editor_class.options||{},options);\n      return new editor_class(options);\n    },\n    onChange: function() {\n      if(!this.ready) return;\n      \n      if(this.firing_change) return;\n      this.firing_change = true;\n      \n      var self = this;\n      \n      window.requestAnimationFrame(function() {\n        self.firing_change = false;\n        if(!self.ready) return;\n  \n        // Validate and cache results\n        self.validation_results = self.validator.validate(self.root.getValue());\n        \n        if(self.options.show_errors !== \"never\") {\n          self.root.showValidationErrors(self.validation_results);\n        }\n        else {\n          self.root.showValidationErrors([]);\n        }\n        \n        // Fire change event\n        self.trigger('change');\n      });\n      \n      return this;\n    },\n    compileTemplate: function(template, name) {\n      name = name || JSONEditor.defaults.template;\n  \n      var engine;\n  \n      // Specifying a preset engine\n      if(typeof name === 'string') {\n        if(!JSONEditor.defaults.templates[name]) throw \"Unknown template engine \"+name;\n        engine = JSONEditor.defaults.templates[name]();\n  \n        if(!engine) throw \"Template engine \"+name+\" missing required library.\";\n      }\n      // Specifying a custom engine\n      else {\n        engine = name;\n      }\n  \n      if(!engine) throw \"No template engine set\";\n      if(!engine.compile) throw \"Invalid template engine set\";\n  \n      return engine.compile(template);\n    },\n    _data: function(el,key,value) {\n      // Setting data\n      if(arguments.length === 3) {\n        var uuid;\n        if(el.hasAttribute('data-jsoneditor-'+key)) {\n          uuid = el.getAttribute('data-jsoneditor-'+key);\n        }\n        else {\n          uuid = this.uuid++;\n          el.setAttribute('data-jsoneditor-'+key,uuid);\n        }\n  \n        this.__data[uuid] = value;\n      }\n      // Getting data\n      else {\n        // No data stored\n        if(!el.hasAttribute('data-jsoneditor-'+key)) return null;\n        \n        return this.__data[el.getAttribute('data-jsoneditor-'+key)];\n      }\n    },\n    registerEditor: function(editor) {\n      this.editors = this.editors || {};\n      this.editors[editor.path] = editor;\n      return this;\n    },\n    unregisterEditor: function(editor) {\n      this.editors = this.editors || {};\n      this.editors[editor.path] = null;\n      return this;\n    },\n    getEditor: function(path) {\n      if(!this.editors) return;\n      return this.editors[path];\n    },\n    watch: function(path,callback) {\n      this.watchlist = this.watchlist || {};\n      this.watchlist[path] = this.watchlist[path] || [];\n      this.watchlist[path].push(callback);\n      \n      return this;\n    },\n    unwatch: function(path,callback) {\n      if(!this.watchlist || !this.watchlist[path]) return this;\n      // If removing all callbacks for a path\n      if(!callback) {\n        this.watchlist[path] = null;\n        return this;\n      }\n      \n      var newlist = [];\n      for(var i=0; i<this.watchlist[path].length; i++) {\n        if(this.watchlist[path][i] === callback) continue;\n        else newlist.push(this.watchlist[path][i]);\n      }\n      this.watchlist[path] = newlist.length? newlist : null;\n      return this;\n    },\n    notifyWatchers: function(path) {\n      if(!this.watchlist || !this.watchlist[path]) return this;\n      for(var i=0; i<this.watchlist[path].length; i++) {\n        this.watchlist[path][i]();\n      }\n    },\n    isEnabled: function() {\n      return !this.root || this.root.isEnabled();\n    },\n    enable: function() {\n      this.root.enable();\n    },\n    disable: function() {\n      this.root.disable();\n    },\n    _getDefinitions: function(schema,path) {\n      path = path || '#/definitions/';\n      if(schema.definitions) {\n        for(var i in schema.definitions) {\n          if(!schema.definitions.hasOwnProperty(i)) continue;\n          this.refs[path+i] = schema.definitions[i];\n          if(schema.definitions[i].definitions) {\n            this._getDefinitions(schema.definitions[i],path+i+'/definitions/');\n          }\n        }\n      }\n    },\n    _getExternalRefs: function(schema) {\n      var refs = {};\n      var merge_refs = function(newrefs) {\n        for(var i in newrefs) {\n          if(newrefs.hasOwnProperty(i)) {\n            refs[i] = true;\n          }\n        }\n      };\n      \n      if(schema.$ref && typeof schema.$ref !== \"object\" && schema.$ref.substr(0,1) !== \"#\" && !this.refs[schema.$ref]) {\n        refs[schema.$ref] = true;\n      }\n      \n      for(var i in schema) {\n        if(!schema.hasOwnProperty(i)) continue;\n        if(schema[i] && typeof schema[i] === \"object\" && Array.isArray(schema[i])) {\n          for(var j=0; j<schema[i].length; j++) {\n            if(typeof schema[i][j]===\"object\") {\n              merge_refs(this._getExternalRefs(schema[i][j]));\n            }\n          }\n        }\n        else if(schema[i] && typeof schema[i] === \"object\") {\n          merge_refs(this._getExternalRefs(schema[i]));\n        }\n      }\n      \n      return refs;\n    },\n    _loadExternalRefs: function(schema, callback) {\n      var self = this;\n      var refs = this._getExternalRefs(schema);\n      \n      var done = 0, waiting = 0, callback_fired = false;\n      \n      $each(refs,function(url) {\n        if(self.refs[url]) return;\n        if(!self.options.ajax) throw \"Must set ajax option to true to load external ref \"+url;\n        self.refs[url] = 'loading';\n        waiting++;\n  \n        var r = new XMLHttpRequest(); \n        r.open(\"GET\", url, true);\n        r.onreadystatechange = function () {\n          if (r.readyState != 4) return; \n          // Request succeeded\n          if(r.status === 200) {\n            var response;\n            try {\n              response = JSON.parse(r.responseText);\n            }\n            catch(e) {\n              window.console.log(e);\n              throw \"Failed to parse external ref \"+url;\n            }\n            if(!response || typeof response !== \"object\") throw \"External ref does not contain a valid schema - \"+url;\n            \n            self.refs[url] = response;\n            self._loadExternalRefs(response,function() {\n              done++;\n              if(done >= waiting && !callback_fired) {\n                callback_fired = true;\n                callback();\n              }\n            });\n          }\n          // Request failed\n          else {\n            window.console.log(r);\n            throw \"Failed to fetch ref via ajax- \"+url;\n          }\n        };\n        r.send();\n      });\n      \n      if(!waiting) {\n        callback();\n      }\n    },\n    expandRefs: function(schema) {\n      schema = $extend({},schema);\n      \n      while (schema.$ref) {\n        var ref = schema.$ref;\n        delete schema.$ref;\n        \n        if(!this.refs[ref]) ref = decodeURIComponent(ref);\n        \n        schema = this.extendSchemas(schema,this.refs[ref]);\n      }\n      return schema;\n    },\n    expandSchema: function(schema) {\n      var self = this;\n      var extended = $extend({},schema);\n      var i;\n  \n      // Version 3 `type`\n      if(typeof schema.type === 'object') {\n        // Array of types\n        if(Array.isArray(schema.type)) {\n          $each(schema.type, function(key,value) {\n            // Schema\n            if(typeof value === 'object') {\n              schema.type[key] = self.expandSchema(value);\n            }\n          });\n        }\n        // Schema\n        else {\n          schema.type = self.expandSchema(schema.type);\n        }\n      }\n      // Version 3 `disallow`\n      if(typeof schema.disallow === 'object') {\n        // Array of types\n        if(Array.isArray(schema.disallow)) {\n          $each(schema.disallow, function(key,value) {\n            // Schema\n            if(typeof value === 'object') {\n              schema.disallow[key] = self.expandSchema(value);\n            }\n          });\n        }\n        // Schema\n        else {\n          schema.disallow = self.expandSchema(schema.disallow);\n        }\n      }\n      // Version 4 `anyOf`\n      if(schema.anyOf) {\n        $each(schema.anyOf, function(key,value) {\n          schema.anyOf[key] = self.expandSchema(value);\n        });\n      }\n      // Version 4 `dependencies` (schema dependencies)\n      if(schema.dependencies) {\n        $each(schema.dependencies,function(key,value) {\n          if(typeof value === \"object\" && !(Array.isArray(value))) {\n            schema.dependencies[key] = self.expandSchema(value);\n          }\n        });\n      }\n      // Version 4 `not`\n      if(schema.not) {\n        schema.not = this.expandSchema(schema.not);\n      }\n      \n      // allOf schemas should be merged into the parent\n      if(schema.allOf) {\n        for(i=0; i<schema.allOf.length; i++) {\n          extended = this.extendSchemas(extended,this.expandSchema(schema.allOf[i]));\n        }\n        delete extended.allOf;\n      }\n      // extends schemas should be merged into parent\n      if(schema[\"extends\"]) {\n        // If extends is a schema\n        if(!(Array.isArray(schema[\"extends\"]))) {\n          extended = this.extendSchemas(extended,this.expandSchema(schema[\"extends\"]));\n        }\n        // If extends is an array of schemas\n        else {\n          for(i=0; i<schema[\"extends\"].length; i++) {\n            extended = this.extendSchemas(extended,this.expandSchema(schema[\"extends\"][i]));\n          }\n        }\n        delete extended[\"extends\"];\n      }\n      // parent should be merged into oneOf schemas\n      if(schema.oneOf) {\n        var tmp = $extend({},extended);\n        delete tmp.oneOf;\n        for(i=0; i<schema.oneOf.length; i++) {\n          extended.oneOf[i] = this.extendSchemas(this.expandSchema(schema.oneOf[i]),tmp);\n        }\n      }\n      \n      return this.expandRefs(extended);\n    },\n    extendSchemas: function(obj1, obj2) {\n      obj1 = $extend({},obj1);\n      obj2 = $extend({},obj2);\n  \n      var self = this;\n      var extended = {};\n      $each(obj1, function(prop,val) {\n        // If this key is also defined in obj2, merge them\n        if(typeof obj2[prop] !== \"undefined\") {\n          // Required and defaultProperties arrays should be unioned together\n          if((prop === 'required'||prop === 'defaultProperties') && typeof val === \"object\" && Array.isArray(val)) {\n            // Union arrays and unique\n            extended[prop] = val.concat(obj2[prop]).reduce(function(p, c) {\n              if (p.indexOf(c) < 0) p.push(c);\n              return p;\n            }, []);\n          }\n          // Type should be intersected and is either an array or string\n          else if(prop === 'type' && (typeof val === \"string\" || Array.isArray(val))) {\n            // Make sure we're dealing with arrays\n            if(typeof val === \"string\") val = [val];\n            if(typeof obj2.type === \"string\") obj2.type = [obj2.type];\n  \n            // If type is only defined in the first schema, keep it\n            if(!obj2.type || !obj2.type.length) {\n              extended.type = val;\n            }\n            // If type is defined in both schemas, do an intersect\n            else {\n              extended.type = val.filter(function(n) {\n                return obj2.type.indexOf(n) !== -1;\n              });\n            }\n  \n            // If there's only 1 type and it's a primitive, use a string instead of array\n            if(extended.type.length === 1 && typeof extended.type[0] === \"string\") {\n              extended.type = extended.type[0];\n            }\n            // Remove the type property if it's empty\n            else if(extended.type.length === 0) {\n              delete extended.type;\n            }\n          }\n          // All other arrays should be intersected (enum, etc.)\n          else if(typeof val === \"object\" && Array.isArray(val)){\n            extended[prop] = val.filter(function(n) {\n              return obj2[prop].indexOf(n) !== -1;\n            });\n          }\n          // Objects should be recursively merged\n          else if(typeof val === \"object\" && val !== null) {\n            extended[prop] = self.extendSchemas(val,obj2[prop]);\n          }\n          // Otherwise, use the first value\n          else {\n            extended[prop] = val;\n          }\n        }\n        // Otherwise, just use the one in obj1\n        else {\n          extended[prop] = val;\n        }\n      });\n      // Properties in obj2 that aren't in obj1\n      $each(obj2, function(prop,val) {\n        if(typeof obj1[prop] === \"undefined\") {\n          extended[prop] = val;\n        }\n      });\n  \n      return extended;\n    }\n  };\n  \n  JSONEditor.defaults = {\n    themes: {},\n    templates: {},\n    iconlibs: {},\n    editors: {},\n    languages: {},\n    resolvers: [],\n    custom_validators: []\n  };\n  \n  JSONEditor.Validator = Class.extend({\n    init: function(jsoneditor,schema,options) {\n      this.jsoneditor = jsoneditor;\n      this.schema = schema || this.jsoneditor.schema;\n      this.options = options || {};\n      this.translate = this.jsoneditor.translate || JSONEditor.defaults.translate;\n    },\n    validate: function(value) {\n      return this._validateSchema(this.schema, value);\n    },\n    _validateSchema: function(schema,value,path) {\n      var self = this;\n      var errors = [];\n      var valid, i, j;\n      var stringified = JSON.stringify(value);\n  \n      path = path || 'root';\n  \n      // Work on a copy of the schema\n      schema = $extend({},this.jsoneditor.expandRefs(schema));\n  \n      /*\n       * Type Agnostic Validation\n       */\n  \n      // Version 3 `required`\n      if(schema.required && schema.required === true) {\n        if(typeof value === \"undefined\") {\n          errors.push({\n            path: path,\n            property: 'required',\n            message: this.translate(\"error_notset\")\n          });\n  \n          // Can't do any more validation at this point\n          return errors;\n        }\n      }\n      // Value not defined\n      else if(typeof value === \"undefined\") {\n        // If required_by_default is set, all fields are required\n        if(this.jsoneditor.options.required_by_default) {\n          errors.push({\n            path: path,\n            property: 'required',\n            message: this.translate(\"error_notset\")\n          });\n        }\n        // Not required, no further validation needed\n        else {\n          return errors;\n        }\n      }\n  \n      // `enum`\n      if(schema[\"enum\"]) {\n        valid = false;\n        for(i=0; i<schema[\"enum\"].length; i++) {\n          if(stringified === JSON.stringify(schema[\"enum\"][i])) valid = true;\n        }\n        if(!valid) {\n          errors.push({\n            path: path,\n            property: 'enum',\n            message: this.translate(\"error_enum\")\n          });\n        }\n      }\n  \n      // `extends` (version 3)\n      if(schema[\"extends\"]) {\n        for(i=0; i<schema[\"extends\"].length; i++) {\n          errors = errors.concat(this._validateSchema(schema[\"extends\"][i],value,path));\n        }\n      }\n  \n      // `allOf`\n      if(schema.allOf) {\n        for(i=0; i<schema.allOf.length; i++) {\n          errors = errors.concat(this._validateSchema(schema.allOf[i],value,path));\n        }\n      }\n  \n      // `anyOf`\n      if(schema.anyOf) {\n        valid = false;\n        for(i=0; i<schema.anyOf.length; i++) {\n          if(!this._validateSchema(schema.anyOf[i],value,path).length) {\n            valid = true;\n            break;\n          }\n        }\n        if(!valid) {\n          errors.push({\n            path: path,\n            property: 'anyOf',\n            message: this.translate('error_anyOf')\n          });\n        }\n      }\n  \n      // `oneOf`\n      if(schema.oneOf) {\n        valid = 0;\n        var oneof_errors = [];\n        for(i=0; i<schema.oneOf.length; i++) {\n          // Set the error paths to be path.oneOf[i].rest.of.path\n          var tmp = this._validateSchema(schema.oneOf[i],value,path);\n          if(!tmp.length) {\n            valid++;\n          }\n  \n          for(j=0; j<tmp.length; j++) {\n            tmp[j].path = path+'.oneOf['+i+']'+tmp[j].path.substr(path.length);\n          }\n          oneof_errors = oneof_errors.concat(tmp);\n  \n        }\n        if(valid !== 1) {\n          errors.push({\n            path: path,\n            property: 'oneOf',\n            message: this.translate('error_oneOf', [valid])\n          });\n          errors = errors.concat(oneof_errors);\n        }\n      }\n  \n      // `not`\n      if(schema.not) {\n        if(!this._validateSchema(schema.not,value,path).length) {\n          errors.push({\n            path: path,\n            property: 'not',\n            message: this.translate('error_not')\n          });\n        }\n      }\n  \n      // `type` (both Version 3 and Version 4 support)\n      if(schema.type) {\n        // Union type\n        if(Array.isArray(schema.type)) {\n          valid = false;\n          for(i=0;i<schema.type.length;i++) {\n            if(this._checkType(schema.type[i], value)) {\n              valid = true;\n              break;\n            }\n          }\n          if(!valid) {\n            errors.push({\n              path: path,\n              property: 'type',\n              message: this.translate('error_type_union')\n            });\n          }\n        }\n        // Simple type\n        else {\n          if(!this._checkType(schema.type, value)) {\n            errors.push({\n              path: path,\n              property: 'type',\n              message: this.translate('error_type', [schema.type])\n            });\n          }\n        }\n      }\n  \n  \n      // `disallow` (version 3)\n      if(schema.disallow) {\n        // Union type\n        if(Array.isArray(schema.disallow)) {\n          valid = true;\n          for(i=0;i<schema.disallow.length;i++) {\n            if(this._checkType(schema.disallow[i], value)) {\n              valid = false;\n              break;\n            }\n          }\n          if(!valid) {\n            errors.push({\n              path: path,\n              property: 'disallow',\n              message: this.translate('error_disallow_union')\n            });\n          }\n        }\n        // Simple type\n        else {\n          if(this._checkType(schema.disallow, value)) {\n            errors.push({\n              path: path,\n              property: 'disallow',\n              message: this.translate('error_disallow', [schema.disallow])\n            });\n          }\n        }\n      }\n  \n      /*\n       * Type Specific Validation\n       */\n  \n      // Number Specific Validation\n      if(typeof value === \"number\") {\n        // `multipleOf` and `divisibleBy`\n        if(schema.multipleOf || schema.divisibleBy) {\n          var divisor = schema.multipleOf || schema.divisibleBy;\n          // Vanilla JS, prone to floating point rounding errors (e.g. 1.14 / .01 == 113.99999)\n          valid = (value/divisor === Math.floor(value/divisor));\n  \n          // Use math.js is available\n          if(window.math) {\n            valid = window.math.mod(window.math.bignumber(value), window.math.bignumber(divisor)).equals(0);\n          }\n          // Use decimal.js is available\n          else if(window.Decimal) {\n            valid = (new window.Decimal(value)).mod(new window.Decimal(divisor)).equals(0);\n          }\n  \n          if(!valid) {\n            errors.push({\n              path: path,\n              property: schema.multipleOf? 'multipleOf' : 'divisibleBy',\n              message: this.translate('error_multipleOf', [divisor])\n            });\n          }\n        }\n  \n        // `maximum`\n        if(schema.hasOwnProperty('maximum')) {\n          // Vanilla JS, prone to floating point rounding errors (e.g. .999999999999999 == 1)\n          valid = schema.exclusiveMaximum? (value < schema.maximum) : (value <= schema.maximum);\n  \n          // Use math.js is available\n          if(window.math) {\n            valid = window.math[schema.exclusiveMaximum?'smaller':'smallerEq'](\n              window.math.bignumber(value),\n              window.math.bignumber(schema.maximum)\n            );\n          }\n          // Use Decimal.js if available\n          else if(window.Decimal) {\n            valid = (new window.Decimal(value))[schema.exclusiveMaximum?'lt':'lte'](new window.Decimal(schema.maximum));\n          }\n  \n          if(!valid) {\n            errors.push({\n              path: path,\n              property: 'maximum',\n              message: this.translate(\n                (schema.exclusiveMaximum?'error_maximum_excl':'error_maximum_incl'),\n                [schema.maximum]\n              )\n            });\n          }\n        }\n  \n        // `minimum`\n        if(schema.hasOwnProperty('minimum')) {\n          // Vanilla JS, prone to floating point rounding errors (e.g. .999999999999999 == 1)\n          valid = schema.exclusiveMinimum? (value > schema.minimum) : (value >= schema.minimum);\n  \n          // Use math.js is available\n          if(window.math) {\n            valid = window.math[schema.exclusiveMinimum?'larger':'largerEq'](\n              window.math.bignumber(value),\n              window.math.bignumber(schema.minimum)\n            );\n          }\n          // Use Decimal.js if available\n          else if(window.Decimal) {\n            valid = (new window.Decimal(value))[schema.exclusiveMinimum?'gt':'gte'](new window.Decimal(schema.minimum));\n          }\n  \n          if(!valid) {\n            errors.push({\n              path: path,\n              property: 'minimum',\n              message: this.translate(\n                (schema.exclusiveMinimum?'error_minimum_excl':'error_minimum_incl'),\n                [schema.minimum]\n              )\n            });\n          }\n        }\n      }\n      // String specific validation\n      else if(typeof value === \"string\") {\n        // `maxLength`\n        if(schema.maxLength) {\n          if((value+\"\").length > schema.maxLength) {\n            errors.push({\n              path: path,\n              property: 'maxLength',\n              message: this.translate('error_maxLength', [schema.maxLength])\n            });\n          }\n        }\n  \n        // `minLength`\n        if(schema.minLength) {\n          if((value+\"\").length < schema.minLength) {\n            errors.push({\n              path: path,\n              property: 'minLength',\n              message: this.translate((schema.minLength===1?'error_notempty':'error_minLength'), [schema.minLength])\n            });\n          }\n        }\n  \n        // `pattern`\n        if(schema.pattern) {\n          if(!(new RegExp(schema.pattern)).test(value)) {\n            errors.push({\n              path: path,\n              property: 'pattern',\n              message: this.translate('error_pattern', [schema.pattern])\n            });\n          }\n        }\n      }\n      // Array specific validation\n      else if(typeof value === \"object\" && value !== null && Array.isArray(value)) {\n        // `items` and `additionalItems`\n        if(schema.items) {\n          // `items` is an array\n          if(Array.isArray(schema.items)) {\n            for(i=0; i<value.length; i++) {\n              // If this item has a specific schema tied to it\n              // Validate against it\n              if(schema.items[i]) {\n                errors = errors.concat(this._validateSchema(schema.items[i],value[i],path+'.'+i));\n              }\n              // If all additional items are allowed\n              else if(schema.additionalItems === true) {\n                break;\n              }\n              // If additional items is a schema\n              // TODO: Incompatibility between version 3 and 4 of the spec\n              else if(schema.additionalItems) {\n                errors = errors.concat(this._validateSchema(schema.additionalItems,value[i],path+'.'+i));\n              }\n              // If no additional items are allowed\n              else if(schema.additionalItems === false) {\n                errors.push({\n                  path: path,\n                  property: 'additionalItems',\n                  message: this.translate('error_additionalItems')\n                });\n                break;\n              }\n              // Default for `additionalItems` is an empty schema\n              else {\n                break;\n              }\n            }\n          }\n          // `items` is a schema\n          else {\n            // Each item in the array must validate against the schema\n            for(i=0; i<value.length; i++) {\n              errors = errors.concat(this._validateSchema(schema.items,value[i],path+'.'+i));\n            }\n          }\n        }\n  \n        // `maxItems`\n        if(schema.maxItems) {\n          if(value.length > schema.maxItems) {\n            errors.push({\n              path: path,\n              property: 'maxItems',\n              message: this.translate('error_maxItems', [schema.maxItems])\n            });\n          }\n        }\n  \n        // `minItems`\n        if(schema.minItems) {\n          if(value.length < schema.minItems) {\n            errors.push({\n              path: path,\n              property: 'minItems',\n              message: this.translate('error_minItems', [schema.minItems])\n            });\n          }\n        }\n  \n        // `uniqueItems`\n        if(schema.uniqueItems) {\n          var seen = {};\n          for(i=0; i<value.length; i++) {\n            valid = JSON.stringify(value[i]);\n            if(seen[valid]) {\n              errors.push({\n                path: path,\n                property: 'uniqueItems',\n                message: this.translate('error_uniqueItems')\n              });\n              break;\n            }\n            seen[valid] = true;\n          }\n        }\n      }\n      // Object specific validation\n      else if(typeof value === \"object\" && value !== null) {\n        // `maxProperties`\n        if(schema.maxProperties) {\n          valid = 0;\n          for(i in value) {\n            if(!value.hasOwnProperty(i)) continue;\n            valid++;\n          }\n          if(valid > schema.maxProperties) {\n            errors.push({\n              path: path,\n              property: 'maxProperties',\n              message: this.translate('error_maxProperties', [schema.maxProperties])\n            });\n          }\n        }\n  \n        // `minProperties`\n        if(schema.minProperties) {\n          valid = 0;\n          for(i in value) {\n            if(!value.hasOwnProperty(i)) continue;\n            valid++;\n          }\n          if(valid < schema.minProperties) {\n            errors.push({\n              path: path,\n              property: 'minProperties',\n              message: this.translate('error_minProperties', [schema.minProperties])\n            });\n          }\n        }\n  \n        // Version 4 `required`\n        if(schema.required && Array.isArray(schema.required)) {\n          for(i=0; i<schema.required.length; i++) {\n            if(typeof value[schema.required[i]] === \"undefined\") {\n              errors.push({\n                path: path,\n                property: 'required',\n                message: this.translate('error_required', [schema.required[i]])\n              });\n            }\n          }\n        }\n  \n        // `properties`\n        var validated_properties = {};\n        if(schema.properties) {\n          for(i in schema.properties) {\n            if(!schema.properties.hasOwnProperty(i)) continue;\n            validated_properties[i] = true;\n            errors = errors.concat(this._validateSchema(schema.properties[i],value[i],path+'.'+i));\n          }\n        }\n  \n        // `patternProperties`\n        if(schema.patternProperties) {\n          for(i in schema.patternProperties) {\n            if(!schema.patternProperties.hasOwnProperty(i)) continue;\n  \n            var regex = new RegExp(i);\n  \n            // Check which properties match\n            for(j in value) {\n              if(!value.hasOwnProperty(j)) continue;\n              if(regex.test(j)) {\n                validated_properties[j] = true;\n                errors = errors.concat(this._validateSchema(schema.patternProperties[i],value[j],path+'.'+j));\n              }\n            }\n          }\n        }\n  \n        // The no_additional_properties option currently doesn't work with extended schemas that use oneOf or anyOf\n        if(typeof schema.additionalProperties === \"undefined\" && this.jsoneditor.options.no_additional_properties && !schema.oneOf && !schema.anyOf) {\n          schema.additionalProperties = false;\n        }\n  \n        // `additionalProperties`\n        if(typeof schema.additionalProperties !== \"undefined\") {\n          for(i in value) {\n            if(!value.hasOwnProperty(i)) continue;\n            if(!validated_properties[i]) {\n              // No extra properties allowed\n              if(!schema.additionalProperties) {\n                errors.push({\n                  path: path,\n                  property: 'additionalProperties',\n                  message: this.translate('error_additional_properties', [i])\n                });\n                break;\n              }\n              // Allowed\n              else if(schema.additionalProperties === true) {\n                break;\n              }\n              // Must match schema\n              // TODO: incompatibility between version 3 and 4 of the spec\n              else {\n                errors = errors.concat(this._validateSchema(schema.additionalProperties,value[i],path+'.'+i));\n              }\n            }\n          }\n        }\n  \n        // `dependencies`\n        if(schema.dependencies) {\n          for(i in schema.dependencies) {\n            if(!schema.dependencies.hasOwnProperty(i)) continue;\n  \n            // Doesn't need to meet the dependency\n            if(typeof value[i] === \"undefined\") continue;\n  \n            // Property dependency\n            if(Array.isArray(schema.dependencies[i])) {\n              for(j=0; j<schema.dependencies[i].length; j++) {\n                if(typeof value[schema.dependencies[i][j]] === \"undefined\") {\n                  errors.push({\n                    path: path,\n                    property: 'dependencies',\n                    message: this.translate('error_dependency', [schema.dependencies[i][j]])\n                  });\n                }\n              }\n            }\n            // Schema dependency\n            else {\n              errors = errors.concat(this._validateSchema(schema.dependencies[i],value,path));\n            }\n          }\n        }\n      }\n  \n      // Custom type validation (global)\n      $each(JSONEditor.defaults.custom_validators,function(i,validator) {\n        errors = errors.concat(validator.call(self,schema,value,path));\n      });\n      // Custom type validation (instance specific)\n      if(this.options.custom_validators) {\n        $each(this.options.custom_validators,function(i,validator) {\n          errors = errors.concat(validator.call(self,schema,value,path));\n        });\n      }\n  \n      return errors;\n    },\n    _checkType: function(type, value) {\n      // Simple types\n      if(typeof type === \"string\") {\n        if(type===\"string\") return typeof value === \"string\";\n        else if(type===\"number\") return typeof value === \"number\";\n        else if(type===\"integer\") return typeof value === \"number\" && value === Math.floor(value);\n        else if(type===\"boolean\") return typeof value === \"boolean\";\n        else if(type===\"array\") return Array.isArray(value);\n        else if(type === \"object\") return value !== null && !(Array.isArray(value)) && typeof value === \"object\";\n        else if(type === \"null\") return value === null;\n        else return true;\n      }\n      // Schema\n      else {\n        return !this._validateSchema(type,value).length;\n      }\n    }\n  });\n  \n  /**\n   * All editors should extend from this class\n   */\n  JSONEditor.AbstractEditor = Class.extend({\n    onChildEditorChange: function(editor) {\n      this.onChange(true);\n    },\n    notify: function() {\n      this.jsoneditor.notifyWatchers(this.path);\n    },\n    change: function() {\n      if(this.parent) this.parent.onChildEditorChange(this);\n      else this.jsoneditor.onChange();\n    },\n    onChange: function(bubble) {\n      this.notify();\n      if(this.watch_listener) this.watch_listener();\n      if(bubble) this.change();\n    },\n    register: function() {\n      this.jsoneditor.registerEditor(this);\n      this.onChange();\n    },\n    unregister: function() {\n      if(!this.jsoneditor) return;\n      this.jsoneditor.unregisterEditor(this);\n    },\n    getNumColumns: function() {\n      return 12;\n    },\n    init: function(options) {\n      this.jsoneditor = options.jsoneditor;\n      \n      this.theme = this.jsoneditor.theme;\n      this.template_engine = this.jsoneditor.template;\n      this.iconlib = this.jsoneditor.iconlib;\n      \n      this.translate = this.jsoneditor.translate || JSONEditor.defaults.translate;\n  \n      this.original_schema = options.schema;\n      this.schema = this.jsoneditor.expandSchema(this.original_schema);\n      \n      this.options = $extend({}, (this.options || {}), (options.schema.options || {}), options);\n      \n      if(!options.path && !this.schema.id) this.schema.id = 'root';\n      this.path = options.path || 'root';\n      this.formname = options.formname || this.path.replace(/\\.([^.]+)/g,'[$1]');\n      if(this.jsoneditor.options.form_name_root) this.formname = this.formname.replace(/^root\\[/,this.jsoneditor.options.form_name_root+'[');\n      this.key = this.path.split('.').pop();\n      this.parent = options.parent;\n      \n      this.link_watchers = [];\n      \n      if(options.container) this.setContainer(options.container);\n    },\n    setContainer: function(container) {\n      this.container = container;\n      if(this.schema.id) this.container.setAttribute('data-schemaid',this.schema.id);\n      if(this.schema.type && typeof this.schema.type === \"string\") this.container.setAttribute('data-schematype',this.schema.type);\n      this.container.setAttribute('data-schemapath',this.path);\n    },\n    \n    preBuild: function() {\n  \n    },\n    build: function() {\n      \n    },\n    postBuild: function() {\n      this.setupWatchListeners();\n      this.addLinks();\n      this.setValue(this.getDefault(), true);\n      this.updateHeaderText();\n      this.register();\n      this.onWatchedFieldChange();\n    },\n    \n    setupWatchListeners: function() {\n      var self = this;\n      \n      // Watched fields\n      this.watched = {};\n      if(this.schema.vars) this.schema.watch = this.schema.vars;\n      this.watched_values = {};\n      this.watch_listener = function() {\n        if(self.refreshWatchedFieldValues()) {\n          self.onWatchedFieldChange();\n        }\n      };\n      \n      this.register();\n      if(this.schema.hasOwnProperty('watch')) {\n        var path,path_parts,first,root,adjusted_path;\n  \n        for(var name in this.schema.watch) {\n          if(!this.schema.watch.hasOwnProperty(name)) continue;\n          path = this.schema.watch[name];\n  \n          if(Array.isArray(path)) {\n            if(path.length<2) continue;\n            path_parts = [path[0]].concat(path[1].split('.'));\n          }\n          else {\n            path_parts = path.split('.');\n            if(!self.theme.closest(self.container,'[data-schemaid=\"'+path_parts[0]+'\"]')) path_parts.unshift('#');\n          }\n          first = path_parts.shift();\n  \n          if(first === '#') first = self.jsoneditor.schema.id || 'root';\n  \n          // Find the root node for this template variable\n          root = self.theme.closest(self.container,'[data-schemaid=\"'+first+'\"]');\n          if(!root) throw \"Could not find ancestor node with id \"+first;\n  \n          // Keep track of the root node and path for use when rendering the template\n          adjusted_path = root.getAttribute('data-schemapath') + '.' + path_parts.join('.');\n          \n          self.jsoneditor.watch(adjusted_path,self.watch_listener);\n          \n          self.watched[name] = adjusted_path;\n        }\n      }\n      \n      // Dynamic header\n      if(this.schema.headerTemplate) {\n        this.header_template = this.jsoneditor.compileTemplate(this.schema.headerTemplate, this.template_engine);\n      }\n    },\n    \n    addLinks: function() {\n      // Add links\n      if(!this.no_link_holder) {\n        this.link_holder = this.theme.getLinksHolder();\n        this.container.appendChild(this.link_holder);\n        if(this.schema.links) {\n          for(var i=0; i<this.schema.links.length; i++) {\n            this.addLink(this.getLink(this.schema.links[i]));\n          }\n        }\n      }\n    },\n    \n    \n    getButton: function(text, icon, title) {\n      var btnClass = 'json-editor-btn-'+icon;\n      if(!this.iconlib) icon = null;\n      else icon = this.iconlib.getIcon(icon);\n      \n      if(!icon && title) {\n        text = title;\n        title = null;\n      }\n      \n      var btn = this.theme.getButton(text, icon, title);\n      btn.className += ' ' + btnClass + ' ';\n      return btn;\n    },\n    setButtonText: function(button, text, icon, title) {\n      if(!this.iconlib) icon = null;\n      else icon = this.iconlib.getIcon(icon);\n      \n      if(!icon && title) {\n        text = title;\n        title = null;\n      }\n      \n      return this.theme.setButtonText(button, text, icon, title);\n    },\n    addLink: function(link) {\n      if(this.link_holder) this.link_holder.appendChild(link);\n    },\n    getLink: function(data) {\n      var holder, link;\n          \n      // Get mime type of the link\n      var mime = data.mediaType || 'application/javascript';\n      var type = mime.split('/')[0];\n      \n      // Template to generate the link href\n      var href = this.jsoneditor.compileTemplate(data.href,this.template_engine);\n  \n      // Template to generate the link's download attribute\n      var download = null;\n      if(data.download) download = data.download;\n  \n      if(download && download !== true) {\n        download = this.jsoneditor.compileTemplate(download, this.template_engine);\n      }\n  \n      // Image links\n      if(type === 'image') {\n        holder = this.theme.getBlockLinkHolder();\n        link = document.createElement('a');\n        link.setAttribute('target','_blank');\n        var image = document.createElement('img');\n        \n        this.theme.createImageLink(holder,link,image);\n      \n        // When a watched field changes, update the url  \n        this.link_watchers.push(function(vars) {\n          var url = href(vars);\n          link.setAttribute('href',url);\n          link.setAttribute('title',data.rel || url);\n          image.setAttribute('src',url);\n        });\n      }\n      // Audio/Video links\n      else if(['audio','video'].indexOf(type) >=0) {\n        holder = this.theme.getBlockLinkHolder();\n        \n        link = this.theme.getBlockLink();\n        link.setAttribute('target','_blank');\n        \n        var media = document.createElement(type);\n        media.setAttribute('controls','controls');\n        \n        this.theme.createMediaLink(holder,link,media);\n        \n        // When a watched field changes, update the url  \n        this.link_watchers.push(function(vars) {\n          var url = href(vars);\n          link.setAttribute('href',url);\n          link.textContent = data.rel || url;\n          media.setAttribute('src',url);\n        });\n      }\n      // Text links\n      else {\n        link = holder = this.theme.getBlockLink();\n        holder.setAttribute('target','_blank');\n        holder.textContent = data.rel;\n  \n        // When a watched field changes, update the url\n        this.link_watchers.push(function(vars) {\n          var url = href(vars);\n          holder.setAttribute('href',url);\n          holder.textContent = data.rel || url;\n        });\n      }\n  \n      if(download && link) {\n        if(download === true) {\n          link.setAttribute('download','');\n        }\n        else {\n          this.link_watchers.push(function(vars) {\n            link.setAttribute('download',download(vars));\n          });\n        }\n      }\n      \n      if(data.class) link.className = link.className + ' ' + data.class;\n  \n      return holder;\n    },\n    refreshWatchedFieldValues: function() {\n      if(!this.watched_values) return;\n      var watched = {};\n      var changed = false;\n      var self = this;\n      \n      if(this.watched) {\n        var val,editor;\n        for(var name in this.watched) {\n          if(!this.watched.hasOwnProperty(name)) continue;\n          editor = self.jsoneditor.getEditor(this.watched[name]);\n          val = editor? editor.getValue() : null;\n          if(self.watched_values[name] !== val) changed = true;\n          watched[name] = val;\n        }\n      }\n      \n      watched.self = this.getValue();\n      if(this.watched_values.self !== watched.self) changed = true;\n      \n      this.watched_values = watched;\n      \n      return changed;\n    },\n    getWatchedFieldValues: function() {\n      return this.watched_values;\n    },\n    updateHeaderText: function() {\n      if(this.header) {\n        // If the header has children, only update the text node's value\n        if(this.header.children.length) {\n          for(var i=0; i<this.header.childNodes.length; i++) {\n            if(this.header.childNodes[i].nodeType===3) {\n              this.header.childNodes[i].nodeValue = this.getHeaderText();\n              break;\n            }\n          }\n        }\n        // Otherwise, just update the entire node\n        else {\n          this.header.textContent = this.getHeaderText();\n        }\n      }\n    },\n    getHeaderText: function(title_only) {\n      if(this.header_text) return this.header_text;\n      else if(title_only) return this.schema.title;\n      else return this.getTitle();\n    },\n    onWatchedFieldChange: function() {\n      var vars;\n      if(this.header_template) {      \n        vars = $extend(this.getWatchedFieldValues(),{\n          key: this.key,\n          i: this.key,\n          i0: (this.key*1),\n          i1: (this.key*1+1),\n          title: this.getTitle()\n        });\n        var header_text = this.header_template(vars);\n        \n        if(header_text !== this.header_text) {\n          this.header_text = header_text;\n          this.updateHeaderText();\n          this.notify();\n          //this.fireChangeHeaderEvent();\n        }\n      }\n      if(this.link_watchers.length) {\n        vars = this.getWatchedFieldValues();\n        for(var i=0; i<this.link_watchers.length; i++) {\n          this.link_watchers[i](vars);\n        }\n      }\n    },\n    setValue: function(value) {\n      this.value = value;\n    },\n    getValue: function() {\n      return this.value;\n    },\n    refreshValue: function() {\n  \n    },\n    getChildEditors: function() {\n      return false;\n    },\n    destroy: function() {\n      var self = this;\n      this.unregister(this);\n      $each(this.watched,function(name,adjusted_path) {\n        self.jsoneditor.unwatch(adjusted_path,self.watch_listener);\n      });\n      this.watched = null;\n      this.watched_values = null;\n      this.watch_listener = null;\n      this.header_text = null;\n      this.header_template = null;\n      this.value = null;\n      if(this.container && this.container.parentNode) this.container.parentNode.removeChild(this.container);\n      this.container = null;\n      this.jsoneditor = null;\n      this.schema = null;\n      this.path = null;\n      this.key = null;\n      this.parent = null;\n    },\n    getDefault: function() {\n      if(this.schema[\"default\"]) return this.schema[\"default\"];\n      if(this.schema[\"enum\"]) return this.schema[\"enum\"][0];\n      \n      var type = this.schema.type || this.schema.oneOf;\n      if(type && Array.isArray(type)) type = type[0];\n      if(type && typeof type === \"object\") type = type.type;\n      if(type && Array.isArray(type)) type = type[0];\n      \n      if(typeof type === \"string\") {\n        if(type === \"number\") return 0.0;\n        if(type === \"boolean\") return false;\n        if(type === \"integer\") return 0;\n        if(type === \"string\") return \"\";\n        if(type === \"object\") return {};\n        if(type === \"array\") return [];\n      }\n      \n      return null;\n    },\n    getTitle: function() {\n      return this.schema.title || this.key;\n    },\n    enable: function() {\n      this.disabled = false;\n    },\n    disable: function() {\n      this.disabled = true;\n    },\n    isEnabled: function() {\n      return !this.disabled;\n    },\n    isRequired: function() {\n      if(typeof this.schema.required === \"boolean\") return this.schema.required;\n      else if(this.parent && this.parent.schema && Array.isArray(this.parent.schema.required)) return this.parent.schema.required.indexOf(this.key) > -1;\n      else if(this.jsoneditor.options.required_by_default) return true;\n      else return false;\n    },  \n    getDisplayText: function(arr) {\n      var disp = [];\n      var used = {};\n      \n      // Determine how many times each attribute name is used.\n      // This helps us pick the most distinct display text for the schemas.\n      $each(arr,function(i,el) {\n        if(el.title) {\n          used[el.title] = used[el.title] || 0;\n          used[el.title]++;\n        }\n        if(el.description) {\n          used[el.description] = used[el.description] || 0;\n          used[el.description]++;\n        }\n        if(el.format) {\n          used[el.format] = used[el.format] || 0;\n          used[el.format]++;\n        }\n        if(el.type) {\n          used[el.type] = used[el.type] || 0;\n          used[el.type]++;\n        }\n      });\n      \n      // Determine display text for each element of the array\n      $each(arr,function(i,el)  {\n        var name;\n        \n        // If it's a simple string\n        if(typeof el === \"string\") name = el;\n        // Object\n        else if(el.title && used[el.title]<=1) name = el.title;\n        else if(el.format && used[el.format]<=1) name = el.format;\n        else if(el.type && used[el.type]<=1) name = el.type;\n        else if(el.description && used[el.description]<=1) name = el.descripton;\n        else if(el.title) name = el.title;\n        else if(el.format) name = el.format;\n        else if(el.type) name = el.type;\n        else if(el.description) name = el.description;\n        else if(JSON.stringify(el).length < 50) name = JSON.stringify(el);\n        else name = \"type\";\n        \n        disp.push(name);\n      });\n      \n      // Replace identical display text with \"text 1\", \"text 2\", etc.\n      var inc = {};\n      $each(disp,function(i,name) {\n        inc[name] = inc[name] || 0;\n        inc[name]++;\n        \n        if(used[name] > 1) disp[i] = name + \" \" + inc[name];\n      });\n      \n      return disp;\n    },\n    getOption: function(key) {\n      try {\n        throw \"getOption is deprecated\";\n      }\n      catch(e) {\n        window.console.error(e);\n      }\n      \n      return this.options[key];\n    },\n    showValidationErrors: function(errors) {\n  \n    }\n  });\n  \n  JSONEditor.defaults.editors[\"null\"] = JSONEditor.AbstractEditor.extend({\n    getValue: function() {\n      return null;\n    },\n    setValue: function() {\n      this.onChange();\n    },\n    getNumColumns: function() {\n      return 2;\n    }\n  });\n  \n  /*\n   * 插入自定义的一些元素\n   * @Author: CntChen\n   * @Date: 2018-04-02\n   */\n  \n  function addCustomDomByFormat() {\n    switch (this.format) {\n      case 'custom-image':\n        this.myDiv = document.createElement('div');\n        this.myDiv.innerHTML = `\n          <div style=\"display: inline-block;\">\n            <button\n              class=\"btn btn-info custom-button\"\n              data-format=\"${this.format}\"\n              data-path=\"${this.path}\"\n              style=\"margin: 5px 0 5px 20px;\"\n              >${this.translate('custom_set_image')}</button>\n          </div>\n        `;\n        this.farmImage = document.createElement('img');\n        this.farmImage.style = `\n          display: inline-block;\n          border: 1px solid #FF000050;\n          max-width: 300px;\n          max-height: 300px;\n        `;\n        this.farmImage.innerHtml = 'farm image';\n        this.myDiv.insertBefore(this.farmImage, this.myDiv.children[0]);\n        this.control.appendChild(this.myDiv);\n        break;\n      case 'custom-url':\n        this.myDiv = document.createElement('div');\n        this.myDiv.innerHTML = `\n          <div style=\"display: inline-block;\">\n            <button\n              class=\"btn btn-info custom-button\"\n              data-format=\"${this.format}\"\n              data-path=\"${this.path}\"\n              style=\"margin: 5px 0 5px 0px;\"\n              >${this.translate('custom_set_url')}</button>\n          </div>\n        `;\n        this.control.appendChild(this.myDiv);\n        break;\n      default:\n        break;\n    }\n  }\n  \n  function refreshCustomDomValue() {\n    switch (this.format) {\n      case 'custom-image':\n        if (this.farmImage) {\n          this.farmImage.src = this.value;\n        }\n        break;\n      default:\n        break;\n    }\n  }\n  \n  JSONEditor.defaults.editors.string = JSONEditor.AbstractEditor.extend({\n    register: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.setAttribute('name',this.formname);\n    },\n    unregister: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.removeAttribute('name');\n    },\n    setValue: function(value,initial,from_template) {\n      var self = this;\n      \n      if(this.template && !from_template) {\n        return;\n      }\n      \n      if(value === null || typeof value === 'undefined') value = \"\";\n      else if(typeof value === \"object\") value = JSON.stringify(value);\n      else if(typeof value !== \"string\") value = \"\"+value;\n      \n      if(value === this.serialized) return;\n  \n      // Sanitize value before setting it\n      var sanitized = this.sanitize(value);\n  \n      if(this.input.value === sanitized) {\n        return;\n      }\n  \n      this.input.value = sanitized;\n      \n      // If using SCEditor, update the WYSIWYG\n      if(this.sceditor_instance) {\n        this.sceditor_instance.val(sanitized);\n      }\n      else if(this.epiceditor) {\n        this.epiceditor.importFile(null,sanitized);\n      }\n      else if(this.ace_editor) {\n        this.ace_editor.setValue(sanitized);\n      }\n      \n      var changed = from_template || this.getValue() !== value;\n      \n      this.refreshValue();\n      \n      if(initial) this.is_dirty = false;\n      else if(this.jsoneditor.options.show_errors === \"change\") this.is_dirty = true;\n      \n      if(this.adjust_height) this.adjust_height(this.input);\n  \n      // Bubble this setValue to parents if the value changed\n      this.onChange(changed);\n    },\n    getNumColumns: function() {\n      var min = Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);\n      var num;\n      \n      if(this.input_type === 'textarea') num = 6;\n      else if(['text','email'].indexOf(this.input_type) >= 0) num = 4;\n      else num = 2;\n      \n      return Math.min(12,Math.max(min,num));\n    },\n    build: function() {\n      var self = this, i;\n      if(!this.options.compact) this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n      if(this.schema.description) this.description = this.theme.getFormInputDescription(this.schema.description);\n  \n      this.format = this.schema.format;\n      if(!this.format && this.schema.media && this.schema.media.type) {\n        this.format = this.schema.media.type.replace(/(^(application|text)\\/(x-)?(script\\.)?)|(-source$)/g,'');\n      }\n      if(!this.format && this.options.default_format) {\n        this.format = this.options.default_format;\n      }\n      if(this.options.format) {\n        this.format = this.options.format;\n      }\n  \n      // Specific format\n      if(this.format) {\n        // Text Area\n        if(this.format === 'textarea') {\n          this.input_type = 'textarea';\n          this.input = this.theme.getTextareaInput();\n        }\n        // Range Input\n        else if(this.format === 'range') {\n          this.input_type = 'range';\n          var min = this.schema.minimum || 0;\n          var max = this.schema.maximum || Math.max(100,min+1);\n          var step = 1;\n          if(this.schema.multipleOf) {\n            if(min%this.schema.multipleOf) min = Math.ceil(min/this.schema.multipleOf)*this.schema.multipleOf;\n            if(max%this.schema.multipleOf) max = Math.floor(max/this.schema.multipleOf)*this.schema.multipleOf;\n            step = this.schema.multipleOf;\n          }\n  \n          this.input = this.theme.getRangeInput(min,max,step);\n        }\n        // Source Code\n        else if([\n            'actionscript',\n            'batchfile',\n            'bbcode',\n            'c',\n            'c++',\n            'cpp',\n            'coffee',\n            'csharp',\n            'css',\n            'dart',\n            'django',\n            'ejs',\n            'erlang',\n            'golang',\n            'groovy',\n            'handlebars',\n            'haskell',\n            'haxe',\n            'html',\n            'ini',\n            'jade',\n            'java',\n            'javascript',\n            'json',\n            'less',\n            'lisp',\n            'lua',\n            'makefile',\n            'markdown',\n            'matlab',\n            'mysql',\n            'objectivec',\n            'pascal',\n            'perl',\n            'pgsql',\n            'php',\n            'python',\n            'r',\n            'ruby',\n            'sass',\n            'scala',\n            'scss',\n            'smarty',\n            'sql',\n            'stylus',\n            'svg',\n            'twig',\n            'vbscript',\n            'xml',\n            'yaml'\n          ].indexOf(this.format) >= 0\n        ) {\n          this.input_type = this.format;\n          this.source_code = true;\n          \n          this.input = this.theme.getTextareaInput();\n        }\n        // HTML5 Input type\n        else {\n          this.input_type = this.format;\n          this.input = this.theme.getFormInputField(this.input_type);\n        }\n      }\n      // Normal text input\n      else {\n        this.input_type = 'text';\n        this.input = this.theme.getFormInputField(this.input_type);\n      }\n      \n      // minLength, maxLength, and pattern\n      if(typeof this.schema.maxLength !== \"undefined\") this.input.setAttribute('maxlength',this.schema.maxLength);\n      if(typeof this.schema.pattern !== \"undefined\") this.input.setAttribute('pattern',this.schema.pattern);\n      else if(typeof this.schema.minLength !== \"undefined\") this.input.setAttribute('pattern','.{'+this.schema.minLength+',}');\n  \n      if(this.options.compact) {\n        this.container.className += ' compact';\n      }\n      else {\n        if(this.options.input_width) this.input.style.width = this.options.input_width;\n      }\n  \n      if(this.schema.readOnly || this.schema.readonly || this.schema.template) {\n        this.always_disabled = true;\n        this.input.disabled = true;\n      }\n  \n      this.input\n        .addEventListener('change',function(e) {        \n          e.preventDefault();\n          e.stopPropagation();\n          \n          // Don't allow changing if this field is a template\n          if(self.schema.template) {\n            this.value = self.value;\n            return;\n          }\n  \n          var val = this.value;\n          \n          // sanitize value\n          var sanitized = self.sanitize(val);\n          if(val !== sanitized) {\n            this.value = sanitized;\n          }\n          \n          self.is_dirty = true;\n  \n          self.refreshValue();\n          self.onChange(true);\n        });\n        \n      if(this.options.input_height) this.input.style.height = this.options.input_height;\n      if(this.options.expand_height) {\n        this.adjust_height = function(el) {\n          if(!el) return;\n          var i, ch=el.offsetHeight;\n          // Input too short\n          if(el.offsetHeight < el.scrollHeight) {\n            i=0;\n            while(el.offsetHeight < el.scrollHeight+3) {\n              if(i>100) break;\n              i++;\n              ch++;\n              el.style.height = ch+'px';\n            }\n          }\n          else {\n            i=0;\n            while(el.offsetHeight >= el.scrollHeight+3) {\n              if(i>100) break;\n              i++;\n              ch--;\n              el.style.height = ch+'px';\n            }\n            el.style.height = (ch+1)+'px';\n          }\n        };\n        \n        this.input.addEventListener('keyup',function(e) {\n          self.adjust_height(this);\n        });\n        this.input.addEventListener('change',function(e) {\n          self.adjust_height(this);\n        });\n        this.adjust_height();\n      }\n  \n      if(this.format) this.input.setAttribute('data-schemaformat',this.format);\n  \n      this.control = this.theme.getFormControl(this.label, this.input, this.description);\n      this.container.appendChild(this.control);\n  \n      // Any special formatting that needs to happen after the input is added to the dom\n      window.requestAnimationFrame(function() {\n        // Skip in case the input is only a temporary editor,\n        // otherwise, in the case of an ace_editor creation,\n        // it will generate an error trying to append it to the missing parentNode\n        if(self.input.parentNode) self.afterInputReady();\n        if(self.adjust_height) self.adjust_height(self.input);\n      });\n  \n      // Compile and store the template\n      if(this.schema.template) {\n        this.template = this.jsoneditor.compileTemplate(this.schema.template, this.template_engine);\n        this.refreshValue();\n      }\n      else {\n        this.refreshValue();\n      }\n  \n      addCustomDomByFormat.apply(this);\n    },\n    enable: function() {\n      if(!this.always_disabled) {\n        this.input.disabled = false;\n        // TODO: WYSIWYG and Markdown editors\n      }\n      this._super();\n    },\n    disable: function() {\n      this.input.disabled = true;\n      // TODO: WYSIWYG and Markdown editors\n      this._super();\n    },\n    afterInputReady: function() {\n      var self = this, options;\n      \n      // Code editor\n      if(this.source_code) {      \n        // WYSIWYG html and bbcode editor\n        if(this.options.wysiwyg && \n          ['html','bbcode'].indexOf(this.input_type) >= 0 && \n          window.jQuery && window.jQuery.fn && window.jQuery.fn.sceditor\n        ) {\n          options = $extend({},{\n            plugins: self.input_type==='html'? 'xhtml' : 'bbcode',\n            emoticonsEnabled: false,\n            width: '100%',\n            height: 300\n          },JSONEditor.plugins.sceditor,self.options.sceditor_options||{});\n          \n          window.jQuery(self.input).sceditor(options);\n          \n          self.sceditor_instance = window.jQuery(self.input).sceditor('instance');\n          \n          self.sceditor_instance.blur(function() {\n            // Get editor's value\n            var val = window.jQuery(\"<div>\"+self.sceditor_instance.val()+\"</div>\");\n            // Remove sceditor spans/divs\n            window.jQuery('#sceditor-start-marker,#sceditor-end-marker,.sceditor-nlf',val).remove();\n            // Set the value and update\n            self.input.value = val.html();\n            self.value = self.input.value;\n            self.is_dirty = true;\n            self.onChange(true);\n          });\n        }\n        // EpicEditor for markdown (if it's loaded)\n        else if (this.input_type === 'markdown' && window.EpicEditor) {\n          this.epiceditor_container = document.createElement('div');\n          this.input.parentNode.insertBefore(this.epiceditor_container,this.input);\n          this.input.style.display = 'none';\n          \n          options = $extend({},JSONEditor.plugins.epiceditor,{\n            container: this.epiceditor_container,\n            clientSideStorage: false\n          });\n          \n          this.epiceditor = new window.EpicEditor(options).load();\n          \n          this.epiceditor.importFile(null,this.getValue());\n        \n          this.epiceditor.on('update',function() {\n            var val = self.epiceditor.exportFile();\n            self.input.value = val;\n            self.value = val;\n            self.is_dirty = true;\n            self.onChange(true);\n          });\n        }\n        // ACE editor for everything else\n        else if(window.ace) {\n          var mode = this.input_type;\n          // aliases for c/cpp\n          if(mode === 'cpp' || mode === 'c++' || mode === 'c') {\n            mode = 'c_cpp';\n          }\n          \n          this.ace_container = document.createElement('div');\n          this.ace_container.style.width = '100%';\n          this.ace_container.style.position = 'relative';\n          this.ace_container.style.height = '400px';\n          this.input.parentNode.insertBefore(this.ace_container,this.input);\n          this.input.style.display = 'none';\n          this.ace_editor = window.ace.edit(this.ace_container);\n          \n          this.ace_editor.setValue(this.getValue());\n          \n          // The theme\n          if(JSONEditor.plugins.ace.theme) this.ace_editor.setTheme('ace/theme/'+JSONEditor.plugins.ace.theme);\n          // The mode\n          mode = window.ace.require(\"ace/mode/\"+mode);\n          if(mode) this.ace_editor.getSession().setMode(new mode.Mode());\n          \n          // Listen for changes\n          this.ace_editor.on('change',function() {\n            var val = self.ace_editor.getValue();\n            self.input.value = val;\n            self.refreshValue();\n            self.is_dirty = true;\n            self.onChange(true);\n          });\n        }\n      }\n      \n      self.theme.afterInputReady(self.input);\n    },\n    refreshValue: function() {\n      this.value = this.input.value;\n      if(typeof this.value !== \"string\") this.value = '';\n  \n      refreshCustomDomValue.apply(this);\n  \n      this.serialized = this.value;\n    },\n    destroy: function() {\n      // If using SCEditor, destroy the editor instance\n      if(this.sceditor_instance) {\n        this.sceditor_instance.destroy();\n      }\n      else if(this.epiceditor) {\n        this.epiceditor.unload();\n      }\n      else if(this.ace_editor) {\n        this.ace_editor.destroy();\n      }\n      \n      \n      this.template = null;\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n      if(this.label && this.label.parentNode) this.label.parentNode.removeChild(this.label);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n  \n      this._super();\n    },\n    /**\n     * This is overridden in derivative editors\n     */\n    sanitize: function(value) {\n      return value;\n    },\n    /**\n     * Re-calculates the value if needed\n     */\n    onWatchedFieldChange: function() {    \n      var self = this, vars, j;\n      \n      // If this editor needs to be rendered by a macro template\n      if(this.template) {\n        vars = this.getWatchedFieldValues();\n        this.setValue(this.template(vars),false,true);\n      }\n      \n      this._super();\n    },\n    showValidationErrors: function(errors) {\n      var self = this;\n      \n      if(this.jsoneditor.options.show_errors === \"always\") {}\n      else if(!this.is_dirty && this.previous_error_setting===this.jsoneditor.options.show_errors) return;\n      \n      this.previous_error_setting = this.jsoneditor.options.show_errors;\n  \n      var messages = [];\n      $each(errors,function(i,error) {\n        if(error.path === self.path) {\n          messages.push(error.message);\n        }\n      });\n  \n      if(messages.length) {\n        this.theme.addInputError(this.input, messages.join('. ')+'.');\n      }\n      else {\n        this.theme.removeInputError(this.input);\n      }\n    }\n  });\n  \n  JSONEditor.defaults.editors.number = JSONEditor.defaults.editors.string.extend({\n    sanitize: function(value) {\n      return (value+\"\").replace(/[^0-9\\.\\-eE]/g,'');\n    },\n    getNumColumns: function() {\n      return 2;\n    },\n    getValue: function() {\n      return this.value*1;\n    }\n  });\n  \n  JSONEditor.defaults.editors.integer = JSONEditor.defaults.editors.number.extend({\n    sanitize: function(value) {\n      value = value + \"\";\n      return value.replace(/[^0-9\\-]/g,'');\n    },\n    getNumColumns: function() {\n      return 2;\n    }\n  });\n  \n  JSONEditor.defaults.editors.object = JSONEditor.AbstractEditor.extend({\n    getDefault: function() {\n      return $extend({},this.schema[\"default\"] || {});\n    },\n    getChildEditors: function() {\n      return this.editors;\n    },\n    register: function() {\n      this._super();\n      if(this.editors) {\n        for(var i in this.editors) {\n          if(!this.editors.hasOwnProperty(i)) continue;\n          this.editors[i].register();\n        }\n      }\n    },\n    unregister: function() {\n      this._super();\n      if(this.editors) {\n        for(var i in this.editors) {\n          if(!this.editors.hasOwnProperty(i)) continue;\n          this.editors[i].unregister();\n        }\n      }\n    },\n    getNumColumns: function() {\n      return Math.max(Math.min(12,this.maxwidth),3);\n    },\n    enable: function() {\n      if(this.editjson_button) this.editjson_button.disabled = false;\n      if(this.addproperty_button) this.addproperty_button.disabled = false;\n  \n      this._super();\n      if(this.editors) {\n        for(var i in this.editors) {\n          if(!this.editors.hasOwnProperty(i)) continue;\n          this.editors[i].enable();\n        }\n      }\n    },\n    disable: function() {\n      if(this.editjson_button) this.editjson_button.disabled = true;\n      if(this.addproperty_button) this.addproperty_button.disabled = true;\n      this.hideEditJSON();\n  \n      this._super();\n      if(this.editors) {\n        for(var i in this.editors) {\n          if(!this.editors.hasOwnProperty(i)) continue;\n          this.editors[i].disable();\n        }\n      }\n    },\n    layoutEditors: function() {\n      var self = this, i, j;\n  \n      if(!this.row_container) return;\n  \n      // Sort editors by propertyOrder\n      this.property_order = Object.keys(this.editors);\n      this.property_order = this.property_order.sort(function(a,b) {\n        var ordera = self.editors[a].schema.propertyOrder;\n        var orderb = self.editors[b].schema.propertyOrder;\n        if(typeof ordera !== \"number\") ordera = 1000;\n        if(typeof orderb !== \"number\") orderb = 1000;\n  \n        return ordera - orderb;\n      });\n  \n      var container;\n  \n      if(this.format === 'grid') {\n        var rows = [];\n        $each(this.property_order, function(j,key) {\n          var editor = self.editors[key];\n          if(editor.property_removed) return;\n          var found = false;\n          var width = editor.options.hidden? 0 : (editor.options.grid_columns || editor.getNumColumns());\n          var height = editor.options.hidden? 0 : editor.container.offsetHeight;\n          // See if the editor will fit in any of the existing rows first\n          for(var i=0; i<rows.length; i++) {\n            // If the editor will fit in the row horizontally\n            if(rows[i].width + width <= 12) {\n              // If the editor is close to the other elements in height\n              // i.e. Don't put a really tall editor in an otherwise short row or vice versa\n              if(!height || (rows[i].minh*0.5 < height && rows[i].maxh*2 > height)) {\n                found = i;\n              }\n            }\n          }\n  \n          // If there isn't a spot in any of the existing rows, start a new row\n          if(found === false) {\n            rows.push({\n              width: 0,\n              minh: 999999,\n              maxh: 0,\n              editors: []\n            });\n            found = rows.length-1;\n          }\n  \n          rows[found].editors.push({\n            key: key,\n            //editor: editor,\n            width: width,\n            height: height\n          });\n          rows[found].width += width;\n          rows[found].minh = Math.min(rows[found].minh,height);\n          rows[found].maxh = Math.max(rows[found].maxh,height);\n        });\n  \n        // Make almost full rows width 12\n        // Do this by increasing all editors' sizes proprotionately\n        // Any left over space goes to the biggest editor\n        // Don't touch rows with a width of 6 or less\n        for(i=0; i<rows.length; i++) {\n          if(rows[i].width < 12) {\n            var biggest = false;\n            var new_width = 0;\n            for(j=0; j<rows[i].editors.length; j++) {\n              if(biggest === false) biggest = j;\n              else if(rows[i].editors[j].width > rows[i].editors[biggest].width) biggest = j;\n              rows[i].editors[j].width *= 12/rows[i].width;\n              rows[i].editors[j].width = Math.floor(rows[i].editors[j].width);\n              new_width += rows[i].editors[j].width;\n            }\n            if(new_width < 12) rows[i].editors[biggest].width += 12-new_width;\n            rows[i].width = 12;\n          }\n        }\n  \n        // layout hasn't changed\n        if(this.layout === JSON.stringify(rows)) return false;\n        this.layout = JSON.stringify(rows);\n  \n        // Layout the form\n        container = document.createElement('div');\n        for(i=0; i<rows.length; i++) {\n          var row = this.theme.getGridRow();\n          container.appendChild(row);\n          for(j=0; j<rows[i].editors.length; j++) {\n            var key = rows[i].editors[j].key;\n            var editor = this.editors[key];\n  \n            if(editor.options.hidden) editor.container.style.display = 'none';\n            else this.theme.setGridColumnSize(editor.container,rows[i].editors[j].width);\n            row.appendChild(editor.container);\n          }\n        }\n      }\n      // Normal layout\n      else {\n        container = document.createElement('div');\n        $each(this.property_order, function(i,key) {\n          var editor = self.editors[key];\n          if(editor.property_removed) return;\n          var row = self.theme.getGridRow();\n          container.appendChild(row);\n  \n          if(editor.options.hidden) editor.container.style.display = 'none';\n          else self.theme.setGridColumnSize(editor.container,12);\n          row.appendChild(editor.container);\n        });\n      }\n      this.row_container.innerHTML = '';\n      this.row_container.appendChild(container);\n    },\n    getPropertySchema: function(key) {\n      // Schema declared directly in properties\n      var schema = this.schema.properties[key] || {};\n      schema = $extend({},schema);\n      var matched = this.schema.properties[key]? true : false;\n  \n      // Any matching patternProperties should be merged in\n      if(this.schema.patternProperties) {\n        for(var i in this.schema.patternProperties) {\n          if(!this.schema.patternProperties.hasOwnProperty(i)) continue;\n          var regex = new RegExp(i);\n          if(regex.test(key)) {\n            schema.allOf = schema.allOf || [];\n            schema.allOf.push(this.schema.patternProperties[i]);\n            matched = true;\n          }\n        }\n      }\n  \n      // Hasn't matched other rules, use additionalProperties schema\n      if(!matched && this.schema.additionalProperties && typeof this.schema.additionalProperties === \"object\") {\n        schema = $extend({},this.schema.additionalProperties);\n      }\n  \n      return schema;\n    },\n    preBuild: function() {\n      this._super();\n  \n      this.editors = {};\n      this.cached_editors = {};\n      var self = this;\n  \n      this.format = this.options.layout || this.options.object_layout || this.schema.format || this.jsoneditor.options.object_layout || 'normal';\n  \n      this.schema.properties = this.schema.properties || {};\n  \n      this.minwidth = 0;\n      this.maxwidth = 0;\n  \n      // If the object should be rendered as a table row\n      if(this.options.table_row) {\n        $each(this.schema.properties, function(key,schema) {\n          var editor = self.jsoneditor.getEditorClass(schema);\n          self.editors[key] = self.jsoneditor.createEditor(editor,{\n            jsoneditor: self.jsoneditor,\n            schema: schema,\n            path: self.path+'.'+key,\n            parent: self,\n            compact: true,\n            required: true\n          });\n          self.editors[key].preBuild();\n  \n          var width = self.editors[key].options.hidden? 0 : (self.editors[key].options.grid_columns || self.editors[key].getNumColumns());\n  \n          self.minwidth += width;\n          self.maxwidth += width;\n        });\n        this.no_link_holder = true;\n      }\n      // If the object should be rendered as a table\n      else if(this.options.table) {\n        // TODO: table display format\n        throw \"Not supported yet\";\n      }\n      // If the object should be rendered as a div\n      else {\n        if(!this.schema.defaultProperties) {\n          if(this.jsoneditor.options.display_required_only || this.options.display_required_only) {\n            this.schema.defaultProperties = [];\n            $each(this.schema.properties, function(k,s) {\n              if(self.isRequired({key: k, schema: s})) {\n                self.schema.defaultProperties.push(k);\n              }\n            });\n          }\n          else {\n            self.schema.defaultProperties = Object.keys(self.schema.properties);\n          }\n        }\n  \n        // Increase the grid width to account for padding\n        self.maxwidth += 1;\n  \n        $each(this.schema.defaultProperties, function(i,key) {\n          self.addObjectProperty(key, true);\n  \n          if(self.editors[key]) {\n            self.minwidth = Math.max(self.minwidth,(self.editors[key].options.grid_columns || self.editors[key].getNumColumns()));\n            self.maxwidth += (self.editors[key].options.grid_columns || self.editors[key].getNumColumns());\n          }\n        });\n      }\n  \n      // Sort editors by propertyOrder\n      this.property_order = Object.keys(this.editors);\n      this.property_order = this.property_order.sort(function(a,b) {\n        var ordera = self.editors[a].schema.propertyOrder;\n        var orderb = self.editors[b].schema.propertyOrder;\n        if(typeof ordera !== \"number\") ordera = 1000;\n        if(typeof orderb !== \"number\") orderb = 1000;\n  \n        return ordera - orderb;\n      });\n    },\n    build: function() {\n      var self = this;\n  \n      // If the object should be rendered as a table row\n      if(this.options.table_row) {\n        this.editor_holder = this.container;\n        $each(this.editors, function(key,editor) {\n          var holder = self.theme.getTableCell();\n          self.editor_holder.appendChild(holder);\n  \n          editor.setContainer(holder);\n          editor.build();\n          editor.postBuild();\n  \n          if(self.editors[key].options.hidden) {\n            holder.style.display = 'none';\n          }\n          if(self.editors[key].options.input_width) {\n            holder.style.width = self.editors[key].options.input_width;\n          }\n        });\n      }\n      // If the object should be rendered as a table\n      else if(this.options.table) {\n        // TODO: table display format\n        throw \"Not supported yet\";\n      }\n      // If the object should be rendered as a div\n      else {\n        this.header = document.createElement('span');\n        this.header.textContent = this.getTitle();\n        this.title = this.theme.getHeader(this.header);\n        this.container.appendChild(this.title);\n        this.container.style.position = 'relative';\n  \n        // Edit JSON modal\n        this.editjson_holder = this.theme.getModal();\n        this.editjson_textarea = this.theme.getTextareaInput();\n        this.editjson_textarea.style.height = '170px';\n        this.editjson_textarea.style.width = '300px';\n        this.editjson_textarea.style.display = 'block';\n        this.editjson_save = this.getButton('Save','save','Save');\n        this.editjson_save.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          self.saveJSON();\n        });\n        this.editjson_cancel = this.getButton('Cancel','cancel','Cancel');\n        this.editjson_cancel.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          self.hideEditJSON();\n        });\n        this.editjson_holder.appendChild(this.editjson_textarea);\n        this.editjson_holder.appendChild(this.editjson_save);\n        this.editjson_holder.appendChild(this.editjson_cancel);\n  \n        // Manage Properties modal\n        this.addproperty_holder = this.theme.getModal();\n        this.addproperty_list = document.createElement('div');\n        this.addproperty_list.style.width = '295px';\n        this.addproperty_list.style.maxHeight = '160px';\n        this.addproperty_list.style.padding = '5px 0';\n        this.addproperty_list.style.overflowY = 'auto';\n        this.addproperty_list.style.overflowX = 'hidden';\n        this.addproperty_list.style.paddingLeft = '5px';\n        this.addproperty_list.setAttribute('class', 'property-selector');\n        this.addproperty_add = this.getButton('add','add','add');\n        this.addproperty_input = this.theme.getFormInputField('text');\n        this.addproperty_input.setAttribute('placeholder','Property name...');\n        this.addproperty_input.style.width = '220px';\n        this.addproperty_input.style.marginBottom = '0';\n        this.addproperty_input.style.display = 'inline-block';\n        this.addproperty_add.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          if(self.addproperty_input.value) {\n            if(self.editors[self.addproperty_input.value]) {\n              window.alert('there is already a property with that name');\n              return;\n            }\n  \n            self.addObjectProperty(self.addproperty_input.value);\n            if(self.editors[self.addproperty_input.value]) {\n              self.editors[self.addproperty_input.value].disable();\n            }\n            self.onChange(true);\n          }\n        });\n        this.addproperty_holder.appendChild(this.addproperty_list);\n        this.addproperty_holder.appendChild(this.addproperty_input);\n        this.addproperty_holder.appendChild(this.addproperty_add);\n        var spacer = document.createElement('div');\n        spacer.style.clear = 'both';\n        this.addproperty_holder.appendChild(spacer);\n  \n  \n        // Description\n        if(this.schema.description) {\n          this.description = this.theme.getDescription(this.schema.description);\n          this.container.appendChild(this.description);\n        }\n  \n        // Validation error placeholder area\n        this.error_holder = document.createElement('div');\n        this.container.appendChild(this.error_holder);\n  \n        // Container for child editor area\n        this.editor_holder = this.theme.getIndentedPanel();\n        this.container.appendChild(this.editor_holder);\n  \n        // Container for rows of child editors\n        this.row_container = this.theme.getGridContainer();\n        this.editor_holder.appendChild(this.row_container);\n  \n        $each(this.editors, function(key,editor) {\n          var holder = self.theme.getGridColumn();\n          self.row_container.appendChild(holder);\n  \n          editor.setContainer(holder);\n          editor.build();\n          editor.postBuild();\n        });\n  \n        // Control buttons\n        this.title_controls = this.theme.getHeaderButtonHolder();\n        this.editjson_controls = this.theme.getHeaderButtonHolder();\n        this.addproperty_controls = this.theme.getHeaderButtonHolder();\n        this.title.appendChild(this.title_controls);\n        this.title.appendChild(this.editjson_controls);\n        this.title.appendChild(this.addproperty_controls);\n  \n        // Show/Hide button\n        this.collapsed = false;\n        this.toggle_button = this.getButton('','collapse',this.translate('button_collapse'));\n        this.title_controls.appendChild(this.toggle_button);\n        this.toggle_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          if(self.collapsed) {\n            self.editor_holder.style.display = '';\n            self.collapsed = false;\n            self.setButtonText(self.toggle_button,'','collapse',self.translate('button_collapse'));\n          }\n          else {\n            self.editor_holder.style.display = 'none';\n            self.collapsed = true;\n            self.setButtonText(self.toggle_button,'','expand',self.translate('button_expand'));\n          }\n        });\n  \n        // If it should start collapsed\n        if(this.options.collapsed) {\n          $trigger(this.toggle_button,'click');\n        }\n  \n        // Collapse button disabled\n        if(this.schema.options && typeof this.schema.options.disable_collapse !== \"undefined\") {\n          if(this.schema.options.disable_collapse) this.toggle_button.style.display = 'none';\n        }\n        else if(this.jsoneditor.options.disable_collapse) {\n          this.toggle_button.style.display = 'none';\n        }\n  \n        // Edit JSON Button\n        this.editjson_button = this.getButton('JSON','edit','Edit JSON');\n        this.editjson_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          self.toggleEditJSON();\n        });\n        this.editjson_controls.appendChild(this.editjson_button);\n        this.editjson_controls.appendChild(this.editjson_holder);\n  \n        // Edit JSON Buttton disabled\n        if(this.schema.options && typeof this.schema.options.disable_edit_json !== \"undefined\") {\n          if(this.schema.options.disable_edit_json) this.editjson_button.style.display = 'none';\n        }\n        else if(this.jsoneditor.options.disable_edit_json) {\n          this.editjson_button.style.display = 'none';\n        }\n  \n        // Object Properties Button\n        this.addproperty_button = this.getButton('Properties','edit','Object Properties');\n        this.addproperty_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          self.toggleAddProperty();\n        });\n        this.addproperty_controls.appendChild(this.addproperty_button);\n        this.addproperty_controls.appendChild(this.addproperty_holder);\n        this.refreshAddProperties();\n      }\n  \n      // Fix table cell ordering\n      if(this.options.table_row) {\n        this.editor_holder = this.container;\n        $each(this.property_order,function(i,key) {\n          self.editor_holder.appendChild(self.editors[key].container);\n        });\n      }\n      // Layout object editors in grid if needed\n      else {\n        // Initial layout\n        this.layoutEditors();\n        // Do it again now that we know the approximate heights of elements\n        this.layoutEditors();\n      }\n    },\n    showEditJSON: function() {\n      if(!this.editjson_holder) return;\n      this.hideAddProperty();\n  \n      // Position the form directly beneath the button\n      // TODO: edge detection\n      this.editjson_holder.style.left = this.editjson_button.offsetLeft+\"px\";\n      this.editjson_holder.style.top = this.editjson_button.offsetTop + this.editjson_button.offsetHeight+\"px\";\n  \n      // Start the textarea with the current value\n      this.editjson_textarea.value = JSON.stringify(this.getValue(),null,2);\n  \n      // Disable the rest of the form while editing JSON\n      this.disable();\n  \n      this.editjson_holder.style.display = '';\n      this.editjson_button.disabled = false;\n      this.editing_json = true;\n    },\n    hideEditJSON: function() {\n      if(!this.editjson_holder) return;\n      if(!this.editing_json) return;\n  \n      this.editjson_holder.style.display = 'none';\n      this.enable();\n      this.editing_json = false;\n    },\n    saveJSON: function() {\n      if(!this.editjson_holder) return;\n  \n      try {\n        var json = JSON.parse(this.editjson_textarea.value);\n        this.setValue(json);\n        this.hideEditJSON();\n      }\n      catch(e) {\n        window.alert('invalid JSON');\n        throw e;\n      }\n    },\n    toggleEditJSON: function() {\n      if(this.editing_json) this.hideEditJSON();\n      else this.showEditJSON();\n    },\n    insertPropertyControlUsingPropertyOrder: function (property, control, container) {\n      var propertyOrder;\n      if (this.schema.properties[property])\n        propertyOrder = this.schema.properties[property].propertyOrder;\n      if (typeof propertyOrder !== \"number\") propertyOrder = 1000;\n      control.propertyOrder = propertyOrder;\n  \n      for (var i = 0; i < container.childNodes.length; i++) {\n        var child = container.childNodes[i];\n        if (control.propertyOrder < child.propertyOrder) {\n          this.addproperty_list.insertBefore(control, child);\n          control = null;\n          break;\n        }\n      }\n      if (control) {\n        this.addproperty_list.appendChild(control);\n      }\n    },\n    addPropertyCheckbox: function(key) {\n      var self = this;\n      var checkbox, label, labelText, control;\n  \n      checkbox = self.theme.getCheckbox();\n      checkbox.style.width = 'auto';\n  \n      if (this.schema.properties[key] && this.schema.properties[key].title)\n        labelText = this.schema.properties[key].title;\n      else\n        labelText = key;\n  \n      label = self.theme.getCheckboxLabel(labelText);\n  \n      control = self.theme.getFormControl(label,checkbox);\n      control.style.paddingBottom = control.style.marginBottom = control.style.paddingTop = control.style.marginTop = 0;\n      control.style.height = 'auto';\n      //control.style.overflowY = 'hidden';\n  \n      this.insertPropertyControlUsingPropertyOrder(key, control, this.addproperty_list);\n  \n      checkbox.checked = key in this.editors;\n      checkbox.addEventListener('change',function() {\n        if(checkbox.checked) {\n          self.addObjectProperty(key);\n        }\n        else {\n          self.removeObjectProperty(key);\n        }\n        self.onChange(true);\n      });\n      self.addproperty_checkboxes[key] = checkbox;\n  \n      return checkbox;\n    },\n    showAddProperty: function() {\n      if(!this.addproperty_holder) return;\n      this.hideEditJSON();\n  \n      // Position the form directly beneath the button\n      // TODO: edge detection\n      this.addproperty_holder.style.left = this.addproperty_button.offsetLeft+\"px\";\n      this.addproperty_holder.style.top = this.addproperty_button.offsetTop + this.addproperty_button.offsetHeight+\"px\";\n  \n      // Disable the rest of the form while editing JSON\n      this.disable();\n  \n      this.adding_property = true;\n      this.addproperty_button.disabled = false;\n      this.addproperty_holder.style.display = '';\n      this.refreshAddProperties();\n    },\n    hideAddProperty: function() {\n      if(!this.addproperty_holder) return;\n      if(!this.adding_property) return;\n  \n      this.addproperty_holder.style.display = 'none';\n      this.enable();\n  \n      this.adding_property = false;\n    },\n    toggleAddProperty: function() {\n      if(this.adding_property) this.hideAddProperty();\n      else this.showAddProperty();\n    },\n    removeObjectProperty: function(property) {\n      if(this.editors[property]) {\n        this.editors[property].unregister();\n        delete this.editors[property];\n  \n        this.refreshValue();\n        this.layoutEditors();\n      }\n    },\n    addObjectProperty: function(name, prebuild_only) {\n      var self = this;\n  \n      // Property is already added\n      if(this.editors[name]) return;\n  \n      // Property was added before and is cached\n      if(this.cached_editors[name]) {\n        this.editors[name] = this.cached_editors[name];\n        if(prebuild_only) return;\n        this.editors[name].register();\n      }\n      // New property\n      else {\n        if(!this.canHaveAdditionalProperties() && (!this.schema.properties || !this.schema.properties[name])) {\n          return;\n        }\n  \n        var schema = self.getPropertySchema(name);\n  \n  \n        // Add the property\n        var editor = self.jsoneditor.getEditorClass(schema);\n  \n        self.editors[name] = self.jsoneditor.createEditor(editor,{\n          jsoneditor: self.jsoneditor,\n          schema: schema,\n          path: self.path+'.'+name,\n          parent: self\n        });\n        self.editors[name].preBuild();\n  \n        if(!prebuild_only) {\n          var holder = self.theme.getChildEditorHolder();\n          self.editor_holder.appendChild(holder);\n          self.editors[name].setContainer(holder);\n          self.editors[name].build();\n          self.editors[name].postBuild();\n        }\n  \n        self.cached_editors[name] = self.editors[name];\n      }\n  \n      // If we're only prebuilding the editors, don't refresh values\n      if(!prebuild_only) {\n        self.refreshValue();\n        self.layoutEditors();\n      }\n    },\n    onChildEditorChange: function(editor) {\n      this.refreshValue();\n      this._super(editor);\n    },\n    canHaveAdditionalProperties: function() {\n      if (typeof this.schema.additionalProperties === \"boolean\") {\n        return this.schema.additionalProperties;\n      }\n      return !this.jsoneditor.options.no_additional_properties;\n    },\n    destroy: function() {\n      $each(this.cached_editors, function(i,el) {\n        el.destroy();\n      });\n      if(this.editor_holder) this.editor_holder.innerHTML = '';\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.error_holder && this.error_holder.parentNode) this.error_holder.parentNode.removeChild(this.error_holder);\n  \n      this.editors = null;\n      this.cached_editors = null;\n      if(this.editor_holder && this.editor_holder.parentNode) this.editor_holder.parentNode.removeChild(this.editor_holder);\n      this.editor_holder = null;\n  \n      this._super();\n    },\n    getValue: function() {\n      var result = this._super();\n      if(this.jsoneditor.options.remove_empty_properties || this.options.remove_empty_properties) {\n        for(var i in result) {\n          if(result.hasOwnProperty(i)) {\n            if(!result[i]) delete result[i];\n          }\n        }\n      }\n      return result;\n    },\n    refreshValue: function() {\n      this.value = {};\n      var self = this;\n  \n      for(var i in this.editors) {\n        if(!this.editors.hasOwnProperty(i)) continue;\n        this.value[i] = this.editors[i].getValue();\n      }\n      \n      if(this.adding_property) this.refreshAddProperties();\n    },\n    refreshAddProperties: function() {\n      if(this.options.disable_properties || (this.options.disable_properties !== false && this.jsoneditor.options.disable_properties)) {\n        this.addproperty_controls.style.display = 'none';\n        return;\n      }\n  \n      var can_add = false, can_remove = false, num_props = 0, i, show_modal = false;\n  \n      // Get number of editors\n      for(i in this.editors) {\n        if(!this.editors.hasOwnProperty(i)) continue;\n        num_props++;\n      }\n  \n      // Determine if we can add back removed properties\n      can_add = this.canHaveAdditionalProperties() && !(typeof this.schema.maxProperties !== \"undefined\" && num_props >= this.schema.maxProperties);\n  \n      if(this.addproperty_checkboxes) {\n        this.addproperty_list.innerHTML = '';\n      }\n      this.addproperty_checkboxes = {};\n  \n      // Check for which editors can't be removed or added back\n      for(i in this.cached_editors) {\n        if(!this.cached_editors.hasOwnProperty(i)) continue;\n  \n        this.addPropertyCheckbox(i);\n  \n        if(this.isRequired(this.cached_editors[i]) && i in this.editors) {\n          this.addproperty_checkboxes[i].disabled = true;\n        }\n  \n        if(typeof this.schema.minProperties !== \"undefined\" && num_props <= this.schema.minProperties) {\n          this.addproperty_checkboxes[i].disabled = this.addproperty_checkboxes[i].checked;\n          if(!this.addproperty_checkboxes[i].checked) show_modal = true;\n        }\n        else if(!(i in this.editors)) {\n          if(!can_add  && !this.schema.properties.hasOwnProperty(i)) {\n            this.addproperty_checkboxes[i].disabled = true;\n          }\n          else {\n            this.addproperty_checkboxes[i].disabled = false;\n            show_modal = true;\n          }\n        }\n        else {\n          show_modal = true;\n          can_remove = true;\n        }\n      }\n  \n      if(this.canHaveAdditionalProperties()) {\n        show_modal = true;\n      }\n  \n      // Additional addproperty checkboxes not tied to a current editor\n      for(i in this.schema.properties) {\n        if(!this.schema.properties.hasOwnProperty(i)) continue;\n        if(this.cached_editors[i]) continue;\n        show_modal = true;\n        this.addPropertyCheckbox(i);\n      }\n  \n      // If no editors can be added or removed, hide the modal button\n      if(!show_modal) {\n        this.hideAddProperty();\n        this.addproperty_controls.style.display = 'none';\n      }\n      // If additional properties are disabled\n      else if(!this.canHaveAdditionalProperties()) {\n        this.addproperty_add.style.display = 'none';\n        this.addproperty_input.style.display = 'none';\n      }\n      // If no new properties can be added\n      else if(!can_add) {\n        this.addproperty_add.disabled = true;\n      }\n      // If new properties can be added\n      else {\n        this.addproperty_add.disabled = false;\n      }\n    },\n    isRequired: function(editor) {\n      if(typeof editor.schema.required === \"boolean\") return editor.schema.required;\n      else if(Array.isArray(this.schema.required)) return this.schema.required.indexOf(editor.key) > -1;\n      else if(this.jsoneditor.options.required_by_default) return true;\n      else return false;\n    },\n    setValue: function(value, initial) {\n      var self = this;\n      value = value || {};\n  \n      if(typeof value !== \"object\" || Array.isArray(value)) value = {};\n  \n      // First, set the values for all of the defined properties\n      $each(this.cached_editors, function(i,editor) {\n        // Value explicitly set\n        if(typeof value[i] !== \"undefined\") {\n          self.addObjectProperty(i);\n          editor.setValue(value[i],initial);\n        }\n        // Otherwise, remove value unless this is the initial set or it's required\n        else if(!initial && !self.isRequired(editor)) {\n          self.removeObjectProperty(i);\n        }\n        // Otherwise, set the value to the default\n        else {\n          editor.setValue(editor.getDefault(),initial);\n        }\n      });\n  \n      $each(value, function(i,val) {\n        if(!self.cached_editors[i]) {\n          self.addObjectProperty(i);\n          if(self.editors[i]) self.editors[i].setValue(val,initial);\n        }\n      });\n  \n      this.refreshValue();\n      this.layoutEditors();\n      this.onChange();\n    },\n    showValidationErrors: function(errors) {\n      var self = this;\n  \n      // Get all the errors that pertain to this editor\n      var my_errors = [];\n      var other_errors = [];\n      $each(errors, function(i,error) {\n        if(error.path === self.path) {\n          my_errors.push(error);\n        }\n        else {\n          other_errors.push(error);\n        }\n      });\n  \n      // Show errors for this editor\n      if(this.error_holder) {\n        if(my_errors.length) {\n          var message = [];\n          this.error_holder.innerHTML = '';\n          this.error_holder.style.display = '';\n          $each(my_errors, function(i,error) {\n            self.error_holder.appendChild(self.theme.getErrorMessage(error.message));\n          });\n        }\n        // Hide error area\n        else {\n          this.error_holder.style.display = 'none';\n        }\n      }\n  \n      // Show error for the table row if this is inside a table\n      if(this.options.table_row) {\n        if(my_errors.length) {\n          this.theme.addTableRowError(this.container);\n        }\n        else {\n          this.theme.removeTableRowError(this.container);\n        }\n      }\n  \n      // Show errors for child editors\n      $each(this.editors, function(i,editor) {\n        editor.showValidationErrors(other_errors);\n      });\n    }\n  });\n  \n  JSONEditor.defaults.editors.array = JSONEditor.AbstractEditor.extend({\n    getDefault: function() {\n      return this.schema[\"default\"] || [];\n    },\n    register: function() {\n      this._super();\n      if(this.rows) {\n        for(var i=0; i<this.rows.length; i++) {\n          this.rows[i].register();\n        }\n      }\n    },\n    unregister: function() {\n      this._super();\n      if(this.rows) {\n        for(var i=0; i<this.rows.length; i++) {\n          this.rows[i].unregister();\n        }\n      }\n    },\n    getNumColumns: function() {\n      var info = this.getItemInfo(0);\n      // Tabs require extra horizontal space\n      if(this.tabs_holder) {\n        return Math.max(Math.min(12,info.width+2),4);\n      }\n      else {\n        return info.width;\n      }\n    },\n    enable: function() {\n      if(this.add_row_button) this.add_row_button.disabled = false;\n      if(this.remove_all_rows_button) this.remove_all_rows_button.disabled = false;\n      if(this.delete_last_row_button) this.delete_last_row_button.disabled = false;\n      \n      if(this.rows) {\n        for(var i=0; i<this.rows.length; i++) {\n          this.rows[i].enable();\n          \n          if(this.rows[i].moveup_button) this.rows[i].moveup_button.disabled = false;\n          if(this.rows[i].movedown_button) this.rows[i].movedown_button.disabled = false;\n          if(this.rows[i].delete_button) this.rows[i].delete_button.disabled = false;\n        }\n      }\n      this._super();\n    },\n    disable: function() {\n      if(this.add_row_button) this.add_row_button.disabled = true;\n      if(this.remove_all_rows_button) this.remove_all_rows_button.disabled = true;\n      if(this.delete_last_row_button) this.delete_last_row_button.disabled = true;\n  \n      if(this.rows) {\n        for(var i=0; i<this.rows.length; i++) {\n          this.rows[i].disable();\n          \n          if(this.rows[i].moveup_button) this.rows[i].moveup_button.disabled = true;\n          if(this.rows[i].movedown_button) this.rows[i].movedown_button.disabled = true;\n          if(this.rows[i].delete_button) this.rows[i].delete_button.disabled = true;\n        }\n      }\n      this._super();\n    },\n    preBuild: function() {\n      this._super();\n      \n      this.rows = [];\n      this.row_cache = [];\n  \n      this.hide_delete_buttons = this.options.disable_array_delete || this.jsoneditor.options.disable_array_delete;\n      this.hide_delete_all_rows_buttons = this.hide_delete_buttons || this.options.disable_array_delete_all_rows || this.jsoneditor.options.disable_array_delete_all_rows;\n      this.hide_delete_last_row_buttons = this.hide_delete_buttons || this.options.disable_array_delete_last_row || this.jsoneditor.options.disable_array_delete_last_row;\n      this.hide_move_buttons = this.options.disable_array_reorder || this.jsoneditor.options.disable_array_reorder;\n      this.hide_add_button = this.options.disable_array_add || this.jsoneditor.options.disable_array_add;\n    },\n    build: function() {\n      var self = this;\n  \n      if(!this.options.compact) {\n        this.header = document.createElement('span');\n        this.header.textContent = this.getTitle();\n        this.title = this.theme.getHeader(this.header);\n        this.container.appendChild(this.title);\n        this.title_controls = this.theme.getHeaderButtonHolder();\n        this.title.appendChild(this.title_controls);\n        if(this.schema.description) {\n          this.description = this.theme.getDescription(this.schema.description);\n          this.container.appendChild(this.description);\n        }\n        this.error_holder = document.createElement('div');\n        this.container.appendChild(this.error_holder);\n  \n        if(this.schema.format === 'tabs') {\n          this.controls = this.theme.getHeaderButtonHolder();\n          this.title.appendChild(this.controls);\n          this.tabs_holder = this.theme.getTabHolder();\n          this.container.appendChild(this.tabs_holder);\n          this.row_holder = this.theme.getTabContentHolder(this.tabs_holder);\n  \n          this.active_tab = null;\n        }\n        else {\n          this.panel = this.theme.getIndentedPanel();\n          this.container.appendChild(this.panel);\n          this.row_holder = document.createElement('div');\n          this.panel.appendChild(this.row_holder);\n          this.controls = this.theme.getButtonHolder();\n          this.panel.appendChild(this.controls);\n        }\n      }\n      else {\n          this.panel = this.theme.getIndentedPanel();\n          this.container.appendChild(this.panel);\n          this.controls = this.theme.getButtonHolder();\n          this.panel.appendChild(this.controls);\n          this.row_holder = document.createElement('div');\n          this.panel.appendChild(this.row_holder);\n      }\n  \n      // Add controls\n      this.addControls();\n    },\n    onChildEditorChange: function(editor) {\n      this.refreshValue();\n      this.refreshTabs(true);\n      this._super(editor);\n    },\n    getItemTitle: function() {\n      if(!this.item_title) {\n        if(this.schema.items && !Array.isArray(this.schema.items)) {\n          var tmp = this.jsoneditor.expandRefs(this.schema.items);\n          this.item_title = tmp.title || 'item';\n        }\n        else {\n          this.item_title = 'item';\n        }\n      }\n      return this.item_title;\n    },\n    getItemSchema: function(i) {\n      if(Array.isArray(this.schema.items)) {\n        if(i >= this.schema.items.length) {\n          if(this.schema.additionalItems===true) {\n            return {};\n          }\n          else if(this.schema.additionalItems) {\n            return $extend({},this.schema.additionalItems);\n          }\n        }\n        else {\n          return $extend({},this.schema.items[i]);\n        }\n      }\n      else if(this.schema.items) {\n        return $extend({},this.schema.items);\n      }\n      else {\n        return {};\n      }\n    },\n    getItemInfo: function(i) {\n      var schema = this.getItemSchema(i);\n      \n      // Check if it's cached\n      this.item_info = this.item_info || {};\n      var stringified = JSON.stringify(schema);\n      if(typeof this.item_info[stringified] !== \"undefined\") return this.item_info[stringified];\n      \n      // Get the schema for this item\n      schema = this.jsoneditor.expandRefs(schema);\n        \n      this.item_info[stringified] = {\n        title: schema.title || \"item\",\n        'default': schema[\"default\"],\n        width: 12,\n        child_editors: schema.properties || schema.items\n      };\n      \n      return this.item_info[stringified];\n    },\n    getElementEditor: function(i) {\n      var item_info = this.getItemInfo(i);\n      var schema = this.getItemSchema(i);\n      schema = this.jsoneditor.expandRefs(schema);\n      schema.title = item_info.title+' '+(i+1);\n  \n      var editor = this.jsoneditor.getEditorClass(schema);\n  \n      var holder;\n      if(this.tabs_holder) {\n        holder = this.theme.getTabContent();\n      }\n      else if(item_info.child_editors) {\n        holder = this.theme.getChildEditorHolder();\n      }\n      else {\n        holder = this.theme.getIndentedPanel();\n      }\n  \n      this.row_holder.appendChild(holder);\n  \n      var ret = this.jsoneditor.createEditor(editor,{\n        jsoneditor: this.jsoneditor,\n        schema: schema,\n        container: holder,\n        path: this.path+'.'+i,\n        parent: this,\n        required: true\n      });\n      ret.preBuild();\n      ret.build();\n      ret.postBuild();\n  \n      if(!ret.title_controls) {\n        ret.array_controls = this.theme.getButtonHolder();\n        holder.appendChild(ret.array_controls);\n      }\n      \n      return ret;\n    },\n    destroy: function() {\n      this.empty(true);\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n      if(this.row_holder && this.row_holder.parentNode) this.row_holder.parentNode.removeChild(this.row_holder);\n      if(this.controls && this.controls.parentNode) this.controls.parentNode.removeChild(this.controls);\n      if(this.panel && this.panel.parentNode) this.panel.parentNode.removeChild(this.panel);\n      \n      this.rows = this.row_cache = this.title = this.description = this.row_holder = this.panel = this.controls = null;\n  \n      this._super();\n    },\n    empty: function(hard) {\n      if(!this.rows) return;\n      var self = this;\n      $each(this.rows,function(i,row) {\n        if(hard) {\n          if(row.tab && row.tab.parentNode) row.tab.parentNode.removeChild(row.tab);\n          self.destroyRow(row,true);\n          self.row_cache[i] = null;\n        }\n        self.rows[i] = null;\n      });\n      self.rows = [];\n      if(hard) self.row_cache = [];\n    },\n    destroyRow: function(row,hard) {\n      var holder = row.container;\n      if(hard) {\n        row.destroy();\n        if(holder.parentNode) holder.parentNode.removeChild(holder);\n        if(row.tab && row.tab.parentNode) row.tab.parentNode.removeChild(row.tab);\n      }\n      else {\n        if(row.tab) row.tab.style.display = 'none';\n        holder.style.display = 'none';\n        row.unregister();\n      }\n    },\n    getMax: function() {\n      if((Array.isArray(this.schema.items)) && this.schema.additionalItems === false) {\n        return Math.min(this.schema.items.length,this.schema.maxItems || Infinity);\n      }\n      else {\n        return this.schema.maxItems || Infinity;\n      }\n    },\n    refreshTabs: function(refresh_headers) {\n      var self = this;\n      $each(this.rows, function(i,row) {\n        if(!row.tab) return;\n  \n        if(refresh_headers) {\n          row.tab_text.textContent = row.getHeaderText();\n        }\n        else {\n          if(row.tab === self.active_tab) {\n            self.theme.markTabActive(row.tab);\n            row.container.style.display = '';\n          }\n          else {\n            self.theme.markTabInactive(row.tab);\n            row.container.style.display = 'none';\n          }\n        }\n      });\n    },\n    setValue: function(value, initial) {\n      // Update the array's value, adding/removing rows when necessary\n      value = value || [];\n      \n      if(!(Array.isArray(value))) value = [value];\n      \n      var serialized = JSON.stringify(value);\n      if(serialized === this.serialized) return;\n  \n      // Make sure value has between minItems and maxItems items in it\n      if(this.schema.minItems) {\n        while(value.length < this.schema.minItems) {\n          value.push(this.getItemInfo(value.length)[\"default\"]);\n        }\n      }\n      if(this.getMax() && value.length > this.getMax()) {\n        value = value.slice(0,this.getMax());\n      }\n  \n      var self = this;\n      $each(value,function(i,val) {\n        if(self.rows[i]) {\n          // TODO: don't set the row's value if it hasn't changed\n          self.rows[i].setValue(val,initial);\n        }\n        else if(self.row_cache[i]) {\n          self.rows[i] = self.row_cache[i];\n          self.rows[i].setValue(val,initial);\n          self.rows[i].container.style.display = '';\n          if(self.rows[i].tab) self.rows[i].tab.style.display = '';\n          self.rows[i].register();\n        }\n        else {\n          self.addRow(val,initial);\n        }\n      });\n  \n      for(var j=value.length; j<self.rows.length; j++) {\n        self.destroyRow(self.rows[j]);\n        self.rows[j] = null;\n      }\n      self.rows = self.rows.slice(0,value.length);\n  \n      // Set the active tab\n      var new_active_tab = null;\n      $each(self.rows, function(i,row) {\n        if(row.tab === self.active_tab) {\n          new_active_tab = row.tab;\n          return false;\n        }\n      });\n      if(!new_active_tab && self.rows.length) new_active_tab = self.rows[0].tab;\n  \n      self.active_tab = new_active_tab;\n  \n      self.refreshValue(initial);\n      self.refreshTabs(true);\n      self.refreshTabs();\n  \n      self.onChange();\n      \n      // TODO: sortable\n    },\n    refreshValue: function(force) {\n      var self = this;\n      var oldi = this.value? this.value.length : 0;\n      this.value = [];\n  \n      $each(this.rows,function(i,editor) {\n        // Get the value for this editor\n        self.value[i] = editor.getValue();\n      });\n      \n      if(oldi !== this.value.length || force) {\n        // If we currently have minItems items in the array\n        var minItems = this.schema.minItems && this.schema.minItems >= this.rows.length;\n        \n        $each(this.rows,function(i,editor) {\n          // Hide the move down button for the last row\n          if(editor.movedown_button) {\n            if(i === self.rows.length - 1) {\n              editor.movedown_button.style.display = 'none';\n            }\n            else {\n              editor.movedown_button.style.display = '';\n            }\n          }\n  \n          // Hide the delete button if we have minItems items\n          if(editor.delete_button) {\n            if(minItems) {\n              editor.delete_button.style.display = 'none';\n            }\n            else {\n              editor.delete_button.style.display = '';\n            }\n          }\n  \n          // Get the value for this editor\n          self.value[i] = editor.getValue();\n        });\n        \n        var controls_needed = false;\n        \n        if(!this.value.length) {\n          this.delete_last_row_button.style.display = 'none';\n          this.remove_all_rows_button.style.display = 'none';\n        }\n        else if(this.value.length === 1) {      \n          this.remove_all_rows_button.style.display = 'none';  \n  \n          // If there are minItems items in the array, or configured to hide the delete_last_row button, hide the delete button beneath the rows\n          if(minItems || this.hide_delete_last_row_buttons) {\n            this.delete_last_row_button.style.display = 'none';\n          }\n          else {\n            this.delete_last_row_button.style.display = '';\n            controls_needed = true;\n          }\n        }\n        else {\n          if(minItems || this.hide_delete_last_row_buttons) {\n            this.delete_last_row_button.style.display = 'none';\n          }\n          else {\n            this.delete_last_row_button.style.display = '';\n            controls_needed = true;\n          }\n  \n          if(minItems || this.hide_delete_all_rows_buttons) {\n            this.remove_all_rows_button.style.display = 'none';\n          }\n          else {\n            this.remove_all_rows_button.style.display = '';\n            controls_needed = true;\n          }\n        }\n  \n        // If there are maxItems in the array, hide the add button beneath the rows\n        if((this.getMax() && this.getMax() <= this.rows.length) || this.hide_add_button){\n          this.add_row_button.style.display = 'none';\n        }\n        else {\n          this.add_row_button.style.display = '';\n          controls_needed = true;\n        } \n        \n        if(!this.collapsed && controls_needed) {\n          this.controls.style.display = 'inline-block';\n        }\n        else {\n          this.controls.style.display = 'none';\n        }\n      }\n    },\n    addRow: function(value, initial) {\n      var self = this;\n      var i = this.rows.length;\n      \n      self.rows[i] = this.getElementEditor(i);\n      self.row_cache[i] = self.rows[i];\n  \n      if(self.tabs_holder) {\n        self.rows[i].tab_text = document.createElement('span');\n        self.rows[i].tab_text.textContent = self.rows[i].getHeaderText();\n        self.rows[i].tab = self.theme.getTab(self.rows[i].tab_text);\n        self.rows[i].tab.addEventListener('click', function(e) {\n          self.active_tab = self.rows[i].tab;\n          self.refreshTabs();\n          e.preventDefault();\n          e.stopPropagation();\n        });\n  \n        self.theme.addTab(self.tabs_holder, self.rows[i].tab);\n      }\n      \n      var controls_holder = self.rows[i].title_controls || self.rows[i].array_controls;\n      \n      // Buttons to delete row, move row up, and move row down\n      if(!self.hide_delete_buttons) {\n        self.rows[i].delete_button = this.getButton(self.getItemTitle(),'delete',this.translate('button_delete_row_title',[self.getItemTitle()]));\n        self.rows[i].delete_button.className += ' delete';\n        self.rows[i].delete_button.setAttribute('data-i',i);\n        self.rows[i].delete_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          var i = this.getAttribute('data-i')*1;\n  \n          var value = self.getValue();\n  \n          var newval = [];\n          var new_active_tab = null;\n          $each(value,function(j,row) {\n            if(j===i) {\n              // If the one we're deleting is the active tab\n              if(self.rows[j].tab === self.active_tab) {\n                // Make the next tab active if there is one\n                // Note: the next tab is going to be the current tab after deletion\n                if(self.rows[j+1]) new_active_tab = self.rows[j].tab;\n                // Otherwise, make the previous tab active if there is one\n                else if(j) new_active_tab = self.rows[j-1].tab;\n              }\n              \n              return; // If this is the one we're deleting\n            }\n            newval.push(row);\n          });\n          self.setValue(newval);\n          if(new_active_tab) {\n            self.active_tab = new_active_tab;\n            self.refreshTabs();\n          }\n  \n          self.onChange(true);\n        });\n        \n        if(controls_holder) {\n          controls_holder.appendChild(self.rows[i].delete_button);\n        }\n      }\n      \n      if(i && !self.hide_move_buttons) {\n        self.rows[i].moveup_button = this.getButton('','moveup',this.translate('button_move_up_title'));\n        self.rows[i].moveup_button.className += ' moveup';\n        self.rows[i].moveup_button.setAttribute('data-i',i);\n        self.rows[i].moveup_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          var i = this.getAttribute('data-i')*1;\n  \n          if(i<=0) return;\n          var rows = self.getValue();\n          var tmp = rows[i-1];\n          rows[i-1] = rows[i];\n          rows[i] = tmp;\n  \n          self.setValue(rows);\n          self.active_tab = self.rows[i-1].tab;\n          self.refreshTabs();\n  \n          self.onChange(true);\n        });\n        \n        if(controls_holder) {\n          controls_holder.appendChild(self.rows[i].moveup_button);\n        }\n      }\n      \n      if(!self.hide_move_buttons) {\n        self.rows[i].movedown_button = this.getButton('','movedown',this.translate('button_move_down_title'));\n        self.rows[i].movedown_button.className += ' movedown';\n        self.rows[i].movedown_button.setAttribute('data-i',i);\n        self.rows[i].movedown_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          var i = this.getAttribute('data-i')*1;\n  \n          var rows = self.getValue();\n          if(i>=rows.length-1) return;\n          var tmp = rows[i+1];\n          rows[i+1] = rows[i];\n          rows[i] = tmp;\n  \n          self.setValue(rows);\n          self.active_tab = self.rows[i+1].tab;\n          self.refreshTabs();\n          self.onChange(true);\n        });\n        \n        if(controls_holder) {\n          controls_holder.appendChild(self.rows[i].movedown_button);\n        }\n      }\n  \n      if(value) self.rows[i].setValue(value, initial);\n      self.refreshTabs();\n    },\n    addControls: function() {\n      var self = this;\n      \n      this.collapsed = false;\n      this.toggle_button = this.getButton('','collapse',this.translate('button_collapse'));\n      this.title_controls.appendChild(this.toggle_button);\n      var row_holder_display = self.row_holder.style.display;\n      var controls_display = self.controls.style.display;\n      this.toggle_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        if(self.collapsed) {\n          self.collapsed = false;\n          if(self.panel) self.panel.style.display = '';\n          self.row_holder.style.display = row_holder_display;\n          if(self.tabs_holder) self.tabs_holder.style.display = '';\n          self.controls.style.display = controls_display;\n          self.setButtonText(this,'','collapse',self.translate('button_collapse'));\n        }\n        else {\n          self.collapsed = true;\n          self.row_holder.style.display = 'none';\n          if(self.tabs_holder) self.tabs_holder.style.display = 'none';\n          self.controls.style.display = 'none';\n          if(self.panel) self.panel.style.display = 'none';\n          self.setButtonText(this,'','expand',self.translate('button_expand'));\n        }\n      });\n  \n      // If it should start collapsed\n      if(this.options.collapsed) {\n        $trigger(this.toggle_button,'click');\n      }\n      \n      // Collapse button disabled\n      if(this.schema.options && typeof this.schema.options.disable_collapse !== \"undefined\") {\n        if(this.schema.options.disable_collapse) this.toggle_button.style.display = 'none';\n      }\n      else if(this.jsoneditor.options.disable_collapse) {\n        this.toggle_button.style.display = 'none';\n      }\n      \n      // Add \"new row\" and \"delete last\" buttons below editor\n      this.add_row_button = this.getButton(this.getItemTitle(),'add',this.translate('button_add_row_title',[this.getItemTitle()]));\n      \n      this.add_row_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        var i = self.rows.length;\n        if(self.row_cache[i]) {\n          self.rows[i] = self.row_cache[i];\n          self.rows[i].setValue(self.rows[i].getDefault(), true);\n          self.rows[i].container.style.display = '';\n          if(self.rows[i].tab) self.rows[i].tab.style.display = '';\n          self.rows[i].register();\n        }\n        else {\n          self.addRow();\n        }\n        self.active_tab = self.rows[i].tab;\n        self.refreshTabs();\n        self.refreshValue();\n        self.onChange(true);\n      });\n      self.controls.appendChild(this.add_row_button);\n  \n      this.delete_last_row_button = this.getButton(this.translate('button_delete_last',[this.getItemTitle()]),'delete',this.translate('button_delete_last_title',[this.getItemTitle()]));\n      this.delete_last_row_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        var rows = self.getValue();\n        \n        var new_active_tab = null;\n        if(self.rows.length > 1 && self.rows[self.rows.length-1].tab === self.active_tab) new_active_tab = self.rows[self.rows.length-2].tab;\n        \n        rows.pop();\n        self.setValue(rows);\n        if(new_active_tab) {\n          self.active_tab = new_active_tab;\n          self.refreshTabs();\n        }\n        self.onChange(true);\n      });\n      self.controls.appendChild(this.delete_last_row_button);\n  \n      this.remove_all_rows_button = this.getButton(this.translate('button_delete_all'),'delete',this.translate('button_delete_all_title'));\n      this.remove_all_rows_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        self.setValue([]);\n        self.onChange(true);\n      });\n      self.controls.appendChild(this.remove_all_rows_button);\n  \n      if(self.tabs) {\n        this.add_row_button.style.width = '100%';\n        this.add_row_button.style.textAlign = 'left';\n        this.add_row_button.style.marginBottom = '3px';\n        \n        this.delete_last_row_button.style.width = '100%';\n        this.delete_last_row_button.style.textAlign = 'left';\n        this.delete_last_row_button.style.marginBottom = '3px';\n        \n        this.remove_all_rows_button.style.width = '100%';\n        this.remove_all_rows_button.style.textAlign = 'left';\n        this.remove_all_rows_button.style.marginBottom = '3px';\n      }\n    },\n    showValidationErrors: function(errors) {\n      var self = this;\n  \n      // Get all the errors that pertain to this editor\n      var my_errors = [];\n      var other_errors = [];\n      $each(errors, function(i,error) {\n        if(error.path === self.path) {\n          my_errors.push(error);\n        }\n        else {\n          other_errors.push(error);\n        }\n      });\n  \n      // Show errors for this editor\n      if(this.error_holder) {\n        if(my_errors.length) {\n          var message = [];\n          this.error_holder.innerHTML = '';\n          this.error_holder.style.display = '';\n          $each(my_errors, function(i,error) {\n            self.error_holder.appendChild(self.theme.getErrorMessage(error.message));\n          });\n        }\n        // Hide error area\n        else {\n          this.error_holder.style.display = 'none';\n        }\n      }\n  \n      // Show errors for child editors\n      $each(this.rows, function(i,row) {\n        row.showValidationErrors(other_errors);\n      });\n    }\n  });\n  \n  JSONEditor.defaults.editors.table = JSONEditor.defaults.editors.array.extend({\n    register: function() {\n      this._super();\n      if(this.rows) {\n        for(var i=0; i<this.rows.length; i++) {\n          this.rows[i].register();\n        }\n      }\n    },\n    unregister: function() {\n      this._super();\n      if(this.rows) {\n        for(var i=0; i<this.rows.length; i++) {\n          this.rows[i].unregister();\n        }\n      }\n    },\n    getNumColumns: function() {\n      return Math.max(Math.min(12,this.width),3);\n    },\n    preBuild: function() {\n      var item_schema = this.jsoneditor.expandRefs(this.schema.items || {});\n  \n      this.item_title = item_schema.title || 'row';\n      this.item_default = item_schema[\"default\"] || null;\n      this.item_has_child_editors = item_schema.properties || item_schema.items;\n      this.width = 12;\n      this._super();\n    },\n    build: function() {\n      var self = this;\n      this.table = this.theme.getTable();\n      this.container.appendChild(this.table);\n      this.thead = this.theme.getTableHead();\n      this.table.appendChild(this.thead);\n      this.header_row = this.theme.getTableRow();\n      this.thead.appendChild(this.header_row);\n      this.row_holder = this.theme.getTableBody();\n      this.table.appendChild(this.row_holder);\n  \n      // Determine the default value of array element\n      var tmp = this.getElementEditor(0,true);\n      this.item_default = tmp.getDefault();\n      this.width = tmp.getNumColumns() + 2;\n  \n      if(!this.options.compact) {\n        this.title = this.theme.getHeader(this.getTitle());\n        this.container.appendChild(this.title);\n        this.title_controls = this.theme.getHeaderButtonHolder();\n        this.title.appendChild(this.title_controls);\n        if(this.schema.description) {\n          this.description = this.theme.getDescription(this.schema.description);\n          this.container.appendChild(this.description);\n        }\n        this.panel = this.theme.getIndentedPanel();\n        this.container.appendChild(this.panel);\n        this.error_holder = document.createElement('div');\n        this.panel.appendChild(this.error_holder);\n      }\n      else {\n        this.panel = document.createElement('div');\n        this.container.appendChild(this.panel);\n      }\n  \n      this.panel.appendChild(this.table);\n      this.controls = this.theme.getButtonHolder();\n      this.panel.appendChild(this.controls);\n  \n      if(this.item_has_child_editors) {\n        var ce = tmp.getChildEditors();\n        var order = tmp.property_order || Object.keys(ce);\n        for(var i=0; i<order.length; i++) {\n          var th = self.theme.getTableHeaderCell(ce[order[i]].getTitle());\n          if(ce[order[i]].options.hidden) th.style.display = 'none';\n          self.header_row.appendChild(th);\n        }\n      }\n      else {\n        self.header_row.appendChild(self.theme.getTableHeaderCell(this.item_title));\n      }\n  \n      tmp.destroy();\n      this.row_holder.innerHTML = '';\n  \n      // Row Controls column\n      this.controls_header_cell = self.theme.getTableHeaderCell(\" \");\n      self.header_row.appendChild(this.controls_header_cell);\n  \n      // Add controls\n      this.addControls();\n    },\n    onChildEditorChange: function(editor) {\n      this.refreshValue();\n      this._super();\n    },\n    getItemDefault: function() {\n      return $extend({},{\"default\":this.item_default})[\"default\"];\n    },\n    getItemTitle: function() {\n      return this.item_title;\n    },\n    getElementEditor: function(i,ignore) {\n      var schema_copy = $extend({},this.schema.items);\n      var editor = this.jsoneditor.getEditorClass(schema_copy, this.jsoneditor);\n      var row = this.row_holder.appendChild(this.theme.getTableRow());\n      var holder = row;\n      if(!this.item_has_child_editors) {\n        holder = this.theme.getTableCell();\n        row.appendChild(holder);\n      }\n  \n      var ret = this.jsoneditor.createEditor(editor,{\n        jsoneditor: this.jsoneditor,\n        schema: schema_copy,\n        container: holder,\n        path: this.path+'.'+i,\n        parent: this,\n        compact: true,\n        table_row: true\n      });\n  \n      ret.preBuild();\n      if(!ignore) {\n        ret.build();\n        ret.postBuild();\n  \n        ret.controls_cell = row.appendChild(this.theme.getTableCell());\n        ret.row = row;\n        ret.table_controls = this.theme.getButtonHolder();\n        ret.controls_cell.appendChild(ret.table_controls);\n        ret.table_controls.style.margin = 0;\n        ret.table_controls.style.padding = 0;\n      }\n  \n      return ret;\n    },\n    destroy: function() {\n      this.innerHTML = '';\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n      if(this.row_holder && this.row_holder.parentNode) this.row_holder.parentNode.removeChild(this.row_holder);\n      if(this.table && this.table.parentNode) this.table.parentNode.removeChild(this.table);\n      if(this.panel && this.panel.parentNode) this.panel.parentNode.removeChild(this.panel);\n  \n      this.rows = this.title = this.description = this.row_holder = this.table = this.panel = null;\n  \n      this._super();\n    },\n    setValue: function(value, initial) {\n      // Update the array's value, adding/removing rows when necessary\n      value = value || [];\n  \n      // Make sure value has between minItems and maxItems items in it\n      if(this.schema.minItems) {\n        while(value.length < this.schema.minItems) {\n          value.push(this.getItemDefault());\n        }\n      }\n      if(this.schema.maxItems && value.length > this.schema.maxItems) {\n        value = value.slice(0,this.schema.maxItems);\n      }\n  \n      var serialized = JSON.stringify(value);\n      if(serialized === this.serialized) return;\n  \n      var numrows_changed = false;\n  \n      var self = this;\n      $each(value,function(i,val) {\n        if(self.rows[i]) {\n          // TODO: don't set the row's value if it hasn't changed\n          self.rows[i].setValue(val);\n        }\n        else {\n          self.addRow(val);\n          numrows_changed = true;\n        }\n      });\n  \n      for(var j=value.length; j<self.rows.length; j++) {\n        var holder = self.rows[j].container;\n        if(!self.item_has_child_editors) {\n          self.rows[j].row.parentNode.removeChild(self.rows[j].row);\n        }\n        self.rows[j].destroy();\n        if(holder.parentNode) holder.parentNode.removeChild(holder);\n        self.rows[j] = null;\n        numrows_changed = true;\n      }\n      self.rows = self.rows.slice(0,value.length);\n  \n      self.refreshValue();\n      if(numrows_changed || initial) self.refreshRowButtons();\n  \n      self.onChange();\n  \n      // TODO: sortable\n    },\n    refreshRowButtons: function() {\n      var self = this;\n  \n      // If we currently have minItems items in the array\n      var minItems = this.schema.minItems && this.schema.minItems >= this.rows.length;\n  \n      var need_row_buttons = false;\n      $each(this.rows,function(i,editor) {\n        // Hide the move down button for the last row\n        if(editor.movedown_button) {\n          if(i === self.rows.length - 1) {\n            editor.movedown_button.style.display = 'none';\n          }\n          else {\n            need_row_buttons = true;\n            editor.movedown_button.style.display = '';\n          }\n        }\n  \n        // Hide the delete button if we have minItems items\n        if(editor.delete_button) {\n          if(minItems) {\n            editor.delete_button.style.display = 'none';\n          }\n          else {\n            need_row_buttons = true;\n            editor.delete_button.style.display = '';\n          }\n        }\n  \n        if(editor.moveup_button) {\n          need_row_buttons = true;\n        }\n      });\n  \n      // Show/hide controls column in table\n      $each(this.rows,function(i,editor) {\n        if(need_row_buttons) {\n          editor.controls_cell.style.display = '';\n        }\n        else {\n          editor.controls_cell.style.display = 'none';\n        }\n      });\n      if(need_row_buttons) {\n        this.controls_header_cell.style.display = '';\n      }\n      else {\n        this.controls_header_cell.style.display = 'none';\n      }\n  \n      var controls_needed = false;\n  \n      if(!this.value.length) {\n        this.delete_last_row_button.style.display = 'none';\n        this.remove_all_rows_button.style.display = 'none';\n        this.table.style.display = 'none';\n      }\n      else if(this.value.length === 1) {\n        this.table.style.display = '';\n        this.remove_all_rows_button.style.display = 'none';\n  \n        // If there are minItems items in the array, or configured to hide the delete_last_row button, hide the delete button beneath the rows\n        if(minItems || this.hide_delete_last_row_buttons) {\n          this.delete_last_row_button.style.display = 'none';\n        }\n        else {\n          this.delete_last_row_button.style.display = '';\n          controls_needed = true;\n        }\n      }\n      else {\n        this.table.style.display = '';\n  \n        if(minItems || this.hide_delete_last_row_buttons) {\n          this.delete_last_row_button.style.display = 'none';\n        }\n        else {\n          this.delete_last_row_button.style.display = '';\n          controls_needed = true;\n        }\n  \n        if(minItems || this.hide_delete_all_rows_buttons) {\n          this.remove_all_rows_button.style.display = 'none';\n        }\n        else {\n          this.remove_all_rows_button.style.display = '';\n          controls_needed = true;\n        }\n      }\n  \n      // If there are maxItems in the array, hide the add button beneath the rows\n      if((this.schema.maxItems && this.schema.maxItems <= this.rows.length) || this.hide_add_button) {\n        this.add_row_button.style.display = 'none';\n      }\n      else {\n        this.add_row_button.style.display = '';\n        controls_needed = true;\n      }\n  \n      if(!controls_needed) {\n        this.controls.style.display = 'none';\n      }\n      else {\n        this.controls.style.display = '';\n      }\n    },\n    refreshValue: function() {\n      var self = this;\n      this.value = [];\n  \n      $each(this.rows,function(i,editor) {\n        // Get the value for this editor\n        self.value[i] = editor.getValue();\n      });\n      this.serialized = JSON.stringify(this.value);\n    },\n    addRow: function(value) {\n      var self = this;\n      var i = this.rows.length;\n  \n      self.rows[i] = this.getElementEditor(i);\n  \n      var controls_holder = self.rows[i].table_controls;\n  \n      // Buttons to delete row, move row up, and move row down\n      if(!this.hide_delete_buttons) {\n        self.rows[i].delete_button = this.getButton('','delete',this.translate('button_delete_row_title_short'));\n        self.rows[i].delete_button.className += ' delete';\n        self.rows[i].delete_button.setAttribute('data-i',i);\n        self.rows[i].delete_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          var i = this.getAttribute('data-i')*1;\n  \n          var value = self.getValue();\n  \n          var newval = [];\n          $each(value,function(j,row) {\n            if(j===i) return; // If this is the one we're deleting\n            newval.push(row);\n          });\n          self.setValue(newval);\n          self.onChange(true);\n        });\n        controls_holder.appendChild(self.rows[i].delete_button);\n      }\n  \n  \n      if(i && !this.hide_move_buttons) {\n        self.rows[i].moveup_button = this.getButton('','moveup',this.translate('button_move_up_title'));\n        self.rows[i].moveup_button.className += ' moveup';\n        self.rows[i].moveup_button.setAttribute('data-i',i);\n        self.rows[i].moveup_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          var i = this.getAttribute('data-i')*1;\n  \n          if(i<=0) return;\n          var rows = self.getValue();\n          var tmp = rows[i-1];\n          rows[i-1] = rows[i];\n          rows[i] = tmp;\n  \n          self.setValue(rows);\n          self.onChange(true);\n        });\n        controls_holder.appendChild(self.rows[i].moveup_button);\n      }\n  \n      if(!this.hide_move_buttons) {\n        self.rows[i].movedown_button = this.getButton('','movedown',this.translate('button_move_down_title'));\n        self.rows[i].movedown_button.className += ' movedown';\n        self.rows[i].movedown_button.setAttribute('data-i',i);\n        self.rows[i].movedown_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          var i = this.getAttribute('data-i')*1;\n          var rows = self.getValue();\n          if(i>=rows.length-1) return;\n          var tmp = rows[i+1];\n          rows[i+1] = rows[i];\n          rows[i] = tmp;\n  \n          self.setValue(rows);\n          self.onChange(true);\n        });\n        controls_holder.appendChild(self.rows[i].movedown_button);\n      }\n  \n      if(value) self.rows[i].setValue(value);\n    },\n    addControls: function() {\n      var self = this;\n  \n      this.collapsed = false;\n      this.toggle_button = this.getButton('','collapse',this.translate('button_collapse'));\n      if(this.title_controls) {\n        this.title_controls.appendChild(this.toggle_button);\n        this.toggle_button.addEventListener('click',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n  \n          if(self.collapsed) {\n            self.collapsed = false;\n            self.panel.style.display = '';\n            self.setButtonText(this,'','collapse',self.translate('button_collapse'));\n          }\n          else {\n            self.collapsed = true;\n            self.panel.style.display = 'none';\n            self.setButtonText(this,'','expand',self.translate('button_expand'));\n          }\n        });\n  \n        // If it should start collapsed\n        if(this.options.collapsed) {\n          $trigger(this.toggle_button,'click');\n        }\n  \n        // Collapse button disabled\n        if(this.schema.options && typeof this.schema.options.disable_collapse !== \"undefined\") {\n          if(this.schema.options.disable_collapse) this.toggle_button.style.display = 'none';\n        }\n        else if(this.jsoneditor.options.disable_collapse) {\n          this.toggle_button.style.display = 'none';\n        }\n      }\n  \n      // Add \"new row\" and \"delete last\" buttons below editor\n      this.add_row_button = this.getButton(this.getItemTitle(),'add',this.translate('button_add_row_title',[this.getItemTitle()]));\n      this.add_row_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n  \n        self.addRow();\n        self.refreshValue();\n        self.refreshRowButtons();\n        self.onChange(true);\n      });\n      self.controls.appendChild(this.add_row_button);\n  \n      this.delete_last_row_button = this.getButton(this.translate('button_delete_last',[this.getItemTitle()]),'delete',this.translate('button_delete_last_title',[this.getItemTitle()]));\n      this.delete_last_row_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n  \n        var rows = self.getValue();\n        rows.pop();\n        self.setValue(rows);\n        self.onChange(true);\n      });\n      self.controls.appendChild(this.delete_last_row_button);\n  \n      this.remove_all_rows_button = this.getButton(this.translate('button_delete_all'),'delete',this.translate('button_delete_all_title'));\n      this.remove_all_rows_button.addEventListener('click',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n  \n        self.setValue([]);\n        self.onChange(true);\n      });\n      self.controls.appendChild(this.remove_all_rows_button);\n    }\n  });\n  \n  // Multiple Editor (for when `type` is an array)\n  JSONEditor.defaults.editors.multiple = JSONEditor.AbstractEditor.extend({\n    register: function() {\n      if(this.editors) {\n        for(var i=0; i<this.editors.length; i++) {\n          if(!this.editors[i]) continue;\n          this.editors[i].unregister();\n        }\n        if(this.editors[this.type]) this.editors[this.type].register();\n      }\n      this._super();\n    },\n    unregister: function() {\n      this._super();\n      if(this.editors) {\n        for(var i=0; i<this.editors.length; i++) {\n          if(!this.editors[i]) continue;\n          this.editors[i].unregister();\n        }\n      }\n    },\n    getNumColumns: function() {\n      if(!this.editors[this.type]) return 4;\n      return Math.max(this.editors[this.type].getNumColumns(),4);\n    },\n    enable: function() {\n      if(this.editors) {\n        for(var i=0; i<this.editors.length; i++) {\n          if(!this.editors[i]) continue;\n          this.editors[i].enable();\n        }\n      }\n      this.switcher.disabled = false;\n      this._super();\n    },\n    disable: function() {\n      if(this.editors) {\n        for(var i=0; i<this.editors.length; i++) {\n          if(!this.editors[i]) continue;\n          this.editors[i].disable();\n        }\n      }\n      this.switcher.disabled = true;\n      this._super();\n    },\n    switchEditor: function(i) {\n      var self = this;\n  \n      if(!this.editors[i]) {\n        this.buildChildEditor(i);\n      }\n      \n      var current_value = self.getValue();\n  \n      self.type = i;\n  \n      self.register();\n  \n      $each(self.editors,function(type,editor) {\n        if(!editor) return;\n        if(self.type === type) {\n          if(self.keep_values) editor.setValue(current_value,true);\n          editor.container.style.display = '';\n        }\n        else editor.container.style.display = 'none';\n      });\n      self.refreshValue();\n      self.refreshHeaderText();\n    },\n    buildChildEditor: function(i) {\n      var self = this;\n      var type = this.types[i];\n      var holder = self.theme.getChildEditorHolder();\n      self.editor_holder.appendChild(holder);\n  \n      var schema;\n  \n      if(typeof type === \"string\") {\n        schema = $extend({},self.schema);\n        schema.type = type;\n      }\n      else {\n        schema = $extend({},self.schema,type);\n        schema = self.jsoneditor.expandRefs(schema);\n  \n        // If we need to merge `required` arrays\n        if(type.required && Array.isArray(type.required) && self.schema.required && Array.isArray(self.schema.required)) {\n          schema.required = self.schema.required.concat(type.required);\n        }\n      }\n  \n      var editor = self.jsoneditor.getEditorClass(schema);\n  \n      self.editors[i] = self.jsoneditor.createEditor(editor,{\n        jsoneditor: self.jsoneditor,\n        schema: schema,\n        container: holder,\n        path: self.path,\n        parent: self,\n        required: true\n      });\n      self.editors[i].preBuild();\n      self.editors[i].build();\n      self.editors[i].postBuild();\n  \n      if(self.editors[i].header) self.editors[i].header.style.display = 'none';\n  \n      self.editors[i].option = self.switcher_options[i];\n  \n      holder.addEventListener('change_header_text',function() {\n        self.refreshHeaderText();\n      });\n  \n      if(i !== self.type) holder.style.display = 'none';\n    },\n    preBuild: function() {\n      var self = this;\n  \n      this.types = [];\n      this.type = 0;\n      this.editors = [];\n      this.validators = [];\n  \n      this.keep_values = true;\n      if(typeof this.jsoneditor.options.keep_oneof_values !== \"undefined\") this.keep_values = this.jsoneditor.options.keep_oneof_values;\n      if(typeof this.options.keep_oneof_values !== \"undefined\") this.keep_values = this.options.keep_oneof_values;\n  \n      if(this.schema.oneOf) {\n        this.oneOf = true;\n        this.types = this.schema.oneOf;\n        delete this.schema.oneOf;\n      }\n      else if(this.schema.anyOf) {\n        this.anyOf = true;\n        this.types = this.schema.anyOf;\n        delete this.schema.anyOf;\n      }\n      else {\n        if(!this.schema.type || this.schema.type === \"any\") {\n          this.types = ['string','number','integer','boolean','object','array','null'];\n  \n          // If any of these primitive types are disallowed\n          if(this.schema.disallow) {\n            var disallow = this.schema.disallow;\n            if(typeof disallow !== 'object' || !(Array.isArray(disallow))) {\n              disallow = [disallow];\n            }\n            var allowed_types = [];\n            $each(this.types,function(i,type) {\n              if(disallow.indexOf(type) === -1) allowed_types.push(type);\n            });\n            this.types = allowed_types;\n          }\n        }\n        else if(Array.isArray(this.schema.type)) {\n          this.types = this.schema.type;\n        }\n        else {\n          this.types = [this.schema.type];\n        }\n        delete this.schema.type;\n      }\n  \n      this.display_text = this.getDisplayText(this.types);\n    },\n    build: function() {\n      var self = this;\n      var container = this.container;\n  \n      this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n      this.container.appendChild(this.header);\n  \n      this.switcher = this.theme.getSwitcher(this.display_text);\n      container.appendChild(this.switcher);\n      this.switcher.addEventListener('change',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n  \n        self.switchEditor(self.display_text.indexOf(this.value));\n        self.onChange(true);\n      });\n  \n      this.editor_holder = document.createElement('div');\n      container.appendChild(this.editor_holder);\n      \n        \n      var validator_options = {};\n      if(self.jsoneditor.options.custom_validators) {\n        validator_options.custom_validators = self.jsoneditor.options.custom_validators;\n      }\n  \n      this.switcher_options = this.theme.getSwitcherOptions(this.switcher);\n      $each(this.types,function(i,type) {\n        self.editors[i] = false;\n  \n        var schema;\n  \n        if(typeof type === \"string\") {\n          schema = $extend({},self.schema);\n          schema.type = type;\n        }\n        else {\n          schema = $extend({},self.schema,type);\n  \n          // If we need to merge `required` arrays\n          if(type.required && Array.isArray(type.required) && self.schema.required && Array.isArray(self.schema.required)) {\n            schema.required = self.schema.required.concat(type.required);\n          }\n        }\n  \n        self.validators[i] = new JSONEditor.Validator(self.jsoneditor,schema,validator_options);\n      });\n  \n      this.switchEditor(0);\n    },\n    onChildEditorChange: function(editor) {\n      if(this.editors[this.type]) {\n        this.refreshValue();\n        this.refreshHeaderText();\n      }\n  \n      this._super();\n    },\n    refreshHeaderText: function() {\n      var display_text = this.getDisplayText(this.types);\n      $each(this.switcher_options, function(i,option) {\n        option.textContent = display_text[i];\n      });\n    },\n    refreshValue: function() {\n      this.value = this.editors[this.type].getValue();\n    },\n    setValue: function(val,initial) {\n      // Determine type by getting the first one that validates\n      var self = this;\n      $each(this.validators, function(i,validator) {\n        if(!validator.validate(val).length) {\n          self.type = i;\n          self.switcher.value = self.display_text[i];\n          return false;\n        }\n      });\n  \n      this.switchEditor(this.type);\n  \n      this.editors[this.type].setValue(val,initial);\n  \n      this.refreshValue();\n      self.onChange();\n    },\n    destroy: function() {\n      $each(this.editors, function(type,editor) {\n        if(editor) editor.destroy();\n      });\n      if(this.editor_holder && this.editor_holder.parentNode) this.editor_holder.parentNode.removeChild(this.editor_holder);\n      if(this.switcher && this.switcher.parentNode) this.switcher.parentNode.removeChild(this.switcher);\n      this._super();\n    },\n    showValidationErrors: function(errors) {\n      var self = this;\n  \n      // oneOf and anyOf error paths need to remove the oneOf[i] part before passing to child editors\n      if(this.oneOf || this.anyOf) {\n        var check_part = this.oneOf? 'oneOf' : 'anyOf';\n        $each(this.editors,function(i,editor) {\n          if(!editor) return;\n          var check = self.path+'.'+check_part+'['+i+']';\n          var new_errors = [];\n          $each(errors, function(j,error) {\n            if(error.path.substr(0,check.length)===check) {\n              var new_error = $extend({},error);\n              new_error.path = self.path+new_error.path.substr(check.length);\n              new_errors.push(new_error);\n            }\n          });\n  \n          editor.showValidationErrors(new_errors);\n        });\n      }\n      else {\n        $each(this.editors,function(type,editor) {\n          if(!editor) return;\n          editor.showValidationErrors(errors);\n        });\n      }\n    }\n  });\n  \n  // Enum Editor (used for objects and arrays with enumerated values)\n  JSONEditor.defaults.editors[\"enum\"] = JSONEditor.AbstractEditor.extend({\n    getNumColumns: function() {\n      return 4;\n    },\n    build: function() {\n      var container = this.container;\n      this.title = this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n      this.container.appendChild(this.title);\n  \n      this.options.enum_titles = this.options.enum_titles || [];\n  \n      this[\"enum\"] = this.schema[\"enum\"];\n      this.selected = 0;\n      this.select_options = [];\n      this.html_values = [];\n  \n      var self = this;\n      for(var i=0; i<this[\"enum\"].length; i++) {\n        this.select_options[i] = this.options.enum_titles[i] || \"Value \"+(i+1);\n        this.html_values[i] = this.getHTML(this[\"enum\"][i]);\n      }\n  \n      // Switcher\n      this.switcher = this.theme.getSwitcher(this.select_options);\n      this.container.appendChild(this.switcher);\n  \n      // Display area\n      this.display_area = this.theme.getIndentedPanel();\n      this.container.appendChild(this.display_area);\n  \n      if(this.options.hide_display) this.display_area.style.display = \"none\";\n  \n      this.switcher.addEventListener('change',function() {\n        self.selected = self.select_options.indexOf(this.value);\n        self.value = self[\"enum\"][self.selected];\n        self.refreshValue();\n        self.onChange(true);\n      });\n      this.value = this[\"enum\"][0];\n      this.refreshValue();\n  \n      if(this[\"enum\"].length === 1) this.switcher.style.display = 'none';\n    },\n    refreshValue: function() {\n      var self = this;\n      self.selected = -1;\n      var stringified = JSON.stringify(this.value);\n      $each(this[\"enum\"], function(i, el) {\n        if(stringified === JSON.stringify(el)) {\n          self.selected = i;\n          return false;\n        }\n      });\n  \n      if(self.selected<0) {\n        self.setValue(self[\"enum\"][0]);\n        return;\n      }\n  \n      this.switcher.value = this.select_options[this.selected];\n      this.display_area.innerHTML = this.html_values[this.selected];\n    },\n    enable: function() {\n      if(!this.always_disabled) this.switcher.disabled = false;\n      this._super();\n    },\n    disable: function() {\n      this.switcher.disabled = true;\n      this._super();\n    },\n    getHTML: function(el) {\n      var self = this;\n  \n      if(el === null) {\n        return '<em>null</em>';\n      }\n      // Array or Object\n      else if(typeof el === \"object\") {\n        // TODO: use theme\n        var ret = '';\n  \n        $each(el,function(i,child) {\n          var html = self.getHTML(child);\n  \n          // Add the keys to object children\n          if(!(Array.isArray(el))) {\n            // TODO: use theme\n            html = '<div><em>'+i+'</em>: '+html+'</div>';\n          }\n  \n          // TODO: use theme\n          ret += '<li>'+html+'</li>';\n        });\n  \n        if(Array.isArray(el)) ret = '<ol>'+ret+'</ol>';\n        else ret = \"<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>\"+ret+'</ul>';\n  \n        return ret;\n      }\n      // Boolean\n      else if(typeof el === \"boolean\") {\n        return el? 'true' : 'false';\n      }\n      // String\n      else if(typeof el === \"string\") {\n        return el.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');\n      }\n      // Number\n      else {\n        return el;\n      }\n    },\n    setValue: function(val) {\n      if(this.value !== val) {\n        this.value = val;\n        this.refreshValue();\n        this.onChange();\n      }\n    },\n    destroy: function() {\n      if(this.display_area && this.display_area.parentNode) this.display_area.parentNode.removeChild(this.display_area);\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.switcher && this.switcher.parentNode) this.switcher.parentNode.removeChild(this.switcher);\n  \n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.select = JSONEditor.AbstractEditor.extend({\n    setValue: function(value,initial) {\n      value = this.typecast(value||'');\n  \n      // Sanitize value before setting it\n      var sanitized = value;\n      if(this.enum_values.indexOf(sanitized) < 0) {\n        sanitized = this.enum_values[0];\n      }\n  \n      if(this.value === sanitized) {\n        return;\n      }\n  \n      this.input.value = this.enum_options[this.enum_values.indexOf(sanitized)];\n      if(this.select2) this.select2.select2('val',this.input.value);\n      this.value = sanitized;\n      this.onChange();\n    },\n    register: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.setAttribute('name',this.formname);\n    },\n    unregister: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.removeAttribute('name');\n    },\n    getNumColumns: function() {\n      if(!this.enum_options) return 3;\n      var longest_text = this.getTitle().length;\n      for(var i=0; i<this.enum_options.length; i++) {\n        longest_text = Math.max(longest_text,this.enum_options[i].length+4);\n      }\n      return Math.min(12,Math.max(longest_text/7,2));\n    },\n    typecast: function(value) {\n      if(this.schema.type === \"boolean\") {\n        return !!value;\n      }\n      else if(this.schema.type === \"number\") {\n        return 1*value;\n      }\n      else if(this.schema.type === \"integer\") {\n        return Math.floor(value*1);\n      }\n      else {\n        return \"\"+value;\n      }\n    },\n    getValue: function() {\n      return this.value;\n    },\n    preBuild: function() {\n      var self = this;\n      this.input_type = 'select';\n      this.enum_options = [];\n      this.enum_values = [];\n      this.enum_display = [];\n      var i;\n  \n      // Enum options enumerated\n      if(this.schema[\"enum\"]) {\n        var display = this.schema.options && this.schema.options.enum_titles || [];\n        \n        $each(this.schema[\"enum\"],function(i,option) {\n          self.enum_options[i] = \"\"+option;\n          self.enum_display[i] = \"\"+(display[i] || option);\n          self.enum_values[i] = self.typecast(option);\n        });\n  \n        if(!this.isRequired()){\n          self.enum_display.unshift(' ');\n          self.enum_options.unshift('undefined');\n          self.enum_values.unshift(undefined);\n        }\n              \n      }\n      // Boolean\n      else if(this.schema.type === \"boolean\") {\n        self.enum_display = this.schema.options && this.schema.options.enum_titles || ['true','false'];\n        self.enum_options = ['1',''];\n        self.enum_values = [true,false];\n        \n        if(!this.isRequired()){\n          self.enum_display.unshift(' ');\n          self.enum_options.unshift('undefined');\n          self.enum_values.unshift(undefined);\n        }\n      \n      }\n      // Dynamic Enum\n      else if(this.schema.enumSource) {\n        this.enumSource = [];\n        this.enum_display = [];\n        this.enum_options = [];\n        this.enum_values = [];\n        \n        // Shortcut declaration for using a single array\n        if(!(Array.isArray(this.schema.enumSource))) {\n          if(this.schema.enumValue) {\n            this.enumSource = [\n              {\n                source: this.schema.enumSource,\n                value: this.schema.enumValue\n              }\n            ];\n          }\n          else {\n            this.enumSource = [\n              {\n                source: this.schema.enumSource\n              }\n            ];\n          }\n        }\n        else {\n          for(i=0; i<this.schema.enumSource.length; i++) {\n            // Shorthand for watched variable\n            if(typeof this.schema.enumSource[i] === \"string\") {\n              this.enumSource[i] = {\n                source: this.schema.enumSource[i]\n              };\n            }\n            // Make a copy of the schema\n            else if(!(Array.isArray(this.schema.enumSource[i]))) {\n              this.enumSource[i] = $extend({},this.schema.enumSource[i]);\n            }\n            else {\n              this.enumSource[i] = this.schema.enumSource[i];\n            }\n          }\n        }\n        \n        // Now, enumSource is an array of sources\n        // Walk through this array and fix up the values\n        for(i=0; i<this.enumSource.length; i++) {\n          if(this.enumSource[i].value) {\n            this.enumSource[i].value = this.jsoneditor.compileTemplate(this.enumSource[i].value, this.template_engine);\n          }\n          if(this.enumSource[i].title) {\n            this.enumSource[i].title = this.jsoneditor.compileTemplate(this.enumSource[i].title, this.template_engine);\n          }\n          if(this.enumSource[i].filter) {\n            this.enumSource[i].filter = this.jsoneditor.compileTemplate(this.enumSource[i].filter, this.template_engine);\n          }\n        }\n      }\n      // Other, not supported\n      else {\n        throw \"'select' editor requires the enum property to be set.\";\n      }\n    },\n    build: function() {\n      var self = this;\n      if(!this.options.compact) this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n      if(this.schema.description) this.description = this.theme.getFormInputDescription(this.schema.description);\n  \n      if(this.options.compact) this.container.className += ' compact';\n  \n      this.input = this.theme.getSelectInput(this.enum_options);\n      this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display);\n  \n      if(this.schema.readOnly || this.schema.readonly) {\n        this.always_disabled = true;\n        this.input.disabled = true;\n      }\n  \n      this.input.addEventListener('change',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        self.onInputChange();\n      });\n  \n      this.control = this.theme.getFormControl(this.label, this.input, this.description);\n      this.container.appendChild(this.control);\n  \n      this.value = this.enum_values[0];\n    },\n    onInputChange: function() {\n      var val = this.input.value;\n  \n      var new_val;\n      // Invalid option, use first option instead\n      if(this.enum_options.indexOf(val) === -1) {\n        new_val = this.enum_values[0];\n      }\n      else {\n        new_val = this.enum_values[this.enum_options.indexOf(val)];\n      }\n  \n      // If valid hasn't changed\n      if(new_val === this.value) return;\n  \n      // Store new value and propogate change event\n      this.value = new_val;\n      this.onChange(true);\n    },\n    setupSelect2: function() {\n      // If the Select2 library is loaded use it when we have lots of items\n      if(window.jQuery && window.jQuery.fn && window.jQuery.fn.select2 && (this.enum_options.length > 2 || (this.enum_options.length && this.enumSource))) {\n        var options = $extend({},JSONEditor.plugins.select2);\n        if(this.schema.options && this.schema.options.select2_options) options = $extend(options,this.schema.options.select2_options);\n        this.select2 = window.jQuery(this.input).select2(options);\n        var self = this;\n        this.select2.on('select2-blur',function() {\n          self.input.value = self.select2.select2('val');\n          self.onInputChange();\n        });\n        this.select2.on('change',function() {\n          self.input.value = self.select2.select2('val');\n          self.onInputChange();\n        });\n      }\n      else {\n        this.select2 = null;\n      }\n    },\n    postBuild: function() {\n      this._super();\n      this.theme.afterInputReady(this.input);\n      this.setupSelect2();\n    },\n    onWatchedFieldChange: function() {\n      var self = this, vars, j;\n      \n      // If this editor uses a dynamic select box\n      if(this.enumSource) {\n        vars = this.getWatchedFieldValues();\n        var select_options = [];\n        var select_titles = [];\n        \n        for(var i=0; i<this.enumSource.length; i++) {\n          // Constant values\n          if(Array.isArray(this.enumSource[i])) {\n            select_options = select_options.concat(this.enumSource[i]);\n            select_titles = select_titles.concat(this.enumSource[i]);\n          }\n          else {\n            var items = [];\n            // Static list of items\n            if(Array.isArray(this.enumSource[i].source)) {\n              items = this.enumSource[i].source;\n            // A watched field\n            } else {\n              items = vars[this.enumSource[i].source];\n            }\n            \n            if(items) {\n              // Only use a predefined part of the array\n              if(this.enumSource[i].slice) {\n                items = Array.prototype.slice.apply(items,this.enumSource[i].slice);\n              }\n              // Filter the items\n              if(this.enumSource[i].filter) {\n                var new_items = [];\n                for(j=0; j<items.length; j++) {\n                  if(this.enumSource[i].filter({i:j,item:items[j],watched:vars})) new_items.push(items[j]);\n                }\n                items = new_items;\n              }\n              \n              var item_titles = [];\n              var item_values = [];\n              for(j=0; j<items.length; j++) {\n                var item = items[j];\n                \n                // Rendered value\n                if(this.enumSource[i].value) {\n                  item_values[j] = this.enumSource[i].value({\n                    i: j,\n                    item: item\n                  });\n                }\n                // Use value directly\n                else {\n                  item_values[j] = items[j];\n                }\n                \n                // Rendered title\n                if(this.enumSource[i].title) {\n                  item_titles[j] = this.enumSource[i].title({\n                    i: j,\n                    item: item\n                  });\n                }\n                // Use value as the title also\n                else {\n                  item_titles[j] = item_values[j];\n                }\n              }\n              \n              // TODO: sort\n              \n              select_options = select_options.concat(item_values);\n              select_titles = select_titles.concat(item_titles);\n            }\n          }\n        }\n        \n        var prev_value = this.value;\n        \n        this.theme.setSelectOptions(this.input, select_options, select_titles);\n        this.enum_options = select_options;\n        this.enum_display = select_titles;\n        this.enum_values = select_options;\n        \n        if(this.select2) {\n          this.select2.select2('destroy');\n        }\n        \n        // If the previous value is still in the new select options, stick with it\n        if(select_options.indexOf(prev_value) !== -1) {\n          this.input.value = prev_value;\n          this.value = prev_value;\n        }\n        // Otherwise, set the value to the first select option\n        else {\n          this.input.value = select_options[0];\n          this.value = select_options[0] || \"\";  \n          if(this.parent) this.parent.onChildEditorChange(this);\n          else this.jsoneditor.onChange();\n          this.jsoneditor.notifyWatchers(this.path);\n        }\n        \n        this.setupSelect2();\n      }\n  \n      this._super();\n    },\n    enable: function() {\n      if(!this.always_disabled) {\n        this.input.disabled = false;\n        if(this.select2) this.select2.select2(\"enable\",true);\n      }\n      this._super();\n    },\n    disable: function() {\n      this.input.disabled = true;\n      if(this.select2) this.select2.select2(\"enable\",false);\n      this._super();\n    },\n    destroy: function() {\n      if(this.label && this.label.parentNode) this.label.parentNode.removeChild(this.label);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n      if(this.select2) {\n        this.select2.select2('destroy');\n        this.select2 = null;\n      }\n  \n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.selectize = JSONEditor.AbstractEditor.extend({\n    setValue: function(value,initial) {\n      value = this.typecast(value||'');\n  \n      // Sanitize value before setting it\n      var sanitized = value;\n      if(this.enum_values.indexOf(sanitized) < 0) {\n        sanitized = this.enum_values[0];\n      }\n  \n      if(this.value === sanitized) {\n        return;\n      }\n  \n      this.input.value = this.enum_options[this.enum_values.indexOf(sanitized)];\n  \n      if(this.selectize) {\n        this.selectize[0].selectize.addItem(sanitized);\n      }\n  \n      this.value = sanitized;\n      this.onChange();\n    },\n    register: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.setAttribute('name',this.formname);\n    },\n    unregister: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.removeAttribute('name');\n    },\n    getNumColumns: function() {\n      if(!this.enum_options) return 3;\n      var longest_text = this.getTitle().length;\n      for(var i=0; i<this.enum_options.length; i++) {\n        longest_text = Math.max(longest_text,this.enum_options[i].length+4);\n      }\n      return Math.min(12,Math.max(longest_text/7,2));\n    },\n    typecast: function(value) {\n      if(this.schema.type === \"boolean\") {\n        return !!value;\n      }\n      else if(this.schema.type === \"number\") {\n        return 1*value;\n      }\n      else if(this.schema.type === \"integer\") {\n        return Math.floor(value*1);\n      }\n      else {\n        return \"\"+value;\n      }\n    },\n    getValue: function() {\n      return this.value;\n    },\n    preBuild: function() {\n      var self = this;\n      this.input_type = 'select';\n      this.enum_options = [];\n      this.enum_values = [];\n      this.enum_display = [];\n      var i;\n  \n      // Enum options enumerated\n      if(this.schema.enum) {\n        var display = this.schema.options && this.schema.options.enum_titles || [];\n  \n        $each(this.schema.enum,function(i,option) {\n          self.enum_options[i] = \"\"+option;\n          self.enum_display[i] = \"\"+(display[i] || option);\n          self.enum_values[i] = self.typecast(option);\n        });\n      }\n      // Boolean\n      else if(this.schema.type === \"boolean\") {\n        self.enum_display = this.schema.options && this.schema.options.enum_titles || ['true','false'];\n        self.enum_options = ['1','0'];\n        self.enum_values = [true,false];\n      }\n      // Dynamic Enum\n      else if(this.schema.enumSource) {\n        this.enumSource = [];\n        this.enum_display = [];\n        this.enum_options = [];\n        this.enum_values = [];\n  \n        // Shortcut declaration for using a single array\n        if(!(Array.isArray(this.schema.enumSource))) {\n          if(this.schema.enumValue) {\n            this.enumSource = [\n              {\n                source: this.schema.enumSource,\n                value: this.schema.enumValue\n              }\n            ];\n          }\n          else {\n            this.enumSource = [\n              {\n                source: this.schema.enumSource\n              }\n            ];\n          }\n        }\n        else {\n          for(i=0; i<this.schema.enumSource.length; i++) {\n            // Shorthand for watched variable\n            if(typeof this.schema.enumSource[i] === \"string\") {\n              this.enumSource[i] = {\n                source: this.schema.enumSource[i]\n              };\n            }\n            // Make a copy of the schema\n            else if(!(Array.isArray(this.schema.enumSource[i]))) {\n              this.enumSource[i] = $extend({},this.schema.enumSource[i]);\n            }\n            else {\n              this.enumSource[i] = this.schema.enumSource[i];\n            }\n          }\n        }\n  \n        // Now, enumSource is an array of sources\n        // Walk through this array and fix up the values\n        for(i=0; i<this.enumSource.length; i++) {\n          if(this.enumSource[i].value) {\n            this.enumSource[i].value = this.jsoneditor.compileTemplate(this.enumSource[i].value, this.template_engine);\n          }\n          if(this.enumSource[i].title) {\n            this.enumSource[i].title = this.jsoneditor.compileTemplate(this.enumSource[i].title, this.template_engine);\n          }\n          if(this.enumSource[i].filter) {\n            this.enumSource[i].filter = this.jsoneditor.compileTemplate(this.enumSource[i].filter, this.template_engine);\n          }\n        }\n      }\n      // Other, not supported\n      else {\n        throw \"'select' editor requires the enum property to be set.\";\n      }\n    },\n    build: function() {\n      var self = this;\n      if(!this.options.compact) this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n      if(this.schema.description) this.description = this.theme.getFormInputDescription(this.schema.description);\n  \n      if(this.options.compact) this.container.className += ' compact';\n  \n      this.input = this.theme.getSelectInput(this.enum_options);\n      this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display);\n  \n      if(this.schema.readOnly || this.schema.readonly) {\n        this.always_disabled = true;\n        this.input.disabled = true;\n      }\n  \n      this.input.addEventListener('change',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        self.onInputChange();\n      });\n  \n      this.control = this.theme.getFormControl(this.label, this.input, this.description);\n      this.container.appendChild(this.control);\n  \n      this.value = this.enum_values[0];\n    },\n    onInputChange: function() {\n      var val = this.input.value;\n  \n      var sanitized = val;\n      if(this.enum_options.indexOf(val) === -1) {\n        sanitized = this.enum_options[0];\n      }\n  \n      this.value = this.enum_values[this.enum_options.indexOf(val)];\n      this.onChange(true);\n    },\n    setupSelectize: function() {\n      // If the Selectize library is loaded use it when we have lots of items\n      var self = this;\n      if(window.jQuery && window.jQuery.fn && window.jQuery.fn.selectize && (this.enum_options.length >= 2 || (this.enum_options.length && this.enumSource))) {\n        var options = $extend({},JSONEditor.plugins.selectize);\n        if(this.schema.options && this.schema.options.selectize_options) options = $extend(options,this.schema.options.selectize_options);\n        this.selectize = window.jQuery(this.input).selectize($extend(options,\n        {\n          create: true,\n          onChange : function() {\n            self.onInputChange();\n          }\n        }));\n      }\n      else {\n        this.selectize = null;\n      }\n    },\n    postBuild: function() {\n      this._super();\n      this.theme.afterInputReady(this.input);\n      this.setupSelectize();\n    },\n    onWatchedFieldChange: function() {\n      var self = this, vars, j;\n  \n      // If this editor uses a dynamic select box\n      if(this.enumSource) {\n        vars = this.getWatchedFieldValues();\n        var select_options = [];\n        var select_titles = [];\n  \n        for(var i=0; i<this.enumSource.length; i++) {\n          // Constant values\n          if(Array.isArray(this.enumSource[i])) {\n            select_options = select_options.concat(this.enumSource[i]);\n            select_titles = select_titles.concat(this.enumSource[i]);\n          }\n          // A watched field\n          else if(vars[this.enumSource[i].source]) {\n            var items = vars[this.enumSource[i].source];\n  \n            // Only use a predefined part of the array\n            if(this.enumSource[i].slice) {\n              items = Array.prototype.slice.apply(items,this.enumSource[i].slice);\n            }\n            // Filter the items\n            if(this.enumSource[i].filter) {\n              var new_items = [];\n              for(j=0; j<items.length; j++) {\n                if(this.enumSource[i].filter({i:j,item:items[j]})) new_items.push(items[j]);\n              }\n              items = new_items;\n            }\n  \n            var item_titles = [];\n            var item_values = [];\n            for(j=0; j<items.length; j++) {\n              var item = items[j];\n  \n              // Rendered value\n              if(this.enumSource[i].value) {\n                item_values[j] = this.enumSource[i].value({\n                  i: j,\n                  item: item\n                });\n              }\n              // Use value directly\n              else {\n                item_values[j] = items[j];\n              }\n  \n              // Rendered title\n              if(this.enumSource[i].title) {\n                item_titles[j] = this.enumSource[i].title({\n                  i: j,\n                  item: item\n                });\n              }\n              // Use value as the title also\n              else {\n                item_titles[j] = item_values[j];\n              }\n            }\n  \n            // TODO: sort\n  \n            select_options = select_options.concat(item_values);\n            select_titles = select_titles.concat(item_titles);\n          }\n        }\n  \n        var prev_value = this.value;\n  \n        this.theme.setSelectOptions(this.input, select_options, select_titles);\n        this.enum_options = select_options;\n        this.enum_display = select_titles;\n        this.enum_values = select_options;\n  \n        // If the previous value is still in the new select options, stick with it\n        if(select_options.indexOf(prev_value) !== -1) {\n          this.input.value = prev_value;\n          this.value = prev_value;\n        }\n  \n        // Otherwise, set the value to the first select option\n        else {\n          this.input.value = select_options[0];\n          this.value = select_options[0] || \"\";\n          if(this.parent) this.parent.onChildEditorChange(this);\n          else this.jsoneditor.onChange();\n          this.jsoneditor.notifyWatchers(this.path);\n        }\n  \n        if(this.selectize) {\n          // Update the Selectize options\n          this.updateSelectizeOptions(select_options);\n        }\n        else {\n          this.setupSelectize();\n        }\n  \n        this._super();\n      }\n    },\n    updateSelectizeOptions: function(select_options) {\n      var selectized = this.selectize[0].selectize,\n          self = this;\n  \n      selectized.off();\n      selectized.clearOptions();\n      for(var n in select_options) {\n        selectized.addOption({value:select_options[n],text:select_options[n]});\n      }\n      selectized.addItem(this.value);\n      selectized.on('change',function() {\n        self.onInputChange();\n      });\n    },\n    enable: function() {\n      if(!this.always_disabled) {\n        this.input.disabled = false;\n        if(this.selectize) {\n          this.selectize[0].selectize.unlock();\n        }\n      }\n      this._super();\n    },\n    disable: function() {\n      this.input.disabled = true;\n      if(this.selectize) {\n        this.selectize[0].selectize.lock();\n      }\n      this._super();\n    },\n    destroy: function() {\n      if(this.label && this.label.parentNode) this.label.parentNode.removeChild(this.label);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n      if(this.selectize) {\n        this.selectize[0].selectize.destroy();\n        this.selectize = null;\n      }\n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.multiselect = JSONEditor.AbstractEditor.extend({\n    preBuild: function() {\n      this._super();\n      var i;\n  \n      this.select_options = {};\n      this.select_values = {};\n  \n      var items_schema = this.jsoneditor.expandRefs(this.schema.items || {});\n  \n      var e = items_schema[\"enum\"] || [];\n      var t = items_schema.options? items_schema.options.enum_titles || [] : [];\n      this.option_keys = [];\n      this.option_titles = [];\n      for(i=0; i<e.length; i++) {\n        // If the sanitized value is different from the enum value, don't include it\n        if(this.sanitize(e[i]) !== e[i]) continue;\n  \n        this.option_keys.push(e[i]+\"\");\n        this.option_titles.push((t[i]||e[i])+\"\");\n        this.select_values[e[i]+\"\"] = e[i];\n      }\n    },\n    build: function() {\n      var self = this, i;\n      if(!this.options.compact) this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n      if(this.schema.description) this.description = this.theme.getFormInputDescription(this.schema.description);\n  \n      if((!this.schema.format && this.option_keys.length < 8) || this.schema.format === \"checkbox\") {\n        this.input_type = 'checkboxes';\n  \n        this.inputs = {};\n        this.controls = {};\n        for(i=0; i<this.option_keys.length; i++) {\n          this.inputs[this.option_keys[i]] = this.theme.getCheckbox();\n          this.select_options[this.option_keys[i]] = this.inputs[this.option_keys[i]];\n          var label = this.theme.getCheckboxLabel(this.option_titles[i]);\n          this.controls[this.option_keys[i]] = this.theme.getFormControl(label, this.inputs[this.option_keys[i]]);\n        }\n  \n        this.control = this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description);\n      }\n      else {\n        this.input_type = 'select';\n        this.input = this.theme.getSelectInput(this.option_keys);\n        this.theme.setSelectOptions(this.input,this.option_keys,this.option_titles);\n        this.input.multiple = true;\n        this.input.size = Math.min(10,this.option_keys.length);\n  \n        for(i=0; i<this.option_keys.length; i++) {\n          this.select_options[this.option_keys[i]] = this.input.children[i];\n        }\n  \n        if(this.schema.readOnly || this.schema.readonly) {\n          this.always_disabled = true;\n          this.input.disabled = true;\n        }\n  \n        this.control = this.theme.getFormControl(this.label, this.input, this.description);\n      }\n  \n      this.container.appendChild(this.control);\n      this.control.addEventListener('change',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n  \n        var new_value = [];\n        for(i = 0; i<self.option_keys.length; i++) {\n          if(self.select_options[self.option_keys[i]].selected || self.select_options[self.option_keys[i]].checked) new_value.push(self.select_values[self.option_keys[i]]);\n        }\n  \n        self.updateValue(new_value);\n        self.onChange(true);\n      });\n    },\n    setValue: function(value, initial) {\n      var i;\n      value = value || [];\n      if(typeof value !== \"object\") value = [value];\n      else if(!(Array.isArray(value))) value = [];\n  \n      // Make sure we are dealing with an array of strings so we can check for strict equality\n      for(i=0; i<value.length; i++) {\n        if(typeof value[i] !== \"string\") value[i] += \"\";\n      }\n  \n      // Update selected status of options\n      for(i in this.select_options) {\n        if(!this.select_options.hasOwnProperty(i)) continue;\n  \n        this.select_options[i][this.input_type === \"select\"? \"selected\" : \"checked\"] = (value.indexOf(i) !== -1);\n      }\n  \n      this.updateValue(value);\n      this.onChange();\n    },\n    setupSelect2: function() {\n      if(window.jQuery && window.jQuery.fn && window.jQuery.fn.select2) {\n          var options = window.jQuery.extend({},JSONEditor.plugins.select2);\n          if(this.schema.options && this.schema.options.select2_options) options = $extend(options,this.schema.options.select2_options);\n          this.select2 = window.jQuery(this.input).select2(options);\n          var self = this;\n          this.select2.on('select2-blur',function() {\n              var val =self.select2.select2('val');\n              self.value = val;\n              self.onChange(true);\n          });\n      }\n      else {\n          this.select2 = null;\n      }\n    },\n    onInputChange: function() {\n        this.value = this.input.value;\n        this.onChange(true);\n    },\n    postBuild: function() {\n        this._super();\n        this.setupSelect2();\n    },\n    register: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.setAttribute('name',this.formname);\n    },\n    unregister: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.removeAttribute('name');\n    },\n    getNumColumns: function() {\n      var longest_text = this.getTitle().length;\n      for(var i in this.select_values) {\n        if(!this.select_values.hasOwnProperty(i)) continue;\n        longest_text = Math.max(longest_text,(this.select_values[i]+\"\").length+4);\n      }\n  \n      return Math.min(12,Math.max(longest_text/7,2));\n    },\n    updateValue: function(value) {\n      var changed = false;\n      var new_value = [];\n      for(var i=0; i<value.length; i++) {\n        if(!this.select_options[value[i]+\"\"]) {\n          changed = true;\n          continue;\n        }\n        var sanitized = this.sanitize(this.select_values[value[i]]);\n        new_value.push(sanitized);\n        if(sanitized !== value[i]) changed = true;\n      }\n      this.value = new_value;\n      if(this.select2) this.select2.select2('val',this.value);\n      return changed;\n    },\n    sanitize: function(value) {\n      if(this.schema.items.type === \"number\") {\n        return 1*value;\n      }\n      else if(this.schema.items.type === \"integer\") {\n        return Math.floor(value*1);\n      }\n      else {\n        return \"\"+value;\n      }\n    },\n    enable: function() {\n      if(!this.always_disabled) {\n        if(this.input) {\n          this.input.disabled = false;\n        }\n        else if(this.inputs) {\n          for(var i in this.inputs) {\n            if(!this.inputs.hasOwnProperty(i)) continue;\n            this.inputs[i].disabled = false;\n          }\n        }\n        if(this.select2) this.select2.select2(\"enable\",true);\n      }\n      this._super();\n    },\n    disable: function() {\n      if(this.input) {\n        this.input.disabled = true;\n      }\n      else if(this.inputs) {\n        for(var i in this.inputs) {\n          if(!this.inputs.hasOwnProperty(i)) continue;\n          this.inputs[i].disabled = true;\n        }\n      }\n      if(this.select2) this.select2.select2(\"enable\",false);\n      this._super();\n    },\n    destroy: function() {\n      if(this.select2) {\n          this.select2.select2('destroy');\n          this.select2 = null;\n      }\n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.base64 = JSONEditor.AbstractEditor.extend({\n    getNumColumns: function() {\n      return 4;\n    },\n    build: function() {    \n      var self = this;\n      this.title = this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n  \n      // Input that holds the base64 string\n      this.input = this.theme.getFormInputField('hidden');\n      this.container.appendChild(this.input);\n      \n      // Don't show uploader if this is readonly\n      if(!this.schema.readOnly && !this.schema.readonly) {\n        if(!window.FileReader) throw \"FileReader required for base64 editor\";\n        \n        // File uploader\n        this.uploader = this.theme.getFormInputField('file');\n        \n        this.uploader.addEventListener('change',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          \n          if(this.files && this.files.length) {\n            var fr = new FileReader();\n            fr.onload = function(evt) {\n              self.value = evt.target.result;\n              self.refreshPreview();\n              self.onChange(true);\n              fr = null;\n            };\n            fr.readAsDataURL(this.files[0]);\n          }\n        });\n      }\n  \n      this.preview = this.theme.getFormInputDescription(this.schema.description);\n      this.container.appendChild(this.preview);\n  \n      this.control = this.theme.getFormControl(this.label, this.uploader||this.input, this.preview);\n      this.container.appendChild(this.control);\n    },\n    refreshPreview: function() {\n      if(this.last_preview === this.value) return;\n      this.last_preview = this.value;\n      \n      this.preview.innerHTML = '';\n      \n      if(!this.value) return;\n      \n      var mime = this.value.match(/^data:([^;,]+)[;,]/);\n      if(mime) mime = mime[1];\n      \n      if(!mime) {\n        this.preview.innerHTML = '<em>Invalid data URI</em>';\n      }\n      else {\n        this.preview.innerHTML = '<strong>Type:</strong> '+mime+', <strong>Size:</strong> '+Math.floor((this.value.length-this.value.split(',')[0].length-1)/1.33333)+' bytes';\n        if(mime.substr(0,5)===\"image\") {\n          this.preview.innerHTML += '<br>';\n          var img = document.createElement('img');\n          img.style.maxWidth = '100%';\n          img.style.maxHeight = '100px';\n          img.src = this.value;\n          this.preview.appendChild(img);\n        }\n      }\n    },\n    enable: function() {\n      if(this.uploader) this.uploader.disabled = false;\n      this._super();\n    },\n    disable: function() {\n      if(this.uploader) this.uploader.disabled = true;\n      this._super();\n    },\n    setValue: function(val) {\n      if(this.value !== val) {\n        this.value = val;\n        this.input.value = this.value;\n        this.refreshPreview();\n        this.onChange();\n      }\n    },\n    destroy: function() {\n      if(this.preview && this.preview.parentNode) this.preview.parentNode.removeChild(this.preview);\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n      if(this.uploader && this.uploader.parentNode) this.uploader.parentNode.removeChild(this.uploader);\n  \n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.upload = JSONEditor.AbstractEditor.extend({\n    getNumColumns: function() {\n      return 4;\n    },\n    build: function() {    \n      var self = this;\n      this.title = this.header = this.label = this.theme.getFormInputLabel(this.getTitle());\n  \n      // Input that holds the base64 string\n      this.input = this.theme.getFormInputField('hidden');\n      this.container.appendChild(this.input);\n      \n      // Don't show uploader if this is readonly\n      if(!this.schema.readOnly && !this.schema.readonly) {\n  \n        if(!this.jsoneditor.options.upload) throw \"Upload handler required for upload editor\";\n  \n        // File uploader\n        this.uploader = this.theme.getFormInputField('file');\n        \n        this.uploader.addEventListener('change',function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          \n          if(this.files && this.files.length) {\n            var fr = new FileReader();\n            fr.onload = function(evt) {\n              self.preview_value = evt.target.result;\n              self.refreshPreview();\n              self.onChange(true);\n              fr = null;\n            };\n            fr.readAsDataURL(this.files[0]);\n          }\n        });\n      }\n  \n      var description = this.schema.description;\n      if (!description) description = '';\n  \n      this.preview = this.theme.getFormInputDescription(description);\n      this.container.appendChild(this.preview);\n  \n      this.control = this.theme.getFormControl(this.label, this.uploader||this.input, this.preview);\n      this.container.appendChild(this.control);\n    },\n    refreshPreview: function() {\n      if(this.last_preview === this.preview_value) return;\n      this.last_preview = this.preview_value;\n  \n      this.preview.innerHTML = '';\n      \n      if(!this.preview_value) return;\n  \n      var self = this;\n  \n      var mime = this.preview_value.match(/^data:([^;,]+)[;,]/);\n      if(mime) mime = mime[1];\n      if(!mime) mime = 'unknown';\n  \n      var file = this.uploader.files[0];\n  \n      this.preview.innerHTML = '<strong>Type:</strong> '+mime+', <strong>Size:</strong> '+file.size+' bytes';\n      if(mime.substr(0,5)===\"image\") {\n        this.preview.innerHTML += '<br>';\n        var img = document.createElement('img');\n        img.style.maxWidth = '100%';\n        img.style.maxHeight = '100px';\n        img.src = this.preview_value;\n        this.preview.appendChild(img);\n      }\n  \n      this.preview.innerHTML += '<br>';\n      var uploadButton = this.getButton('Upload', 'upload', 'Upload');\n      this.preview.appendChild(uploadButton);\n      uploadButton.addEventListener('click',function(event) {\n        event.preventDefault();\n  \n        uploadButton.setAttribute(\"disabled\", \"disabled\");\n        self.theme.removeInputError(self.uploader);\n  \n        if (self.theme.getProgressBar) {\n          self.progressBar = self.theme.getProgressBar();\n          self.preview.appendChild(self.progressBar);\n        }\n  \n        self.jsoneditor.options.upload(self.path, file, {\n          success: function(url) {\n            self.setValue(url);\n  \n            if(self.parent) self.parent.onChildEditorChange(self);\n            else self.jsoneditor.onChange();\n  \n            if (self.progressBar) self.preview.removeChild(self.progressBar);\n            uploadButton.removeAttribute(\"disabled\");\n          },\n          failure: function(error) {\n            self.theme.addInputError(self.uploader, error);\n            if (self.progressBar) self.preview.removeChild(self.progressBar);\n            uploadButton.removeAttribute(\"disabled\");\n          },\n          updateProgress: function(progress) {\n            if (self.progressBar) {\n              if (progress) self.theme.updateProgressBar(self.progressBar, progress);\n              else self.theme.updateProgressBarUnknown(self.progressBar);\n            }\n          }\n        });\n      });\n    },\n    enable: function() {\n      if(this.uploader) this.uploader.disabled = false;\n      this._super();\n    },\n    disable: function() {\n      if(this.uploader) this.uploader.disabled = true;\n      this._super();\n    },\n    setValue: function(val) {\n      if(this.value !== val) {\n        this.value = val;\n        this.input.value = this.value;\n        this.onChange();\n      }\n    },\n    destroy: function() {\n      if(this.preview && this.preview.parentNode) this.preview.parentNode.removeChild(this.preview);\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n      if(this.uploader && this.uploader.parentNode) this.uploader.parentNode.removeChild(this.uploader);\n  \n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.checkbox = JSONEditor.AbstractEditor.extend({\n    setValue: function(value,initial) {\n      this.value = !!value;\n      this.input.checked = this.value;\n      this.onChange();\n    },\n    register: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.setAttribute('name',this.formname);\n    },\n    unregister: function() {\n      this._super();\n      if(!this.input) return;\n      this.input.removeAttribute('name');\n    },\n    getNumColumns: function() {\n      return Math.min(12,Math.max(this.getTitle().length/7,2));\n    },\n    build: function() {\n      var self = this;\n      if(!this.options.compact) {\n        this.label = this.header = this.theme.getCheckboxLabel(this.getTitle());\n      }\n      if(this.schema.description) this.description = this.theme.getFormInputDescription(this.schema.description);\n      if(this.options.compact) this.container.className += ' compact';\n  \n      this.input = this.theme.getCheckbox();\n      this.control = this.theme.getFormControl(this.label, this.input, this.description);\n  \n      if(this.schema.readOnly || this.schema.readonly) {\n        this.always_disabled = true;\n        this.input.disabled = true;\n      }\n  \n      this.input.addEventListener('change',function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        self.value = this.checked;\n        self.onChange(true);\n      });\n  \n      this.container.appendChild(this.control);\n    },\n    enable: function() {\n      if(!this.always_disabled) {\n        this.input.disabled = false;\n      }\n      this._super();\n    },\n    disable: function() {\n      this.input.disabled = true;\n      this._super();\n    },\n    destroy: function() {\n      if(this.label && this.label.parentNode) this.label.parentNode.removeChild(this.label);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n      this._super();\n    }\n  });\n  \n  JSONEditor.defaults.editors.arraySelectize = JSONEditor.AbstractEditor.extend({\n    build: function() {\n      this.title = this.theme.getFormInputLabel(this.getTitle());\n  \n      this.title_controls = this.theme.getHeaderButtonHolder();\n      this.title.appendChild(this.title_controls);\n      this.error_holder = document.createElement('div');\n  \n      if(this.schema.description) {\n        this.description = this.theme.getDescription(this.schema.description);\n      }\n  \n      this.input = document.createElement('select');\n      this.input.setAttribute('multiple', 'multiple');\n  \n      var group = this.theme.getFormControl(this.title, this.input, this.description);\n  \n      this.container.appendChild(group);\n      this.container.appendChild(this.error_holder);\n  \n      window.jQuery(this.input).selectize({\n        delimiter: false,\n        createOnBlur: true,\n        create: true\n      });\n    },\n    postBuild: function() {\n        var self = this;\n        this.input.selectize.on('change', function(event) {\n            self.refreshValue();\n            self.onChange(true);\n        });\n    },\n    destroy: function() {\n      this.empty(true);\n      if(this.title && this.title.parentNode) this.title.parentNode.removeChild(this.title);\n      if(this.description && this.description.parentNode) this.description.parentNode.removeChild(this.description);\n      if(this.input && this.input.parentNode) this.input.parentNode.removeChild(this.input);\n  \n      this._super();\n    },\n    empty: function(hard) {},\n    setValue: function(value, initial) {\n      var self = this;\n      // Update the array's value, adding/removing rows when necessary\n      value = value || [];\n      if(!(Array.isArray(value))) value = [value];\n  \n      this.input.selectize.clearOptions();\n      this.input.selectize.clear(true);\n  \n      value.forEach(function(item) {\n        self.input.selectize.addOption({text: item, value: item});\n      });\n      this.input.selectize.setValue(value);\n  \n      this.refreshValue(initial);\n    },\n    refreshValue: function(force) {\n      this.value = this.input.selectize.getValue();\n    },\n    showValidationErrors: function(errors) {\n      var self = this;\n  \n      // Get all the errors that pertain to this editor\n      var my_errors = [];\n      var other_errors = [];\n      $each(errors, function(i,error) {\n        if(error.path === self.path) {\n          my_errors.push(error);\n        }\n        else {\n          other_errors.push(error);\n        }\n      });\n  \n      // Show errors for this editor\n      if(this.error_holder) {\n  \n        if(my_errors.length) {\n          var message = [];\n          this.error_holder.innerHTML = '';\n          this.error_holder.style.display = '';\n          $each(my_errors, function(i,error) {\n            self.error_holder.appendChild(self.theme.getErrorMessage(error.message));\n          });\n        }\n        // Hide error area\n        else {\n          this.error_holder.style.display = 'none';\n        }\n      }\n    }\n  });\n  \n  var matchKey = (function () {\n    var elem = document.documentElement;\n  \n    if (elem.matches) return 'matches';\n    else if (elem.webkitMatchesSelector) return 'webkitMatchesSelector';\n    else if (elem.mozMatchesSelector) return 'mozMatchesSelector';\n    else if (elem.msMatchesSelector) return 'msMatchesSelector';\n    else if (elem.oMatchesSelector) return 'oMatchesSelector';\n  })();\n  \n  JSONEditor.AbstractTheme = Class.extend({\n    getContainer: function() {\n      return document.createElement('div');\n    },\n    getFloatRightLinkHolder: function() {\n      var el = document.createElement('div');\n      el.style = el.style || {};\n      el.style.cssFloat = 'right';\n      el.style.marginLeft = '10px';\n      return el;\n    },\n    getModal: function() {\n      var el = document.createElement('div');\n      el.style.backgroundColor = 'white';\n      el.style.border = '1px solid black';\n      el.style.boxShadow = '3px 3px black';\n      el.style.position = 'absolute';\n      el.style.zIndex = '10';\n      el.style.display = 'none';\n      return el;\n    },\n    getGridContainer: function() {\n      var el = document.createElement('div');\n      return el;\n    },\n    getGridRow: function() {\n      var el = document.createElement('div');\n      el.className = 'row';\n      return el;\n    },\n    getGridColumn: function() {\n      var el = document.createElement('div');\n      return el;\n    },\n    setGridColumnSize: function(el,size) {\n  \n    },\n    getLink: function(text) {\n      var el = document.createElement('a');\n      el.setAttribute('href','#');\n      el.appendChild(document.createTextNode(text));\n      return el;\n    },\n    disableHeader: function(header) {\n      header.style.color = '#ccc';\n    },\n    disableLabel: function(label) {\n      label.style.color = '#ccc';\n    },\n    enableHeader: function(header) {\n      header.style.color = '';\n    },\n    enableLabel: function(label) {\n      label.style.color = '';\n    },\n    getFormInputLabel: function(text) {\n      var el = document.createElement('label');\n      el.appendChild(document.createTextNode(text));\n      return el;\n    },\n    getCheckboxLabel: function(text) {\n      var el = this.getFormInputLabel(text);\n      el.style.fontWeight = 'normal';\n      return el;\n    },\n    getHeader: function(text) {\n      var el = document.createElement('h3');\n      if(typeof text === \"string\") {\n        el.textContent = text;\n      }\n      else {\n        el.appendChild(text);\n      }\n  \n      return el;\n    },\n    getCheckbox: function() {\n      var el = this.getFormInputField('checkbox');\n      el.style.display = 'inline-block';\n      el.style.width = 'auto';\n      return el;\n    },\n    getMultiCheckboxHolder: function(controls,label,description) {\n      var el = document.createElement('div');\n  \n      if(label) {\n        label.style.display = 'block';\n        el.appendChild(label);\n      }\n  \n      for(var i in controls) {\n        if(!controls.hasOwnProperty(i)) continue;\n        controls[i].style.display = 'inline-block';\n        controls[i].style.marginRight = '20px';\n        el.appendChild(controls[i]);\n      }\n  \n      if(description) el.appendChild(description);\n  \n      return el;\n    },\n    getSelectInput: function(options) {\n      var select = document.createElement('select');\n      if(options) this.setSelectOptions(select, options);\n      return select;\n    },\n    getSwitcher: function(options) {\n      var switcher = this.getSelectInput(options);\n      switcher.style.backgroundColor = 'transparent';\n      switcher.style.display = 'inline-block';\n      switcher.style.fontStyle = 'italic';\n      switcher.style.fontWeight = 'normal';\n      switcher.style.height = 'auto';\n      switcher.style.marginBottom = 0;\n      switcher.style.marginLeft = '5px';\n      switcher.style.padding = '0 0 0 3px';\n      switcher.style.width = 'auto';\n      return switcher;\n    },\n    getSwitcherOptions: function(switcher) {\n      return switcher.getElementsByTagName('option');\n    },\n    setSwitcherOptions: function(switcher, options, titles) {\n      this.setSelectOptions(switcher, options, titles);\n    },\n    setSelectOptions: function(select, options, titles) {\n      titles = titles || [];\n      select.innerHTML = '';\n      for(var i=0; i<options.length; i++) {\n        var option = document.createElement('option');\n        option.setAttribute('value',options[i]);\n        option.textContent = titles[i] || options[i];\n        select.appendChild(option);\n      }\n    },\n    getTextareaInput: function() {\n      var el = document.createElement('textarea');\n      el.style = el.style || {};\n      el.style.width = '100%';\n      el.style.height = '300px';\n      el.style.boxSizing = 'border-box';\n      return el;\n    },\n    getRangeInput: function(min,max,step) {\n      var el = this.getFormInputField('range');\n      el.setAttribute('min',min);\n      el.setAttribute('max',max);\n      el.setAttribute('step',step);\n      return el;\n    },\n    getFormInputField: function(type) {\n      var el = document.createElement('input');\n      el.setAttribute('type',type);\n      return el;\n    },\n    afterInputReady: function(input) {\n  \n    },\n    getFormControl: function(label, input, description) {\n      var el = document.createElement('div');\n      el.className = 'form-control';\n      if(label) el.appendChild(label);\n      if(input.type === 'checkbox') {\n        label.insertBefore(input,label.firstChild);\n      }\n      else {\n        el.appendChild(input);\n      }\n  \n      if(description) el.appendChild(description);\n      return el;\n    },\n    getIndentedPanel: function() {\n      var el = document.createElement('div');\n      el.style = el.style || {};\n      el.style.paddingLeft = '10px';\n      el.style.marginLeft = '10px';\n      el.style.borderLeft = '1px solid #ccc';\n      return el;\n    },\n    getChildEditorHolder: function() {\n      return document.createElement('div');\n    },\n    getDescription: function(text) {\n      var el = document.createElement('p');\n      el.innerHTML = text;\n      return el;\n    },\n    getCheckboxDescription: function(text) {\n      return this.getDescription(text);\n    },\n    getFormInputDescription: function(text) {\n      return this.getDescription(text);\n    },\n    getHeaderButtonHolder: function() {\n      return this.getButtonHolder();\n    },\n    getButtonHolder: function() {\n      return document.createElement('div');\n    },\n    getButton: function(text, icon, title) {\n      var el = document.createElement('button');\n      el.type = 'button';\n      this.setButtonText(el,text,icon,title);\n      return el;\n    },\n    setButtonText: function(button, text, icon, title) {\n      button.innerHTML = '';\n      if(icon) {\n        button.appendChild(icon);\n        button.innerHTML += ' ';\n      }\n      button.appendChild(document.createTextNode(text));\n      if(title) button.setAttribute('title',title);\n    },\n    getTable: function() {\n      return document.createElement('table');\n    },\n    getTableRow: function() {\n      return document.createElement('tr');\n    },\n    getTableHead: function() {\n      return document.createElement('thead');\n    },\n    getTableBody: function() {\n      return document.createElement('tbody');\n    },\n    getTableHeaderCell: function(text) {\n      var el = document.createElement('th');\n      el.textContent = text;\n      return el;\n    },\n    getTableCell: function() {\n      var el = document.createElement('td');\n      return el;\n    },\n    getErrorMessage: function(text) {\n      var el = document.createElement('p');\n      el.style = el.style || {};\n      el.style.color = 'red';\n      el.appendChild(document.createTextNode(text));\n      return el;\n    },\n    addInputError: function(input, text) {\n    },\n    removeInputError: function(input) {\n    },\n    addTableRowError: function(row) {\n    },\n    removeTableRowError: function(row) {\n    },\n    getTabHolder: function() {\n      var el = document.createElement('div');\n      el.innerHTML = \"<div style='float: left; width: 130px;' class='tabs'></div><div class='content' style='margin-left: 130px;'></div><div style='clear:both;'></div>\";\n      return el;\n    },\n    applyStyles: function(el,styles) {\n      el.style = el.style || {};\n      for(var i in styles) {\n        if(!styles.hasOwnProperty(i)) continue;\n        el.style[i] = styles[i];\n      }\n    },\n    closest: function(elem, selector) {\n      while (elem && elem !== document) {\n        if (elem[matchKey]) {\n          if (elem[matchKey](selector)) {\n            return elem;\n          } else {\n            elem = elem.parentNode;\n          }\n        }\n        else {\n          return false;\n        }\n      }\n      return false;\n    },\n    getTab: function(span) {\n      var el = document.createElement('div');\n      el.appendChild(span);\n      el.style = el.style || {};\n      this.applyStyles(el,{\n        border: '1px solid #ccc',\n        borderWidth: '1px 0 1px 1px',\n        textAlign: 'center',\n        lineHeight: '30px',\n        borderRadius: '5px',\n        borderBottomRightRadius: 0,\n        borderTopRightRadius: 0,\n        fontWeight: 'bold',\n        cursor: 'pointer'\n      });\n      return el;\n    },\n    getTabContentHolder: function(tab_holder) {\n      return tab_holder.children[1];\n    },\n    getTabContent: function() {\n      return this.getIndentedPanel();\n    },\n    markTabActive: function(tab) {\n      this.applyStyles(tab,{\n        opacity: 1,\n        background: 'white'\n      });\n    },\n    markTabInactive: function(tab) {\n      this.applyStyles(tab,{\n        opacity:0.5,\n        background: ''\n      });\n    },\n    addTab: function(holder, tab) {\n      holder.children[0].appendChild(tab);\n    },\n    getBlockLink: function() {\n      var link = document.createElement('a');\n      link.style.display = 'block';\n      return link;\n    },\n    getBlockLinkHolder: function() {\n      var el = document.createElement('div');\n      return el;\n    },\n    getLinksHolder: function() {\n      var el = document.createElement('div');\n      return el;\n    },\n    createMediaLink: function(holder,link,media) {\n      holder.appendChild(link);\n      media.style.width='100%';\n      holder.appendChild(media);\n    },\n    createImageLink: function(holder,link,image) {\n      holder.appendChild(link);\n      link.appendChild(image);\n    }\n  });\n  \n  JSONEditor.defaults.themes.bootstrap2 = JSONEditor.AbstractTheme.extend({\n    getRangeInput: function(min, max, step) {\n      // TODO: use bootstrap slider\n      return this._super(min, max, step);\n    },\n    getGridContainer: function() {\n      var el = document.createElement('div');\n      el.className = 'container-fluid';\n      return el;\n    },\n    getGridRow: function() {\n      var el = document.createElement('div');\n      el.className = 'row-fluid';\n      return el;\n    },\n    getFormInputLabel: function(text) {\n      var el = this._super(text);\n      el.style.display = 'inline-block';\n      el.style.fontWeight = 'bold';\n      return el;\n    },\n    setGridColumnSize: function(el,size) {\n      el.className = 'span'+size;\n    },\n    getSelectInput: function(options) {\n      var input = this._super(options);\n      input.style.width = 'auto';\n      input.style.maxWidth = '98%';\n      return input;\n    },\n    getFormInputField: function(type) {\n      var el = this._super(type);\n      el.style.width = '98%';\n      return el;\n    },\n    afterInputReady: function(input) {\n      if(input.controlgroup) return;\n      input.controlgroup = this.closest(input,'.control-group');\n      input.controls = this.closest(input,'.controls');\n      if(this.closest(input,'.compact')) {\n        input.controlgroup.className = input.controlgroup.className.replace(/control-group/g,'').replace(/[ ]{2,}/g,' ');\n        input.controls.className = input.controlgroup.className.replace(/controls/g,'').replace(/[ ]{2,}/g,' ');\n        input.style.marginBottom = 0;\n      }\n  \n      // TODO: use bootstrap slider\n    },\n    getIndentedPanel: function() {\n      var el = document.createElement('div');\n      el.className = 'well well-small';\n      el.style.paddingBottom = 0;\n      return el;\n    },\n    getFormInputDescription: function(text) {\n      var el = document.createElement('p');\n      el.className = 'help-inline';\n      el.textContent = text;\n      return el;\n    },\n    getFormControl: function(label, input, description) {\n      var ret = document.createElement('div');\n      ret.className = 'control-group';\n  \n      var controls = document.createElement('div');\n      controls.className = 'controls';\n  \n      if(label && input.getAttribute('type') === 'checkbox') {\n        ret.appendChild(controls);\n        label.className += ' checkbox';\n        label.appendChild(input);\n        controls.appendChild(label);\n        controls.style.height = '30px';\n      }\n      else {\n        if(label) {\n          label.className += ' control-label';\n          ret.appendChild(label);\n        }\n        controls.appendChild(input);\n        ret.appendChild(controls);\n      }\n  \n      if(description) controls.appendChild(description);\n  \n      return ret;\n    },\n    getHeaderButtonHolder: function() {\n      var el = this.getButtonHolder();\n      el.style.marginLeft = '10px';\n      return el;\n    },\n    getButtonHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'btn-group';\n      return el;\n    },\n    getButton: function(text, icon, title) {\n      var el =  this._super(text, icon, title);\n      el.className += ' btn btn-default';\n      return el;\n    },\n    getTable: function() {\n      var el = document.createElement('table');\n      el.className = 'table table-bordered';\n      el.style.width = 'auto';\n      el.style.maxWidth = 'none';\n      return el;\n    },\n    addInputError: function(input,text) {\n      if(!input.controlgroup || !input.controls) return;\n      input.controlgroup.className += ' error';\n      if(!input.errmsg) {\n        input.errmsg = document.createElement('p');\n        input.errmsg.className = 'help-block errormsg';\n        input.controls.appendChild(input.errmsg);\n      }\n      else {\n        input.errmsg.style.display = '';\n      }\n  \n      input.errmsg.textContent = text;\n    },\n    removeInputError: function(input) {\n      if(!input.errmsg) return;\n      input.errmsg.style.display = 'none';\n      input.controlgroup.className = input.controlgroup.className.replace(/\\s?error/g,'');\n    },\n    getTabHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'tabbable tabs-left';\n      el.innerHTML = \"<ul class='nav nav-tabs span2' style='margin-right: 0;'></ul><div class='tab-content span10' style='overflow:visible;'></div>\";\n      return el;\n    },\n    getTab: function(text) {\n      var el = document.createElement('li');\n      var a = document.createElement('a');\n      a.setAttribute('href','#');\n      a.appendChild(text);\n      el.appendChild(a);\n      return el;\n    },\n    getTabContentHolder: function(tab_holder) {\n      return tab_holder.children[1];\n    },\n    getTabContent: function() {\n      var el = document.createElement('div');\n      el.className = 'tab-pane active';\n      return el;\n    },\n    markTabActive: function(tab) {\n      tab.className += ' active';\n    },\n    markTabInactive: function(tab) {\n      tab.className = tab.className.replace(/\\s?active/g,'');\n    },\n    addTab: function(holder, tab) {\n      holder.children[0].appendChild(tab);\n    },\n    getProgressBar: function() {\n      var container = document.createElement('div');\n      container.className = 'progress';\n  \n      var bar = document.createElement('div');\n      bar.className = 'bar';\n      bar.style.width = '0%';\n      container.appendChild(bar);\n  \n      return container;\n    },\n    updateProgressBar: function(progressBar, progress) {\n      if (!progressBar) return;\n  \n      progressBar.firstChild.style.width = progress + \"%\";\n    },\n    updateProgressBarUnknown: function(progressBar) {\n      if (!progressBar) return;\n  \n      progressBar.className = 'progress progress-striped active';\n      progressBar.firstChild.style.width = '100%';\n    }\n  });\n  \n  JSONEditor.defaults.themes.bootstrap3 = JSONEditor.AbstractTheme.extend({\n    getSelectInput: function(options) {\n      var el = this._super(options);\n      el.className += 'form-control';\n      //el.style.width = 'auto';\n      return el;\n    },\n    setGridColumnSize: function(el,size) {\n      el.className = 'col-md-'+size;\n    },\n    afterInputReady: function(input) {\n      if(input.controlgroup) return;\n      input.controlgroup = this.closest(input,'.form-group');\n      if(this.closest(input,'.compact')) {\n        input.controlgroup.style.marginBottom = 0;\n      }\n  \n      // TODO: use bootstrap slider\n    },\n    getTextareaInput: function() {\n      var el = document.createElement('textarea');\n      el.className = 'form-control';\n      return el;\n    },\n    getRangeInput: function(min, max, step) {\n      // TODO: use better slider\n      return this._super(min, max, step);\n    },\n    getFormInputField: function(type) {\n      var el = this._super(type);\n      if(type !== 'checkbox') {\n        el.className += 'form-control';\n      }\n      return el;\n    },\n    getFormControl: function(label, input, description) {\n      var group = document.createElement('div');\n  \n      if(label && input.type === 'checkbox') {\n        group.className += ' checkbox';\n        label.appendChild(input);\n        label.style.fontSize = '14px';\n        group.style.marginTop = '0';\n        group.appendChild(label);\n        input.style.position = 'relative';\n        input.style.cssFloat = 'left';\n      } \n      else {\n        group.className += ' form-group';\n        if(label) {\n          label.className += ' control-label';\n          group.appendChild(label);\n        }\n        group.appendChild(input);\n      }\n  \n      if(description) group.appendChild(description);\n  \n      return group;\n    },\n    getIndentedPanel: function() {\n      var el = document.createElement('div');\n      el.className = 'well well-sm';\n      el.style.paddingBottom = 0;\n      return el;\n    },\n    getFormInputDescription: function(text) {\n      var el = document.createElement('p');\n      el.className = 'help-block';\n      el.innerHTML = text;\n      return el;\n    },\n    getHeaderButtonHolder: function() {\n      var el = this.getButtonHolder();\n      el.style.marginLeft = '10px';\n      return el;\n    },\n    getButtonHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'btn-group';\n      return el;\n    },\n    getButton: function(text, icon, title) {\n      var el = this._super(text, icon, title);\n      el.className += 'btn btn-default';\n      return el;\n    },\n    getTable: function() {\n      var el = document.createElement('table');\n      el.className = 'table table-bordered';\n      el.style.width = 'auto';\n      el.style.maxWidth = 'none';\n      return el;\n    },\n  \n    addInputError: function(input,text) {\n      if(!input.controlgroup) return;\n      input.controlgroup.className += ' has-error';\n      if(!input.errmsg) {\n        input.errmsg = document.createElement('p');\n        input.errmsg.className = 'help-block errormsg';\n        input.controlgroup.appendChild(input.errmsg);\n      }\n      else {\n        input.errmsg.style.display = '';\n      }\n  \n      input.errmsg.textContent = text;\n    },\n    removeInputError: function(input) {\n      if(!input.errmsg) return;\n      input.errmsg.style.display = 'none';\n      input.controlgroup.className = input.controlgroup.className.replace(/\\s?has-error/g,'');\n    },\n    getTabHolder: function() {\n      var el = document.createElement('div');\n      el.innerHTML = \"<div class='tabs list-group col-md-2'></div><div class='col-md-10'></div>\";\n      el.className = 'rows';\n      return el;\n    },\n    getTab: function(text) {\n      var el = document.createElement('a');\n      el.className = 'list-group-item';\n      el.setAttribute('href','#');\n      el.appendChild(text);\n      return el;\n    },\n    markTabActive: function(tab) {\n      tab.className += ' active';\n    },\n    markTabInactive: function(tab) {\n      tab.className = tab.className.replace(/\\s?active/g,'');\n    },\n    getProgressBar: function() {\n      var min = 0, max = 100, start = 0;\n  \n      var container = document.createElement('div');\n      container.className = 'progress';\n  \n      var bar = document.createElement('div');\n      bar.className = 'progress-bar';\n      bar.setAttribute('role', 'progressbar');\n      bar.setAttribute('aria-valuenow', start);\n      bar.setAttribute('aria-valuemin', min);\n      bar.setAttribute('aria-valuenax', max);\n      bar.innerHTML = start + \"%\";\n      container.appendChild(bar);\n  \n      return container;\n    },\n    updateProgressBar: function(progressBar, progress) {\n      if (!progressBar) return;\n  \n      var bar = progressBar.firstChild;\n      var percentage = progress + \"%\";\n      bar.setAttribute('aria-valuenow', progress);\n      bar.style.width = percentage;\n      bar.innerHTML = percentage;\n    },\n    updateProgressBarUnknown: function(progressBar) {\n      if (!progressBar) return;\n  \n      var bar = progressBar.firstChild;\n      progressBar.className = 'progress progress-striped active';\n      bar.removeAttribute('aria-valuenow');\n      bar.style.width = '100%';\n      bar.innerHTML = '';\n    }\n  });\n  \n  // Base Foundation theme\n  JSONEditor.defaults.themes.foundation = JSONEditor.AbstractTheme.extend({\n    getChildEditorHolder: function() {\n      var el = document.createElement('div');\n      el.style.marginBottom = '15px';\n      return el;\n    },\n    getSelectInput: function(options) {\n      var el = this._super(options);\n      el.style.minWidth = 'none';\n      el.style.padding = '5px';\n      el.style.marginTop = '3px';\n      return el;\n    },\n    getSwitcher: function(options) {\n      var el = this._super(options);\n      el.style.paddingRight = '8px';\n      return el;\n    },\n    afterInputReady: function(input) {\n      if(this.closest(input,'.compact')) {\n        input.style.marginBottom = 0;\n      }\n      input.group = this.closest(input,'.form-control');\n    },\n    getFormInputLabel: function(text) {\n      var el = this._super(text);\n      el.style.display = 'inline-block';\n      return el;\n    },\n    getFormInputField: function(type) {\n      var el = this._super(type);\n      el.style.width = '100%';\n      el.style.marginBottom = type==='checkbox'? '0' : '12px';\n      return el;\n    },\n    getFormInputDescription: function(text) {\n      var el = document.createElement('p');\n      el.textContent = text;\n      el.style.marginTop = '-10px';\n      el.style.fontStyle = 'italic';\n      return el;\n    },\n    getIndentedPanel: function() {\n      var el = document.createElement('div');\n      el.className = 'panel';\n      el.style.paddingBottom = 0;\n      return el;\n    },\n    getHeaderButtonHolder: function() {\n      var el = this.getButtonHolder();\n      el.style.display = 'inline-block';\n      el.style.marginLeft = '10px';\n      el.style.verticalAlign = 'middle';\n      return el;\n    },\n    getButtonHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'button-group';\n      return el;\n    },\n    getButton: function(text, icon, title) {\n      var el = this._super(text, icon, title);\n      el.className += ' small button';\n      return el;\n    },\n    addInputError: function(input,text) {\n      if(!input.group) return;\n      input.group.className += ' error';\n  \n      if(!input.errmsg) {\n        input.insertAdjacentHTML('afterend','<small class=\"error\"></small>');\n        input.errmsg = input.parentNode.getElementsByClassName('error')[0];\n      }\n      else {\n        input.errmsg.style.display = '';\n      }\n  \n      input.errmsg.textContent = text;\n    },\n    removeInputError: function(input) {\n      if(!input.errmsg) return;\n      input.group.className = input.group.className.replace(/ error/g,'');\n      input.errmsg.style.display = 'none';\n    },\n    getProgressBar: function() {\n      var progressBar = document.createElement('div');\n      progressBar.className = 'progress';\n  \n      var meter = document.createElement('span');\n      meter.className = 'meter';\n      meter.style.width = '0%';\n      progressBar.appendChild(meter);\n      return progressBar;\n    },\n    updateProgressBar: function(progressBar, progress) {\n      if (!progressBar) return;\n      progressBar.firstChild.style.width = progress + '%';\n    },\n    updateProgressBarUnknown: function(progressBar) {\n      if (!progressBar) return;\n      progressBar.firstChild.style.width = '100%';\n    }\n  });\n  \n  // Foundation 3 Specific Theme\n  JSONEditor.defaults.themes.foundation3 = JSONEditor.defaults.themes.foundation.extend({\n    getHeaderButtonHolder: function() {\n      var el = this._super();\n      el.style.fontSize = '.6em';\n      return el;\n    },\n    getFormInputLabel: function(text) {\n      var el = this._super(text);\n      el.style.fontWeight = 'bold';\n      return el;\n    },\n    getTabHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'row';\n      el.innerHTML = \"<dl class='tabs vertical two columns'></dl><div class='tabs-content ten columns'></div>\";\n      return el;\n    },\n    setGridColumnSize: function(el,size) {\n      var sizes = ['zero','one','two','three','four','five','six','seven','eight','nine','ten','eleven','twelve'];\n      el.className = 'columns '+sizes[size];\n    },\n    getTab: function(text) {\n      var el = document.createElement('dd');\n      var a = document.createElement('a');\n      a.setAttribute('href','#');\n      a.appendChild(text);\n      el.appendChild(a);\n      return el;\n    },\n    getTabContentHolder: function(tab_holder) {\n      return tab_holder.children[1];\n    },\n    getTabContent: function() {\n      var el = document.createElement('div');\n      el.className = 'content active';\n      el.style.paddingLeft = '5px';\n      return el;\n    },\n    markTabActive: function(tab) {\n      tab.className += ' active';\n    },\n    markTabInactive: function(tab) {\n      tab.className = tab.className.replace(/\\s*active/g,'');\n    },\n    addTab: function(holder, tab) {\n      holder.children[0].appendChild(tab);\n    }\n  });\n  \n  // Foundation 4 Specific Theme\n  JSONEditor.defaults.themes.foundation4 = JSONEditor.defaults.themes.foundation.extend({\n    getHeaderButtonHolder: function() {\n      var el = this._super();\n      el.style.fontSize = '.6em';\n      return el;\n    },\n    setGridColumnSize: function(el,size) {\n      el.className = 'columns large-'+size;\n    },\n    getFormInputDescription: function(text) {\n      var el = this._super(text);\n      el.style.fontSize = '.8rem';\n      return el;\n    },\n    getFormInputLabel: function(text) {\n      var el = this._super(text);\n      el.style.fontWeight = 'bold';\n      return el;\n    }\n  });\n  \n  // Foundation 5 Specific Theme\n  JSONEditor.defaults.themes.foundation5 = JSONEditor.defaults.themes.foundation.extend({\n    getFormInputDescription: function(text) {\n      var el = this._super(text);\n      el.style.fontSize = '.8rem';\n      return el;\n    },\n    setGridColumnSize: function(el,size) {\n      el.className = 'columns medium-'+size;\n    },\n    getButton: function(text, icon, title) {\n      var el = this._super(text,icon,title);\n      el.className = el.className.replace(/\\s*small/g,'') + ' tiny';\n      return el;\n    },\n    getTabHolder: function() {\n      var el = document.createElement('div');\n      el.innerHTML = \"<dl class='tabs vertical'></dl><div class='tabs-content vertical'></div>\";\n      return el;\n    },\n    getTab: function(text) {\n      var el = document.createElement('dd');\n      var a = document.createElement('a');\n      a.setAttribute('href','#');\n      a.appendChild(text);\n      el.appendChild(a);\n      return el;\n    },\n    getTabContentHolder: function(tab_holder) {\n      return tab_holder.children[1];\n    },\n    getTabContent: function() {\n      var el = document.createElement('div');\n      el.className = 'content active';\n      el.style.paddingLeft = '5px';\n      return el;\n    },\n    markTabActive: function(tab) {\n      tab.className += ' active';\n    },\n    markTabInactive: function(tab) {\n      tab.className = tab.className.replace(/\\s*active/g,'');\n    },\n    addTab: function(holder, tab) {\n      holder.children[0].appendChild(tab);\n    }\n  });\n  \n  JSONEditor.defaults.themes.foundation6 = JSONEditor.defaults.themes.foundation5.extend({\n    getIndentedPanel: function() {\n      var el = document.createElement('div');\n      el.className = 'callout secondary';\n      return el;\n    },\n    getButtonHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'button-group tiny';\n      el.style.marginBottom = 0;\n      return el;\n    },\n    getFormInputLabel: function(text) {\n      var el = this._super(text);\n      el.style.display = 'block';\n      return el;\n    },\n    getFormControl: function(label, input, description) {\n      var el = document.createElement('div');\n      el.className = 'form-control';\n      if(label) el.appendChild(label);\n      if(input.type === 'checkbox') {\n        label.insertBefore(input,label.firstChild);\n      }\n      else if (label) {\n        label.appendChild(input);\n      } else {\n        el.appendChild(input);\n      }\n  \n      if(description) label.appendChild(description);\n      return el;\n    },\n    addInputError: function(input,text) {\n      if(!input.group) return;\n      input.group.className += ' error';\n  \n      if(!input.errmsg) {\n        var errorEl = document.createElement('span');\n        errorEl.className = 'form-error is-visible';\n        input.group.getElementsByTagName('label')[0].appendChild(errorEl);\n  \n        input.className = input.className + ' is-invalid-input';\n  \n        input.errmsg = errorEl;\n      }\n      else {\n        input.errmsg.style.display = '';\n        input.className = '';\n      }\n  \n      input.errmsg.textContent = text;\n    },\n    removeInputError: function(input) {\n      if(!input.errmsg) return;\n      input.className = input.className.replace(/ is-invalid-input/g,'');\n      if(input.errmsg.parentNode) {\n        input.errmsg.parentNode.removeChild(input.errmsg);\n      }\n    },\n  });\n  \n  JSONEditor.defaults.themes.html = JSONEditor.AbstractTheme.extend({\n    getFormInputLabel: function(text) {\n      var el = this._super(text);\n      el.style.display = 'block';\n      el.style.marginBottom = '3px';\n      el.style.fontWeight = 'bold';\n      return el;\n    },\n    getFormInputDescription: function(text) {\n      var el = this._super(text);\n      el.style.fontSize = '.8em';\n      el.style.margin = 0;\n      el.style.display = 'inline-block';\n      el.style.fontStyle = 'italic';\n      return el;\n    },\n    getIndentedPanel: function() {\n      var el = this._super();\n      el.style.border = '1px solid #ddd';\n      el.style.padding = '5px';\n      el.style.margin = '5px';\n      el.style.borderRadius = '3px';\n      return el;\n    },\n    getChildEditorHolder: function() {\n      var el = this._super();\n      el.style.marginBottom = '8px';\n      return el;\n    },\n    getHeaderButtonHolder: function() {\n      var el = this.getButtonHolder();\n      el.style.display = 'inline-block';\n      el.style.marginLeft = '10px';\n      el.style.fontSize = '.8em';\n      el.style.verticalAlign = 'middle';\n      return el;\n    },\n    getTable: function() {\n      var el = this._super();\n      el.style.borderBottom = '1px solid #ccc';\n      el.style.marginBottom = '5px';\n      return el;\n    },\n    addInputError: function(input, text) {\n      input.style.borderColor = 'red';\n      \n      if(!input.errmsg) {\n        var group = this.closest(input,'.form-control');\n        input.errmsg = document.createElement('div');\n        input.errmsg.setAttribute('class','errmsg');\n        input.errmsg.style = input.errmsg.style || {};\n        input.errmsg.style.color = 'red';\n        group.appendChild(input.errmsg);\n      }\n      else {\n        input.errmsg.style.display = 'block';\n      }\n      \n      input.errmsg.innerHTML = '';\n      input.errmsg.appendChild(document.createTextNode(text));\n    },\n    removeInputError: function(input) {\n      input.style.borderColor = '';\n      if(input.errmsg) input.errmsg.style.display = 'none';\n    },\n    getProgressBar: function() {\n      var max = 100, start = 0;\n  \n      var progressBar = document.createElement('progress');\n      progressBar.setAttribute('max', max);\n      progressBar.setAttribute('value', start);\n      return progressBar;\n    },\n    updateProgressBar: function(progressBar, progress) {\n      if (!progressBar) return;\n      progressBar.setAttribute('value', progress);\n    },\n    updateProgressBarUnknown: function(progressBar) {\n      if (!progressBar) return;\n      progressBar.removeAttribute('value');\n    }\n  });\n  \n  JSONEditor.defaults.themes.jqueryui = JSONEditor.AbstractTheme.extend({\n    getTable: function() {\n      var el = this._super();\n      el.setAttribute('cellpadding',5);\n      el.setAttribute('cellspacing',0);\n      return el;\n    },\n    getTableHeaderCell: function(text) {\n      var el = this._super(text);\n      el.className = 'ui-state-active';\n      el.style.fontWeight = 'bold';\n      return el;\n    },\n    getTableCell: function() {\n      var el = this._super();\n      el.className = 'ui-widget-content';\n      return el;\n    },\n    getHeaderButtonHolder: function() {\n      var el = this.getButtonHolder();\n      el.style.marginLeft = '10px';\n      el.style.fontSize = '.6em';\n      el.style.display = 'inline-block';\n      return el;\n    },\n    getFormInputDescription: function(text) {\n      var el = this.getDescription(text);\n      el.style.marginLeft = '10px';\n      el.style.display = 'inline-block';\n      return el;\n    },\n    getFormControl: function(label, input, description) {\n      var el = this._super(label,input,description);\n      if(input.type === 'checkbox') {\n        el.style.lineHeight = '25px';\n        \n        el.style.padding = '3px 0';\n      }\n      else {\n        el.style.padding = '4px 0 8px 0';\n      }\n      return el;\n    },\n    getDescription: function(text) {\n      var el = document.createElement('span');\n      el.style.fontSize = '.8em';\n      el.style.fontStyle = 'italic';\n      el.textContent = text;\n      return el;\n    },\n    getButtonHolder: function() {\n      var el = document.createElement('div');\n      el.className = 'ui-buttonset';\n      el.style.fontSize = '.7em';\n      return el;\n    },\n    getFormInputLabel: function(text) {\n      var el = document.createElement('label');\n      el.style.fontWeight = 'bold';\n      el.style.display = 'block';\n      el.textContent = text;\n      return el;\n    },\n    getButton: function(text, icon, title) {\n      var button = document.createElement(\"button\");\n      button.className = 'ui-button ui-widget ui-state-default ui-corner-all';\n  \n      // Icon only\n      if(icon && !text) {\n        button.className += ' ui-button-icon-only';\n        icon.className += ' ui-button-icon-primary ui-icon-primary';\n        button.appendChild(icon);\n      }\n      // Icon and Text\n      else if(icon) {\n        button.className += ' ui-button-text-icon-primary';\n        icon.className += ' ui-button-icon-primary ui-icon-primary';\n        button.appendChild(icon);\n      }\n      // Text only\n      else {\n        button.className += ' ui-button-text-only';\n      }\n  \n      var el = document.createElement('span');\n      el.className = 'ui-button-text';\n      el.textContent = text||title||\".\";\n      button.appendChild(el);\n  \n      button.setAttribute('title',title);\n      \n      return button;\n    },\n    setButtonText: function(button,text, icon, title) {\n      button.innerHTML = '';\n      button.className = 'ui-button ui-widget ui-state-default ui-corner-all';\n  \n      // Icon only\n      if(icon && !text) {\n        button.className += ' ui-button-icon-only';\n        icon.className += ' ui-button-icon-primary ui-icon-primary';\n        button.appendChild(icon);\n      }\n      // Icon and Text\n      else if(icon) {\n        button.className += ' ui-button-text-icon-primary';\n        icon.className += ' ui-button-icon-primary ui-icon-primary';\n        button.appendChild(icon);\n      }\n      // Text only\n      else {\n        button.className += ' ui-button-text-only';\n      }\n  \n      var el = document.createElement('span');\n      el.className = 'ui-button-text';\n      el.textContent = text||title||\".\";\n      button.appendChild(el);\n  \n      button.setAttribute('title',title);\n    },\n    getIndentedPanel: function() {\n      var el = document.createElement('div');\n      el.className = 'ui-widget-content ui-corner-all';\n      el.style.padding = '1em 1.4em';\n      el.style.marginBottom = '20px';\n      return el;\n    },\n    afterInputReady: function(input) {\n      if(input.controls) return;\n      input.controls = this.closest(input,'.form-control');\n    },\n    addInputError: function(input,text) {\n      if(!input.controls) return;\n      if(!input.errmsg) {\n        input.errmsg = document.createElement('div');\n        input.errmsg.className = 'ui-state-error';\n        input.controls.appendChild(input.errmsg);\n      }\n      else {\n        input.errmsg.style.display = '';\n      }\n  \n      input.errmsg.textContent = text;\n    },\n    removeInputError: function(input) {\n      if(!input.errmsg) return;\n      input.errmsg.style.display = 'none';\n    },\n    markTabActive: function(tab) {\n      tab.className = tab.className.replace(/\\s*ui-widget-header/g,'')+' ui-state-active';\n    },\n    markTabInactive: function(tab) {\n      tab.className = tab.className.replace(/\\s*ui-state-active/g,'')+' ui-widget-header';\n    }\n  });\n  \n  JSONEditor.defaults.themes.barebones = JSONEditor.AbstractTheme.extend({\n      getFormInputLabel: function (text) {\n          var el = this._super(text);\n          return el;\n      },\n      getFormInputDescription: function (text) {\n          var el = this._super(text);\n          return el;\n      },\n      getIndentedPanel: function () {\n          var el = this._super();\n          return el;\n      },\n      getChildEditorHolder: function () {\n          var el = this._super();\n          return el;\n      },\n      getHeaderButtonHolder: function () {\n          var el = this.getButtonHolder();\n          return el;\n      },\n      getTable: function () {\n          var el = this._super();\n          return el;\n      },\n      addInputError: function (input, text) {\n          if (!input.errmsg) {\n              var group = this.closest(input, '.form-control');\n              input.errmsg = document.createElement('div');\n              input.errmsg.setAttribute('class', 'errmsg');\n              group.appendChild(input.errmsg);\n          }\n          else {\n              input.errmsg.style.display = 'block';\n          }\n  \n          input.errmsg.innerHTML = '';\n          input.errmsg.appendChild(document.createTextNode(text));\n      },\n      removeInputError: function (input) {\n          input.style.borderColor = '';\n          if (input.errmsg) input.errmsg.style.display = 'none';\n      },\n      getProgressBar: function () {\n          var max = 100, start = 0;\n  \n          var progressBar = document.createElement('progress');\n          progressBar.setAttribute('max', max);\n          progressBar.setAttribute('value', start);\n          return progressBar;\n      },\n      updateProgressBar: function (progressBar, progress) {\n          if (!progressBar) return;\n          progressBar.setAttribute('value', progress);\n      },\n      updateProgressBarUnknown: function (progressBar) {\n          if (!progressBar) return;\n          progressBar.removeAttribute('value');\n      }\n  });\n  \n  JSONEditor.AbstractIconLib = Class.extend({\n    mapping: {\n      collapse: '',\n      expand: '',\n      \"delete\": '',\n      edit: '',\n      add: '',\n      cancel: '',\n      save: '',\n      moveup: '',\n      movedown: ''\n    },\n    icon_prefix: '',\n    getIconClass: function(key) {\n      if(this.mapping[key]) return this.icon_prefix+this.mapping[key];\n      else return null;\n    },\n    getIcon: function(key) {\n      var iconclass = this.getIconClass(key);\n      \n      if(!iconclass) return null;\n      \n      var i = document.createElement('i');\n      i.className = iconclass;\n      return i;\n    }\n  });\n  \n  JSONEditor.defaults.iconlibs.bootstrap2 = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'chevron-down',\n      expand: 'chevron-up',\n      \"delete\": 'trash',\n      edit: 'pencil',\n      add: 'plus',\n      cancel: 'ban-circle',\n      save: 'ok',\n      moveup: 'arrow-up',\n      movedown: 'arrow-down'\n    },\n    icon_prefix: 'icon-'\n  });\n  \n  JSONEditor.defaults.iconlibs.bootstrap3 = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'chevron-down',\n      expand: 'chevron-right',\n      \"delete\": 'remove',\n      edit: 'pencil',\n      add: 'plus',\n      cancel: 'floppy-remove',\n      save: 'floppy-saved',\n      moveup: 'arrow-up',\n      movedown: 'arrow-down'\n    },\n    icon_prefix: 'glyphicon glyphicon-'\n  });\n  \n  JSONEditor.defaults.iconlibs.fontawesome3 = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'chevron-down',\n      expand: 'chevron-right',\n      \"delete\": 'remove',\n      edit: 'pencil',\n      add: 'plus',\n      cancel: 'ban-circle',\n      save: 'save',\n      moveup: 'arrow-up',\n      movedown: 'arrow-down'\n    },\n    icon_prefix: 'icon-'\n  });\n  \n  JSONEditor.defaults.iconlibs.fontawesome4 = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'caret-square-o-down',\n      expand: 'caret-square-o-right',\n      \"delete\": 'times',\n      edit: 'pencil',\n      add: 'plus',\n      cancel: 'ban',\n      save: 'save',\n      moveup: 'arrow-up',\n      movedown: 'arrow-down'\n    },\n    icon_prefix: 'fa fa-'\n  });\n  \n  JSONEditor.defaults.iconlibs.foundation2 = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'minus',\n      expand: 'plus',\n      \"delete\": 'remove',\n      edit: 'edit',\n      add: 'add-doc',\n      cancel: 'error',\n      save: 'checkmark',\n      moveup: 'up-arrow',\n      movedown: 'down-arrow'\n    },\n    icon_prefix: 'foundicon-'\n  });\n  \n  JSONEditor.defaults.iconlibs.foundation3 = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'minus',\n      expand: 'plus',\n      \"delete\": 'x',\n      edit: 'pencil',\n      add: 'page-add',\n      cancel: 'x-circle',\n      save: 'save',\n      moveup: 'arrow-up',\n      movedown: 'arrow-down'\n    },\n    icon_prefix: 'fi-'\n  });\n  \n  JSONEditor.defaults.iconlibs.jqueryui = JSONEditor.AbstractIconLib.extend({\n    mapping: {\n      collapse: 'triangle-1-s',\n      expand: 'triangle-1-e',\n      \"delete\": 'trash',\n      edit: 'pencil',\n      add: 'plusthick',\n      cancel: 'closethick',\n      save: 'disk',\n      moveup: 'arrowthick-1-n',\n      movedown: 'arrowthick-1-s'\n    },\n    icon_prefix: 'ui-icon ui-icon-'\n  });\n  \n  JSONEditor.defaults.templates[\"default\"] = function() {\n    return {\n      compile: function(template) {\n        var matches = template.match(/{{\\s*([a-zA-Z0-9\\-_ \\.]+)\\s*}}/g);\n        var l = matches && matches.length;\n  \n        // Shortcut if the template contains no variables\n        if(!l) return function() { return template; };\n  \n        // Pre-compute the search/replace functions\n        // This drastically speeds up template execution\n        var replacements = [];\n        var get_replacement = function(i) {\n          var p = matches[i].replace(/[{}]+/g,'').trim().split('.');\n          var n = p.length;\n          var func;\n          \n          if(n > 1) {\n            var cur;\n            func = function(vars) {\n              cur = vars;\n              for(i=0; i<n; i++) {\n                cur = cur[p[i]];\n                if(!cur) break;\n              }\n              return cur;\n            };\n          }\n          else {\n            p = p[0];\n            func = function(vars) {\n              return vars[p];\n            };\n          }\n          \n          replacements.push({\n            s: matches[i],\n            r: func\n          });\n        };\n        for(var i=0; i<l; i++) {\n          get_replacement(i);\n        }\n  \n        // The compiled function\n        return function(vars) {\n          var ret = template+\"\";\n          var r;\n          for(i=0; i<l; i++) {\n            r = replacements[i];\n            ret = ret.replace(r.s, r.r(vars));\n          }\n          return ret;\n        };\n      }\n    };\n  };\n  \n  JSONEditor.defaults.templates.ejs = function() {\n    if(!window.EJS) return false;\n  \n    return {\n      compile: function(template) {\n        var compiled = new window.EJS({\n          text: template\n        });\n  \n        return function(context) {\n          return compiled.render(context);\n        };\n      }\n    };\n  };\n  \n  JSONEditor.defaults.templates.handlebars = function() {\n    return window.Handlebars;\n  };\n  \n  JSONEditor.defaults.templates.hogan = function() {\n    if(!window.Hogan) return false;\n  \n    return {\n      compile: function(template) {\n        var compiled = window.Hogan.compile(template);\n        return function(context) {\n          return compiled.render(context);\n        };\n      }\n    };\n  };\n  \n  JSONEditor.defaults.templates.markup = function() {\n    if(!window.Mark || !window.Mark.up) return false;\n  \n    return {\n      compile: function(template) {\n        return function(context) {\n          return window.Mark.up(template,context);\n        };\n      }\n    };\n  };\n  \n  JSONEditor.defaults.templates.mustache = function() {\n    if(!window.Mustache) return false;\n  \n    return {\n      compile: function(template) {\n        return function(view) {\n          return window.Mustache.render(template, view);\n        };\n      }\n    };\n  };\n  \n  JSONEditor.defaults.templates.swig = function() {\n    return window.swig;\n  };\n  \n  JSONEditor.defaults.templates.underscore = function() {\n    if(!window._) return false;\n  \n    return {\n      compile: function(template) {\n        return function(context) {\n          return window._.template(template, context);\n        };\n      }\n    };\n  };\n  \n  // Set the default theme\n  JSONEditor.defaults.theme = 'html';\n  \n  // Set the default template engine\n  JSONEditor.defaults.template = 'default';\n  \n  // Default options when initializing JSON Editor\n  JSONEditor.defaults.options = {};\n  \n  // String translate function\n  JSONEditor.defaults.translate = function(key, variables) {\n    var lang = JSONEditor.defaults.languages[JSONEditor.defaults.language];\n    if(!lang) throw \"Unknown language \"+JSONEditor.defaults.language;\n    \n    var string = lang[key] || JSONEditor.defaults.languages[JSONEditor.defaults.default_language][key];\n    \n    if(typeof string === \"undefined\") throw \"Unknown translate string \"+key;\n    \n    if(variables) {\n      for(var i=0; i<variables.length; i++) {\n        string = string.replace(new RegExp('\\\\{\\\\{'+i+'}}','g'),variables[i]);\n      }\n    }\n    \n    return string;\n  };\n  \n  // Translation strings and default languages\n  JSONEditor.defaults.default_language = 'en';\n  JSONEditor.defaults.language = JSONEditor.defaults.default_language;\n  JSONEditor.defaults.languages.en = {\n    /**\n     * When a property is not set\n     */\n    error_notset: \"Property must be set\",\n    /**\n     * When a string must not be empty\n     */\n    error_notempty: \"Value required\",\n    /**\n     * When a value is not one of the enumerated values\n     */\n    error_enum: \"Value must be one of the enumerated values\",\n    /**\n     * When a value doesn't validate any schema of a 'anyOf' combination\n     */\n    error_anyOf: \"Value must validate against at least one of the provided schemas\",\n    /**\n     * When a value doesn't validate\n     * @variables This key takes one variable: The number of schemas the value does not validate\n     */\n    error_oneOf: 'Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.',\n    /**\n     * When a value does not validate a 'not' schema\n     */\n    error_not: \"Value must not validate against the provided schema\",\n    /**\n     * When a value does not match any of the provided types\n     */\n    error_type_union: \"Value must be one of the provided types\",\n    /**\n     * When a value does not match the given type\n     * @variables This key takes one variable: The type the value should be of\n     */\n    error_type: \"Value must be of type {{0}}\",\n    /**\n     *  When the value validates one of the disallowed types\n     */\n    error_disallow_union: \"Value must not be one of the provided disallowed types\",\n    /**\n     *  When the value validates a disallowed type\n     * @variables This key takes one variable: The type the value should not be of\n     */\n    error_disallow: \"Value must not be of type {{0}}\",\n    /**\n     * When a value is not a multiple of or divisible by a given number\n     * @variables This key takes one variable: The number mentioned above\n     */\n    error_multipleOf: \"Value must be a multiple of {{0}}\",\n    /**\n     * When a value is greater than it's supposed to be (exclusive)\n     * @variables This key takes one variable: The maximum\n     */\n    error_maximum_excl: \"Value must be less than {{0}}\",\n    /**\n     * When a value is greater than it's supposed to be (inclusive\n     * @variables This key takes one variable: The maximum\n     */\n    error_maximum_incl: \"Value must be at most {{0}}\",\n    /**\n     * When a value is lesser than it's supposed to be (exclusive)\n     * @variables This key takes one variable: The minimum\n     */\n    error_minimum_excl: \"Value must be greater than {{0}}\",\n    /**\n     * When a value is lesser than it's supposed to be (inclusive)\n     * @variables This key takes one variable: The minimum\n     */\n    error_minimum_incl: \"Value must be at least {{0}}\",\n    /**\n     * When a value have too many characters\n     * @variables This key takes one variable: The maximum character count\n     */\n    error_maxLength: \"Value must be at most {{0}} characters long\",\n    /**\n     * When a value does not have enough characters\n     * @variables This key takes one variable: The minimum character count\n     */\n    error_minLength: \"Value must be at least {{0}} characters long\",\n    /**\n     * When a value does not match a given pattern\n     */\n    error_pattern: \"Value must match the pattern {{0}}\",\n    /**\n     * When an array has additional items whereas it is not supposed to\n     */\n    error_additionalItems: \"No additional items allowed in this array\",\n    /**\n     * When there are to many items in an array\n     * @variables This key takes one variable: The maximum item count\n     */\n    error_maxItems: \"Value must have at most {{0}} items\",\n    /**\n     * When there are not enough items in an array\n     * @variables This key takes one variable: The minimum item count\n     */\n    error_minItems: \"Value must have at least {{0}} items\",\n    /**\n     * When an array is supposed to have unique items but has duplicates\n     */\n    error_uniqueItems: \"Array must have unique items\",\n    /**\n     * When there are too many properties in an object\n     * @variables This key takes one variable: The maximum property count\n     */\n    error_maxProperties: \"Object must have at most {{0}} properties\",\n    /**\n     * When there are not enough properties in an object\n     * @variables This key takes one variable: The minimum property count\n     */\n    error_minProperties: \"Object must have at least {{0}} properties\",\n    /**\n     * When a required property is not defined\n     * @variables This key takes one variable: The name of the missing property\n     */\n    error_required: \"Object is missing the required property '{{0}}'\",\n    /**\n     * When there is an additional property is set whereas there should be none\n     * @variables This key takes one variable: The name of the additional property\n     */\n    error_additional_properties: \"No additional properties allowed, but property {{0}} is set\",\n    /**\n     * When a dependency is not resolved\n     * @variables This key takes one variable: The name of the missing property for the dependency\n     */\n    error_dependency: \"Must have property {{0}}\",\n    /**\n     * Text on Delete All buttons\n     */\n    button_delete_all: \"All\",\n    /**\n     * Title on Delete All buttons\n     */\n    button_delete_all_title: \"Delete All\",\n    /**\n      * Text on Delete Last buttons\n      * @variable This key takes one variable: The title of object to delete\n      */\n    button_delete_last: \"Last {{0}}\",\n    /**\n      * Title on Delete Last buttons\n      * @variable This key takes one variable: The title of object to delete\n      */\n    button_delete_last_title: \"Delete Last {{0}}\",\n    /**\n      * Title on Add Row buttons\n      * @variable This key takes one variable: The title of object to add\n      */\n    button_add_row_title: \"Add {{0}}\",\n    /**\n      * Title on Move Down buttons\n      */\n    button_move_down_title: \"Move down\",\n    /**\n      * Title on Move Up buttons\n      */\n    button_move_up_title: \"Move up\",\n    /**\n      * Title on Delete Row buttons\n      * @variable This key takes one variable: The title of object to delete\n      */\n    button_delete_row_title: \"Delete {{0}}\",\n    /**\n      * Title on Delete Row buttons, short version (no parameter with the object title)\n      */\n    button_delete_row_title_short: \"Delete\",\n    /**\n      * Title on Collapse buttons\n      */\n    button_collapse: \"Collapse\",\n    /**\n      * Title on Expand buttons\n      */\n    button_expand: \"Expand\",\n    \n    /**\n     * Custom buttons\n     */\n    custom_set_image: \"Set Image\",\n    custom_set_url: \"Set URL\",\n  };\n  \n  // Miscellaneous Plugin Settings\n  JSONEditor.plugins = {\n    ace: {\n      theme: ''\n    },\n    epiceditor: {\n  \n    },\n    sceditor: {\n  \n    },\n    select2: {\n      \n    },\n    selectize: {\n    }\n  };\n  \n  // Default per-editor options\n  $each(JSONEditor.defaults.editors, function(i,editor) {\n    JSONEditor.defaults.editors[i].options = editor.options || {};\n  });\n  \n  // Set the default resolvers\n  // Use \"multiple\" as a fall back for everything\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    if(typeof schema.type !== \"string\") return \"multiple\";\n  });\n  // If the type is not set but properties are defined, we can infer the type is actually object\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    // If the schema is a simple type\n    if(!schema.type && schema.properties ) return \"object\";\n  });\n  // If the type is set and it's a basic type, use the primitive editor\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    // If the schema is a simple type\n    if(typeof schema.type === \"string\") return schema.type;\n  });\n  // Boolean editors\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    if(schema.type === 'boolean') {\n      // If explicitly set to 'checkbox', use that\n      if(schema.format === \"checkbox\" || (schema.options && schema.options.checkbox)) {\n        return \"checkbox\";\n      }\n      // Otherwise, default to select menu\n      return (JSONEditor.plugins.selectize.enable) ? 'selectize' : 'select';\n    }\n  });\n  // Use the multiple editor for schemas where the `type` is set to \"any\"\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    // If the schema can be of any type\n    if(schema.type === \"any\") return \"multiple\";\n  });\n  // Editor for base64 encoded files\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    // If the schema can be of any type\n    if(schema.type === \"string\" && schema.media && schema.media.binaryEncoding===\"base64\") {\n      return \"base64\";\n    }\n  });\n  // Editor for uploading files\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    if(schema.type === \"string\" && schema.format === \"url\" && schema.options && schema.options.upload === true) {\n      if(window.FileReader) return \"upload\";\n    }\n  });\n  // Use the table editor for arrays with the format set to `table`\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    // Type `array` with format set to `table`\n    if(schema.type == \"array\" && schema.format == \"table\") {\n      return \"table\";\n    }\n  });\n  // Use the `select` editor for dynamic enumSource enums\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    if(schema.enumSource) return (JSONEditor.plugins.selectize.enable) ? 'selectize' : 'select';\n  });\n  // Use the `enum` or `select` editors for schemas with enumerated properties\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    if(schema[\"enum\"]) {\n      if(schema.type === \"array\" || schema.type === \"object\") {\n        return \"enum\";\n      }\n      else if(schema.type === \"number\" || schema.type === \"integer\" || schema.type === \"string\") {\n        return (JSONEditor.plugins.selectize.enable) ? 'selectize' : 'select';\n      }\n    }\n  });\n  // Specialized editors for arrays of strings\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    if(schema.type === \"array\" && schema.items && !(Array.isArray(schema.items)) && schema.uniqueItems && ['string','number','integer'].indexOf(schema.items.type) >= 0) {\n      // For enumerated strings, number, or integers\n      if(schema.items.enum) {\n        return 'multiselect';\n      }\n      // For non-enumerated strings (tag editor)\n      else if(JSONEditor.plugins.selectize.enable && schema.items.type === \"string\") {\n        return 'arraySelectize';\n      }\n    }\n  });\n  // Use the multiple editor for schemas with `oneOf` set\n  JSONEditor.defaults.resolvers.unshift(function(schema) {\n    // If this schema uses `oneOf` or `anyOf`\n    if(schema.oneOf || schema.anyOf) return \"multiple\";\n  });\n  \n  /**\n   * This is a small wrapper for using JSON Editor like a typical jQuery plugin.\n   */\n  (function() {\n    if(window.jQuery || window.Zepto) {\n      var $ = window.jQuery || window.Zepto;\n      $.jsoneditor = JSONEditor.defaults;\n      \n      $.fn.jsoneditor = function(options) {\n        var self = this;\n        var editor = this.data('jsoneditor');\n        if(options === 'value') {\n          if(!editor) throw \"Must initialize jsoneditor before getting/setting the value\";\n          \n          // Set value\n          if(arguments.length > 1) {\n            editor.setValue(arguments[1]);\n          }\n          // Get value\n          else {\n            return editor.getValue();\n          }\n        }\n        else if(options === 'validate') {\n          if(!editor) throw \"Must initialize jsoneditor before validating\";\n          \n          // Validate a specific value\n          if(arguments.length > 1) {\n            return editor.validate(arguments[1]);\n          }\n          // Validate current value\n          else {\n            return editor.validate();\n          }\n        }\n        else if(options === 'destroy') {\n          if(editor) {\n            editor.destroy();\n            this.data('jsoneditor',null);\n          }\n        }\n        else {\n          // Destroy first\n          if(editor) {\n            editor.destroy();\n          }\n          \n          // Create editor\n          editor = new JSONEditor(this.get(0),options);\n          this.data('jsoneditor',editor);\n          \n          // Setup event listeners\n          editor.on('change',function() {\n            self.trigger('change');\n          });\n          editor.on('ready',function() {\n            self.trigger('ready');\n          });\n        }\n        \n        return this;\n      };\n    }\n  })();\n  \n    return JSONEditor;\n  })();\n  \n  //# sourceMappingURL=jsoneditor.js.map\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/json-editor-class/index.js","/**\n * use AMD loader to require monaco\n * https://github.com/Microsoft/monaco-editor/issues/18\n * @Author: CntChen\n * @Date: 2017-09-20\n */\n\nlet isLoadingAMD = false;\n\n// TODO append as iframe?\nexport const loadMonaco = options => new Promise((resolve, reject) => {\n  const {\n    timeout = 5000,\n    interval = 20,\n    toPath = 'vs',\n  } = options;\n\n  const loadInterval = setInterval(() => {\n    if (window.monaco) {\n      clearInterval(loadInterval);\n      resolve(window.monaco);\n    }\n  }, interval);\n\n  const loadTimeout = setTimeout(() => {\n    clearInterval(loadInterval);\n    clearTimeout(loadTimeout);\n    reject('load monaco timeout');\n  }, timeout);\n\n  const onGoAmdLoader = () => {\n    if (window.monaco) {\n      clearInterval(loadInterval);\n      clearTimeout(loadTimeout);\n      resolve(window.monaco);\n    } else {\n      window.require(['vs/editor/editor.main'], () => {\n        clearInterval(loadInterval);\n        clearTimeout(loadTimeout);\n        resolve(window.monaco);\n      });\n    }\n  };\n\n  const insertScript = () => {\n    if (!window.require && isLoadingAMD === false) {\n      isLoadingAMD = true;\n      const loaderScript = document.createElement('script');\n      loaderScript.type = 'application/javascript';\n      loaderScript.src = `./${toPath}/loader.js`.replace('//', '/');\n      loaderScript.addEventListener('load', onGoAmdLoader);\n      document.head.appendChild(loaderScript);\n    } else if (window.require) {\n      onGoAmdLoader();\n    }\n  };\n\n  insertScript();\n});\n\nexport default {\n  loadMonaco,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/monaco-editor-loader/index.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"editor\",staticClass:\"editor\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowCode),expression:\"isShowCode\"}],ref:\"monacoEditor\",staticClass:\"editor__monaco\",on:{\"wheel\":function($event){$event.preventDefault();}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowForm),expression:\"isShowForm\"}],ref:\"jsonEditor\",staticClass:\"editor__json\",on:{\"wheel\":function($event){_vm.onWheel($event, _vm.$refs.jsonEditor)},\"click\":function($event){_vm.onJsonEditorClick($event)}}})]),_vm._v(\" \"),(_vm.errorMessage)?_c('div',{staticClass:\"error-line\"},[_c('p',[_vm._v(\"Eclipse: \"+_vm._s(_vm.errorMessage))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"editor__button-group\"},[_c('div',{staticClass:\"editor__button-group__left\"},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-upload\"},on:{\"click\":_vm.comfirmObject}},[_vm._v(\"\\n        提交配置数据\\n      \")]),_vm._v(\" \"),_c('el-button',{staticClass:\"element-hidden\",attrs:{\"type\":\"warning\",\"size\":\"small\"},on:{\"click\":_vm.resetObject}},[_vm._v(\"\\n        重置表单数据\\n      \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"editor__button-group__right element-hidden\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.showBoth}},[_vm._v(\"\\n        代码和表单\\n      \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.showCode}},[_vm._v(\"\\n        只看代码\\n      \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.showForm}},[_vm._v(\"\\n        只看表单\\n      \")])],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-707629a8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/json-editor/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-707629a8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-707629a8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-707629a8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/json-editor/index.vue\n// module id = null\n// module chunks = ","<template>\n<div>\n  <div class=\"page-content pipline\">\n    <div class=\"pipline__components-selector\">\n      <h3>模板区块</h3>\n      <div class=\"components-selector__list\">\n        <div class=\"components-selector__item\"\n          v-for=\"component in templateComponents\"\n          :key=\"component.id\">\n          <el-button\n            :type=\"getComponentSelectorButtonType(component)\"\n            size=\"small\"\n            icon=\"el-icon-menu\"\n            @click.native=\"selectComponent(component)\">\n            {{component.title}}\n          </el-button>\n        </div>\n      </div>\n    </div>\n    <div class=\"pipline__preview\">\n      <h3>页面预览</h3>\n      <div class=\"preview__button-group\">\n        <el-button\n          size=\"small\"\n          icon=\"el-icon-refresh\"\n          @click.native=\"refreshPreviewIframe\">\n          刷新\n        </el-button>\n        <el-button\n          size=\"small\"\n          icon=\"el-icon-news\"\n          @click.native=\"previewInNewPage\">\n          新页面预览\n        </el-button>\n      </div>\n      <div class=\"preview__page-title\">\n        {{baseConfig.title}}\n      </div>\n      <iframe\n        class=\"preview__iframe\"\n        ref=\"previewIframe\"\n        :src=\"previewSrc\"/>\n    </div>\n    <div class=\"pipline__fill-info\">\n      <h3>页面配置</h3>\n      <div class=\"fill-info__form\">\n        <el-tabs\n          type=\"border-card\"\n          @tab-click=\"onTabClick\"\n          :value=\"formName\">\n          <el-tab-pane\n            name=\"pageBaseConfig\"\n            label=\"页面基本配置\">\n            <div class=\"form-json-editor\">\n              <json-editor\n                :data.sync=\"baseConfig\"\n                :dataSchema.sync=\"baseConfigSchema\"/>\n            </div>\n          </el-tab-pane>\n          <el-tab-pane\n            name=\"pageConfig\"\n            label=\"页面内容配置\">\n            <div class=\"form-json-editor\">\n              <json-editor\n                :data.sync=\"data\"\n                :dataSchema.sync=\"dataSchema\"/>\n            </div>\n          </el-tab-pane>\n        </el-tabs>\n      </div>\n    </div>\n  </div>\n  <el-dialog\n    title=\"Wellcom to Pipeline !\"\n    :visible.sync=\"tipDialogVisible\"\n    width=\"35%\">\n    <h3>后台服务器性能稍差, 请耐心等待接口返回.</h3>\n    如果页面无法预览, 请点击<a :href=\"previewSrc\">这里</a>允许浏览器访问自签名证书的服务器.\n  </el-dialog>\n</div>\n</template>\n\n<script>\nimport { APIS } from 'comp/util/constants';\nimport fetch from 'comp/util/fetch';\nimport JsonEditor from 'comp/json-editor';\n\nexport default {\n  name: 'pipline-editor',\n  components: {\n    'json-editor': JsonEditor,\n  },\n  data() {\n    return {\n      templateTypeList: [],\n      pageTypeList: [],\n      purpose: '',\n      templateId: '',\n      template: null,\n      pageId: '',\n      data: {},\n      dataSchema: {},\n      schemas: {},\n      baseConfig: {},\n      baseConfigSchema: {},\n      baseConfigSchemaEarly: {},\n      templateComponents: [],\n      currentComponent: null,\n      previewSrc: '',\n      formName: 'pageBaseConfig',\n      pageBaseUrl: '',\n      tipDialogVisible: true,\n    };\n  },\n  methods: {\n    async prepareFromTemplate() {\n      const ret = await fetch(`${APIS.PIPLINE}/prepareFromTemplate`, {\n        method: 'POST',\n        body: {\n          templateId: this.templateId,\n        },\n      });\n      this.pageId = ret.pageId;\n      this.previewSrc = `${APIS.ROOT}/public/pipelines/${this.pageId}/server/dist/index.html`;\n    },\n    async getPageBaseUrl() {\n      const ret = await fetch(`${APIS.PIPLINE}/pageBaseUrl`, {\n      });\n      return ret;\n    },\n    async getBaseConfig() {\n      const ret = await fetch(`${APIS.PIPLINE}/baseConfig`, {\n        body: {\n          pageId: this.pageId,\n        },\n      });\n      this.baseConfig = ret;\n    },\n    async putBaseConfig() {\n      const ret = await fetch(`${APIS.PIPLINE}/baseConfig`, {\n        method: 'PUT',\n        body: {\n          pageId: this.pageId,\n          baseConfig: this.baseConfig,\n        },\n      });\n\n      this.refreshPreviewIframe();\n      await this.getBaseConfig();\n    },\n    async getBaseConfigSchema() {\n      const ret = await fetch(`${APIS.PIPLINE}/baseConfigSchema`, {\n        body: {\n          pageId: this.pageId,\n        },\n      });\n      this.baseConfigSchemaEarly = ret;\n    },\n    async getTemplateComponents() {\n      const ret = await fetch(`${APIS.PIPLINE}/templateComponents`, {\n        body: {\n          pageId: this.pageId,\n        },\n      });\n      this.templateComponents = ret;\n    },\n    async putComponents() {\n      const ret = await fetch(`${APIS.PIPLINE}/templateComponents`, {\n        method: 'PUT',\n        body: {\n          pageId: this.pageId,\n          templateComponents: this.templateComponents,\n        },\n      });\n\n      this.refreshPreviewIframe();\n      await this.getTemplateComponents();\n    },\n    async getComponentsSchema() {\n      const ret = await fetch(`${APIS.PIPLINE}/componentsSchema`, {\n        body: {\n          pageId: this.pageId,\n        },\n      });\n      this.schemas = ret;\n    },\n    selectComponent(component) {\n      this.currentComponent = component;\n      this.tabToPageConfig();\n    },\n    selectDefaultComponent() {\n      if (this.currentComponent === null\n        && this.templateComponents.length > 0) {\n        this.currentComponent = this.templateComponents[0];\n        return true;\n      }\n      return false;\n    },\n    refreshPreviewIframe() {\n      this.$refs.previewIframe.onload = this.iframeScrollToCurrentComponent;\n      this.$refs.previewIframe.src = this.previewSrc;\n    },\n    iframeScrollToCurrentComponent() {\n      this.$refs.previewIframe.contentWindow.postMessage({\n        currentComponent: this.currentComponent,\n      }, '*');\n    },\n    previewInNewPage() {\n      window.open(this.previewSrc);\n    },\n    onTabClick(tab) {\n      switch(tab.name) {\n        case 'pageConfig':\n          this.selectDefaultComponent();\n          break;\n        default:\n          break;\n      };\n      this.formName = tab.name;\n    },\n    tabToPageConfig() {\n      this.formName = 'pageConfig';\n    },\n    getComponentSelectorButtonType(component) {\n      return (this.currentComponent && this.currentComponent.id === component.id) ? 'primary' : 'normal';\n    },\n  },\n  async mounted() {\n    setTimeout(() => {\n      this.tipDialogVisible = false;\n    }, 5000);\n\n    this.templateId = this.$route.params.id;\n    this.purpose = this.$route.query.purpose;\n\n    await this.prepareFromTemplate();\n    await this.getBaseConfigSchema();\n    await this.getBaseConfig();\n    // 用 baseConfigSchemaEarly 解决数据和约束不在一个 Vue 渲染周期内导致的校验报错\n    this.baseConfigSchema = this.baseConfigSchemaEarly;\n    await this.getComponentsSchema();\n    await this.getTemplateComponents();\n  },\n  watch: {\n    templateComponents(value, oldValue) {\n      if (!this.currentComponent) {\n        this.selectDefaultComponent();\n      } else {\n        const componentsWithId = value.filter((item) => item.id === this.currentComponent.id);\n        if (componentsWithId.length > 0) {\n          this.currentComponent = componentsWithId[0];\n        } else {\n          this.selectDefaultComponent();\n        }\n      }\n    },\n    currentComponent() {\n      this.dataSchema = this.schemas[this.currentComponent.name];\n      this.data = this.currentComponent.data;\n      this.iframeScrollToCurrentComponent();\n    },\n    data(value, oldValue) {\n      if (this.currentComponent.data === this.data) {\n        return;\n      }\n      this.currentComponent.data = this.data;\n      this.putComponents();\n    },\n    baseConfig(value, oldValue) {\n      if (JSON.stringify(oldValue) === JSON.stringify({})\n        || JSON.stringify(value) === JSON.stringify(oldValue)) {\n        return;\n      }\n      this.baseConfig = value;\n      this.putBaseConfig();\n    },\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.pipline {\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n\n  &__components-selector {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 15%;\n    border-right: 1px solid #00000020;\n  }\n\n  &__preview {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 30%;\n    border-right: 1px solid #00000020;\n  }\n\n  &__fill-info {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 55%;\n    padding: 0 10px;\n    overflow: auto;\n  }\n}\n\n.components-selector {\n  &__list {\n    display: flex;\n    flex-direction: column;\n    margin: 10px 0 0;\n  }\n\n  &__item {\n    margin: 5px 0 0;\n  }\n}\n\n.preview {\n  &__page-title {\n    margin: 12px 0 2px;\n    font-size: 18px;\n    font-weight: bold;\n  }\n\n  &__iframe {\n    margin: 0px 0 0;\n    border: 1px solid black;\n    width: 375px;\n    height: 667px;\n  }\n}\n\n.fill-info {\n  &__form {\n    width: 100%;\n    margin: 0 0 10px 0;\n  }\n\n  &__thumbnail-item {\n    display: flex;\n    align-items: center;\n  }\n\n  &__thumbnail-container {\n    border: 1px solid #00000020;\n    text-align: center;\n    line-height: 175px;\n    width: 175px;\n    height: 175px;\n  }\n\n  &__thumbnail {\n    max-width: 175px;\n    max-height: 175px;\n  }\n\n  &__upload-thumbnail {\n    margin: 0 0 0 10px;\n  }\n  \n  /* 模仿 bootstrap 中的按钮样式 */\n  &__upload-button {\n    font-size: 14px;\n    color: #ffffff;\n    background-color: #5bc0de;\n    border-color: #46b8da;\n  }\n\n  &__button {\n    margin: 10px;\n  }\n}\n\n.form {\n  &-json-editor {\n    width: 100%;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/pipeline/editor.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"page-content pipline\"},[_c('div',{staticClass:\"pipline__components-selector\"},[_c('h3',[_vm._v(\"模板区块\")]),_vm._v(\" \"),_c('div',{staticClass:\"components-selector__list\"},_vm._l((_vm.templateComponents),function(component){return _c('div',{key:component.id,staticClass:\"components-selector__item\"},[_c('el-button',{attrs:{\"type\":_vm.getComponentSelectorButtonType(component),\"size\":\"small\",\"icon\":\"el-icon-menu\"},nativeOn:{\"click\":function($event){_vm.selectComponent(component)}}},[_vm._v(\"\\n            \"+_vm._s(component.title)+\"\\n          \")])],1)}))]),_vm._v(\" \"),_c('div',{staticClass:\"pipline__preview\"},[_c('h3',[_vm._v(\"页面预览\")]),_vm._v(\" \"),_c('div',{staticClass:\"preview__button-group\"},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-refresh\"},nativeOn:{\"click\":function($event){return _vm.refreshPreviewIframe($event)}}},[_vm._v(\"\\n          刷新\\n        \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-news\"},nativeOn:{\"click\":function($event){return _vm.previewInNewPage($event)}}},[_vm._v(\"\\n          新页面预览\\n        \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"preview__page-title\"},[_vm._v(\"\\n        \"+_vm._s(_vm.baseConfig.title)+\"\\n      \")]),_vm._v(\" \"),_c('iframe',{ref:\"previewIframe\",staticClass:\"preview__iframe\",attrs:{\"src\":_vm.previewSrc}})]),_vm._v(\" \"),_c('div',{staticClass:\"pipline__fill-info\"},[_c('h3',[_vm._v(\"页面配置\")]),_vm._v(\" \"),_c('div',{staticClass:\"fill-info__form\"},[_c('el-tabs',{attrs:{\"type\":\"border-card\",\"value\":_vm.formName},on:{\"tab-click\":_vm.onTabClick}},[_c('el-tab-pane',{attrs:{\"name\":\"pageBaseConfig\",\"label\":\"页面基本配置\"}},[_c('div',{staticClass:\"form-json-editor\"},[_c('json-editor',{attrs:{\"data\":_vm.baseConfig,\"dataSchema\":_vm.baseConfigSchema},on:{\"update:data\":function($event){_vm.baseConfig=$event},\"update:dataSchema\":function($event){_vm.baseConfigSchema=$event}}})],1)]),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"name\":\"pageConfig\",\"label\":\"页面内容配置\"}},[_c('div',{staticClass:\"form-json-editor\"},[_c('json-editor',{attrs:{\"data\":_vm.data,\"dataSchema\":_vm.dataSchema},on:{\"update:data\":function($event){_vm.data=$event},\"update:dataSchema\":function($event){_vm.dataSchema=$event}}})],1)])],1)],1)])]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"Wellcom to Pipeline !\",\"visible\":_vm.tipDialogVisible,\"width\":\"35%\"},on:{\"update:visible\":function($event){_vm.tipDialogVisible=$event}}},[_c('h3',[_vm._v(\"后台服务器性能稍差, 请耐心等待接口返回.\")]),_vm._v(\"\\n    如果页面无法预览, 请点击\"),_c('a',{attrs:{\"href\":_vm.previewSrc}},[_vm._v(\"这里\")]),_vm._v(\"允许浏览器访问自签名证书的服务器.\\n  \")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-04d77aff\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/pipeline/editor.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-04d77aff\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./editor.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editor.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editor.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-04d77aff\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./editor.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-04d77aff\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/pipeline/editor.vue\n// module id = null\n// module chunks = ","import Vue from 'vue';\nimport Router from 'vue-router';\nimport Pipeline from '@/pages/pipeline/editor';\n\nVue.use(Router);\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Pipeline',\n      component: Pipeline,\n    },\n    {\n      path: '/pipeline',\n      name: 'Pipeline',\n      component: Pipeline,\n    },\n  ],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport App from './App';\nimport router from './router';\n\nVue.use(ElementUI);\n\nVue.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '<App/>',\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}